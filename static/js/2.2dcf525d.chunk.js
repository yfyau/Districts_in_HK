(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(t,e,n){"use strict";var r=function(t,e,n){return t.fields=e||[],t.fname=n,t};function i(t){return null==t?null:t.fname}function o(t){return null==t?null:t.fields}var a=function(t){throw Error(t)},u=function(t){var e,n,r,i=[],o=null,u=0,s=t.length,l="";function c(){i.push(l+t.substring(e,n)),l="",e=n+1}for(t+="",e=n=0;n<s;++n)if("\\"===(r=t[n]))l+=t.substring(e,n),e=++n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;e===u&&'"'===r?(e=n+1,o=r):e===u&&"'"===r?(e=n+1,o=r):"."!==r||u?"["===r?(n>e&&c(),u=e=n+1):"]"===r&&(u||a("Access path missing open bracket: "+t),u>0&&c(),u=0,e=n+1):n>e?c():e=n+1}return u&&a("Access path missing closing bracket: "+t),o&&a("Access path missing closing quote: "+t),n>e&&(n++,c()),i},s=Array.isArray,l=function(t){return t===Object(t)},c=function(t){return"string"===typeof t};function f(t){return s(t)?"["+t.map(f)+"]":l(t)||c(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var h=function(t,e){var n=u(t),i="return _["+n.map(f).join("][")+"];";return r(Function("_",i),[t=1===n.length?n[0]:t],e||t)},p=[],d=h("id"),v=r(function(t){return t},p,"identity"),m=r(function(){return 0},p,"zero"),y=r(function(){return 1},p,"one"),g=r(function(){return!0},p,"true"),b=r(function(){return!1},p,"false"),_=n(3);function x(t,e,n){var r,i=[e].concat([].slice.call(n));(r=console)[t].apply(r,Object(_.a)(i))}var w=function(t,e){var n=t||0;return{level:function(t){return arguments.length?(n=+t,this):n},error:function(){return n>=1&&x(e||"error","ERROR",arguments),this},warn:function(){return n>=2&&x(e||"warn","WARN",arguments),this},info:function(){return n>=3&&x(e||"log","INFO",arguments),this},debug:function(){return n>=4&&x(e||"log","DEBUG",arguments),this}}},k=function(t){return t[t.length-1]},E=function(t){return null==t||""===t?null:+t};function S(t){return function(e){return t*Math.exp(e)}}function O(t){return function(e){return Math.log(t*e)}}function A(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function M(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function C(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function T(t,e,n,r){var i=n(t[0]),o=n(k(t)),a=(o-i)*e;return[r(i-a),r(o-a)]}function j(t,e){return T(t,e,E,v)}function D(t,e){var n=Math.sign(t[0]);return T(t,e,O(n),S(n))}function P(t,e,n){return T(t,e,C(n),C(1/n))}function z(t,e,n){return T(t,e,A(n),M(n))}function R(t,e,n,r,i){var o=r(t[0]),a=r(k(t)),u=null!=e?r(e):(o+a)/2;return[i(u+(o-u)*n),i(u+(a-u)*n)]}function I(t,e,n){return R(t,e,n,E,v)}function F(t,e,n){var r=Math.sign(t[0]);return R(t,e,n,O(r),S(r))}function L(t,e,n,r){return R(t,e,n,C(r),C(1/r))}function N(t,e,n,r){return R(t,e,n,A(r),M(r))}function B(t){return 1+~~(new Date(t).getMonth()/3)}function U(t){return 1+~~(new Date(t).getUTCMonth()/3)}var q=function(t){return null!=t?s(t)?t:[t]:[]},V=function(t,e,n){var r,i=t[0],o=t[1];return o<i&&(r=o,o=i,i=r),(r=o-i)>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]},W=function(t){return"function"===typeof t},H=function(t,e){var n,i,a,s,l,c,h,p,d,v=[],m=(t=q(t)).map(function(t,e){return null==t?null:(v.push(e),W(t)?t:u(t).map(f).join("]["))}),y=v.length-1,g=q(e),b="var u,v;return ";if(y<0)return null;for(i=0;i<=y;++i)a=m[n=v[i]],W(a)?(s="(u=this."+(c="f"+n)+"(a))",l="(v=this."+c+"(b))",(h=h||{})[c]=a):(s="(u=a["+a+"])",l="(v=b["+a+"])"),c="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==g[n]?(d=1,p=-1):(d=-1,p=1),b+="("+s+"<"+l+"||u==null)&&v!=null?"+p+":(u>v||v==null)&&u!=null?"+d+":"+c+"!==u&&v===v?"+p+":v!==v&&u===u?"+d+(n<y?":":":0");return a=Function("a","b",b+";"),h&&(a=a.bind(h)),t=t.reduce(function(t,e){return W(e)?(o(e)||[]).forEach(function(e){t[e]=1}):null!=e&&(t[e+""]=1),t},{}),r(a,Object.keys(t))},G=function(t){return W(t)?t:function(){return t}},X=function(t,e){var n,r;function i(){e(r),n=r=null}return function(e){r=e,n&&clearTimeout(n),n=setTimeout(i,t)}},Z=function(t){for(var e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r])t[n]=e[n];return t},Y=function(t,e){var n,r,i,o,a=0;if(t&&(n=t.length))if(null==e){for(r=t[a];null==r||r!==r;r=t[++a]);for(i=o=r;a<n;++a)null!=(r=t[a])&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=e(t[a]);null==r||r!==r;r=e(t[++a]));for(i=o=r;a<n;++a)null!=(r=e(t[a]))&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]},$=function(t,e){var n,r,i,o,a,u=-1,s=t.length;if(null==e){for(;++u<s;)if(null!=(r=t[u])&&r>=r){n=i=r;break}for(o=a=u;++u<s;)null!=(r=t[u])&&(n>r&&(n=r,o=u),i<r&&(i=r,a=u))}else{for(;++u<s;)if(null!=(r=e(t[u],u,t))&&r>=r){n=i=r;break}for(o=a=u;++u<s;)null!=(r=e(t[u],u,t))&&(n>r&&(n=r,o=u),i<r&&(i=r,a=u))}return[o,a]},K={},J=function(t){var e,n,r={};function i(t){return r.hasOwnProperty(t)&&r[t]!==K}return e={size:0,empty:0,object:r,has:i,get:function(t){return i(t)?r[t]:void 0},set:function(t,n){return i(t)||(++e.size,r[t]===K&&--e.empty),r[t]=n,this},delete:function(t){return i(t)&&(--e.size,++e.empty,r[t]=K),this},clear:function(){e.size=e.empty=0,e.object=r={}},test:function(t){return arguments.length?(n=t,e):n},clean:function(){var t,i,o={},a=0;for(t in r)(i=r[t])===K||n&&n(i)||(o[t]=i,++a);e.size=a,e.empty=0,e.object=r=o}},t&&Object.keys(t).forEach(function(n){e.set(n,t[n])}),e},Q=function(t,e,n,r,i,o){if(!n&&0!==n)return o;var a,u,s=t[0],l=k(t),c=+n;return l<s&&(a=s,s=l,l=a),(a=Math.abs(e-s))<(u=Math.abs(l-e))&&a<=c?r:u<=c?i:o},tt=function(t,e){var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n},et=function(t,e,n,r){var i,o=e[0],a=e[e.length-1];return o>a&&(i=o,o=a,a=i),r=void 0===r||r,((n=void 0===n||n)?o<=t:o<t)&&(r?t<=a:t<a)},nt=function(t){return"boolean"===typeof t},rt=function(t){return"[object Date]"===Object.prototype.toString.call(t)},it=function(t){return"number"===typeof t},ot=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},at=function(t,e){t&&(t=e?q(t).map(function(t){return t.replace(/\\(.)/g,"$1")}):q(t));var n=t&&t.length?Function("_","return ''+"+t.map(function(t){return"_["+(e?f(t):u(t).map(f).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return r(n,t,"key")},ut=function(t,e){var n=t[0],r=k(t),i=+e;return i?1===i?r:n+i*(r-n):n},st=function(t,e,n,r){var i=e.length,o=n.length;if(!o)return e;if(!i)return n;for(var a=r||new e.constructor(i+o),u=0,s=0,l=0;u<i&&s<o;++l)a[l]=t(e[u],n[s])>0?n[s++]:e[u++];for(;u<i;++u,++l)a[l]=e[u];for(;s<o;++s,++l)a[l]=n[s];return a},lt=function(t,e){for(var n="";--e>=0;)n+=t;return n},ct=function(t,e,n,r){var i=n||" ",o=t+"",a=e-o.length;return a<=0?o:"left"===r?lt(i,a)+o:"center"===r?lt(i,~~(a/2))+o+lt(i,Math.ceil(a/2)):o+lt(i,a)},ft=function(t){return k(t)-t[0]||0},ht=function(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t};function pt(t){return it(t)?t:rt(t)?t:Date.parse(t)}var dt=function(t,e){return e=e||pt,null==t||""===t?null:e(t)},vt=function(t){return null==t||""===t?null:t+""},mt=function(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=!0;return e},yt=function(t,e,n,r){var i=null!=r?r:"\u2026",o=t+"",a=o.length,u=Math.max(0,e-i.length);return a<=e?o:"left"===n?i+o.slice(a-u):"center"===n?o.slice(0,Math.ceil(u/2))+i+o.slice(a-~~(u/2)):o.slice(0,u)+i},gt=function(t,e,n){if(t){var r,i=0,o=t.length;if(e)for(;i<o;++i)(r=e(t[i]))&&n(r,i,t);else t.forEach(n)}};n.d(e,"e",function(){return r}),n.d(e,"g",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"u",function(){return d}),n.d(e,"v",function(){return v}),n.d(e,"eb",function(){return m}),n.d(e,"K",function(){return y}),n.d(e,"bb",function(){return g}),n.d(e,"q",function(){return b}),n.d(e,"I",function(){return w}),n.d(e,"b",function(){return 1}),n.d(e,"d",function(){return 2}),n.d(e,"c",function(){return 3}),n.d(e,"a",function(){return 4}),n.d(e,"M",function(){return j}),n.d(e,"N",function(){return D}),n.d(e,"O",function(){return P}),n.d(e,"P",function(){return z}),n.d(e,"fb",function(){return I}),n.d(e,"gb",function(){return F}),n.d(e,"hb",function(){return L}),n.d(e,"ib",function(){return N}),n.d(e,"R",function(){return B}),n.d(e,"cb",function(){return U}),n.d(e,"h",function(){return q}),n.d(e,"i",function(){return V}),n.d(e,"j",function(){return H}),n.d(e,"k",function(){return G}),n.d(e,"l",function(){return X}),n.d(e,"m",function(){return a}),n.d(e,"n",function(){return Z}),n.d(e,"o",function(){return Y}),n.d(e,"p",function(){return $}),n.d(e,"r",function(){return J}),n.d(e,"s",function(){return h}),n.d(e,"t",function(){return Q}),n.d(e,"w",function(){return tt}),n.d(e,"x",function(){return et}),n.d(e,"y",function(){return s}),n.d(e,"z",function(){return nt}),n.d(e,"A",function(){return rt}),n.d(e,"B",function(){return W}),n.d(e,"C",function(){return it}),n.d(e,"D",function(){return l}),n.d(e,"E",function(){return ot}),n.d(e,"F",function(){return c}),n.d(e,"G",function(){return at}),n.d(e,"H",function(){return ut}),n.d(e,"J",function(){return st}),n.d(e,"L",function(){return ct}),n.d(e,"Q",function(){return k}),n.d(e,"S",function(){return ft}),n.d(e,"T",function(){return u}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return ht}),n.d(e,"W",function(){return dt}),n.d(e,"X",function(){return E}),n.d(e,"Z",function(){return vt}),n.d(e,"Y",function(){return mt}),n.d(e,"ab",function(){return yt}),n.d(e,"db",function(){return gt})},function(t,e,n){t.exports=n(176)()},function(t,e,n){"use strict";t.exports=n(169)},function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(53);function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(r.a)(t,e)}},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)})(t)}var o=n(34);function a(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?Object(o.a)(t):e}n.d(e,"a",function(){return a})},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",function(){return r})},function(t,e,n){t.exports=n(705)},function(t,e,n){"use strict";var r=new Date,i=new Date;function o(t,e,n,a){function u(e){return t(e=new Date(+e)),e}return u.floor=u,u.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},u.round=function(t){var e=u(t),n=u.ceil(t);return t-e<n-t?e:n},u.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},u.range=function(n,r,i){var o,a=[];if(n=u.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return a;do{a.push(o=new Date(+n)),e(n,i),t(n)}while(o<n&&n<r);return a},u.filter=function(n){return o(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(u.count=function(e,o){return r.setTime(+e),i.setTime(+o),t(r),t(i),Math.floor(n(r,i))},u.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?u.filter(a?function(e){return a(e)%t===0}:function(e){return u.count(0,e)%t===0}):u:null}),u}var a=o(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):a:null};var u=a,s=(a.range,6e4),l=6048e5,c=o(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),f=c,h=(c.range,o(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+e*s)},function(t,e){return(e-t)/s},function(t){return t.getMinutes()})),p=h,d=(h.range,o(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*s)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()})),v=d,m=(d.range,o(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*s)/864e5},function(t){return t.getDate()-1})),y=m;m.range;function g(t){return o(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*s)/l})}var b=g(0),_=g(1),x=g(2),w=g(3),k=g(4),E=g(5),S=g(6),O=(b.range,_.range,x.range,w.range,k.range,E.range,S.range,o(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),A=O,M=(O.range,o(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));M.every=function(t){return isFinite(t=Math.floor(t))&&t>0?o(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var C=M,T=(M.range,o(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*s)},function(t,e){return(e-t)/s},function(t){return t.getUTCMinutes()})),j=T,D=(T.range,o(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()})),P=D,z=(D.range,o(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1})),R=z;z.range;function I(t){return o(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/l})}var F=I(0),L=I(1),N=I(2),B=I(3),U=I(4),q=I(5),V=I(6),W=(F.range,L.range,N.range,B.range,U.range,q.range,V.range,o(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),H=W,G=(W.range,o(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));G.every=function(t){return isFinite(t=Math.floor(t))&&t>0?o(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var X=G;G.range;n.d(e,"c",function(){return u}),n.d(e,"n",function(){return u}),n.d(e,"g",function(){return f}),n.d(e,"r",function(){return f}),n.d(e,"d",function(){return p}),n.d(e,"b",function(){return v}),n.d(e,"a",function(){return y}),n.d(e,"j",function(){return b}),n.d(e,"h",function(){return b}),n.d(e,"e",function(){return _}),n.d(e,"i",function(){return k}),n.d(e,"f",function(){return A}),n.d(e,"k",function(){return C}),n.d(e,"o",function(){return j}),n.d(e,"m",function(){return P}),n.d(e,"l",function(){return R}),n.d(e,"u",function(){return F}),n.d(e,"s",function(){return F}),n.d(e,"p",function(){return L}),n.d(e,"t",function(){return U}),n.d(e,"q",function(){return H}),n.d(e,"v",function(){return X})},function(t,e,n){"use strict";var r=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},i=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return r(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var o=i(r),a=o.right,u=(o.left,a);function s(t,e){return[t,e]}var l=function(t,e,n){var r,i,o,a,u=t.length,l=e.length,c=new Array(u*l);for(null==n&&(n=s),r=o=0;r<u;++r)for(a=t[r],i=0;i<l;++i,++o)c[o]=n(a,e[i]);return c},c=function(t){return null===t?NaN:+t},f=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},h=Array.prototype,p=(h.slice,h.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}),d=Math.sqrt(50),v=Math.sqrt(10),m=Math.sqrt(2),y=function(t,e,n){var r,i,o,a,u=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=g(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o};function g(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=d?10:o>=v?5:o>=m?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=d?10:o>=v?5:o>=m?2:1)}function b(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=d?i*=10:o>=v?i*=5:o>=m&&(i*=2),e<t?-i:i}var _=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},x=function(t,e,n){if(null==n&&(n=c),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},w=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},k=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};n.d(e,"b",function(){return u}),n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return l}),n.d(e,"e",function(){return f}),n.d(e,"j",function(){return _}),n.d(e,"f",function(){return w}),n.d(e,"g",function(){return k}),n.d(e,"h",function(){return x}),n.d(e,"i",function(){return p}),n.d(e,"m",function(){return y}),n.d(e,"k",function(){return g}),n.d(e,"l",function(){return b})},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(648),o=(r=i)&&r.__esModule?r:{default:r};e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";var r=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function o(){}var a="\\s*([+-]?\\d+)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3})$/,c=/^#([0-9a-f]{6})$/,f=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),h=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),p=new RegExp("^rgba\\("+[a,a,a,u]+"\\)$"),d=new RegExp("^rgba\\("+[s,s,s,u]+"\\)$"),v=new RegExp("^hsl\\("+[u,s,s]+"\\)$"),m=new RegExp("^hsla\\("+[u,s,s,u]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(t){var e;return t=(t+"").trim().toLowerCase(),(e=l.exec(t))?new k((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=c.exec(t))?b(parseInt(e[1],16)):(e=f.exec(t))?new k(e[1],e[2],e[3],1):(e=h.exec(t))?new k(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=p.exec(t))?_(e[1],e[2],e[3],e[4]):(e=d.exec(t))?_(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=v.exec(t))?S(e[1],e[2]/100,e[3]/100,1):(e=m.exec(t))?S(e[1],e[2]/100,e[3]/100,e[4]):y.hasOwnProperty(t)?b(y[t]):"transparent"===t?new k(NaN,NaN,NaN,0):null}function b(t){return new k(t>>16&255,t>>8&255,255&t,1)}function _(t,e,n,r){return r<=0&&(t=e=n=NaN),new k(t,e,n,r)}function x(t){return t instanceof o||(t=g(t)),t?new k((t=t.rgb()).r,t.g,t.b,t.opacity):new k}function w(t,e,n,r){return 1===arguments.length?x(t):new k(t,e,n,null==r?1:r)}function k(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function E(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function S(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new A(t,e,n,r)}function O(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof A)return new A(t.h,t.s,t.l,t.opacity);if(t instanceof o||(t=g(t)),!t)return new A;if(t instanceof A)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),u=NaN,s=a-i,l=(a+i)/2;return s?(u=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=l<.5?a+i:2-a-i,u*=60):s=l>0&&l<1?0:u,new A(u,s,l,t.opacity)}(t):new A(t,e,n,null==r?1:r)}function A(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function M(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}r(o,g,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),r(k,w,i(o,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new k(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new k(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+E(this.r)+E(this.g)+E(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),r(A,O,i(o,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new A(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new A(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new k(M(t>=240?t-240:t+120,i,r),M(t,i,r),M(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var C=Math.PI/180,T=180/Math.PI,j=.96422,D=1,P=.82521,z=4/29,R=6/29,I=3*R*R,F=R*R*R;function L(t){if(t instanceof B)return new B(t.l,t.a,t.b,t.opacity);if(t instanceof X){if(isNaN(t.h))return new B(t.l,0,0,t.opacity);var e=t.h*C;return new B(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof k||(t=x(t));var n,r,i=W(t.r),o=W(t.g),a=W(t.b),u=U((.2225045*i+.7168786*o+.0606169*a)/D);return i===o&&o===a?n=r=u:(n=U((.4360747*i+.3850649*o+.1430804*a)/j),r=U((.0139322*i+.0971045*o+.7141733*a)/P)),new B(116*u-16,500*(n-u),200*(u-r),t.opacity)}function N(t,e,n,r){return 1===arguments.length?L(t):new B(t,e,n,null==r?1:r)}function B(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function U(t){return t>F?Math.pow(t,1/3):t/I+z}function q(t){return t>R?t*t*t:I*(t-z)}function V(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function W(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function H(t){if(t instanceof X)return new X(t.h,t.c,t.l,t.opacity);if(t instanceof B||(t=L(t)),0===t.a&&0===t.b)return new X(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*T;return new X(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function G(t,e,n,r){return 1===arguments.length?H(t):new X(t,e,n,null==r?1:r)}function X(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}r(B,N,i(o,{brighter:function(t){return new B(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new B(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new k(V(3.1338561*(e=j*q(e))-1.6168667*(t=D*q(t))-.4906146*(n=P*q(n))),V(-.9787684*e+1.9161415*t+.033454*n),V(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),r(X,G,i(o,{brighter:function(t){return new X(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new X(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return L(this).rgb()}}));var Z=-.14861,Y=1.78277,$=-.29227,K=-.90649,J=1.97294,Q=J*K,tt=J*Y,et=Y*$-K*Z;function nt(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof rt)return new rt(t.h,t.s,t.l,t.opacity);t instanceof k||(t=x(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(et*r+Q*e-tt*n)/(et+Q-tt),o=r-i,a=(J*(n-i)-$*o)/K,u=Math.sqrt(a*a+o*o)/(J*i*(1-i)),s=u?Math.atan2(a,o)*T-120:NaN;return new rt(s<0?s+360:s,u,i,t.opacity)}(t):new rt(t,e,n,null==r?1:r)}function rt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}r(rt,nt,i(o,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new rt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new rt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*C,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new k(255*(e+n*(Z*r+Y*i)),255*(e+n*($*r+K*i)),255*(e+n*(J*r)),this.opacity)}})),n.d(e,"a",function(){return g}),n.d(e,"f",function(){return w}),n.d(e,"d",function(){return O}),n.d(e,"e",function(){return N}),n.d(e,"c",function(){return G}),n.d(e,"b",function(){return nt})},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(77),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":(0,o.default)(e))&&"function"!==typeof e?t:e}},function(t,e,n){"use strict";n.r(e);var r=n(14);function i(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}var o=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[r],a=t[r+1],u=r>0?t[r-1]:2*o-a,s=r<e-1?t[r+2]:2*a-o;return i((n-r/e)*e,u,o,a,s)}},a=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),o=t[(r+e-1)%e],a=t[r%e],u=t[(r+1)%e],s=t[(r+2)%e];return i((n-r/e)*e,o,a,u,s)}},u=function(t){return function(){return t}};function s(t,e){return function(n){return t+n*e}}function l(t,e){var n=e-t;return n?s(t,n>180||n<-180?n-360*Math.round(n/360):n):u(isNaN(t)?e:t)}function c(t){return 1===(t=+t)?f:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):u(isNaN(e)?n:e)}}function f(t,e){var n=e-t;return n?s(t,n):u(isNaN(t)?e:t)}var h=function t(e){var n=c(e);function i(t,e){var i=n((t=Object(r.f)(t)).r,(e=Object(r.f)(e)).r),o=n(t.g,e.g),a=n(t.b,e.b),u=f(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=o(e),t.b=a(e),t.opacity=u(e),t+""}}return i.gamma=t,i}(1);function p(t){return function(e){var n,i,o=e.length,a=new Array(o),u=new Array(o),s=new Array(o);for(n=0;n<o;++n)i=Object(r.f)(e[n]),a[n]=i.r||0,u[n]=i.g||0,s[n]=i.b||0;return a=t(a),u=t(u),s=t(s),i.opacity=1,function(t){return i.r=a(t),i.g=u(t),i.b=s(t),i+""}}}var d=p(o),v=p(a),m=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=A(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},y=function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}},g=function(t,e){return e-=t=+t,function(n){return t+e*n}},b=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=A(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,x=new RegExp(_.source,"g");var w,k,E,S,O=function(t,e){var n,r,i,o=_.lastIndex=x.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(n=_.exec(t))&&(r=x.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:g(n,r)})),o=x.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})},A=function(t,e){var n,i=typeof e;return null==e||"boolean"===i?u(e):("number"===i?g:"string"===i?(n=Object(r.a)(e))?(e=n,h):O:e instanceof r.a?h:e instanceof Date?y:Array.isArray(e)?m:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?b:g)(t,e)},M=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},C=function(t,e){var n=l(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},T=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},j=180/Math.PI,D={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},P=function(t,e,n,r,i,o){var a,u,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*j,skewX:Math.atan(s)*j,scaleX:a,scaleY:u}};function z(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],s=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var s=a.push("translate(",null,e,null,n);u.push({i:s-4,x:g(t,i)},{i:s-2,x:g(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,u,s),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:g(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,u,s),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:g(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,u,s),function(t,e,n,r,o,a){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:g(t,n)},{i:u-2,x:g(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,s),o=a=null,function(t){for(var e,n=-1,r=s.length;++n<r;)u[(e=s[n]).i]=e.x(t);return u.join("")}}}var R=z(function(t){return"none"===t?D:(w||(w=document.createElement("DIV"),k=document.documentElement,E=document.defaultView),w.style.transform=t,t=E.getComputedStyle(k.appendChild(w),null).getPropertyValue("transform"),k.removeChild(w),t=t.slice(7,-1).split(","),P(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),I=z(function(t){return null==t?D:(S||(S=document.createElementNS("http://www.w3.org/2000/svg","g")),S.setAttribute("transform",t),(t=S.transform.baseVal.consolidate())?(t=t.matrix,P(t.a,t.b,t.c,t.d,t.e,t.f)):D)},", ",")",")"),F=Math.SQRT2;function L(t){return((t=Math.exp(t))+1/t)/2}var N=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],u=e[0],s=e[1],l=e[2],c=u-i,f=s-o,h=c*c+f*f;if(h<1e-12)r=Math.log(l/a)/F,n=function(t){return[i+t*c,o+t*f,a*Math.exp(F*t*r)]};else{var p=Math.sqrt(h),d=(l*l-a*a+4*h)/(2*a*2*p),v=(l*l-a*a-4*h)/(2*l*2*p),m=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(v*v+1)-v);r=(y-m)/F,n=function(t){var e,n=t*r,u=L(m),s=a/(2*p)*(u*(e=F*n+m,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[i+s*c,o+s*f,a*u/L(F*n+m)]}}return n.duration=1e3*r,n};function B(t){return function(e,n){var i=t((e=Object(r.d)(e)).h,(n=Object(r.d)(n)).h),o=f(e.s,n.s),a=f(e.l,n.l),u=f(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(t),e.opacity=u(t),e+""}}}var U=B(l),q=B(f);function V(t,e){var n=f((t=Object(r.e)(t)).l,(e=Object(r.e)(e)).l),i=f(t.a,e.a),o=f(t.b,e.b),a=f(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=o(e),t.opacity=a(e),t+""}}function W(t){return function(e,n){var i=t((e=Object(r.c)(e)).h,(n=Object(r.c)(n)).h),o=f(e.c,n.c),a=f(e.l,n.l),u=f(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=o(t),e.l=a(t),e.opacity=u(t),e+""}}}var H=W(l),G=W(f);function X(t){return function e(n){function i(e,i){var o=t((e=Object(r.b)(e)).h,(i=Object(r.b)(i)).h),a=f(e.s,i.s),u=f(e.l,i.l),s=f(e.opacity,i.opacity);return function(t){return e.h=o(t),e.s=a(t),e.l=u(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,i.gamma=e,i}(1)}var Z=X(l),Y=X(f);function $(t,e){for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}var K=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};n.d(e,"interpolate",function(){return A}),n.d(e,"interpolateArray",function(){return m}),n.d(e,"interpolateBasis",function(){return o}),n.d(e,"interpolateBasisClosed",function(){return a}),n.d(e,"interpolateDate",function(){return y}),n.d(e,"interpolateDiscrete",function(){return M}),n.d(e,"interpolateHue",function(){return C}),n.d(e,"interpolateNumber",function(){return g}),n.d(e,"interpolateObject",function(){return b}),n.d(e,"interpolateRound",function(){return T}),n.d(e,"interpolateString",function(){return O}),n.d(e,"interpolateTransformCss",function(){return R}),n.d(e,"interpolateTransformSvg",function(){return I}),n.d(e,"interpolateZoom",function(){return N}),n.d(e,"interpolateRgb",function(){return h}),n.d(e,"interpolateRgbBasis",function(){return d}),n.d(e,"interpolateRgbBasisClosed",function(){return v}),n.d(e,"interpolateHsl",function(){return U}),n.d(e,"interpolateHslLong",function(){return q}),n.d(e,"interpolateLab",function(){return V}),n.d(e,"interpolateHcl",function(){return H}),n.d(e,"interpolateHclLong",function(){return G}),n.d(e,"interpolateCubehelix",function(){return Z}),n.d(e,"interpolateCubehelixLong",function(){return Y}),n.d(e,"piecewise",function(){return $}),n.d(e,"quantize",function(){return K})},function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(s){i=!0,o=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r=a(n(677)),i=a(n(681)),o=a(n(77));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":(0,o.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";var r=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},i=function(t){return(t=r(Math.abs(t)))?t[1]:NaN},o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(t){return new u(t)}function u(t){if(!(e=o.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}a.prototype=u.prototype,u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s,l,c,f,h=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t},p=function(t,e){var n=r(t,e);if(!n)return t+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")},d={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return p(100*t,e)},r:p,s:function(t,e){var n=r(t,e);if(!n)return t+"";var i=n[0],o=n[1],a=o-(s=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,u=i.length;return a===u?i:a>u?i+new Array(a-u+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+r(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},v=function(t){return t},m=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];l=function(t){var e,n,r=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),o.push(t.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[a=(a+1)%e.length];return o.reverse().join(n)}):v,o=t.currency,u=t.decimal,l=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):v,c=t.percent||"%";function f(t){var e=(t=a(t)).fill,n=t.align,i=t.sign,f=t.symbol,p=t.zero,v=t.width,y=t.comma,g=t.precision,b=t.trim,_=t.type;"n"===_?(y=!0,_="g"):d[_]||(null==g&&(g=12),b=!0,_="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var x="$"===f?o[0]:"#"===f&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",w="$"===f?o[1]:/[%p]/.test(_)?c:"",k=d[_],E=/[defgprs%]/.test(_);function S(t){var o,a,c,f=x,d=w;if("c"===_)d=k(t)+d,t="";else{var S=(t=+t)<0;if(t=k(Math.abs(t),g),b&&(t=h(t)),S&&0===+t&&(S=!1),f=(S?"("===i?i:"-":"-"===i||"("===i?"":i)+f,d=("s"===_?m[8+s/3]:"")+d+(S&&"("===i?")":""),E)for(o=-1,a=t.length;++o<a;)if(48>(c=t.charCodeAt(o))||c>57){d=(46===c?u+t.slice(o+1):t.slice(o))+d,t=t.slice(0,o);break}}y&&!p&&(t=r(t,1/0));var O=f.length+t.length+d.length,A=O<v?new Array(v-O+1).join(e):"";switch(y&&p&&(t=r(A+t,A.length?v-d.length:1/0),A=""),n){case"<":t=f+t+d+A;break;case"=":t=f+A+t+d;break;case"^":t=A.slice(0,O=A.length>>1)+f+t+d+A.slice(O);break;default:t=A+f+t+d}return l(t)}return g=null==g?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return t+""},S}return{format:f,formatPrefix:function(t,e){var n=f(((t=a(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(i(e)/3))),o=Math.pow(10,-r),u=m[8+r/3];return function(t){return n(o*t)+u}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),c=l.format,f=l.formatPrefix;var y=function(t){return Math.max(0,-i(Math.abs(t)))},g=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(i(e)/3)))-i(Math.abs(t)))},b=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,i(e)-i(t))+1};n.d(e,"a",function(){return c}),n.d(e,"b",function(){return f}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return y}),n.d(e,"e",function(){return g}),n.d(e,"f",function(){return b})},function(t,e,n){"use strict";var r=n(12),i=Array.prototype.slice,o=function(t){return t},a=1,u=2,s=3,l=4,c=1e-6;function f(t){return"translate("+(t+.5)+",0)"}function h(t){return"translate(0,"+(t+.5)+")"}function p(){return!this.__axis}function d(t,e){var n=[],r=null,d=null,v=6,m=6,y=3,g=t===a||t===l?-1:1,b=t===l||t===u?"x":"y",_=t===a||t===s?f:h;function x(i){var f=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,h=null==d?e.tickFormat?e.tickFormat.apply(e,n):o:d,x=Math.max(v,0)+y,w=e.range(),k=+w[0]+.5,E=+w[w.length-1]+.5,S=(e.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}:function(t){return function(e){return+t(e)}})(e.copy()),O=i.selection?i.selection():i,A=O.selectAll(".domain").data([null]),M=O.selectAll(".tick").data(f,e).order(),C=M.exit(),T=M.enter().append("g").attr("class","tick"),j=M.select("line"),D=M.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(T),j=j.merge(T.append("line").attr("stroke","currentColor").attr(b+"2",g*v)),D=D.merge(T.append("text").attr("fill","currentColor").attr(b,g*x).attr("dy",t===a?"0em":t===s?"0.71em":"0.32em")),i!==O&&(A=A.transition(i),M=M.transition(i),j=j.transition(i),D=D.transition(i),C=C.transition(i).attr("opacity",c).attr("transform",function(t){return isFinite(t=S(t))?_(t):this.getAttribute("transform")}),T.attr("opacity",c).attr("transform",function(t){var e=this.parentNode.__axis;return _(e&&isFinite(e=e(t))?e:S(t))})),C.remove(),A.attr("d",t===l||t==u?m?"M"+g*m+","+k+"H0.5V"+E+"H"+g*m:"M0.5,"+k+"V"+E:m?"M"+k+","+g*m+"V0.5H"+E+"V"+g*m:"M"+k+",0.5H"+E),M.attr("opacity",1).attr("transform",function(t){return _(S(t))}),j.attr(b+"2",g*v),D.attr(b,g*x).text(h),O.filter(p).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===u?"start":t===l?"end":"middle"),O.each(function(){this.__axis=S})}return x.scale=function(t){return arguments.length?(e=t,x):e},x.ticks=function(){return n=i.call(arguments),x},x.tickArguments=function(t){return arguments.length?(n=null==t?[]:i.call(t),x):n.slice()},x.tickValues=function(t){return arguments.length?(r=null==t?null:i.call(t),x):r&&r.slice()},x.tickFormat=function(t){return arguments.length?(d=t,x):d},x.tickSize=function(t){return arguments.length?(v=m=+t,x):v},x.tickSizeInner=function(t){return arguments.length?(v=+t,x):v},x.tickSizeOuter=function(t){return arguments.length?(m=+t,x):m},x.tickPadding=function(t){return arguments.length?(y=+t,x):y},x}function v(t){return d(u,t)}var m=n(30),y="http://www.w3.org/1999/xhtml",g={svg:"http://www.w3.org/2000/svg",xhtml:y,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},b=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),g.hasOwnProperty(e)?{space:g[e],local:t}:t};var _=function(t){var e=b(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===y&&e.documentElement.namespaceURI===y?e.createElement(t):e.createElementNS(n,t)}})(e)};function x(){}var w=function(t){return null==t?x:function(){return this.querySelector(t)}};function k(){return[]}var E=function(t){return null==t?k:function(){return this.querySelectorAll(t)}},S=function(t){return function(){return this.matches(t)}},O=function(t){return new Array(t.length)};function A(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}A.prototype={constructor:A,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var M="$";function C(t,e,n,r,i,o){for(var a,u=0,s=e.length,l=o.length;u<l;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new A(t,o[u]);for(;u<s;++u)(a=e[u])&&(i[u]=a)}function T(t,e,n,r,i,o,a){var u,s,l,c={},f=e.length,h=o.length,p=new Array(f);for(u=0;u<f;++u)(s=e[u])&&(p[u]=l=M+a.call(s,s.__data__,u,e),l in c?i[u]=s:c[l]=s);for(u=0;u<h;++u)(s=c[l=M+a.call(t,o[u],u,o)])?(r[u]=s,s.__data__=o[u],c[l]=null):n[u]=new A(t,o[u]);for(u=0;u<f;++u)(s=e[u])&&c[p[u]]===s&&(i[u]=s)}function j(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var D=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function P(t,e){return t.style.getPropertyValue(e)||D(t).getComputedStyle(t,null).getPropertyValue(e)}function z(t){return t.trim().split(/^|\s+/)}function R(t){return t.classList||new I(t)}function I(t){this._node=t,this._names=z(t.getAttribute("class")||"")}function F(t,e){for(var n=R(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function L(t,e){for(var n=R(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}I.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function N(){this.textContent=""}function B(){this.innerHTML=""}function U(){this.nextSibling&&this.parentNode.appendChild(this)}function q(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function V(){return null}function W(){var t=this.parentNode;t&&t.removeChild(this)}function H(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function G(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var X={},Z=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(X={mouseenter:"mouseover",mouseleave:"mouseout"}));function Y(t,e,n){return t=$(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function $(t,e,n){return function(r){var i=Z;Z=r;try{t.call(this,this.__data__,e,n)}finally{Z=i}}}function K(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function J(t,e,n){var r=X.hasOwnProperty(t.type)?Y:$;return function(i,o,a){var u,s=this.__on,l=r(e,o,a);if(s)for(var c=0,f=s.length;c<f;++c)if((u=s[c]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=l,u.capture=n),void(u.value=e);this.addEventListener(t.type,l,n),u={type:t.type,name:t.name,value:e,listener:l,capture:n},s?s.push(u):this.__on=[u]}}function Q(t,e,n){var r=D(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var tt=[null];function et(t,e){this._groups=t,this._parents=e}function nt(){return new et([[document.documentElement]],tt)}et.prototype=nt.prototype={constructor:et,select:function(t){"function"!==typeof t&&(t=w(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,u=e[i],s=u.length,l=r[i]=new Array(s),c=0;c<s;++c)(o=u[c])&&(a=t.call(o,o.__data__,c,u))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new et(r,this._parents)},selectAll:function(t){"function"!==typeof t&&(t=E(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,u=e[o],s=u.length,l=0;l<s;++l)(a=u[l])&&(r.push(t.call(a,a.__data__,l,u)),i.push(a));return new et(r,i)},filter:function(t){"function"!==typeof t&&(t=S(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,s=r[i]=[],l=0;l<u;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&s.push(o);return new et(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var n,r=e?T:C,i=this._parents,o=this._groups;"function"!==typeof t&&(n=t,t=function(){return n});for(var a=o.length,u=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var f=i[c],h=o[c],p=h.length,d=t.call(f,f&&f.__data__,c,i),v=d.length,m=s[c]=new Array(v),y=u[c]=new Array(v);r(f,h,m,y,l[c]=new Array(p),d,e);for(var g,b,_=0,x=0;_<v;++_)if(g=m[_]){for(_>=x&&(x=_+1);!(b=y[x])&&++x<v;);g._next=b||null}}return(u=new et(u,i))._enter=s,u._exit=l,u},enter:function(){return new et(this._enter||this._groups.map(O),this._parents)},exit:function(){return new et(this._exit||this._groups.map(O),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"===typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,l=e[u],c=n[u],f=l.length,h=a[u]=new Array(f),p=0;p<f;++p)(s=l[p]||c[p])&&(h[p]=s);for(;u<r;++u)a[u]=e[u];return new et(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=j);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,u=n[o],s=u.length,l=i[o]=new Array(s),c=0;c<s;++c)(a=u[c])&&(l[c]=a);l.sort(e)}return new et(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=b(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"===typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"===typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):P(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"===typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=z(t+"");if(arguments.length<2){for(var r=R(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?function(t,e){return function(){(e.apply(this,arguments)?F:L)(this,t)}}:e?function(t){return function(){F(this,t)}}:function(t){return function(){L(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?N:("function"===typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?B:("function"===typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(U)},lower:function(){return this.each(q)},append:function(t){var e="function"===typeof t?t:_(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"===typeof t?t:_(t),r=null==e?V:"function"===typeof e?e:w(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(W)},clone:function(t){return this.select(t?G:H)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(u=e?J:K,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var s,l=0,c=u.length;l<c;++l)for(r=0,s=u[l];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"===typeof e?function(t,e){return function(){return Q(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return Q(this,t,e)}})(t,e))}};var rt=nt,it=function(t){return"string"===typeof t?new et([[document.querySelector(t)]],[document.documentElement]):new et([[t]],tt)},ot=function(t){return it(_(t).call(document.documentElement))},at=0;function ut(){this._="@"+(++at).toString(36)}ut.prototype=function(){return new ut}.prototype={constructor:ut,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function st(t,e,n,r,i,o,a,u,s,l){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=s,this._=l}st.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var lt=n(16),ct=n(31),ft=Object(m.dispatch)("start","end","cancel","interrupt"),ht=[],pt=0,dt=1,vt=2,mt=3,yt=4,gt=5,bt=6,_t=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(s){var l,c,f,h;if(n.state!==dt)return u();for(l in i)if((h=i[l]).name===n.name){if(h.state===mt)return Object(ct.c)(o);h.state===yt?(h.state=bt,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<e&&(h.state=bt,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(Object(ct.c)(function(){n.state===mt&&(n.state=yt,n.timer.restart(a,n.delay,n.time),a(s))}),n.state=vt,n.on.call("start",t,t.__data__,n.index,n.group),n.state===vt){for(n.state=mt,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=gt,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);n.state===gt&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=bt,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Object(ct.d)(function(t){n.state=dt,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:ft,tween:ht,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:pt})};function xt(t,e){var n=kt(t,e);if(n.state>pt)throw new Error("too late; already scheduled");return n}function wt(t,e){var n=kt(t,e);if(n.state>mt)throw new Error("too late; already running");return n}function kt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var Et=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>vt&&n.state<gt,n.state=bt,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}};function St(t,e,n){var r=t._id;return t.each(function(){var t=wt(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return kt(t,r).value[e]}}var Ot=n(14),At=function(t,e){var n;return("number"===typeof e?lt.interpolateNumber:e instanceof Ot.a?lt.interpolateRgb:(n=Object(Ot.a)(e))?(e=n,lt.interpolateRgb):lt.interpolateString)(t,e)};var Mt=rt.prototype.constructor;function Ct(t){return function(){this.style.removeProperty(t)}}var Tt=0;function jt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Dt(){return++Tt}var Pt=rt.prototype;jt.prototype=function(t){return rt().transition(t)}.prototype={constructor:jt,select:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=w(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,s,l=r[a],c=l.length,f=o[a]=new Array(c),h=0;h<c;++h)(u=l[h])&&(s=t.call(u,u.__data__,h,l))&&("__data__"in u&&(s.__data__=u.__data__),f[h]=s,_t(f[h],e,n,h,f,kt(u,n)));return new jt(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=E(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var s,l=r[u],c=l.length,f=0;f<c;++f)if(s=l[f]){for(var h,p=t.call(s,s.__data__,f,l),d=kt(s,n),v=0,m=p.length;v<m;++v)(h=p[v])&&_t(h,e,n,v,p,d);o.push(p),a.push(s)}return new jt(o,a,e,n)},filter:function(t){"function"!==typeof t&&(t=S(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,s=r[i]=[],l=0;l<u;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&s.push(o);return new jt(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,l=e[u],c=n[u],f=l.length,h=a[u]=new Array(f),p=0;p<f;++p)(s=l[p]||c[p])&&(h[p]=s);for(;u<r;++u)a[u]=e[u];return new jt(a,this._parents,this._name,this._id)},selection:function(){return new Mt(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Dt(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,l=0;l<s;++l)if(a=u[l]){var c=kt(a,e);_t(a,t,n,l,u,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new jt(r,this._parents,t,n)},call:Pt.call,nodes:Pt.nodes,node:Pt.node,size:Pt.size,empty:Pt.empty,each:Pt.each,on:function(t,e){var n=this._id;return arguments.length<2?kt(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?xt:wt;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=b(t),r="transform"===n?lt.interpolateTransformSvg:At;return this.attrTween(t,"function"===typeof e?(n.local?function(t,e,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=e(r=a,s));this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttribute(t))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=e(r=a,s));this.removeAttribute(t)}})(n,r,St(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}:function(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;var r=b(t);return this.tween(n,(r.local?function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e(n))}}(t,i)),n}return i._value=e,i}:function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e(n))}}(t,i)),n}return i._value=e,i})(r,e))},style:function(t,e,n){var r="transform"===(t+="")?lt.interpolateTransformCss:At;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=P(this,t),a=(this.style.removeProperty(t),P(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,Ct(t)):"function"===typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=P(this,t),u=n(this),s=u+"";return null==u&&(this.style.removeProperty(t),s=u=P(this,t)),a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,u))}}(t,r,St(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,u="end."+a;return function(){var s=wt(this,t),l=s.on,c=null==s.value[a]?o||(o=Ct(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(u,i=c),s.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=P(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!==typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e(r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"===typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(St(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=kt(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var i=wt(this,t),o=i.tween;if(o!==n)for(var a=0,u=(r=n=o).length;a<u;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,e,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=wt(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===e){i[s]=u;break}s===l&&i.push(u)}o.tween=i}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?function(t,e){return function(){xt(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){xt(this,t).delay=e}})(e,t)):kt(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?function(t,e){return function(){wt(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){wt(this,t).duration=e}})(e,t)):kt(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!==typeof e)throw new Error;return function(){wt(this,t).ease=e}}(e,t)):kt(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var u={value:a},s={value:function(){0===--i&&o()}};n.each(function(){var n=wt(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(u),e._.interrupt.push(u),e._.end.push(s)),n.on=e})})}};(function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n})(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Math.PI;(function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n})(1.70158),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158);var zt=2*Math.PI,Rt=(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=zt);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*zt)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=zt);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*zt)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=zt);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*zt)},i.period=function(n){return t(e,n)},i}(1,.3),{time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}});function It(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Rt.time=Object(ct.b)(),Rt;return n}rt.prototype.interrupt=function(t){return this.each(function(){Et(this,t)})},rt.prototype.transition=function(t){var e,n;t instanceof jt?(e=t._id,t=t._name):(e=Dt(),(n=Rt).time=Object(ct.b)(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,l=0;l<s;++l)(a=u[l])&&_t(a,t,e,l,u,n||It(a,e));return new jt(r,this._parents,t,e)};["e","w"].map(Ft),["n","s"].map(Ft),["n","e","s","w","nw","ne","se","sw"].map(Ft);function Ft(t){return{type:t}}Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice,n(29);function Lt(){}function Nt(t,e){var n=new Lt;if(t instanceof Lt)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}Lt.prototype=Nt.prototype={constructor:Lt,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Bt=Nt;function Ut(){}var qt=Bt.prototype;function Vt(t,e){var n=new Ut;if(t instanceof Ut)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}Ut.prototype=Vt.prototype={constructor:Ut,has:qt.has,add:function(t){return this["$"+(t+="")]=t,this},remove:qt.remove,clear:qt.clear,values:qt.keys,size:qt.size,empty:qt.empty,each:qt.each};n(62);var Wt=n(42);function Ht(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var Gt=function(t,e){return fetch(t,e).then(Ht)};function Xt(t){return function(e,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=void 0),Gt(e,n).then(function(e){return t(e,r)})}}var Zt=Xt(Wt.a);Xt(Wt.c);function Yt(t){return function(e,n){return Gt(e,n).then(function(e){return(new DOMParser).parseFromString(e,t)})}}Yt("application/xml"),Yt("text/html"),Yt("image/svg+xml"),n(38);Math.PI,Math.sqrt(5);var $t=n(20);n(23),n(26);var Kt=function(){return Math.random()},Jt=(function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Kt),function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Kt)),Qt=(function t(e){function n(){var t=Jt.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Kt),function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(Kt));(function t(e){function n(t){var n=Qt.source(e)(t);return function(){return n()/t}}return n.source=t,n})(Kt),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Kt);function te(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var ee=Array.prototype,ne=ee.map,re=ee.slice;var ie=function(t){return function(){return t}},oe=function(t){return+t},ae=[0,1];function ue(t){return t}function se(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:ie(isNaN(e)?NaN:.5)}function le(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function ce(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=se(i,r),o=n(a,o)):(r=se(r,i),o=n(o,a)),function(t){return o(r(t))}}function fe(t,e,n){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),u=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<i;)o[u]=se(t[u],t[u+1]),a[u]=n(e[u],e[u+1]);return function(e){var n=Object(r.b)(t,e,1,i)-1;return a[n](o[n](e))}}function he(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function pe(){var t,e,n,r,i,o,a=ae,u=ae,s=lt.interpolate,l=ue;function c(){return r=Math.min(a.length,u.length)>2?fe:ce,i=o=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),u,s)))(t(l(e)))}return f.invert=function(n){return l(e((o||(o=r(u,a.map(t),lt.interpolateNumber)))(n)))},f.domain=function(t){return arguments.length?(a=ne.call(t,oe),l===ue||(l=le(a)),c()):a.slice()},f.range=function(t){return arguments.length?(u=re.call(t),c()):u.slice()},f.rangeRound=function(t){return u=re.call(t),s=lt.interpolateRound,c()},f.clamp=function(t){return arguments.length?(l=t?le(a):ue,f):l!==ue},f.interpolate=function(t){return arguments.length?(s=t,c()):s},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,c()}}function de(t,e){return pe()(t,e)}var ve=function(t,e,n,i){var o,a=Object(r.l)(t,e,n);switch((i=Object($t.c)(null==i?",f":i)).type){case"s":var u=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(o=Object($t.e)(a,u))||(i.precision=o),Object($t.b)(i,u);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=Object($t.f)(a,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=Object($t.d)(a))||(i.precision=o-2*("%"===i.type))}return Object($t.a)(i)};function me(t){var e=t.domain;return t.ticks=function(t){var n=e();return Object(r.m)(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return ve(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,o=e(),a=0,u=o.length-1,s=o[a],l=o[u];return l<s&&(i=s,s=l,l=i,i=a,a=u,u=i),(i=Object(r.k)(s,l,n))>0?(s=Math.floor(s/i)*i,l=Math.ceil(l/i)*i,i=Object(r.k)(s,l,n)):i<0&&(s=Math.ceil(s*i)/i,l=Math.floor(l*i)/i,i=Object(r.k)(s,l,n)),i>0?(o[a]=Math.floor(s/i)*i,o[u]=Math.ceil(l/i)*i,e(o)):i<0&&(o[a]=Math.ceil(s*i)/i,o[u]=Math.floor(l*i)/i,e(o)),t},t}function ye(){var t=de(ue,ue);return t.copy=function(){return he(t,ye())},te.apply(t,arguments),me(t)}function ge(){var t,e=[],n=[],i=[];function o(){var t=0,o=Math.max(1,n.length);for(i=new Array(o-1);++t<o;)i[t-1]=Object(r.h)(e,t/o);return a}function a(e){return isNaN(e=+e)?t:n[Object(r.b)(i,e)]}return a.invertExtent=function(t){var r=n.indexOf(t);return r<0?[NaN,NaN]:[r>0?i[r-1]:e[0],r<i.length?i[r]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,i=0,a=t.length;i<a;++i)null==(n=t[i])||isNaN(n=+n)||e.push(n);return e.sort(r.a),o()},a.range=function(t){return arguments.length?(n=re.call(t),o()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return ge().domain(e).range(n).unknown(t)},te.apply(a,arguments)}n(11),n(25);var be=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},_e=(be("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),be("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),be("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),be("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),be("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),be("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),be("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),be("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),be("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),function(t){return Object(lt.interpolateRgbBasis)(t[t.length-1])});_e(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(be)),_e(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(be)),_e(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(be)),_e(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(be)),_e(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(be)),_e(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(be)),_e(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(be)),_e(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(be)),_e(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(be)),_e(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(be)),_e(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(be)),_e(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(be)),_e(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(be)),_e(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(be)),_e(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(be)),_e(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(be)),_e(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(be)),_e(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(be)),_e(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(be)),_e(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(be)),_e(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(be)),_e(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(be)),_e(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(be)),_e(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(be)),_e(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(be)),_e(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(be)),_e(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(be)),Object(lt.interpolateCubehelixLong)(Object(Ot.b)(300,.5,0),Object(Ot.b)(-240,.5,1)),Object(lt.interpolateCubehelixLong)(Object(Ot.b)(-100,.75,.35),Object(Ot.b)(80,1.5,.8)),Object(lt.interpolateCubehelixLong)(Object(Ot.b)(260,.75,.35),Object(Ot.b)(80,1.5,.8)),Object(Ot.b)(),Object(Ot.f)(),Math.PI,Math.PI;function xe(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}xe(be("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),xe(be("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),xe(be("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),xe(be("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),n(22),n(78);function we(t,e,n){this.k=t,this.x=e,this.y=n}we.prototype={constructor:we,scale:function(t){return 1===t?this:new we(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new we(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new we(1,0,0);we.prototype;n.d(e,"c",function(){return r.d}),n.d(e,"f",function(){return r.i}),n.d(e,"a",function(){return v}),n.d(e,"g",function(){return Ot.f}),n.d(e,"d",function(){return Zt}),n.d(e,"e",function(){return lt.interpolateHslLong}),n.d(e,"h",function(){return ye}),n.d(e,"i",function(){return ge}),n.d(e,"b",function(){return ot}),n.d(e,"j",function(){return it})},function(t,e,n){"use strict";var r=n(29),i=function(t){return function(){return t}},o=Math.abs,a=Math.atan2,u=Math.cos,s=Math.max,l=Math.min,c=Math.sin,f=Math.sqrt,h=1e-12,p=Math.PI,d=p/2,v=2*p;function m(t){return t>=1?d:t<=-1?-d:Math.asin(t)}function y(t){return t.innerRadius}function g(t){return t.outerRadius}function b(t){return t.startAngle}function _(t){return t.endAngle}function x(t){return t&&t.padAngle}function w(t,e,n,r,i,o,a){var u=t-n,l=e-r,c=(a?o:-o)/f(u*u+l*l),h=c*l,p=-c*u,d=t+h,v=e+p,m=n+h,y=r+p,g=(d+m)/2,b=(v+y)/2,_=m-d,x=y-v,w=_*_+x*x,k=i-o,E=d*y-m*v,S=(x<0?-1:1)*f(s(0,k*k*w-E*E)),O=(E*x-_*S)/w,A=(-E*_-x*S)/w,M=(E*x+_*S)/w,C=(-E*_+x*S)/w,T=O-g,j=A-b,D=M-g,P=C-b;return T*T+j*j>D*D+P*P&&(O=M,A=C),{cx:O,cy:A,x01:-h,y01:-p,x11:O*(i/k-1),y11:A*(i/k-1)}}var k=function(){var t=y,e=g,n=i(0),s=null,k=b,E=_,S=x,O=null;function A(){var i,y,g,b=+t.apply(this,arguments),_=+e.apply(this,arguments),x=k.apply(this,arguments)-d,A=E.apply(this,arguments)-d,M=o(A-x),C=A>x;if(O||(O=i=Object(r.a)()),_<b&&(y=_,_=b,b=y),_>h)if(M>v-h)O.moveTo(_*u(x),_*c(x)),O.arc(0,0,_,x,A,!C),b>h&&(O.moveTo(b*u(A),b*c(A)),O.arc(0,0,b,A,x,C));else{var T,j,D=x,P=A,z=x,R=A,I=M,F=M,L=S.apply(this,arguments)/2,N=L>h&&(s?+s.apply(this,arguments):f(b*b+_*_)),B=l(o(_-b)/2,+n.apply(this,arguments)),U=B,q=B;if(N>h){var V=m(N/b*c(L)),W=m(N/_*c(L));(I-=2*V)>h?(z+=V*=C?1:-1,R-=V):(I=0,z=R=(x+A)/2),(F-=2*W)>h?(D+=W*=C?1:-1,P-=W):(F=0,D=P=(x+A)/2)}var H=_*u(D),G=_*c(D),X=b*u(R),Z=b*c(R);if(B>h){var Y,$=_*u(P),K=_*c(P),J=b*u(z),Q=b*c(z);if(M<p&&(Y=function(t,e,n,r,i,o,a,u){var s=n-t,l=r-e,c=a-i,f=u-o,p=f*s-c*l;if(!(p*p<h))return[t+(p=(c*(e-o)-f*(t-i))/p)*s,e+p*l]}(H,G,J,Q,$,K,X,Z))){var tt=H-Y[0],et=G-Y[1],nt=$-Y[0],rt=K-Y[1],it=1/c(((g=(tt*nt+et*rt)/(f(tt*tt+et*et)*f(nt*nt+rt*rt)))>1?0:g<-1?p:Math.acos(g))/2),ot=f(Y[0]*Y[0]+Y[1]*Y[1]);U=l(B,(b-ot)/(it-1)),q=l(B,(_-ot)/(it+1))}}F>h?q>h?(T=w(J,Q,H,G,_,q,C),j=w($,K,X,Z,_,q,C),O.moveTo(T.cx+T.x01,T.cy+T.y01),q<B?O.arc(T.cx,T.cy,q,a(T.y01,T.x01),a(j.y01,j.x01),!C):(O.arc(T.cx,T.cy,q,a(T.y01,T.x01),a(T.y11,T.x11),!C),O.arc(0,0,_,a(T.cy+T.y11,T.cx+T.x11),a(j.cy+j.y11,j.cx+j.x11),!C),O.arc(j.cx,j.cy,q,a(j.y11,j.x11),a(j.y01,j.x01),!C))):(O.moveTo(H,G),O.arc(0,0,_,D,P,!C)):O.moveTo(H,G),b>h&&I>h?U>h?(T=w(X,Z,$,K,b,-U,C),j=w(H,G,J,Q,b,-U,C),O.lineTo(T.cx+T.x01,T.cy+T.y01),U<B?O.arc(T.cx,T.cy,U,a(T.y01,T.x01),a(j.y01,j.x01),!C):(O.arc(T.cx,T.cy,U,a(T.y01,T.x01),a(T.y11,T.x11),!C),O.arc(0,0,b,a(T.cy+T.y11,T.cx+T.x11),a(j.cy+j.y11,j.cx+j.x11),C),O.arc(j.cx,j.cy,U,a(j.y11,j.x11),a(j.y01,j.x01),!C))):O.arc(0,0,b,R,z,C):O.lineTo(X,Z)}else O.moveTo(0,0);if(O.closePath(),i)return O=null,i+""||null}return A.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+k.apply(this,arguments)+ +E.apply(this,arguments))/2-p/2;return[u(r)*n,c(r)*n]},A.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:i(+e),A):t},A.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:i(+t),A):e},A.cornerRadius=function(t){return arguments.length?(n="function"===typeof t?t:i(+t),A):n},A.padRadius=function(t){return arguments.length?(s=null==t?null:"function"===typeof t?t:i(+t),A):s},A.startAngle=function(t){return arguments.length?(k="function"===typeof t?t:i(+t),A):k},A.endAngle=function(t){return arguments.length?(E="function"===typeof t?t:i(+t),A):E},A.padAngle=function(t){return arguments.length?(S="function"===typeof t?t:i(+t),A):S},A.context=function(t){return arguments.length?(O=null==t?null:t,A):O},A};function E(t){this._context=t}E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var S=function(t){return new E(t)};function O(t){return t[0]}function A(t){return t[1]}var M=function(){var t=O,e=A,n=i(!0),o=null,a=S,u=null;function s(i){var s,l,c,f=i.length,h=!1;for(null==o&&(u=a(c=Object(r.a)())),s=0;s<=f;++s)!(s<f&&n(l=i[s],s,i))===h&&((h=!h)?u.lineStart():u.lineEnd()),h&&u.point(+t(l,s,i),+e(l,s,i));if(c)return u=null,c+""||null}return s.x=function(e){return arguments.length?(t="function"===typeof e?e:i(+e),s):t},s.y=function(t){return arguments.length?(e="function"===typeof t?t:i(+t),s):e},s.defined=function(t){return arguments.length?(n="function"===typeof t?t:i(!!t),s):n},s.curve=function(t){return arguments.length?(a=t,null!=o&&(u=a(o)),s):a},s.context=function(t){return arguments.length?(null==t?o=u=null:u=a(o=t),s):o},s},C=function(){var t=O,e=null,n=i(0),o=A,a=i(!0),u=null,s=S,l=null;function c(i){var c,f,h,p,d,v=i.length,m=!1,y=new Array(v),g=new Array(v);for(null==u&&(l=s(d=Object(r.a)())),c=0;c<=v;++c){if(!(c<v&&a(p=i[c],c,i))===m)if(m=!m)f=c,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=c-1;h>=f;--h)l.point(y[h],g[h]);l.lineEnd(),l.areaEnd()}m&&(y[c]=+t(p,c,i),g[c]=+n(p,c,i),l.point(e?+e(p,c,i):y[c],o?+o(p,c,i):g[c]))}if(d)return l=null,d+""||null}function f(){return M().defined(a).curve(s).context(u)}return c.x=function(n){return arguments.length?(t="function"===typeof n?n:i(+n),e=null,c):t},c.x0=function(e){return arguments.length?(t="function"===typeof e?e:i(+e),c):t},c.x1=function(t){return arguments.length?(e=null==t?null:"function"===typeof t?t:i(+t),c):e},c.y=function(t){return arguments.length?(n="function"===typeof t?t:i(+t),o=null,c):n},c.y0=function(t){return arguments.length?(n="function"===typeof t?t:i(+t),c):n},c.y1=function(t){return arguments.length?(o=null==t?null:"function"===typeof t?t:i(+t),c):o},c.lineX0=c.lineY0=function(){return f().x(t).y(n)},c.lineY1=function(){return f().x(t).y(o)},c.lineX1=function(){return f().x(e).y(n)},c.defined=function(t){return arguments.length?(a="function"===typeof t?t:i(!!t),c):a},c.curve=function(t){return arguments.length?(s=t,null!=u&&(l=s(u)),c):s},c.context=function(t){return arguments.length?(null==t?u=l=null:l=s(u=t),c):u},c};j(S);function T(t){this._curve=t}function j(t){function e(e){return new T(t(e))}return e._curve=t,e}T.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};Array.prototype.slice;var D={draw:function(t,e){var n=Math.sqrt(e/p);t.moveTo(n,0),t.arc(0,0,n,0,v)}},P=(Math.sqrt(1/3),Math.sin(p/10)/Math.sin(7*p/10)),z=(Math.sin(v/10),Math.cos(v/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){var t=i(D),e=i(64),n=null;function o(){var i;if(n||(n=i=Object(r.a)()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return o.type=function(e){return arguments.length?(t="function"===typeof e?e:i(e),o):t},o.size=function(t){return arguments.length?(e="function"===typeof t?t:i(+t),o):e},o.context=function(t){return arguments.length?(n=null==t?null:t,o):n},o}),R=function(){};function I(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function F(t){this._context=t}F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:I(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:I(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var L=function(t){return new F(t)};function N(t){this._context=t}N.prototype={areaStart:R,areaEnd:R,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:I(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var B=function(t){return new N(t)};function U(t){this._context=t}U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:I(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var q=function(t){return new U(t)};function V(t,e){this._basis=new F(t),this._beta=e}V.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,u=e[n]-o,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+r*a),this._beta*e[s]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var W=function t(e){function n(t){return 1===e?new F(t):new V(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function H(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function G(t,e){this._context=t,this._k=(1-e)/6}G.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:H(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:H(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var X=function t(e){function n(t){return new G(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Z(t,e){this._context=t,this._k=(1-e)/6}Z.prototype={areaStart:R,areaEnd:R,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:H(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Y=function t(e){function n(t){return new Z(t,e)}return n.tension=function(e){return t(+e)},n}(0);function $(t,e){this._context=t,this._k=(1-e)/6}$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:H(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var K=function t(e){function n(t){return new $(t,e)}return n.tension=function(e){return t(+e)},n}(0);function J(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>h){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>h){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Q(t,e){this._context=t,this._alpha=e}Q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:J(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var tt=function t(e){function n(t){return e?new Q(t,e):new G(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function et(t,e){this._context=t,this._alpha=e}et.prototype={areaStart:R,areaEnd:R,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:J(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var nt=function t(e){function n(t){return e?new et(t,e):new Z(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function rt(t,e){this._context=t,this._alpha=e}rt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:J(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var it=function t(e){function n(t){return e?new rt(t,e):new $(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function ot(t){this._context=t}ot.prototype={areaStart:R,areaEnd:R,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var at=function(t){return new ot(t)};function ut(t){return t<0?-1:1}function st(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(ut(o)+ut(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function lt(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ct(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*e,o-u,a-u*n,o,a)}function ft(t){this._context=t}function ht(t){this._context=new pt(t)}function pt(t){this._context=t}function dt(t){return new ft(t)}function vt(t){return new ht(t)}function mt(t){this._context=t}function yt(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ct(this,this._t0,lt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ct(this,lt(this,n=st(this,t,e)),n);break;default:ct(this,this._t0,n=st(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(ht.prototype=Object.create(ft.prototype)).point=function(t,e){ft.prototype.point.call(this,e,t)},pt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=yt(t),i=yt(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var gt=function(t){return new mt(t)};function bt(t,e){this._context=t,this._t=e}bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var _t=function(t){return new bt(t,.5)};function xt(t){return new bt(t,0)}function wt(t){return new bt(t,1)}n.d(e,"a",function(){return k}),n.d(e,"b",function(){return C}),n.d(e,"u",function(){return M}),n.d(e,"v",function(){return z}),n.d(e,"d",function(){return B}),n.d(e,"e",function(){return q}),n.d(e,"c",function(){return L}),n.d(e,"f",function(){return W}),n.d(e,"h",function(){return Y}),n.d(e,"i",function(){return K}),n.d(e,"g",function(){return X}),n.d(e,"k",function(){return nt}),n.d(e,"l",function(){return it}),n.d(e,"j",function(){return tt}),n.d(e,"n",function(){return at}),n.d(e,"m",function(){return S}),n.d(e,"o",function(){return dt}),n.d(e,"p",function(){return vt}),n.d(e,"q",function(){return gt}),n.d(e,"r",function(){return _t}),n.d(e,"s",function(){return wt}),n.d(e,"t",function(){return xt})},function(t,e,n){"use strict";var r=function(){return new i};function i(){this.reset()}i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(t){a(o,t,this.t),a(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new i;function a(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var u=1e-6,s=Math.PI,l=s/2,c=s/4,f=2*s,h=180/s,p=s/180,d=Math.abs,v=Math.atan,m=Math.atan2,y=Math.cos,g=Math.ceil,b=Math.exp,_=(Math.floor,Math.log),x=Math.pow,w=Math.sin,k=Math.sign||function(t){return t>0?1:t<0?-1:0},E=Math.sqrt,S=Math.tan;function O(t){return t>1?0:t<-1?s:Math.acos(t)}function A(t){return t>1?l:t<-1?-l:Math.asin(t)}function M(){}function C(t,e){t&&j.hasOwnProperty(t.type)&&j[t.type](t,e)}var T={Feature:function(t,e){C(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)C(n[r].geometry,e)}},j={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){D(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)D(n[r],e,0)},Polygon:function(t,e){P(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)P(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)C(n[r],e)}};function D(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function P(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)D(t[n],e,1);e.polygonEnd()}var z,R,I,F,L,N=function(t,e){t&&T.hasOwnProperty(t.type)?T[t.type](t,e):C(t,e)},B=r(),U=r(),q={point:M,lineStart:M,lineEnd:M,polygonStart:function(){B.reset(),q.lineStart=V,q.lineEnd=W},polygonEnd:function(){var t=+B;U.add(t<0?f+t:t),this.lineStart=this.lineEnd=this.point=M},sphere:function(){U.add(f)}};function V(){q.point=H}function W(){G(z,R)}function H(t,e){q.point=G,z=t,R=e,I=t*=p,F=y(e=(e*=p)/2+c),L=w(e)}function G(t,e){var n=(t*=p)-I,r=n>=0?1:-1,i=r*n,o=y(e=(e*=p)/2+c),a=w(e),u=L*a,s=F*o+u*y(i),l=u*r*w(i);B.add(m(l,s)),I=t,F=o,L=a}var X=function(t){return U.reset(),N(t,q),2*U};function Z(t){return[m(t[1],t[0]),A(t[2])]}function Y(t){var e=t[0],n=t[1],r=y(n);return[r*y(e),r*w(e),w(n)]}function $(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function K(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function J(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Q(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function tt(t){var e=E(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var et,nt,rt,it,ot,at,ut,st,lt,ct,ft=r(),ht={point:pt,lineStart:vt,lineEnd:mt,polygonStart:function(){ht.point=yt,ht.lineStart=gt,ht.lineEnd=bt,ft.reset(),q.polygonStart()},polygonEnd:function(){q.polygonEnd(),ht.point=pt,ht.lineStart=vt,ht.lineEnd=mt,B<0?(et=-(rt=180),nt=-(it=90)):ft>u?it=90:ft<-u&&(nt=-90),ct[0]=et,ct[1]=rt}};function pt(t,e){lt.push(ct=[et=t,rt=t]),e<nt&&(nt=e),e>it&&(it=e)}function dt(t,e){var n=Y([t*p,e*p]);if(st){var r=K(st,n),i=K([r[1],-r[0],0],r);tt(i),i=Z(i);var o,a=t-ot,u=a>0?1:-1,s=i[0]*h*u,l=d(a)>180;l^(u*ot<s&&s<u*t)?(o=i[1]*h)>it&&(it=o):l^(u*ot<(s=(s+360)%360-180)&&s<u*t)?(o=-i[1]*h)<nt&&(nt=o):(e<nt&&(nt=e),e>it&&(it=e)),l?t<ot?_t(et,t)>_t(et,rt)&&(rt=t):_t(t,rt)>_t(et,rt)&&(et=t):rt>=et?(t<et&&(et=t),t>rt&&(rt=t)):t>ot?_t(et,t)>_t(et,rt)&&(rt=t):_t(t,rt)>_t(et,rt)&&(et=t)}else lt.push(ct=[et=t,rt=t]);e<nt&&(nt=e),e>it&&(it=e),st=n,ot=t}function vt(){ht.point=dt}function mt(){ct[0]=et,ct[1]=rt,ht.point=pt,st=null}function yt(t,e){if(st){var n=t-ot;ft.add(d(n)>180?n+(n>0?360:-360):n)}else at=t,ut=e;q.point(t,e),dt(t,e)}function gt(){q.lineStart()}function bt(){yt(at,ut),q.lineEnd(),d(ft)>u&&(et=-(rt=180)),ct[0]=et,ct[1]=rt,st=null}function _t(t,e){return(e-=t)<0?e+360:e}function xt(t,e){return t[0]-e[0]}function wt(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var kt,Et,St,Ot,At,Mt,Ct,Tt,jt,Dt,Pt,zt,Rt,It,Ft,Lt,Nt=function(t){var e,n,r,i,o,a,u;if(it=rt=-(et=nt=1/0),lt=[],N(t,ht),n=lt.length){for(lt.sort(xt),e=1,o=[r=lt[0]];e<n;++e)wt(r,(i=lt[e])[0])||wt(r,i[1])?(_t(r[0],i[1])>_t(r[0],r[1])&&(r[1]=i[1]),_t(i[0],r[1])>_t(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(u=_t(r[1],i[0]))>a&&(a=u,et=i[0],rt=r[1])}return lt=ct=null,et===1/0||nt===1/0?[[NaN,NaN],[NaN,NaN]]:[[et,nt],[rt,it]]},Bt={sphere:M,point:Ut,lineStart:Vt,lineEnd:Gt,polygonStart:function(){Bt.lineStart=Xt,Bt.lineEnd=Zt},polygonEnd:function(){Bt.lineStart=Vt,Bt.lineEnd=Gt}};function Ut(t,e){t*=p;var n=y(e*=p);qt(n*y(t),n*w(t),w(e))}function qt(t,e,n){St+=(t-St)/++kt,Ot+=(e-Ot)/kt,At+=(n-At)/kt}function Vt(){Bt.point=Wt}function Wt(t,e){t*=p;var n=y(e*=p);It=n*y(t),Ft=n*w(t),Lt=w(e),Bt.point=Ht,qt(It,Ft,Lt)}function Ht(t,e){t*=p;var n=y(e*=p),r=n*y(t),i=n*w(t),o=w(e),a=m(E((a=Ft*o-Lt*i)*a+(a=Lt*r-It*o)*a+(a=It*i-Ft*r)*a),It*r+Ft*i+Lt*o);Et+=a,Mt+=a*(It+(It=r)),Ct+=a*(Ft+(Ft=i)),Tt+=a*(Lt+(Lt=o)),qt(It,Ft,Lt)}function Gt(){Bt.point=Ut}function Xt(){Bt.point=Yt}function Zt(){$t(zt,Rt),Bt.point=Ut}function Yt(t,e){zt=t,Rt=e,t*=p,e*=p,Bt.point=$t;var n=y(e);It=n*y(t),Ft=n*w(t),Lt=w(e),qt(It,Ft,Lt)}function $t(t,e){t*=p;var n=y(e*=p),r=n*y(t),i=n*w(t),o=w(e),a=Ft*o-Lt*i,u=Lt*r-It*o,s=It*i-Ft*r,l=E(a*a+u*u+s*s),c=A(l),f=l&&-c/l;jt+=f*a,Dt+=f*u,Pt+=f*s,Et+=c,Mt+=c*(It+(It=r)),Ct+=c*(Ft+(Ft=i)),Tt+=c*(Lt+(Lt=o)),qt(It,Ft,Lt)}var Kt=function(t){kt=Et=St=Ot=At=Mt=Ct=Tt=jt=Dt=Pt=0,N(t,Bt);var e=jt,n=Dt,r=Pt,i=e*e+n*n+r*r;return i<1e-12&&(e=Mt,n=Ct,r=Tt,Et<u&&(e=St,n=Ot,r=At),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[m(n,e)*h,A(r/E(i))*h]},Jt=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function Qt(t,e){return[d(t)>s?t+Math.round(-t/f)*f:t,e]}function te(t,e,n){return(t%=f)?e||n?Jt(ne(t),re(e,n)):ne(t):e||n?re(e,n):Qt}function ee(t){return function(e,n){return[(e+=t)>s?e-f:e<-s?e+f:e,n]}}function ne(t){var e=ee(t);return e.invert=ee(-t),e}function re(t,e){var n=y(t),r=w(t),i=y(e),o=w(e);function a(t,e){var a=y(e),u=y(t)*a,s=w(t)*a,l=w(e),c=l*n+u*r;return[m(s*i-c*o,u*n-l*r),A(c*i+s*o)]}return a.invert=function(t,e){var a=y(e),u=y(t)*a,s=w(t)*a,l=w(e),c=l*i-s*o;return[m(s*i+l*o,u*n+c*r),A(c*n-u*r)]},a}Qt.invert=Qt;var ie=function(t){function e(e){return(e=t(e[0]*p,e[1]*p))[0]*=h,e[1]*=h,e}return t=te(t[0]*p,t[1]*p,t.length>2?t[2]*p:0),e.invert=function(e){return(e=t.invert(e[0]*p,e[1]*p))[0]*=h,e[1]*=h,e},e};function oe(t,e,n,r,i,o){if(n){var a=y(e),u=w(e),s=r*n;null==i?(i=e+r*f,o=e-s/2):(i=ae(a,i),o=ae(a,o),(r>0?i<o:i>o)&&(i+=r*f));for(var l,c=i;r>0?c>o:c<o;c-=s)l=Z([a,-u*y(c),-u*w(c)]),t.point(l[0],l[1])}}function ae(t,e){(e=Y(e))[0]-=t,tt(e);var n=O(-e[1]);return((-e[2]<0?-n:n)+f-u)%f}var ue=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:M,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},se=function(t,e){return d(t[0]-e[0])<u&&d(t[1]-e[1])<u};function le(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var ce=function(t,e,n,r,i){var o,a,u=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(se(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else u.push(n=new le(r,t,null,!0)),s.push(n.o=new le(r,null,n,!1)),u.push(n=new le(a,t,null,!1)),s.push(n.o=new le(a,null,n,!0))}}),u.length){for(s.sort(e),fe(u),fe(s),o=0,a=s.length;o<a;++o)s[o].e=n=!n;for(var l,c,f=u[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}};function fe(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var he=r(),pe=function(t,e){var n=e[0],r=e[1],i=w(r),o=[w(n),-y(n),0],a=0,h=0;he.reset(),1===i?r=l+u:-1===i&&(r=-l-u);for(var p=0,d=t.length;p<d;++p)if(g=(v=t[p]).length)for(var v,g,b=v[g-1],_=b[0],x=b[1]/2+c,k=w(x),E=y(x),S=0;S<g;++S,_=M,k=T,E=j,b=O){var O=v[S],M=O[0],C=O[1]/2+c,T=w(C),j=y(C),D=M-_,P=D>=0?1:-1,z=P*D,R=z>s,I=k*T;if(he.add(m(I*P*w(z),E*j+I*y(z))),a+=R?D+P*f:D,R^_>=n^M>=n){var F=K(Y(b),Y(O));tt(F);var L=K(o,F);tt(L);var N=(R^D>=0?-1:1)*A(L[2]);(r>N||r===N&&(F[0]||F[1]))&&(h+=R^D>=0?1:-1)}}return(a<-u||a<u&&he<-u)^1&h},de=n(12),ve=function(t,e,n,r){return function(i){var o,a,u,s=e(i),l=ue(),c=e(l),f=!1,h={point:p,lineStart:v,lineEnd:m,polygonStart:function(){h.point=y,h.lineStart=g,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=v,h.lineEnd=m,a=Object(de.g)(a);var t=pe(o,r);a.length?(f||(i.polygonStart(),f=!0),ce(a,ye,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(e,n){t(e,n)&&i.point(e,n)}function d(t,e){s.point(t,e)}function v(){h.point=d,s.lineStart()}function m(){h.point=p,s.lineEnd()}function y(t,e){u.push([t,e]),c.point(t,e)}function g(){c.lineStart(),u=[]}function b(){y(u[0][0],u[0][1]),c.lineEnd();var t,e,n,r,s=c.clean(),h=l.result(),p=h.length;if(u.pop(),o.push(u),u=null,p)if(1&s){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else p>1&&2&s&&h.push(h.pop().concat(h.shift())),a.push(h.filter(me))}return h}};function me(t){return t.length>1}function ye(t,e){return((t=t.x)[0]<0?t[1]-l-u:l-t[1])-((e=e.x)[0]<0?e[1]-l-u:l-e[1])}var ge=ve(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var c=o>0?s:-s,f=d(o-n);d(f-s)<u?(t.point(n,r=(r+a)/2>0?l:-l),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(c,r),t.point(o,r),e=0):i!==c&&f>=s&&(d(n-i)<u&&(n-=i*u),d(o-c)<u&&(o-=c*u),r=function(t,e,n,r){var i,o,a=w(t-n);return d(a)>u?v((w(e)*(o=y(r))*w(n)-w(r)*(i=y(e))*w(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(c,r),e=0),t.point(n=o,r=a),i=c},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*l,r.point(-s,i),r.point(0,i),r.point(s,i),r.point(s,0),r.point(s,-i),r.point(0,-i),r.point(-s,-i),r.point(-s,0),r.point(-s,i);else if(d(t[0]-e[0])>u){var o=t[0]<e[0]?s:-s;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-s,-l]);var be=function(t){var e=y(t),n=6*p,r=e>0,i=d(e)>u;function o(t,n){return y(t)*y(n)>e}function a(t,n,r){var i=[1,0,0],o=K(Y(t),Y(n)),a=$(o,o),l=o[0],c=a-l*l;if(!c)return!r&&t;var f=e*a/c,h=-e*l/c,p=K(i,o),v=Q(i,f);J(v,Q(o,h));var m=p,y=$(v,m),g=$(m,m),b=y*y-g*($(v,v)-1);if(!(b<0)){var _=E(b),x=Q(m,(-y-_)/g);if(J(x,v),x=Z(x),!r)return x;var w,k=t[0],S=n[0],O=t[1],A=n[1];S<k&&(w=k,k=S,S=w);var M=S-k,C=d(M-s)<u;if(!C&&A<O&&(w=O,O=A,A=w),C||M<u?C?O+A>0^x[1]<(d(x[0]-k)<u?O:A):O<=x[1]&&x[1]<=A:M>s^(k<=x[0]&&x[0]<=S)){var T=Q(m,(-y+_)/g);return J(T,v),[x,Z(T)]}}}function l(e,n){var i=r?t:s-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return ve(o,function(t){var e,n,c,f,h;return{lineStart:function(){f=c=!1,h=1},point:function(p,d){var v,m=[p,d],y=o(p,d),g=r?y?0:l(p,d):y?l(p+(p<0?s:-s),d):0;if(!e&&(f=c=y)&&t.lineStart(),y!==c&&(!(v=a(e,m))||se(e,v)||se(m,v))&&(m[0]+=u,m[1]+=u,y=o(m[0],m[1])),y!==c)h=0,y?(t.lineStart(),v=a(m,e),t.point(v[0],v[1])):(v=a(e,m),t.point(v[0],v[1]),t.lineEnd()),e=v;else if(i&&e&&r^y){var b;g&n||!(b=a(m,e,!0))||(h=0,r?(t.lineStart(),t.point(b[0][0],b[0][1]),t.point(b[1][0],b[1][1]),t.lineEnd()):(t.point(b[1][0],b[1][1]),t.lineEnd(),t.lineStart(),t.point(b[0][0],b[0][1])))}!y||e&&se(e,m)||t.point(m[0],m[1]),e=m,c=y,n=g},lineEnd:function(){c&&t.lineEnd(),e=null},clean:function(){return h|(f&&c)<<1}}},function(e,r,i,o){oe(o,t,n,i,e,r)},r?[0,-t]:[-s,t-s])},_e=function(t,e,n,r,i,o){var a,u=t[0],s=t[1],l=0,c=1,f=e[0]-u,h=e[1]-s;if(a=n-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-u,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=o-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=u+l*f,t[1]=s+l*h),c<1&&(e[0]=u+c*f,e[1]=s+c*h),!0}}}}},xe=1e9,we=-xe;function ke(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,u,s){var c=0,f=0;if(null==i||(c=a(i,u))!==(f=a(o,u))||l(i,o)<0^u>0)do{s.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+u+4)%4)!==f);else s.point(o[0],o[1])}function a(r,i){return d(r[0]-t)<u?i>0?0:3:d(r[0]-n)<u?i>0?2:1:d(r[1]-e)<u?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,f,h,p,d,v,m,y,g,b=a,_=ue(),x={point:w,lineStart:function(){x.point=k,l&&l.push(c=[]);y=!0,m=!1,d=v=NaN},lineEnd:function(){u&&(k(f,h),p&&m&&_.rejoin(),u.push(_.result()));x.point=w,m&&b.lineEnd()},polygonStart:function(){b=_,u=[],l=[],g=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,a,u=l[n],s=1,c=u.length,f=u[0],h=f[0],p=f[1];s<c;++s)o=h,a=p,f=u[s],h=f[0],p=f[1],a<=r?p>r&&(h-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(h-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=g&&e,i=(u=Object(de.g)(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&ce(u,s,e,o,a),a.polygonEnd());b=a,u=l=c=null}};function w(t,e){i(t,e)&&b.point(t,e)}function k(o,a){var u=i(o,a);if(l&&c.push([o,a]),y)f=o,h=a,p=u,y=!1,u&&(b.lineStart(),b.point(o,a));else if(u&&m)b.point(o,a);else{var s=[d=Math.max(we,Math.min(xe,d)),v=Math.max(we,Math.min(xe,v))],_=[o=Math.max(we,Math.min(xe,o)),a=Math.max(we,Math.min(xe,a))];_e(s,_,t,e,n,r)?(m||(b.lineStart(),b.point(s[0],s[1])),b.point(_[0],_[1]),u||b.lineEnd(),g=!1):u&&(b.lineStart(),b.point(o,a),g=!1)}d=o,v=a,m=u}return x}}r();function Ee(t,e,n){var r=Object(de.i)(t,e-u,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Se(t,e,n){var r=Object(de.i)(t,e-u,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Oe(){var t,e,n,r,i,o,a,s,l,c,f,h,p=10,v=p,m=90,y=360,b=2.5;function _(){return{type:"MultiLineString",coordinates:x()}}function x(){return Object(de.i)(g(r/m)*m,n,m).map(f).concat(Object(de.i)(g(s/y)*y,a,y).map(h)).concat(Object(de.i)(g(e/p)*p,t,p).filter(function(t){return d(t%m)>u}).map(l)).concat(Object(de.i)(g(o/v)*v,i,v).filter(function(t){return d(t%y)>u}).map(c))}return _.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})},_.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(h(a).slice(1),f(n).reverse().slice(1),h(s).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),_.precision(b)):[[r,s],[n,a]]},_.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),_.precision(b)):[[e,o],[t,i]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(m=+t[0],y=+t[1],_):[m,y]},_.stepMinor=function(t){return arguments.length?(p=+t[0],v=+t[1],_):[p,v]},_.precision=function(u){return arguments.length?(b=+u,l=Ee(o,i,90),c=Se(e,t,b),f=Ee(s,a,90),h=Se(r,n,b),_):b},_.extentMajor([[-180,-90+u],[180,90-u]]).extentMinor([[-180,-80-u],[180,80+u]])}var Ae,Me,Ce,Te,je=function(t){return t},De=r(),Pe=r(),ze={point:M,lineStart:M,lineEnd:M,polygonStart:function(){ze.lineStart=Re,ze.lineEnd=Le},polygonEnd:function(){ze.lineStart=ze.lineEnd=ze.point=M,De.add(d(Pe)),Pe.reset()},result:function(){var t=De/2;return De.reset(),t}};function Re(){ze.point=Ie}function Ie(t,e){ze.point=Fe,Ae=Ce=t,Me=Te=e}function Fe(t,e){Pe.add(Te*t-Ce*e),Ce=t,Te=e}function Le(){Fe(Ae,Me)}var Ne=ze,Be=1/0,Ue=Be,qe=-Be,Ve=qe;var We,He,Ge,Xe,Ze={point:function(t,e){t<Be&&(Be=t);t>qe&&(qe=t);e<Ue&&(Ue=e);e>Ve&&(Ve=e)},lineStart:M,lineEnd:M,polygonStart:M,polygonEnd:M,result:function(){var t=[[Be,Ue],[qe,Ve]];return qe=Ve=-(Ue=Be=1/0),t}},Ye=0,$e=0,Ke=0,Je=0,Qe=0,tn=0,en=0,nn=0,rn=0,on={point:an,lineStart:un,lineEnd:cn,polygonStart:function(){on.lineStart=fn,on.lineEnd=hn},polygonEnd:function(){on.point=an,on.lineStart=un,on.lineEnd=cn},result:function(){var t=rn?[en/rn,nn/rn]:tn?[Je/tn,Qe/tn]:Ke?[Ye/Ke,$e/Ke]:[NaN,NaN];return Ye=$e=Ke=Je=Qe=tn=en=nn=rn=0,t}};function an(t,e){Ye+=t,$e+=e,++Ke}function un(){on.point=sn}function sn(t,e){on.point=ln,an(Ge=t,Xe=e)}function ln(t,e){var n=t-Ge,r=e-Xe,i=E(n*n+r*r);Je+=i*(Ge+t)/2,Qe+=i*(Xe+e)/2,tn+=i,an(Ge=t,Xe=e)}function cn(){on.point=an}function fn(){on.point=pn}function hn(){dn(We,He)}function pn(t,e){on.point=dn,an(We=Ge=t,He=Xe=e)}function dn(t,e){var n=t-Ge,r=e-Xe,i=E(n*n+r*r);Je+=i*(Ge+t)/2,Qe+=i*(Xe+e)/2,tn+=i,en+=(i=Xe*t-Ge*e)*(Ge+t),nn+=i*(Xe+e),rn+=3*i,an(Ge=t,Xe=e)}var vn=on;function mn(t){this._context=t}mn.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,f)}},result:M};var yn,gn,bn,_n,xn,wn=r(),kn={point:M,lineStart:function(){kn.point=En},lineEnd:function(){yn&&Sn(gn,bn),kn.point=M},polygonStart:function(){yn=!0},polygonEnd:function(){yn=null},result:function(){var t=+wn;return wn.reset(),t}};function En(t,e){kn.point=Sn,gn=_n=t,bn=xn=e}function Sn(t,e){_n-=t,xn-=e,wn.add(E(_n*_n+xn*xn)),_n=t,xn=e}var On=kn;function An(){this._string=[]}function Mn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}An.prototype={_radius:4.5,_circle:Mn(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Mn(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var Cn=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),N(t,n(r))),r.result()}return o.area=function(t){return N(t,n(Ne)),Ne.result()},o.measure=function(t){return N(t,n(On)),On.result()},o.bounds=function(t){return N(t,n(Ze)),Ze.result()},o.centroid=function(t){return N(t,n(vn)),vn.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,je):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new An):new mn(e=t),"function"!==typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"===typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)};function Tn(t){return function(e){var n=new jn;for(var r in t)n[r]=t[r];return n.stream=e,n}}function jn(){}function Dn(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),N(n,t.stream(Ze)),e(Ze.result()),null!=r&&t.clipExtent(r),t}function Pn(t,e,n){return Dn(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,u=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,u])},n)}function zn(t,e,n){return Pn(t,[[0,0],e],n)}function Rn(t,e,n){return Dn(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])},n)}function In(t,e,n){return Dn(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])},n)}jn.prototype={constructor:jn,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Fn=16,Ln=y(30*p),Nn=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,l,c,f,h,p,v,y,g,b){var _=c-r,x=f-i,w=_*_+x*x;if(w>4*e&&g--){var k=a+p,S=s+v,O=l+y,M=E(k*k+S*S+O*O),C=A(O/=M),T=d(d(O)-1)<u||d(o-h)<u?(o+h)/2:m(S,k),j=t(T,C),D=j[0],P=j[1],z=D-r,R=P-i,I=x*z-_*R;(I*I/w>e||d((_*z+x*R)/w-.5)>.3||a*p+s*v+l*y<Ln)&&(n(r,i,o,a,s,l,D,P,T,k/=M,S/=M,O,g,b),b.point(D,P),n(D,P,T,k,S,O,c,f,h,p,v,y,g,b))}}return function(e){var r,i,o,a,u,s,l,c,f,h,p,d,v={point:m,lineStart:y,lineEnd:b,polygonStart:function(){e.polygonStart(),v.lineStart=_},polygonEnd:function(){e.polygonEnd(),v.lineStart=y}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){c=NaN,v.point=g,e.lineStart()}function g(r,i){var o=Y([r,i]),a=t(r,i);n(c,f,l,h,p,d,c=a[0],f=a[1],l=r,h=o[0],p=o[1],d=o[2],Fn,e),e.point(c,f)}function b(){v.point=m,e.lineEnd()}function _(){y(),v.point=x,v.lineEnd=w}function x(t,e){g(r=t,e),i=c,o=f,a=h,u=p,s=d,v.point=g}function w(){n(c,f,l,h,p,d,i,o,r,a,u,s,Fn,e),v.lineEnd=b,b()}return v}}(t,e):function(t){return Tn({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var Bn=Tn({point:function(t,e){this.stream.point(t*p,e*p)}});function Un(t,e,n,r){var i=y(r),o=w(r),a=i*t,u=o*t,s=i/t,l=o/t,c=(o*n-i*e)/t,f=(o*e+i*n)/t;function h(t,r){return[a*t-u*r+e,n-u*t-a*r]}return h.invert=function(t,e){return[s*t-l*e+c,f-l*t-s*e]},h}function qn(t){return Vn(function(){return t})()}function Vn(t){var e,n,r,i,o,a,u,s,l,c,f=150,d=480,v=250,m=0,y=0,g=0,b=0,_=0,x=0,w=null,k=ge,S=null,O=je,A=.5;function M(t){return s(t[0]*p,t[1]*p)}function C(t){return(t=s.invert(t[0],t[1]))&&[t[0]*h,t[1]*h]}function T(){var t=Un(f,0,0,x).apply(null,e(m,y)),r=(x?Un:function(t,e,n){function r(r,i){return[e+t*r,n-t*i]}return r.invert=function(r,i){return[(r-e)/t,(n-i)/t]},r})(f,d-t[0],v-t[1],x);return n=te(g,b,_),u=Jt(e,r),s=Jt(n,u),a=Nn(u,A),j()}function j(){return l=c=null,M}return M.stream=function(t){return l&&c===t?l:l=Bn(function(t){return Tn({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(k(a(O(c=t)))))},M.preclip=function(t){return arguments.length?(k=t,w=void 0,j()):k},M.postclip=function(t){return arguments.length?(O=t,S=r=i=o=null,j()):O},M.clipAngle=function(t){return arguments.length?(k=+t?be(w=t*p):(w=null,ge),j()):w*h},M.clipExtent=function(t){return arguments.length?(O=null==t?(S=r=i=o=null,je):ke(S=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),j()):null==S?null:[[S,r],[i,o]]},M.scale=function(t){return arguments.length?(f=+t,T()):f},M.translate=function(t){return arguments.length?(d=+t[0],v=+t[1],T()):[d,v]},M.center=function(t){return arguments.length?(m=t[0]%360*p,y=t[1]%360*p,T()):[m*h,y*h]},M.rotate=function(t){return arguments.length?(g=t[0]%360*p,b=t[1]%360*p,_=t.length>2?t[2]%360*p:0,T()):[g*h,b*h,_*h]},M.angle=function(t){return arguments.length?(x=t%360*p,T()):x*h},M.precision=function(t){return arguments.length?(a=Nn(u,A=t*t),j()):E(A)},M.fitExtent=function(t,e){return Pn(M,t,e)},M.fitSize=function(t,e){return zn(M,t,e)},M.fitWidth=function(t,e){return Rn(M,t,e)},M.fitHeight=function(t,e){return In(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&C,T()}}function Wn(t){var e=0,n=s/3,r=Vn(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*p,n=t[1]*p):[e*h,n*h]},i}function Hn(t,e){var n=w(t),r=(n+w(e))/2;if(d(r)<u)return function(t){var e=y(t);function n(t,n){return[t*e,w(n)/e]}return n.invert=function(t,n){return[t/e,A(n*e)]},n}(t);var i=1+n*(2*r-n),o=E(i)/r;function a(t,e){var n=E(i-2*r*w(e))/r;return[n*w(t*=r),o-n*y(t)]}return a.invert=function(t,e){var n=o-e;return[m(t,d(n))/r*k(n),A((i-(t*t+n*n)*r*r)/(2*r))]},a}var Gn=function(){return Wn(Hn).scale(155.424).center([0,33.6442])},Xn=function(){return Gn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var Zn=function(){var t,e,n,r,i,o,a=Xn(),s=Gn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Gn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function f(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,f}return f.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:a).invert(t)},f.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([a.stream(e=n),s.stream(n),l.stream(n)])},f.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),l.precision(t),h()):a.precision()},f.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),l.scale(t),f.translate(a.translate())):a.scale()},f.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],f=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,f-.238*e],[o+.455*e,f+.238*e]]).stream(c),r=s.translate([o-.307*e,f+.201*e]).clipExtent([[o-.425*e+u,f+.12*e+u],[o-.214*e-u,f+.234*e-u]]).stream(c),i=l.translate([o-.205*e,f+.212*e]).clipExtent([[o-.214*e+u,f+.166*e+u],[o-.115*e-u,f+.234*e-u]]).stream(c),h()},f.fitExtent=function(t,e){return Pn(f,t,e)},f.fitSize=function(t,e){return zn(f,t,e)},f.fitWidth=function(t,e){return Rn(f,t,e)},f.fitHeight=function(t,e){return In(f,t,e)},f.scale(1070)};function Yn(t){return function(e,n){var r=y(e),i=y(n),o=t(r*i);return[o*i*w(e),o*w(n)]}}function $n(t){return function(e,n){var r=E(e*e+n*n),i=t(r),o=w(i),a=y(i);return[m(e*o,r*a),A(r&&n*o/r)]}}var Kn=Yn(function(t){return E(2/(1+t))});Kn.invert=$n(function(t){return 2*A(t/2)});var Jn=function(){return qn(Kn).scale(124.75).clipAngle(179.999)},Qn=Yn(function(t){return(t=O(t))&&t/w(t)});Qn.invert=$n(function(t){return t});var tr=function(){return qn(Qn).scale(79.4188).clipAngle(179.999)};function er(t,e){return[t,_(S((l+e)/2))]}er.invert=function(t,e){return[t,2*v(b(e))-l]};var nr=function(){return rr(er).scale(961/f)};function rr(t){var e,n,r,i=qn(t),o=i.center,a=i.scale,u=i.translate,l=i.clipExtent,c=null;function f(){var o=s*a(),u=i(ie(i.rotate()).invert([0,0]));return l(null==c?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===er?[[Math.max(u[0]-o,c),e],[Math.min(u[0]+o,n),r]]:[[c,Math.max(u[1]-o,e)],[n,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),f()):a()},i.translate=function(t){return arguments.length?(u(t),f()):u()},i.center=function(t){return arguments.length?(o(t),f()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),f()):null==c?null:[[c,e],[n,r]]},f()}function ir(t){return S((l+t)/2)}function or(t,e){var n=y(t),r=t===e?w(t):_(n/y(e))/_(ir(e)/ir(t)),i=n*x(ir(t),r)/r;if(!r)return er;function o(t,e){i>0?e<-l+u&&(e=-l+u):e>l-u&&(e=l-u);var n=i/x(ir(e),r);return[n*w(r*t),i-n*y(r*t)]}return o.invert=function(t,e){var n=i-e,o=k(r)*E(t*t+n*n);return[m(t,d(n))/r*k(n),2*v(x(i/o,1/r))-l]},o}var ar=function(){return Wn(or).scale(109.5).parallels([30,30])};function ur(t,e){return[t,e]}ur.invert=ur;var sr=function(){return qn(ur).scale(152.63)};function lr(t,e){var n=y(t),r=t===e?w(t):(n-y(e))/(e-t),i=n/r+t;if(d(r)<u)return ur;function o(t,e){var n=i-e,o=r*t;return[n*w(o),i-n*y(o)]}return o.invert=function(t,e){var n=i-e;return[m(t,d(n))/r*k(n),i-k(r)*E(t*t+n*n)]},o}var cr=function(){return Wn(lr).scale(131.154).center([0,13.9389])},fr=1.340264,hr=-.081106,pr=893e-6,dr=.003796,vr=E(3)/2;function mr(t,e){var n=A(vr*w(e)),r=n*n,i=r*r*r;return[t*y(n)/(vr*(fr+3*hr*r+i*(7*pr+9*dr*r))),n*(fr+hr*r+i*(pr+dr*r))]}mr.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(fr+hr*i+o*(pr+dr*i))-e)/(fr+3*hr*i+o*(7*pr+9*dr*i)))*r)*i*i,!(d(n)<1e-12));++a);return[vr*t*(fr+3*hr*i+o*(7*pr+9*dr*i))/y(r),A(w(r)/vr)]};function yr(t,e){var n=y(e),r=y(t)*n;return[n*w(t)/r,w(e)/r]}yr.invert=$n(v);var gr=function(){return qn(yr).scale(144.049).clipAngle(60)};function br(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?je:Tn({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}var _r=function(){var t,e,n,r,i,o,a=1,u=0,s=0,l=1,c=1,f=je,h=null,p=je;function d(){return r=i=null,o}return o={stream:function(t){return r&&i===t?r:r=f(p(i=t))},postclip:function(r){return arguments.length?(p=r,h=t=e=n=null,d()):p},clipExtent:function(r){return arguments.length?(p=null==r?(h=t=e=n=null,je):ke(h=+r[0][0],t=+r[0][1],e=+r[1][0],n=+r[1][1]),d()):null==h?null:[[h,t],[e,n]]},scale:function(t){return arguments.length?(f=br((a=+t)*l,a*c,u,s),d()):a},translate:function(t){return arguments.length?(f=br(a*l,a*c,u=+t[0],s=+t[1]),d()):[u,s]},reflectX:function(t){return arguments.length?(f=br(a*(l=t?-1:1),a*c,u,s),d()):l<0},reflectY:function(t){return arguments.length?(f=br(a*l,a*(c=t?-1:1),u,s),d()):c<0},fitExtent:function(t,e){return Pn(o,t,e)},fitSize:function(t,e){return zn(o,t,e)},fitWidth:function(t,e){return Rn(o,t,e)},fitHeight:function(t,e){return In(o,t,e)}}};function xr(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}xr.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(d(n)>u&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var wr=function(){return qn(xr).scale(175.295)};function kr(t,e){return[y(e)*w(t),w(e)]}kr.invert=$n(A);var Er=function(){return qn(kr).scale(249.5).clipAngle(90+u)};function Sr(t,e){var n=y(e),r=1+y(t)*n;return[n*w(t)/r,w(e)/r]}Sr.invert=$n(function(t){return 2*v(t)});var Or=function(){return qn(Sr).scale(250).clipAngle(142)};function Ar(t,e){return[_(S((l+e)/2)),-t]}Ar.invert=function(t,e){return[-e,2*v(b(t))-l]};var Mr=function(){var t=rr(Ar),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};n.d(e,"c",function(){return X}),n.d(e,"f",function(){return Nt}),n.d(e,"g",function(){return Kt}),n.d(e,"m",function(){return Oe}),n.d(e,"r",function(){return Cn}),n.d(e,"a",function(){return Xn}),n.d(e,"b",function(){return Zn}),n.d(e,"d",function(){return Jn}),n.d(e,"e",function(){return tr}),n.d(e,"h",function(){return ar}),n.d(e,"i",function(){return Gn}),n.d(e,"j",function(){return cr}),n.d(e,"k",function(){return sr}),n.d(e,"l",function(){return gr}),n.d(e,"n",function(){return _r}),n.d(e,"o",function(){return nr}),n.d(e,"p",function(){return wr}),n.d(e,"q",function(){return Er}),n.d(e,"s",function(){return Or}),n.d(e,"t",function(){return Mr})},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(170)},function(t,e,n){"use strict";var r=n(11);function i(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function o(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function a(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}var u,s,l,c,f,h={"-":"",_:" ",0:"0"},p=/^\s*\d+/,d=/^%/,v=/[\\^$*+?|[\]().{}]/g;function m(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function y(t){return t.replace(v,"\\$&")}function g(t){return new RegExp("^(?:"+t.map(y).join("|")+")","i")}function b(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function _(t,e,n){var r=p.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function x(t,e,n){var r=p.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function w(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function k(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function E(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function S(t,e,n){var r=p.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function O(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function A(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function M(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function C(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function T(t,e,n){var r=p.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function j(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function D(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function P(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function z(t,e,n){var r=p.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function R(t,e,n){var r=p.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function I(t,e,n){var r=d.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function F(t,e,n){var r=p.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function L(t,e,n){var r=p.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function N(t,e){return m(t.getDate(),e,2)}function B(t,e){return m(t.getHours(),e,2)}function U(t,e){return m(t.getHours()%12||12,e,2)}function q(t,e){return m(1+r.a.count(Object(r.k)(t),t),e,3)}function V(t,e){return m(t.getMilliseconds(),e,3)}function W(t,e){return V(t,e)+"000"}function H(t,e){return m(t.getMonth()+1,e,2)}function G(t,e){return m(t.getMinutes(),e,2)}function X(t,e){return m(t.getSeconds(),e,2)}function Z(t){var e=t.getDay();return 0===e?7:e}function Y(t,e){return m(r.h.count(Object(r.k)(t),t),e,2)}function $(t,e){var n=t.getDay();return t=n>=4||0===n?Object(r.i)(t):r.i.ceil(t),m(r.i.count(Object(r.k)(t),t)+(4===Object(r.k)(t).getDay()),e,2)}function K(t){return t.getDay()}function J(t,e){return m(r.e.count(Object(r.k)(t),t),e,2)}function Q(t,e){return m(t.getFullYear()%100,e,2)}function tt(t,e){return m(t.getFullYear()%1e4,e,4)}function et(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+m(e/60|0,"0",2)+m(e%60,"0",2)}function nt(t,e){return m(t.getUTCDate(),e,2)}function rt(t,e){return m(t.getUTCHours(),e,2)}function it(t,e){return m(t.getUTCHours()%12||12,e,2)}function ot(t,e){return m(1+r.l.count(Object(r.v)(t),t),e,3)}function at(t,e){return m(t.getUTCMilliseconds(),e,3)}function ut(t,e){return at(t,e)+"000"}function st(t,e){return m(t.getUTCMonth()+1,e,2)}function lt(t,e){return m(t.getUTCMinutes(),e,2)}function ct(t,e){return m(t.getUTCSeconds(),e,2)}function ft(t){var e=t.getUTCDay();return 0===e?7:e}function ht(t,e){return m(r.s.count(Object(r.v)(t),t),e,2)}function pt(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Object(r.t)(t):r.t.ceil(t),m(r.t.count(Object(r.v)(t),t)+(4===Object(r.v)(t).getUTCDay()),e,2)}function dt(t){return t.getUTCDay()}function vt(t,e){return m(r.p.count(Object(r.v)(t),t),e,2)}function mt(t,e){return m(t.getUTCFullYear()%100,e,2)}function yt(t,e){return m(t.getUTCFullYear()%1e4,e,4)}function gt(){return"+0000"}function bt(){return"%"}function _t(t){return+t}function xt(t){return Math.floor(+t/1e3)}u=function(t){var e=t.dateTime,n=t.date,u=t.time,s=t.periods,l=t.days,c=t.shortDays,f=t.months,p=t.shortMonths,d=g(s),v=b(s),m=g(l),y=b(l),wt=g(c),kt=b(c),Et=g(f),St=b(f),Ot=g(p),At=b(p),Mt={a:function(t){return c[t.getDay()]},A:function(t){return l[t.getDay()]},b:function(t){return p[t.getMonth()]},B:function(t){return f[t.getMonth()]},c:null,d:N,e:N,f:W,H:B,I:U,j:q,L:V,m:H,M:G,p:function(t){return s[+(t.getHours()>=12)]},Q:_t,s:xt,S:X,u:Z,U:Y,V:$,w:K,W:J,x:null,X:null,y:Q,Y:tt,Z:et,"%":bt},Ct={a:function(t){return c[t.getUTCDay()]},A:function(t){return l[t.getUTCDay()]},b:function(t){return p[t.getUTCMonth()]},B:function(t){return f[t.getUTCMonth()]},c:null,d:nt,e:nt,f:ut,H:rt,I:it,j:ot,L:at,m:st,M:lt,p:function(t){return s[+(t.getUTCHours()>=12)]},Q:_t,s:xt,S:ct,u:ft,U:ht,V:pt,w:dt,W:vt,x:null,X:null,y:mt,Y:yt,Z:gt,"%":bt},Tt={a:function(t,e,n){var r=wt.exec(e.slice(n));return r?(t.w=kt[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.w=y[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=Ot.exec(e.slice(n));return r?(t.m=At[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=Et.exec(e.slice(n));return r?(t.m=St[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return Pt(t,e,n,r)},d:C,e:C,f:R,H:j,I:j,j:T,L:z,m:M,M:D,p:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.p=v[r[0].toLowerCase()],n+r[0].length):-1},Q:F,s:L,S:P,u:x,U:w,V:k,w:_,W:E,x:function(t,e,r){return Pt(t,n,e,r)},X:function(t,e,n){return Pt(t,u,e,n)},y:O,Y:S,Z:A,"%":I};function jt(t,e){return function(n){var r,i,o,a=[],u=-1,s=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++u<l;)37===t.charCodeAt(u)&&(a.push(t.slice(s,u)),null!=(i=h[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),s=u+1);return a.push(t.slice(s,u)),a.join("")}}function Dt(t,e){return function(n){var i,u,s=a(1900);if(Pt(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("p"in s&&(s.H=s.H%12+12*s.p),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(u=(i=o(a(s.y))).getUTCDay(),i=u>4||0===u?r.p.ceil(i):Object(r.p)(i),i=r.l.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(u=(i=e(a(s.y))).getDay(),i=u>4||0===u?r.e.ceil(i):Object(r.e)(i),i=r.a.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),u="Z"in s?o(a(s.y)).getUTCDay():e(a(s.y)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(u+5)%7:s.w+7*s.U-(u+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,o(s)):e(s)}}function Pt(t,e,n,r){for(var i,o,a=0,u=e.length,s=n.length;a<u;){if(r>=s)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=Tt[i in h?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return Mt.x=jt(n,Mt),Mt.X=jt(u,Mt),Mt.c=jt(e,Mt),Ct.x=jt(n,Ct),Ct.X=jt(u,Ct),Ct.c=jt(e,Ct),{format:function(t){var e=jt(t+="",Mt);return e.toString=function(){return t},e},parse:function(t){var e=Dt(t+="",i);return e.toString=function(){return t},e},utcFormat:function(t){var e=jt(t+="",Ct);return e.toString=function(){return t},e},utcParse:function(t){var e=Dt(t,o);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),s=u.format,l=u.parse,c=u.utcFormat,f=u.utcParse;Date.prototype.toISOString||c("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||f("%Y-%m-%dT%H:%M:%S.%LZ");n.d(e,"a",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return c}),n.d(e,"d",function(){return f})},function(t,e,n){"use strict";function r(t,e){return t.parent===e.parent?1:2}function i(t,e){return t+e.x}function o(t,e){return Math.max(t,e.y)}var a=function(){var t=r,e=1,n=1,a=!1;function u(r){var u,s=0;r.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(i,0)/t.length}(n),e.y=function(t){return 1+t.reduce(o,0)}(n)):(e.x=u?s+=t(e,u):0,e.y=0,u=e)});var l=function(t){for(var e;e=t.children;)t=e[0];return t}(r),c=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(r),f=l.x-t(l,c)/2,h=c.x+t(c,l)/2;return r.eachAfter(a?function(t){t.x=(t.x-r.x)*e,t.y=(r.y-t.y)*n}:function(t){t.x=(t.x-f)/(h-f)*e,t.y=(1-(r.y?t.y/r.y:1))*n})}return u.separation=function(e){return arguments.length?(t=e,u):t},u.size=function(t){return arguments.length?(a=!1,e=+t[0],n=+t[1],u):a?null:[e,n]},u.nodeSize=function(t){return arguments.length?(a=!0,e=+t[0],n=+t[1],u):a?[e,n]:null},u};function u(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function s(t,e){var n,r,i,o,a,u=new h(t),s=+t.value&&(u.value=t.value),c=[u];for(null==e&&(e=l);n=c.pop();)if(s&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new h(i[o])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(f)}function l(t){return t.children}function c(t){t.data=t.data.data}function f(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function h(t){this.data=t,this.depth=this.height=0,this.parent=null}h.prototype=s.prototype={constructor:h,count:function(){return this.eachAfter(u)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return s(this).eachBefore(c)}};var p=Array.prototype.slice;var d=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(p.call(t))).length,o=[];r<i;)e=t[r],n&&y(n,e)?++r:(n=b(o=v(o,e)),r=0);return n};function v(t,e){var n,r;if(g(e,t))return[e];for(n=0;n<t.length;++n)if(m(e,t[n])&&g(_(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(m(_(t[n],t[r]),e)&&m(_(t[n],e),t[r])&&m(_(t[r],e),t[n])&&g(x(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function m(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function y(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function g(t,e){for(var n=0;n<e.length;++n)if(!y(t,e[n]))return!1;return!0}function b(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return _(t[0],t[1]);case 3:return x(t[0],t[1],t[2])}var e}function _(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,u=e.r,s=o-n,l=a-r,c=u-i,f=Math.sqrt(s*s+l*l);return{x:(n+o+s/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+u)/2}}function x(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,u=e.y,s=e.r,l=n.x,c=n.y,f=n.r,h=r-a,p=r-l,d=i-u,v=i-c,m=s-o,y=f-o,g=r*r+i*i-o*o,b=g-a*a-u*u+s*s,_=g-l*l-c*c+f*f,x=p*d-h*v,w=(d*_-v*b)/(2*x)-r,k=(v*m-d*y)/x,E=(p*b-h*_)/(2*x)-i,S=(h*y-p*m)/x,O=k*k+S*S-1,A=2*(o+w*k+E*S),M=w*w+E*E-o*o,C=-(O?(A+Math.sqrt(A*A-4*O*M))/(2*O):M/A);return{x:r+w+k*C,y:i+E+S*C,r:C}}function w(t,e,n){var r,i,o,a,u=t.x-e.x,s=t.y-e.y,l=u*u+s*s;l?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(l+a-i)/(2*l),o=Math.sqrt(Math.max(0,a/l-r*r)),n.x=t.x-r*u-o*s,n.y=t.y-r*s+o*u):(r=(l+i-a)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*u-o*s,n.y=e.y+r*s+o*u)):(n.x=e.x+n.r,n.y=e.y)}function k(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function E(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function S(t){this._=t,this.next=null,this.previous=null}function O(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,u,s,l,c,f;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;w(n,e,r=t[2]),e=new S(e),n=new S(n),r=new S(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(u=3;u<i;++u){w(e._,n._,r=t[u]),r=new S(r),s=n.next,l=e.previous,c=n._.r,f=e._.r;do{if(c<=f){if(k(s._,r._)){n=s,e.next=n,n.previous=e,--u;continue t}c+=s._.r,s=s.next}else{if(k(l._,r._)){(e=l).next=n,n.previous=e,--u;continue t}f+=l._.r,l=l.previous}}while(s!==l.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=E(e);(r=r.next)!==n;)(a=E(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=d(e),u=0;u<i;++u)(e=t[u]).x-=r.x,e.y-=r.y;return r.r}function A(t){if("function"!==typeof t)throw new Error;return t}function M(){return 0}var C=function(t){return function(){return t}};function T(t){return Math.sqrt(t.value)}var j=function(){var t=null,e=1,n=1,r=M;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(D(t)).eachAfter(P(r,.5)).eachBefore(z(1)):i.eachBefore(D(T)).eachAfter(P(M,1)).eachAfter(P(r,i.r/Math.min(e,n))).eachBefore(z(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=null==(n=e)?null:A(n),i):t;var n},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:C(+t),i):r},i};function D(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function P(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,u=t(n)*e||0;if(u)for(i=0;i<a;++i)r[i].r+=u;if(o=O(r),u)for(i=0;i<a;++i)r[i].r-=u;n.r=o+u}}}function z(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var R=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},I=function(t,e,n,r,i){for(var o,a=t.children,u=-1,s=a.length,l=t.value&&(r-e)/t.value;++u<s;)(o=a[u]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*l},F=function(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&I(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,u=r.y1-n;a<i&&(i=a=(i+a)/2),u<o&&(o=u=(o+u)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=u}}(e,o)),r&&i.eachBefore(R),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},L="$",N={depth:-1},B={};function U(t){return t.id}function q(t){return t.parentId}var V=function(){var t=U,e=q;function n(n){var r,i,o,a,u,s,l,c=n.length,p=new Array(c),d={};for(i=0;i<c;++i)r=n[i],u=p[i]=new h(r),null!=(s=t(r,i,n))&&(s+="")&&(d[l=L+(u.id=s)]=l in d?B:u);for(i=0;i<c;++i)if(u=p[i],null!=(s=e(n[i],i,n))&&(s+="")){if(!(a=d[L+s]))throw new Error("missing: "+s);if(a===B)throw new Error("ambiguous: "+s);a.children?a.children.push(u):a.children=[u],u.parent=a}else{if(o)throw new Error("multiple roots");o=u}if(!o)throw new Error("no root");if(o.parent=N,o.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(f),o.parent=null,c>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=A(e),n):t},n.parentId=function(t){return arguments.length?(e=A(t),n):e},n};function W(t,e){return t.parent===e.parent?1:2}function H(t){var e=t.children;return e?e[0]:t.t}function G(t){var e=t.children;return e?e[e.length-1]:t.t}function X(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Z(t,e,n){return t.a.parent===e.parent?t.a:n}function Y(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Y.prototype=Object.create(h.prototype);var $=function(){var t=W,e=1,n=1,r=null;function i(i){var s=function(t){for(var e,n,r,i,o,a=new Y(t,0),u=[a];e=u.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)u.push(n=e.children[i]=new Y(r[i],i)),n.parent=e;return(a.parent=new Y(null,0)).children=[a],a}(i);if(s.eachAfter(o),s.parent.m=-s.z,s.eachBefore(a),r)i.eachBefore(u);else{var l=i,c=i,f=i;i.eachBefore(function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)});var h=l===c?1:t(l,c)/2,p=h-l.x,d=e/(c.x+h+p),v=n/(f.depth||1);i.eachBefore(function(t){t.x=(t.x+p)*d,t.y=t.depth*v})}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,u=n,s=o.parent.children[0],l=o.m,c=a.m,f=u.m,h=s.m;u=G(u),o=H(o),u&&o;)s=H(s),(a=G(a)).a=e,(i=u.z+f-o.z-l+t(u._,o._))>0&&(X(Z(u,e,r),e,i),l+=i,c+=i),f+=u.m,l+=o.m,h+=s.m,c+=a.m;u&&!G(a)&&(a.t=u,a.m+=f-c),o&&!H(s)&&(s.t=o,s.m+=l-h,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},K=function(t,e,n,r,i){for(var o,a=t.children,u=-1,s=a.length,l=t.value&&(i-n)/t.value;++u<s;)(o=a[u]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*l},J=(1+Math.sqrt(5))/2;function Q(t,e,n,r,i,o){for(var a,u,s,l,c,f,h,p,d,v,m,y=[],g=e.children,b=0,_=0,x=g.length,w=e.value;b<x;){s=i-n,l=o-r;do{c=g[_++].value}while(!c&&_<x);for(f=h=c,m=c*c*(v=Math.max(l/s,s/l)/(w*t)),d=Math.max(h/m,m/f);_<x;++_){if(c+=u=g[_].value,u<f&&(f=u),u>h&&(h=u),m=c*c*v,(p=Math.max(h/m,m/f))>d){c-=u;break}d=p}y.push(a={value:c,dice:s<l,children:g.slice(b,_)}),a.dice?I(a,n,r,i,w?r+=l*c/w:o):K(a,n,r,w?n+=s*c/w:i,o),w-=c,b=_}return y}var tt=function t(e){function n(t,n,r,i,o){Q(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(J),et=function(){var t=tt,e=!1,n=1,r=1,i=[0],o=M,a=M,u=M,s=M,l=M;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(R),t}function f(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,f=e.x1-n,h=e.y1-n;f<r&&(r=f=(r+f)/2),h<c&&(c=h=(c+h)/2),e.x0=r,e.y0=c,e.x1=f,e.y1=h,e.children&&(n=i[e.depth+1]=o(e)/2,r+=l(e)-n,c+=a(e)-n,(f-=u(e)-n)<r&&(r=f=(r+f)/2),(h-=s(e)-n)<c&&(c=h=(c+h)/2),t(e,r,c,f,h))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=A(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(o="function"===typeof t?t:C(+t),c):o},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(a="function"===typeof t?t:C(+t),c):a},c.paddingRight=function(t){return arguments.length?(u="function"===typeof t?t:C(+t),c):u},c.paddingBottom=function(t){return arguments.length?(s="function"===typeof t?t:C(+t),c):s},c.paddingLeft=function(t){return arguments.length?(l="function"===typeof t?t:C(+t),c):l},c},nt=function(t,e,n,r,i){var o,a,u=t.children,s=u.length,l=new Array(s+1);for(l[0]=a=o=0;o<s;++o)l[o+1]=a+=u[o].value;!function t(e,n,r,i,o,a,s){if(e>=n-1){var c=u[e];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=s)}var f=l[e],h=r/2+f,p=e+1,d=n-1;for(;p<d;){var v=p+d>>>1;l[v]<h?p=v+1:d=v}h-l[p-1]<l[p]-h&&e+1<p&&--p;var m=l[p]-f,y=r-m;if(a-i>s-o){var g=(i*y+a*m)/r;t(e,p,m,i,o,g,s),t(p,n,y,g,o,a,s)}else{var b=(o*y+s*m)/r;t(e,p,m,i,o,a,b),t(p,n,y,i,b,a,s)}}(0,s,t.value,e,n,r,i)},rt=function(t,e,n,r,i){(1&t.depth?K:I)(t,e,n,r,i)},it=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,u,s,l,c,f=-1,h=a.length,p=t.value;++f<h;){for(s=(u=a[f]).children,l=u.value=0,c=s.length;l<c;++l)u.value+=s[l].value;u.dice?I(u,n,r,i,r+=(o-r)*u.value/p):K(u,n,r,n+=(i-n)*u.value/p,o),p-=u.value}else t._squarify=a=Q(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(J);n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return j}),n.d(e,"d",function(){return F}),n.d(e,"e",function(){return V}),n.d(e,"f",function(){return $}),n.d(e,"g",function(){return et}),n.d(e,"h",function(){return nt}),n.d(e,"i",function(){return I}),n.d(e,"k",function(){return K}),n.d(e,"l",function(){return rt}),n.d(e,"m",function(){return tt}),n.d(e,"j",function(){return it})},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(139),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(t,e,n){return e in t?(0,o.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(139),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){"use strict";var r=Math.PI,i=2*r,o=i-1e-6;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function u(){return new a}a.prototype=u.prototype={constructor:a,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,i,o){t=+t,e=+e,n=+n,i=+i,o=+o;var a=this._x1,u=this._y1,s=n-t,l=i-e,c=a-t,f=u-e,h=c*c+f*f;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(f*s-l*c)>1e-6&&o){var p=n-a,d=i-u,v=s*s+l*l,m=p*p+d*d,y=Math.sqrt(v),g=Math.sqrt(h),b=o*Math.tan((r-Math.acos((v+h-m)/(2*y*g)))/2),_=b/g,x=b/y;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(e+_*f)),this._+="A"+o+","+o+",0,0,"+ +(f*p>c*d)+","+(this._x1=t+x*s)+","+(this._y1=e+x*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,a,u,s){t=+t,e=+e;var l=(n=+n)*Math.cos(a),c=n*Math.sin(a),f=t+l,h=e+c,p=1^s,d=s?a-u:u-a;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+f+","+h:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+f+","+h),n&&(d<0&&(d=d%i+i),d>o?this._+="A"+n+","+n+",0,1,"+p+","+(t-l)+","+(e-c)+"A"+n+","+n+",0,1,"+p+","+(this._x1=f)+","+(this._y1=h):d>1e-6&&(this._+="A"+n+","+n+",0,"+ +(d>=r)+","+p+","+(this._x1=t+n*Math.cos(u))+","+(this._y1=e+n*Math.sin(u))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var s=u;n.d(e,"a",function(){return s})},function(t,e,n){"use strict";n.r(e);var r={value:function(){}};function i(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new o(r)}function o(t){this._=t}function a(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function u(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=r,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}o.prototype=i.prototype={constructor:o,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),s=-1,l=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++s<l;)if(n=(t=o[s]).type)i[n]=u(i[n],t.name,e);else if(null==e)for(n in i)i[n]=u(i[n],t.name,null);return this}for(;++s<l;)if((n=(t=o[s]).type)&&(n=a(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new o(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var s=i;n.d(e,"dispatch",function(){return s})},function(t,e,n){"use strict";var r,i,o=0,a=0,u=0,s=1e3,l=0,c=0,f=0,h="object"===typeof performance&&performance.now?performance:Date,p="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function d(){return c||(p(v),c=h.now()+f)}function v(){c=0}function m(){this._call=this._time=this._next=null}function y(t,e,n){var r=new m;return r.restart(t,e,n),r}function g(){c=(l=h.now())+f,o=a=0;try{!function(){d(),++o;for(var t,e=r;e;)(t=c-e._time)>=0&&e._call.call(null,t),e=e._next;--o}()}finally{o=0,function(){var t,e,n=r,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:r=e);i=t,_(o)}(),c=0}}function b(){var t=h.now(),e=t-l;e>s&&(f-=e,l=t)}function _(t){o||(a&&(a=clearTimeout(a)),t-c>24?(t<1/0&&(a=setTimeout(g,t-h.now()-f)),u&&(u=clearInterval(u))):(u||(l=h.now(),u=setInterval(b,s)),o=1,p(g)))}m.prototype=y.prototype={constructor:m,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?d():+n)+(null==e?0:+e),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=t,this._time=n,_()},stop:function(){this._call&&(this._call=null,this._time=1/0,_())}};var x=function(t,e,n){var r=new m;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r},w=function(t,e,n){var r=new m,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?d():+n,r.restart(function o(a){a+=i,r.restart(o,i+=e,n),t(a)},e,n),r)};n.d(e,"b",function(){return d}),n.d(e,"d",function(){return y}),n.d(e,"c",function(){return x}),n.d(e,"a",function(){return w})},function(t,e){var n=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&t.push(a)}else if("object"===o)for(var u in r)n.call(r,u)&&r[u]&&t.push(u)}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}},function(t,e,n){var r=n(113),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){var r=n(102)("wks"),i=n(74),o=n(40).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){"use strict";function r(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,u,s,l,c,f,h,p=t._root,d={data:r},v=t._x0,m=t._y0,y=t._x1,g=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((l=e>=(o=(v+y)/2))?v=o:y=o,(c=n>=(a=(m+g)/2))?m=a:g=a,i=p,!(p=p[f=c<<1|l]))return i[f]=d,t;if(u=+t._x.call(null,p.data),s=+t._y.call(null,p.data),e===u&&n===s)return d.next=p,i?i[f]=d:t._root=d,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(l=e>=(o=(v+y)/2))?v=o:y=o,(c=n>=(a=(m+g)/2))?m=a:g=a}while((f=c<<1|l)===(h=(s>=a)<<1|u>=o));return i[h]=p,i[f]=d,t}var i=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function o(t){return t[0]}function a(t){return t[1]}function u(t,e,n){var r=new s(null==e?o:e,null==n?a:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function s(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function l(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var c=u.prototype=s.prototype;c.copy=function(){var t,e,n=new s(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=l(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=l(e));return n},c.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return r(this.cover(e,n),e,n,t)},c.addAll=function(t){var e,n,i,o,a=t.length,u=new Array(a),s=new Array(a),l=1/0,c=1/0,f=-1/0,h=-1/0;for(n=0;n<a;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(u[n]=i,s[n]=o,i<l&&(l=i),i>f&&(f=i),o<c&&(c=o),o>h&&(h=o));if(l>f||c>h)return this;for(this.cover(l,c).cover(f,h),n=0;n<a;++n)r(this,u[n],s[n],t[n]);return this},c.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,u,s=i-n,l=this._root;n>t||t>=i||r>e||e>=o;)switch(u=(e<r)<<1|t<n,(a=new Array(4))[u]=l,l=a,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},c.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},c.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},c.find=function(t,e,n){var r,o,a,u,s,l,c,f=this._x0,h=this._y0,p=this._x1,d=this._y1,v=[],m=this._root;for(m&&v.push(new i(m,f,h,p,d)),null==n?n=1/0:(f=t-n,h=e-n,p=t+n,d=e+n,n*=n);l=v.pop();)if(!(!(m=l.node)||(o=l.x0)>p||(a=l.y0)>d||(u=l.x1)<f||(s=l.y1)<h))if(m.length){var y=(o+u)/2,g=(a+s)/2;v.push(new i(m[3],y,g,u,s),new i(m[2],o,g,y,s),new i(m[1],y,a,u,g),new i(m[0],o,a,y,g)),(c=(e>=g)<<1|t>=y)&&(l=v[v.length-1],v[v.length-1]=v[v.length-1-c],v[v.length-1-c]=l)}else{var b=t-+this._x.call(null,m.data),_=e-+this._y.call(null,m.data),x=b*b+_*_;if(x<n){var w=Math.sqrt(n=x);f=t-w,h=e-w,p=t+w,d=e+w,r=m.data}}return r},c.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,u,s,l,c,f,h,p=this._root,d=this._x0,v=this._y0,m=this._x1,y=this._y1;if(!p)return this;if(p.length)for(;;){if((l=o>=(u=(d+m)/2))?d=u:m=u,(c=a>=(s=(v+y)/2))?v=s:y=s,e=p,!(p=p[f=c<<1|l]))return this;if(!p.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[h]=p:this._root=p),this):(this._root=i,this)},c.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},c.root=function(){return this._root},c.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},c.visit=function(t){var e,n,r,o,a,u,s=[],l=this._root;for(l&&s.push(new i(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,r=e.x0,o=e.y0,a=e.x1,u=e.y1)&&l.length){var c=(r+a)/2,f=(o+u)/2;(n=l[3])&&s.push(new i(n,c,f,a,u)),(n=l[2])&&s.push(new i(n,r,f,c,u)),(n=l[1])&&s.push(new i(n,c,o,a,f)),(n=l[0])&&s.push(new i(n,r,o,c,f))}return this},c.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new i(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var a,u=e.x0,s=e.y0,l=e.x1,c=e.y1,f=(u+l)/2,h=(s+c)/2;(a=o[0])&&n.push(new i(a,u,s,f,h)),(a=o[1])&&n.push(new i(a,f,s,l,h)),(a=o[2])&&n.push(new i(a,u,h,f,c)),(a=o[3])&&n.push(new i(a,f,h,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},c.x=function(t){return arguments.length?(this._x=t,this):this._x},c.y=function(t){return arguments.length?(this._y=t,this):this._y},n.d(e,"a",function(){return u})},function(t,e,n){var r=n(40),i=n(32),o=n(96),a=n(49),u=n(45),s=function t(e,n,s){var l,c,f,h=e&t.F,p=e&t.G,d=e&t.S,v=e&t.P,m=e&t.B,y=e&t.W,g=p?i:i[n]||(i[n]={}),b=g.prototype,_=p?r:d?r[n]:(r[n]||{}).prototype;for(l in p&&(s=n),s)(c=!h&&_&&void 0!==_[l])&&u(g,l)||(f=c?_[l]:s[l],g[l]=p&&"function"!=typeof _[l]?s[l]:m&&c?o(f,r):y&&_[l]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):v&&"function"==typeof f?o(Function.call,f):f,v&&((g.virtual||(g.virtual={}))[l]=f,e&t.R&&b&&!b[l]&&a(b,l,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(50),i=n(134),o=n(97),a=Object.defineProperty;e.f=n(44)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(u){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var r={},i={},o=34,a=10,u=13;function s(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function l(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function c(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function f(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+c(-e,6):e>9999?"+"+c(e,6):c(e,4))+"-"+c(t.getUTCMonth()+1,2)+"-"+c(t.getUTCDate(),2)+(o?"T"+c(n,2)+":"+c(r,2)+":"+c(i,2)+"."+c(o,3)+"Z":i?"T"+c(n,2)+":"+c(r,2)+":"+c(i,2)+"Z":r||n?"T"+c(n,2)+":"+c(r,2)+"Z":"")}var h=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function c(t,e){var s,l=[],c=t.length,f=0,h=0,p=c<=0,d=!1;function v(){if(p)return i;if(d)return d=!1,r;var e,s,l=f;if(t.charCodeAt(l)===o){for(;f++<c&&t.charCodeAt(f)!==o||t.charCodeAt(++f)===o;);return(e=f)>=c?p=!0:(s=t.charCodeAt(f++))===a?d=!0:s===u&&(d=!0,t.charCodeAt(f)===a&&++f),t.slice(l+1,e-1).replace(/""/g,'"')}for(;f<c;){if((s=t.charCodeAt(e=f++))===a)d=!0;else if(s===u)d=!0,t.charCodeAt(f)===a&&++f;else if(s!==n)continue;return t.slice(l,e)}return p=!0,t.slice(l,c)}for(t.charCodeAt(c-1)===a&&--c,t.charCodeAt(c-1)===u&&--c;(s=v())!==i;){for(var m=[];s!==r&&s!==i;)m.push(s),s=v();e&&null==(m=e(m,h++))||l.push(m)}return l}function h(e,n){return e.map(function(e){return n.map(function(t){return d(e[t])}).join(t)})}function p(e){return e.map(d).join(t)}function d(t){return null==t?"":t instanceof Date?f(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,i=c(t,function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=s(t);return function(r,i){return e(n(r),i,t)}}(t,e):s(t)});return i.columns=r||[],i},parseRows:c,format:function(e,n){return null==n&&(n=l(e)),[n.map(d).join(t)].concat(h(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=l(t)),h(t,e).join("\n")},formatRows:function(t){return t.map(p).join("\n")}}},p=h(","),d=p.parse,v=(p.parseRows,p.format,p.formatBody,p.formatRows,h("\t")),m=v.parse;v.parseRows,v.format,v.formatBody,v.formatRows;n.d(e,"b",function(){return h}),n.d(e,"a",function(){return d}),n.d(e,"c",function(){return m})},function(t,e,n){var r=n(189),i=n(194);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){t.exports=!n(52)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(137),i=n(99);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(41),i=n(60);t.exports=n(44)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(51);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(692),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,o.default)(t)}},function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"symbols",function(){return hc}),n.d(r,"gradient",function(){return pc}),n.d(r,"labels",function(){return dc});var i={};n.r(i),n.d(i,"aggregate",function(){return Vd}),n.d(i,"bin",function(){return Hd}),n.d(i,"collect",function(){return Zd}),n.d(i,"compare",function(){return Yd}),n.d(i,"countpattern",function(){return Kd}),n.d(i,"cross",function(){return Qd}),n.d(i,"density",function(){return yv}),n.d(i,"expression",function(){return _v}),n.d(i,"extent",function(){return wv}),n.d(i,"facet",function(){return Sv}),n.d(i,"field",function(){return Av}),n.d(i,"filter",function(){return Cv}),n.d(i,"flatten",function(){return jv}),n.d(i,"fold",function(){return Dv}),n.d(i,"formula",function(){return Pv}),n.d(i,"generate",function(){return zv}),n.d(i,"impute",function(){return Fv}),n.d(i,"joinaggregate",function(){return Lv}),n.d(i,"key",function(){return Bv}),n.d(i,"load",function(){return qv}),n.d(i,"lookup",function(){return Wv}),n.d(i,"multiextent",function(){return Hv}),n.d(i,"multivalues",function(){return Xv}),n.d(i,"params",function(){return Yv}),n.d(i,"pivot",function(){return $v}),n.d(i,"prefacet",function(){return Jv}),n.d(i,"project",function(){return Qv}),n.d(i,"proxy",function(){return tm}),n.d(i,"relay",function(){return em}),n.d(i,"sample",function(){return nm}),n.d(i,"sequence",function(){return rm}),n.d(i,"sieve",function(){return im}),n.d(i,"subflow",function(){return kv}),n.d(i,"tupleindex",function(){return om}),n.d(i,"values",function(){return am}),n.d(i,"window",function(){return fm});var o={};n.r(o),n.d(o,"bound",function(){return b_}),n.d(o,"identifier",function(){return w_}),n.d(o,"mark",function(){return k_}),n.d(o,"overlap",function(){return E_}),n.d(o,"render",function(){return D_}),n.d(o,"viewlayout",function(){return ex});var a={};n.r(a),n.d(a,"axisticks",function(){return sk}),n.d(a,"datajoin",function(){return lk}),n.d(a,"encode",function(){return hk}),n.d(a,"legendentries",function(){return wk}),n.d(a,"linkpath",function(){return Mk}),n.d(a,"pie",function(){return Ik}),n.d(a,"scale",function(){return Bk}),n.d(a,"sortitems",function(){return Wk}),n.d(a,"stack",function(){return Gk}),n.d(a,"validTicks",function(){return ok});var u={};n.r(u),n.d(u,"contour",function(){return rE}),n.d(u,"geojson",function(){return aE}),n.d(u,"geopath",function(){return dE}),n.d(u,"geopoint",function(){return vE}),n.d(u,"geoshape",function(){return mE}),n.d(u,"graticule",function(){return yE}),n.d(u,"projection",function(){return gE});var s={};n.r(s),n.d(s,"force",function(){return NE});var l={};n.r(l),n.d(l,"nest",function(){return XE}),n.d(l,"pack",function(){return QE}),n.d(l,"partition",function(){return nS}),n.d(l,"stratify",function(){return iS}),n.d(l,"tree",function(){return uS}),n.d(l,"treelinks",function(){return lS}),n.d(l,"treemap",function(){return hS});var c={};n.r(c),n.d(c,"voronoi",function(){return vS});var f={};n.r(f),n.d(f,"wordcloud",function(){return TS});var h={};n.r(h),n.d(h,"crossfilter",function(){return US}),n.d(h,"resolvefilter",function(){return VS});var p=n(2),d=n.n(p),v=n(163),m=n(3),y=n(0),g=n(164),b=n.n(g),_=n(165),x=n.n(_),w=n(83),k=n.n(w);function E(t){return!!t.or}function S(t){return!!t.and}function O(t){return!!t.not}function A(t,e){return O(t)?{not:A(t.not,e)}:S(t)?{and:t.and.map(function(t){return A(t,e)})}:E(t)?{or:t.or.map(function(t){return A(t,e)})}:e(t)}var M=x.a,C=b.a;function T(t,e){var n={},r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;t.hasOwnProperty(s)&&(n[s]=t[s])}}catch(l){i=!0,o=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}function j(t,e){var n=Object.assign({},t),r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){delete n[a.value]}}catch(s){i=!0,o=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}Set.prototype.toJSON=function(){return"Set(".concat(Object(m.a)(this).map(function(t){return k()(t)}).join(","),")")};var D=k.a;function P(t){if(Object(y.C)(t))return t;var e=Object(y.F)(t)?t:k()(t);if(e.length<250)return e;for(var n=0,r=0;r<e.length;r++){n=(n<<5)-n+e.charCodeAt(r),n&=n}return n}function z(t){return!1===t||null===t}function R(t,e){return t.indexOf(e)>-1}function I(t,e){for(var n=0,r=0;r<t.length;r++)if(e(t[r],r,n++))return!0;return!1}function F(t,e){for(var n=0,r=0;r<t.length;r++)if(!e(t[r],r,n++))return!1;return!0}function L(t){var e;return(e=[]).concat.apply(e,Object(m.a)(t))}function N(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){t=B(t,o[i])}return t}function B(t,e){if("object"!==typeof e||null===e)return t;for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&("object"!==typeof e[n]||Object(y.y)(e[n])||null===e[n]?t[n]=e[n]:"object"!==typeof t[n]||null===t[n]?t[n]=N(Object(y.y)(e[n].constructor)?[]:{},e[n]):N(t[n],e[n]));return t}function U(t,e){var n,r=[],i={},o=!0,a=!1,u=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;(n=e(c))in i||(i[n]=1,r.push(c))}}catch(f){a=!0,u=f}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}return r}function q(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(e.has(u))return!0}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!1}function V(t){var e=new Set,n=!0,r=!1,i=void 0;try{for(var o,a=function(){var t=o.value,n=Object(y.T)(t).map(function(t,e){return 0===e?t:"[".concat(t,"]")});n.map(function(t,e){return n.slice(0,e+1).join("")}).forEach(function(t){return e.add(t)})},u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0)a()}catch(s){r=!0,i=s}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return e}function W(t,e){return q(V(t),V(e))}var H=Object.keys;function G(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function X(t){return H(t)}function Z(t){return!0===t||!1===t}function Y(t){var e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function $(t,e){return O(t)?"!("+$(t.not,e)+")":S(t)?"("+t.and.map(function(t){return $(t,e)}).join(") && (")+")":E(t)?"("+t.or.map(function(t){return $(t,e)}).join(") || (")+")":e(t)}function K(t,e){if(0===e.length)return!0;var n=e.shift();return K(t[n],e)&&delete t[n],0===H(t).length}function J(t){return t.charAt(0).toUpperCase()+t.substr(1)}function Q(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum",n=Object(y.T)(t),r=[],i=1;i<=n.length;i++){var o="[".concat(n.slice(0,i).map(y.U).join("]["),"]");r.push("".concat(e).concat(o))}return r.join(" && ")}function tt(t){return"".concat(Object(y.T)(t).map(function(t){return t.replace(".","\\.")}).join("\\."))}function et(t){return t?Object(y.T)(t).length:0}function nt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];if(void 0!==o)return o}}var rt=42;function it(t){var e=++rt;return t?String(t)+e:e}function ot(t){return(t%360+360)%360}var at=n(4),ut=n(5),st="area",lt="bar",ct="line",ft="point",ht="rect",pt="rule",dt="text",vt="tick",mt="trail",yt="circle",gt="square",bt="geoshape",_t={area:1,bar:1,line:1,point:1,text:1,tick:1,trail:1,rect:1,geoshape:1,rule:1,circle:1,square:1};function xt(t){return R(["line","area","trail"],t)}var wt=X(_t);function kt(t){return t.type}Object(y.Y)(wt);var Et=[].concat(["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],["fill","fillOpacity"]),St=["filled","color","tooltip"];function Ot(t){return!!t.mark}var At=function(){function t(e,n){Object(at.a)(this,t),this.name=e,this.run=n}return Object(ut.a)(t,[{key:"hasMatchingType",value:function(t,e){return!!Ot(t)&&(kt(n=t.mark)?n.type:n)===this.name;var n}}]),t}(),Mt=n(9);function Ct(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}var Tt={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1};function jt(t){return!!t&&!!t.argmin}function Dt(t){return!!t&&!!t.argmax}X(Tt);function Pt(t){return Object(y.F)(t)&&!!Tt[t]}var zt=["count","valid","missing","distinct"];function Rt(t){return t&&Object(y.F)(t)&&R(zt,t)}var It=["count","sum","distinct","valid","missing"],Ft=Object(y.Y)(["mean","average","median","q1","q3","min","max"]),Lt="row",Nt="column",Bt="facet",Ut="x",qt="y",Vt="x2",Wt="y2",Ht="latitude",Gt="longitude",Xt="latitude2",Zt="longitude2",Yt="color",$t="fill",Kt="stroke",Jt="shape",Qt="size",te="opacity",ee="fillOpacity",ne="strokeOpacity",re="strokeWidth",ie="text",oe="order",ae="detail",ue="key",se="tooltip",le="href";var ce={longitude:1,longitude2:1,latitude:1,latitude2:1},fe=X(ce),he=Object.assign({x:1,y:1,x2:1,y2:1},ce,{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1});function pe(t){return"color"===t||"fill"===t||"stroke"===t}var de={row:1,column:1,facet:1},ve=X(de),me=Object.assign({},he,de),ye=X(me),ge=(me.order,me.detail,Ct(me,["order","detail"])),be=(me.order,me.detail,me.row,me.column,me.facet,Ct(me,["order","detail","row","column","facet"]));X(ge),X(be);function _e(t){return!!me[t]}var xe=["x2","y2","latitude2","longitude2"];function we(t){return ke(t)!==t}function ke(t){switch(t){case"x2":return"x";case"y2":return"y";case"latitude2":return"latitude";case"longitude2":return"longitude"}return t}X(he),he.x,he.y,he.x2,he.y2,he.latitude,he.longitude,he.latitude2,he.longitude2;var Ee=Ct(he,["x","y","x2","y2","latitude","longitude","latitude2","longitude2"]),Se=X(Ee),Oe={x:1,y:1},Ae=X(Oe),Me=(Ee.text,Ee.tooltip,Ee.href,Ee.detail,Ee.key,Ee.order,Ct(Ee,["text","tooltip","href","detail","key","order"])),Ce=X(Me);var Te=Object.assign({},Oe,Me),je=X(Te);function De(t){return!!Te[t]}function Pe(t,e){return function(t){switch(t){case Yt:case $t:case Kt:case ae:case ue:case se:case le:case oe:case te:case ee:case ne:case re:case Bt:case Lt:case Nt:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",rect:"always",line:"always",trail:"always",area:"always",text:"always",geoshape:"always"};case Ut:case qt:case Ht:case Gt:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",rect:"always",line:"always",trail:"always",area:"always",text:"always"};case Vt:case Wt:case Xt:case Zt:return{rule:"always",bar:"always",rect:"always",area:"always",circle:"binned",point:"binned",square:"binned",tick:"binned"};case Qt:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Jt:return{point:"always",geoshape:"always"};case ie:return{text:"always"}}}(t)[e]}function ze(t){switch(t){case Ut:case qt:case Qt:case re:case te:case ee:case ne:case Vt:case Wt:return;case Bt:case Lt:case Nt:case Jt:case ie:case se:case le:return"discrete";case Yt:case $t:case Kt:return"flexible";case Ht:case Gt:case Xt:case Zt:case ae:case ue:case oe:return}throw new Error("rangeType not implemented for "+t)}var Re,Ie=Object(y.I)(y.d),Fe=Ie;function Le(){return Fe=Ie}function Ne(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Fe.warn.apply(Fe,arguments)}!function(t){t.INVALID_SPEC="Invalid spec",t.FIT_NON_SINGLE='Autosize "fit" only works for single views and layered views.',t.CANNOT_FIX_RANGE_STEP_WITH_FIT='Cannot use a fixed value of "rangeStep" when "autosize" is "fit".',t.cannotProjectOnChannelWithoutField=function(t){return'Cannot project a selection on encoding channel "'.concat(t,'", which has no field.')},t.nearestNotSupportForContinuous=function(t){return'The "nearest" transform is not supported for '.concat(t," marks.")},t.selectionNotSupported=function(t){return"Selection not supported for ".concat(t," yet")},t.selectionNotFound=function(t){return'Cannot find a selection named "'.concat(t,'"')},t.SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.",t.NO_INIT_SCALE_BINDINGS="Selections bound to scales cannot be separately initialized.",t.noSuchRepeatedValue=function(t){return'Unknown repeated value "'.concat(t,'".')},t.columnsNotSupportByRowCol=function(t){return'The "columns" property cannot be used when "'.concat(t,'" has nested row/column.')},t.CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated views yet (https://github.com/vega/vega-lite/issues/2415).",t.REPEAT_CANNOT_SHARE_AXIS="Axes cannot be shared in repeated views yet (https://github.com/vega/vega-lite/issues/2415).",t.unrecognizedParse=function(t){return'Unrecognized parse "'.concat(t,'".')},t.differentParse=function(t,e,n){return'An ancestor parsed field "'.concat(t,'" as ').concat(n," but a child wants to parse the field as ").concat(e,".")},t.invalidTransformIgnored=function(t){return"Ignoring an invalid transform: ".concat(D(t),".")},t.NO_FIELDS_NEEDS_AS='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.',t.encodingOverridden=function(t){return"Layer's shared ".concat(t.join(",")," channel ").concat(1===t.length?"is":"are"," overriden")},t.projectionOverridden=function(t){var e=t.parentProjection,n=t.projection;return"Layer's shared projection ".concat(D(e)," is overridden by a child projection ").concat(D(n),".")},t.primitiveChannelDef=function(t,e,n){return"Channel ".concat(t," is a ").concat(e,". Converted to {value: ").concat(D(n),"}.")},t.invalidFieldType=function(t){return'Invalid field type "'.concat(t,'"')},t.nonZeroScaleUsedWithLengthMark=function(t,e,n){var r=n.scaleType?"".concat(n.scaleType," scale"):n.zeroFalse?"scale with zero=false":"scale with custom domain that excludes zero";return"A ".concat(r," is used to encode ").concat(t,"'s ").concat(e,". This can be misleading as the ").concat("x"===e?"width":"height"," of the ").concat(t," can be arbitrary based on the scale domain. You may want to use point mark instead.")},t.invalidFieldTypeForCountAggregate=function(t,e){return'Invalid field type "'.concat(t,'" for aggregate: "').concat(e,'", using "quantitative" instead.')},t.invalidAggregate=function(t){return'Invalid aggregation operator "'.concat(t,'"')},t.missingFieldType=function(t,e){return'Missing type for channel "'.concat(t,'", using "').concat(e,'" instead.')},t.droppingColor=function(t,e){var n=e.fill,r=e.stroke;return"Dropping color ".concat(t," as the plot also has ")+(n&&r?"fill and stroke":n?"fill":"stroke")},t.emptyFieldDef=function(t,e){return"Dropping ".concat(D(t),' from channel "').concat(e,'" since it does not contain data field or value.')},t.latLongDeprecated=function(t,e,n){return"".concat(t,"-encoding with type ").concat(e," is deprecated. Replacing with ").concat(n,"-encoding.")},t.LINE_WITH_VARYING_SIZE="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.",t.incompatibleChannel=function(t,e,n){return"".concat(t,' dropped as it is incompatible with "').concat(e,'"').concat(n?" when ".concat(n):"",".")},t.invalidEncodingChannel=function(t){return"".concat(t,"-encoding is dropped as ").concat(t," is not a valid encoding channel.")},t.facetChannelShouldBeDiscrete=function(t){return"".concat(t," encoding should be discrete (ordinal / nominal / binned).")},t.facetChannelDropped=function(t){return"Facet encoding dropped as ".concat(t.join(" and ")," ").concat(t.length>1?"are":"is"," also specified.")},t.discreteChannelCannotEncode=function(t,e){return'Using discrete channel "'.concat(t,'" to encode "').concat(e,'" field can be misleading as it does not encode ').concat("ordinal"===e?"order":"magnitude",".")},t.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.",t.lineWithRange=function(t,e){return"Line mark is for continuous lines and thus cannot be used with ".concat(t&&e?"x2 and y2":t?"x2":"y2",". We will use the rule mark (line segments) instead.")},t.orientOverridden=function(t,e){return'Specified orient "'.concat(t,'" overridden with "').concat(e,'"')},t.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain",t.cannotUseScalePropertyWithNonColor=function(t){return'Cannot use the scale property "'.concat(t,'" with non-color channel.')},t.unaggregateDomainHasNoEffectForRawField=function(t){return"Using unaggregated domain with raw field has no effect (".concat(D(t),").")},t.unaggregateDomainWithNonSharedDomainOp=function(t){return'Unaggregated domain not applicable for "'.concat(t,'" since it produces values outside the origin domain of the source data.')},t.unaggregatedDomainWithLogScale=function(t){return"Unaggregated domain is currently unsupported for log scale (".concat(D(t),").")},t.cannotApplySizeToNonOrientedMark=function(t){return'Cannot apply size to non-oriented mark "'.concat(t,'".')},t.rangeStepDropped=function(t){return'rangeStep for "'.concat(t,'" is dropped as top-level ').concat("x"===t?"width":"height"," is provided.")},t.scaleTypeNotWorkWithChannel=function(t,e,n){return'Channel "'.concat(t,'" does not work with "').concat(e,'" scale. We are using "').concat(n,'" scale instead.')},t.scaleTypeNotWorkWithFieldDef=function(t,e){return'FieldDef does not work with "'.concat(t,'" scale. We are using "').concat(e,'" scale instead.')},t.scalePropertyNotWorkWithScaleType=function(t,e,n){return"".concat(n,"-scale's \"").concat(e,'" is dropped as it does not work with ').concat(t," scale.")},t.scaleTypeNotWorkWithMark=function(t,e){return'Scale type "'.concat(e,'" does not work with mark "').concat(t,'".')},t.mergeConflictingProperty=function(t,e,n,r){return"Conflicting ".concat(e.toString(),' property "').concat(t.toString(),'" (').concat(D(n)," and ").concat(D(r),").  Using ").concat(D(n),".")},t.independentScaleMeansIndependentGuide=function(t){return'Setting the scale to be independent for "'.concat(t,'" means we also have to set the guide (axis or legend) to be independent.')},t.domainSortDropped=function(t){return"Dropping sort property ".concat(D(t)," as unioned domains only support boolean or op 'count'.")},t.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",t.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",t.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.",t.cannotStackRangedMark=function(t){return'Cannot stack "'.concat(t,'" if there is already "').concat(t,'2"')},t.cannotStackNonLinearScale=function(t){return"Cannot stack non-linear scale (".concat(t,")")},t.stackNonSummativeAggregate=function(t){return'Stacking is applied even though the aggregate function is non-summative ("'.concat(t,'")')},t.invalidTimeUnit=function(t,e){return"Invalid ".concat(t,": ").concat(D(e))},t.dayReplacedWithDate=function(t){return'Time unit "'.concat(t,'" is not supported. We are replacing it with ').concat(t.replace("day","date"),".")},t.droppedDay=function(t){return"Dropping day from datetime ".concat(D(t)," as day cannot be combined with other units.")},t.errorBarCenterAndExtentAreNotNeeded=function(t,e){return"".concat(e?"extent ":"").concat(e&&t?"and ":"").concat(t?"center ":"").concat(e&&t?"are ":"is ","not needed when data are aggregated.")},t.errorBarCenterIsUsedWithWrongExtent=function(t,e,n){return"".concat(t," is not usually used with ").concat(e," for ").concat(n,".")},t.errorBarContinuousAxisHasCustomizedAggregate=function(t,e){return"Continuous axis should not have customized aggregation function ".concat(t,"; ").concat(e," already agregates the axis.")},t.errorBarCenterIsNotNeeded=function(t,e){return"Center is not needed to be specified in ".concat(e," when extent is ").concat(t,".")},t.errorBand1DNotSupport=function(t){return"1D error band does not support ".concat(t)},t.channelRequiredForBinned=function(t){return"Channel ".concat(t,' is required for "binned" bin')},t.domainRequiredForThresholdScale=function(t){return"Domain for ".concat(t," is required for threshold scale")}}(Re||(Re={}));var Be=2006;function Ue(t){return!!t&&(!!t.year||!!t.quarter||!!t.month||!!t.date||!!t.day||!!t.hours||!!t.minutes||!!t.seconds||!!t.milliseconds)}var qe,Ve=["january","february","march","april","may","june","july","august","september","october","november","december"],We=Ve.map(function(t){return t.substr(0,3)}),He=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Ge=He.map(function(t){return t.substr(0,3)});function Xe(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];if(e&&void 0!==t.day&&H(t).length>1&&(Ne(Re.droppedDay(t)),delete(t=C(t)).day),void 0!==t.year?n.push(t.year):void 0!==t.day?n.push(Be):n.push(0),void 0!==t.month){var r=e?function(t){if(Object(y.C)(t))return(t-1).toString();var e=t.toLowerCase(),n=Ve.indexOf(e);if(-1!==n)return n+"";var r=e.substr(0,3),i=We.indexOf(r);if(-1!==i)return i+"";throw new Error(Re.invalidTimeUnit("month",t))}(t.month):t.month;n.push(r)}else if(void 0!==t.quarter){var i=e?function(t){if(Object(y.C)(t))return t>4&&Ne(Re.invalidTimeUnit("quarter",t)),(t-1).toString();throw new Error(Re.invalidTimeUnit("quarter",t))}(t.quarter):t.quarter;n.push(i+"*3")}else n.push(0);if(void 0!==t.date)n.push(t.date);else if(void 0!==t.day){var o=e?function(t){if(Object(y.C)(t))return t%7+"";var e=t.toLowerCase(),n=He.indexOf(e);if(-1!==n)return n+"";var r=e.substr(0,3),i=Ge.indexOf(r);if(-1!==i)return i+"";throw new Error(Re.invalidTimeUnit("day",t))}(t.day):t.day;n.push(o+"+1")}else n.push(1);for(var a=0,u=["hours","minutes","seconds","milliseconds"];a<u.length;a++){var s=u[a];void 0!==t[s]?n.push(t[s]):n.push(0)}return t.utc?"utc(".concat(n.join(", "),")"):"datetime(".concat(n.join(", "),")")}function Ze(t){return!!t.row||!!t.column}function Ye(t){return void 0!==t.facet}!function(t){t.YEAR="year",t.MONTH="month",t.DAY="day",t.DATE="date",t.HOURS="hours",t.MINUTES="minutes",t.SECONDS="seconds",t.MILLISECONDS="milliseconds",t.YEARMONTH="yearmonth",t.YEARMONTHDATE="yearmonthdate",t.YEARMONTHDATEHOURS="yearmonthdatehours",t.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",t.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",t.MONTHDATE="monthdate",t.MONTHDATEHOURS="monthdatehours",t.HOURSMINUTES="hoursminutes",t.HOURSMINUTESSECONDS="hoursminutesseconds",t.MINUTESSECONDS="minutesseconds",t.SECONDSMILLISECONDS="secondsmilliseconds",t.QUARTER="quarter",t.YEARQUARTER="yearquarter",t.QUARTERMONTH="quartermonth",t.YEARQUARTERMONTH="yearquartermonth",t.UTCYEAR="utcyear",t.UTCMONTH="utcmonth",t.UTCDAY="utcday",t.UTCDATE="utcdate",t.UTCHOURS="utchours",t.UTCMINUTES="utcminutes",t.UTCSECONDS="utcseconds",t.UTCMILLISECONDS="utcmilliseconds",t.UTCYEARMONTH="utcyearmonth",t.UTCYEARMONTHDATE="utcyearmonthdate",t.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",t.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",t.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",t.UTCMONTHDATE="utcmonthdate",t.UTCMONTHDATEHOURS="utcmonthdatehours",t.UTCHOURSMINUTES="utchoursminutes",t.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",t.UTCMINUTESSECONDS="utcminutesseconds",t.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",t.UTCQUARTER="utcquarter",t.UTCYEARQUARTER="utcyearquarter",t.UTCQUARTERMONTH="utcquartermonth",t.UTCYEARQUARTERMONTH="utcyearquartermonth"}(qe||(qe={}));var $e={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Ke=X($e);var Je={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};var Qe={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utcmonthdatehours:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},tn=Object.assign({},Je,Qe);function en(t){return!!tn[t]}var nn=Object.assign({},$e,Je,{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,monthdatehours:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},Qe);X(nn);function rn(t,e){var n=t.indexOf(e);return n>-1&&(e!==qe.SECONDS||0===n||"i"!==t.charAt(n-1))}function on(t,e){var n=Q(e),r=en(t)?"utc":"";return Xe(Ke.reduce(function(e,i){var o;return rn(t,i)&&(e[i]=(o=i)===qe.QUARTER?"(".concat(r,"quarter(").concat(n,")-1)"):"".concat(r).concat(o,"(").concat(n,")")),e},{}))}function an(t,e){if(t){var n=[],r=rn(t,qe.YEAR);rn(t,qe.MONTH)&&n.push(!1!==e?"%b":"%B"),rn(t,qe.DAY)?n.push(e?"%a":"%A"):rn(t,qe.DATE)&&n.push("%d"+(r?",":"")),r&&n.push(e?"%y":"%Y");var i=[];rn(t,qe.HOURS)&&i.push("%H"),rn(t,qe.MINUTES)&&i.push("%M"),rn(t,qe.SECONDS)&&i.push("%S"),rn(t,qe.MILLISECONDS)&&i.push("%L");var o=[];return n.length>0&&o.push(n.join(" ")),i.length>0&&o.push(i.join(":")),o}}function un(t){return"day"!==t&&t.indexOf("day")>=0?(Ne(Re.dayReplacedWithDate(t)),t.replace("day","date")):t}var sn={quantitative:1,ordinal:1,temporal:1,nominal:1,geojson:1};var ln="quantitative",cn="ordinal",fn="temporal",hn="nominal",pn="geojson";function dn(t){var e=t.field,n=t.timeUnit,r=t.bin,i=t.aggregate;return Object.assign({},n?{timeUnit:n}:{},r?{bin:r}:{},i?{aggregate:i}:{},{field:e})}function vn(t){return!!t&&!!t.condition}function mn(t){return!!t&&!!t.condition&&!Object(y.y)(t.condition)&&yn(t.condition)}function yn(t){return!!t&&(!!t.field||"count"===t.aggregate)}function gn(t){return!!t&&(!!t.field&&!!t.type||"count"===t.aggregate)}function bn(t){return yn(t)&&Object(y.F)(t.field)}function _n(t){return t&&"value"in t&&void 0!==t.value}function xn(t){return!!t&&(!!t.scale||!!t.sort)}function wn(t){return!!t&&(!!t.axis||!!t.stack||!!t.impute)}function kn(t){return!!t&&!!t.legend}function En(t){return!!t&&!!t.format}function Sn(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.field,i=n.prefix,o=n.suffix,a="";if(function(t){return"count"===t.aggregate}(t))r=function(t){return 0===t.indexOf("__")}(e="count")?e:"__".concat(e);else{var u;if(!n.nofn)if(function(t){return!!t.op}(t))u=t.op;else{var s=t.bin,l=t.aggregate,c=t.timeUnit;Hn(s)?(u=Wn(s),o=(n.binSuffix||"")+(n.suffix||"")):l?Dt(l)?(a=".".concat(r),r="argmax_".concat(l.argmax)):jt(l)?(a=".".concat(r),r="argmin_".concat(l.argmin)):u=String(l):c&&(u=String(c))}u&&(r=r?"".concat(u,"_").concat(r):u)}return o&&(r="".concat(r,"_").concat(o)),i&&(r="".concat(i,"_").concat(r)),n.forAs?r:n.expr?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum";return"".concat(e,"[").concat(Object(y.U)(Object(y.T)(t).join(".")),"]")}(r,n.expr)+a:tt(r)+a}function On(t){return!function(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!t.bin;case"temporal":return!1}throw new Error(Re.invalidFieldType(t.type))}(t)}function An(t,e){var n=t.field,r=t.bin,i=t.timeUnit,o=t.aggregate;if("count"===o)return e.countTitle;if(Hn(r))return"".concat(n," (binned)");if(i){var a=function(t){return Ke.reduce(function(e,n){return rn(t,n)?[].concat(Object(m.a)(e),[n]):e},[])}(i).join("-");return"".concat(n," (").concat(a,")")}return o?Dt(o)?"".concat(n," for max ").concat(o.argmax):jt(o)?"".concat(n," for min ").concat(o.argmin):"".concat(J(o)," of ").concat(n):n}var Mn=function(t,e){switch(e.fieldTitle){case"plain":return t.field;case"functional":return function(t,e){var n=t.aggregate,r=t.bin,i=t.timeUnit,o=t.field;if(Dt(n))return"".concat(o," for argmax(").concat(n.argmax,")");if(jt(n))return"".concat(o," for argmin(").concat(n.argmin,")");var a=n||i||Hn(r)&&"bin";return a?a.toUpperCase()+"("+o+")":o}(t);default:return An(t,e)}},Cn=Mn;function Tn(t){Cn=t}function jn(t,e,n){var r=n.allowDisabling,i=n.includeDefault,o=void 0===i||i,a=(Dn(t)||{}).title,u=o?Pn(t,e):void 0;return r?nt(a,t.title,u):a||t.title||u}function Dn(t){return wn(t)&&t.axis?t.axis:kn(t)&&t.legend?t.legend:(e=t)&&e.header&&t.header?t.header:void 0;var e}function Pn(t,e){return Cn(t,e)}function zn(t){return yn(t)?t:mn(t)?t.condition:void 0}function Rn(t){return yn(t)?t:mn(t)?t.condition:void 0}function In(t,e){if(Object(y.F)(t)||Object(y.C)(t)||Object(y.z)(t)){var n=Object(y.F)(t)?"string":Object(y.C)(t)?"number":"boolean";return Ne(Re.primitiveChannelDef(e,n,t)),{value:t}}return yn(t)?Fn(t,e):mn(t)?Object.assign({},t,{condition:Fn(t.condition,e)}):t}function Fn(t,e){var n=t,r=n.aggregate,i=n.timeUnit,o=n.bin;if(r&&!Pt(r)&&!Dt(r)&&!jt(r)){t.aggregate;var a=Ct(t,["aggregate"]);Ne(Re.invalidAggregate(r)),t=a}if(i&&(t=Object.assign({},t,{timeUnit:un(i)})),Hn(o)&&(t=Object.assign({},t,{bin:Ln(o,e)})),Gn(o)&&!R(Ae,e)&&Ne("Channel ".concat(e,' should not be used with "binned" bin')),gn(t)){var u=t.type,s=function(t){if(t)switch(t=t.toLowerCase()){case"q":case ln:return"quantitative";case"t":case fn:return"temporal";case"o":case cn:return"ordinal";case"n":case hn:return"nominal";case pn:return"geojson"}}(u);u!==s&&(t=Object.assign({},t,{type:s})),"quantitative"!==u&&Rt(r)&&(Ne(Re.invalidFieldTypeForCountAggregate(u,r)),t=Object.assign({},t,{type:"quantitative"}))}else if(!we(e)){var l=function(t,e){if(t.timeUnit)return"temporal";if(Hn(t.bin))return"quantitative";switch(ze(e)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}(t,e);Ne(Re.missingFieldType(e,l)),t=Object.assign({},t,{type:l})}if(gn(t)){var c=function(t,e){var n=t.type;if("geojson"===n&&"shape"!==e)return{compatible:!1,warning:"Channel ".concat(e," should not be used with a geojson data.")};switch(e){case"row":case"column":case"facet":return On(t)?{compatible:!1,warning:Re.facetChannelShouldBeDiscrete(e)}:Nn;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":return Nn;case"longitude":case"longitude2":case"latitude":case"latitude2":return n!==ln?{compatible:!1,warning:"Channel ".concat(e," should be used with a quantitative field only, not ").concat(t.type," field.")}:Nn;case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"size":case"x2":case"y2":return"nominal"!==n||t.sort?Nn:{compatible:!1,warning:"Channel ".concat(e," should not be used with an unsorted discrete field.")};case"shape":return R(["ordinal","nominal","geojson"],t.type)?Nn:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case"order":return"nominal"!==t.type||"sort"in t?Nn:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}throw new Error("channelCompatability not implemented for channel "+e)}(t,e),f=c.compatible,h=c.warning;f||Ne(h)}return t}function Ln(t,e){return Object(y.z)(t)?{maxbins:Zn(e)}:"binned"===t?{binned:!0}:t.maxbins||t.step?t:Object.assign({},t,{maxbins:Zn(e)})}var Nn={compatible:!0};function Bn(t){var e=wn(t)&&t.axis&&t.axis.formatType||kn(t)&&t.legend&&t.legend.formatType||En(t)&&t.formatType;return"time"===e||!e&&function(t){return"temporal"===t.type||!!t.timeUnit}(t)}function Un(t,e){var n,r,i=e.timeUnit,o=e.type,a=e.time,u=e.undefinedIfExprNotRequired;return Ue(t)?n=Xe(t,!0):(Object(y.F)(t)||Object(y.C)(t))&&(i||"temporal"===o)&&(n=function(t){return!!$e[t]}(i)?Xe(Object(Mt.a)({},i,t),!0):function(t){return!!Je[t]}(i)?Un(t,{timeUnit:(r=i,r.substr(3))}):"datetime(".concat(JSON.stringify(t),")")),n?a?"time(".concat(n,")"):n:u?void 0:JSON.stringify(t)}function qn(t,e){var n=t.timeUnit,r=t.type;return e.map(function(t){var e=Un(t,{timeUnit:n,type:r,undefinedIfExprNotRequired:!0});return void 0!==e?{signal:e}:t})}function Vn(t,e){return Hn(t.bin)?De(e)&&R(["ordinal","nominal"],t.type):(console.warn("Only use this method with binned field defs"),!1)}function Wn(t){return Object(y.z)(t)&&(t=Ln(t,void 0)),"bin"+H(t).map(function(e){return Y("_".concat(e,"_").concat(t[e]))}).join("")}function Hn(t){return!0===t||Xn(t)&&!t.binned}function Gn(t){return"binned"===t||Xn(t)&&t.binned}function Xn(t){return Object(y.D)(t)}function Zn(t){switch(t){case Lt:case Nt:case Qt:case Yt:case $t:case Kt:case re:case te:case ee:case ne:case Jt:return 6;default:return 10}}function Yn(t,e){var n=t&&t[e];return!!n&&(Object(y.y)(n)?I(n,function(t){return!!t.field}):yn(n)||mn(n))}function $n(t){return I(ye,function(e){if(Yn(t,e)){var n=t[e];if(Object(y.y)(n))return I(n,function(t){return!!t.aggregate});var r=zn(n);return r&&!!r.aggregate}return!1})}function Kn(t,e){var n=[],r=[],i=[],o=[],a={};return tr(t,function(u,s){if(yn(u)){var l=u.field,c=u.aggregate,f=u.timeUnit,h=u.bin,p=Ct(u,["field","aggregate","timeUnit","bin"]);if(c||f||h){var d,v=Dn(u),m=v&&v.title,y=Sn(u,{forAs:!0}),g=Object.assign({},m?[]:{title:jn(u,e,{allowDisabling:!0})},p,{field:y}),b="x"===s||"y"===s;if(c){if(Dt(c)?(d="argmax",y=Sn({aggregate:"argmax",field:c.argmax},{forAs:!0}),g.field="".concat(y,".").concat(l)):jt(c)?(d="argmin",y=Sn({aggregate:"argmin",field:c.argmin},{forAs:!0}),g.field="".concat(y,".").concat(l)):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(d=c),d){var _={op:d,as:y};l&&(_.field=l),o.push(_)}}else if(gn(u)&&Hn(h)){if(r.push({bin:h,field:l,as:y}),n.push(Sn(u,{binSuffix:"end"})),Vn(u,s)&&n.push(Sn(u,{binSuffix:"range"})),b){var x={field:y+"_end"};a[s+"2"]=x}g.bin="binned",we(s)||(g.type="quantitative")}else if(f){i.push({timeUnit:f,field:l,as:y});var w=an(f,e.axis.shortTimeLabels).join(" "),k=gn(u)&&u.type!==fn&&"time";"text"===s||"tooltip"===s?(g.format=g.format||w,k&&(g.formatType=k)):!function(t){return!!Ee[t]}(s)?b&&(g.axis=Object.assign({format:w},k?{formatType:k}:{},g.axis)):g.legend=Object.assign({format:w},k?{formatType:k}:{},g.legend)}c||n.push(y),a[s]=g}else n.push(l),a[s]=t[s]}else a[s]=t[s]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function Jn(t,e){return H(t).reduce(function(n,r){if(!_e(r))return Ne(Re.invalidEncodingChannel(r)),n;if(!function(t,e,n){var r=Pe(e,n);if(!r)return!1;if("binned"===r){var i=t["x2"===e?"x":"y"];return!(!yn(i)||!yn(t[e])||"binned"!==i.bin)}return!0}(t,r,e))return Ne(Re.incompatibleChannel(r,e)),n;if("size"===r&&"line"===e){var i=Rn(t[r]);if(i&&i.aggregate)return Ne(Re.LINE_WITH_VARYING_SIZE),n}if("color"===r&&("fill"in t||"stroke"in t))return Ne(Re.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),n;var o=t[r];if("detail"===r||"order"===r&&!Object(y.y)(o)&&!_n(o)||"tooltip"===r&&Object(y.y)(o))o&&(n[r]=(Object(y.y)(o)?o:[o]).reduce(function(t,e){return yn(e)?t.push(Fn(e,r)):Ne(Re.emptyFieldDef(e,r)),t},[]));else{if("tooltip"===r&&null===o)n[r]=null;else if(!yn(o)&&!_n(o)&&!vn(o))return Ne(Re.emptyFieldDef(o,r)),n;n[r]=In(o,r)}return n},{})}function Qn(t){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=H(t)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(Yn(t,u)){var s=t[u];(Object(y.y)(s)?s:[s]).forEach(function(t){yn(t)?e.push(t):mn(t)&&e.push(t.condition)})}}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}function tr(t,e,n){if(t){var r=!0,i=!1,o=void 0;try{for(var a,u=function(){var r=a.value,i=t[r];Object(y.y)(i)?i.forEach(function(t){e.call(n,t,r)}):e.call(n,i,r)},s=H(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)u()}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}}function er(t,e,n,r){return t?H(t).reduce(function(n,i){var o=t[i];return Object(y.y)(o)?o.reduce(function(t,n){return e.call(r,t,n,i)},n):e.call(r,n,o,i)},n):n}function nr(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t.map(function(t){var n=t.fieldPrefix,i=t.titlePrefix;return{field:n+e.field,type:e.type,title:i+(r?" of "+e.field:"")}});return{tooltip:[].concat(Object(m.a)(i),Object(m.a)(Qn(n)))}}function rr(t,e,n,r,i){var o=n.scale,a=n.axis;return function(u){var s=u.partName,l=u.mark,c=u.positionPrefix,f=u.endPositionPrefix,h=void 0===f?void 0:f,p=u.extraEncoding,d=void 0===p?{}:p,v=a&&void 0!==a.title?void 0:void 0!==n.title?n.title:n.field;return ir(t,s,i,{mark:l,encoding:Object.assign(Object(Mt.a)({},e,Object.assign({field:c+"_"+n.field,type:n.type},v?{title:v}:{},o?{scale:o}:{},a?{axis:a}:{})),Object(y.F)(h)?Object(Mt.a)({},e+"2",{field:h+"_"+n.field,type:n.type}):{},r,d)})}}function ir(t,e,n,r){var i=t.clip,o=t.color,a=t.opacity,u=t.type;return t[e]||void 0===t[e]&&n[e]?[Object.assign({},r,{mark:Object.assign({},n[e],i?{clip:i}:{},o?{color:o}:{},a?{opacity:a}:{},kt(r.mark)?r.mark:{type:r.mark},{style:"".concat(u,"-").concat(e)},Object(y.z)(t[e])?{}:t[e])})]:[]}function or(t,e,n){var r=t.encoding,i="vertical"===e?"y":"x",o=r[i],a=r[i+"2"],u=r[i+"Error"],s=r[i+"Error2"];return{continuousAxisChannelDef:ar(o,n),continuousAxisChannelDef2:ar(a,n),continuousAxisChannelDefError:ar(u,n),continuousAxisChannelDefError2:ar(s,n),continuousAxis:i}}function ar(t,e){if(yn(t)&&t&&t.aggregate){var n=t.aggregate,r=Ct(t,["aggregate"]);return n!==e&&Ne(Re.errorBarContinuousAxisHasCustomizedAggregate(n,e)),r}return t}function ur(t,e){var n=t.mark,r=t.encoding;if(yn(r.x)&&On(r.x)){if(yn(r.y)&&On(r.y)){if(void 0===r.x.aggregate&&r.y.aggregate===e)return"vertical";if(void 0===r.y.aggregate&&r.x.aggregate===e)return"horizontal";if(r.x.aggregate===e&&r.y.aggregate===e)throw new Error("Both x and y cannot have aggregate");return kt(n)&&n.orient?n.orient:"vertical"}return"horizontal"}if(yn(r.y)&&On(r.y))return"vertical";throw new Error("Need a valid continuous axis for "+e+"s")}var sr="boxplot",lr=H({box:1,median:1,outliers:1,rule:1,ticks:1}),cr=new At(sr,hr);function fr(t){return Object(y.C)(t)?"tukey":t}function hr(t,e){var n=e.config,r=t.mark,i=(t.encoding,t.selection),o=(t.projection,Ct(t,["mark","encoding","selection","projection"])),a=kt(r)?r:{type:r};i&&Ne(Re.selectionNotSupported("boxplot"));var u,s=a.extent||n.boxplot.extent,l=nt(a.size,n.boxplot.size),c=fr(s),f=function(t,e,n){var r=ur(t,sr),i=or(t,r,sr),o=i.continuousAxisChannelDef,a=i.continuousAxis,u=o.field,s=fr(e),l=[].concat(Object(m.a)(pr(u)),[{op:"median",field:u,as:"mid_box_"+u},{op:"min",field:u,as:("min-max"===s?"lower_whisker_":"min_")+u},{op:"max",field:u,as:("min-max"===s?"upper_whisker_":"max_")+u}]),c="min-max"===s||"tukey"===s?[]:[{calculate:'datum["upper_box_'.concat(u,'"] - datum["lower_box_').concat(u,'"]'),as:"iqr_"+u},{calculate:'min(datum["upper_box_'.concat(u,'"] + datum["iqr_').concat(u,'"] * ').concat(e,', datum["max_').concat(u,'"])'),as:"upper_whisker_"+u},{calculate:'max(datum["lower_box_'.concat(u,'"] - datum["iqr_').concat(u,'"] * ').concat(e,', datum["min_').concat(u,'"])'),as:"lower_whisker_"+u}],f=t.encoding,h=a,p=(f[h],Kn(Ct(f,["symbol"===typeof h?h:h+""]),n)),d=p.bins,v=p.timeUnits,y=p.aggregate,g=p.groupby,b=p.encoding,_="vertical"===r?"horizontal":"vertical";return{transform:[].concat(Object(m.a)(d),Object(m.a)(v),[{aggregate:[].concat(Object(m.a)(y),Object(m.a)(l)),groupby:g}],c),groupby:g,continuousAxisChannelDef:o,continuousAxis:a,encodingWithoutContinuousAxis:b,ticksOrient:_}}(t,s,n),h=f.transform,p=f.continuousAxisChannelDef,d=f.continuousAxis,v=f.groupby,g=f.encodingWithoutContinuousAxis,b=f.ticksOrient,_=(g.color,g.size),x=Ct(g,["color","size"]),w=function(t){return rr(a,d,p,t,n.boxplot)},k=w(x),E=w(g),S=w(Object.assign({},x,_?{size:_}:{})),O=nr([{fieldPrefix:"min-max"===c?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===c?"lower_whisker_":"min_",titlePrefix:"Min"}],p,g),A={type:"tick",color:"black",opacity:1,orient:b},M="min-max"===c?O:nr([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,g),C=[].concat(Object(m.a)(k({partName:"rule",mark:"rule",positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:M})),Object(m.a)(k({partName:"rule",mark:"rule",positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:M})),Object(m.a)(k({partName:"ticks",mark:A,positionPrefix:"lower_whisker",extraEncoding:M})),Object(m.a)(k({partName:"ticks",mark:A,positionPrefix:"upper_whisker",extraEncoding:M}))),T=[].concat(Object(m.a)("tukey"!==c?C:[]),Object(m.a)(E({partName:"box",mark:Object.assign({type:"bar"},l?{size:l}:{}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:O})),Object(m.a)(S({partName:"median",mark:Object.assign({type:"tick"},Object(y.D)(n.boxplot.median)&&n.boxplot.median.color?{color:n.boxplot.median.color}:{},l?{size:l}:{},{orient:b}),positionPrefix:"mid_box",extraEncoding:O})));if("min-max"!==c){var j='datum["lower_box_'.concat(p.field,'"]'),D='datum["upper_box_'.concat(p.field,'"]'),P="(".concat(D," - ").concat(j,")"),z="".concat(j," - ").concat(s," * ").concat(P),R="".concat(D," + ").concat(s," * ").concat(P),I='datum["'.concat(p.field,'"]'),F={joinaggregate:pr(p.field),groupby:v},L=void 0;"tukey"===c&&(L={transform:[{filter:"(".concat(z," <= ").concat(I,") && (").concat(I," <= ").concat(R,")")},{aggregate:[{op:"min",field:p.field,as:"lower_whisker_"+p.field},{op:"max",field:p.field,as:"upper_whisker_"+p.field},{op:"min",field:"lower_box_"+p.field,as:"lower_box_"+p.field},{op:"max",field:"upper_box_"+p.field,as:"upper_box_"+p.field}],groupby:v}],layer:C});var N=ir(a,"outliers",n.boxplot,{transform:[{filter:"(".concat(I," < ").concat(z,") || (").concat(I," > ").concat(R,")")}],mark:"point",encoding:Object.assign(Object(Mt.a)({},d,{field:p.field,type:p.type}),x)})[0];N&&L?u={transform:[F],layer:[N,L]}:N?(u=N).transform.unshift(F):L&&(u=L).transform.unshift(F)}return u?Object.assign({},o,{layer:[].concat(Object(m.a)(u?[u]:[]),[{transform:h,layer:T}])}):Object.assign({},o,{transform:(o.transform||[]).concat(h),layer:T})}function pr(t){return[{op:"q1",field:t,as:"lower_box_"+t},{op:"q3",field:t,as:"upper_box_"+t}]}var dr="errorbar",vr=H({ticks:1,rule:1}),mr=new At(dr,yr);function yr(t,e){var n=e.config,r=br(t,dr,n),i=r.transform,o=r.continuousAxisChannelDef,a=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.ticksOrient,l=r.markDef,c=r.outerSpec,f=r.tooltipEncoding,h=rr(l,a,o,u,n.errorbar),p={type:"tick",orient:s};return Object.assign({},c,{transform:i,layer:[].concat(Object(m.a)(h({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:f})),Object(m.a)(h({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:f})),Object(m.a)(h({partName:"rule",mark:"rule",positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})))})}function gr(t,e){var n=t.encoding;if(function(t){return(yn(t.x)||yn(t.y))&&!yn(t.x2)&&!yn(t.y2)&&!yn(t.xError)&&!yn(t.xError2)&&!yn(t.yError)&&!yn(t.yError2)}(n))return{orient:ur(t,e),inputType:"raw"};var r=function(t){return yn(t.x2)||yn(t.y2)}(n),i=function(t){return yn(t.xError)||yn(t.xError2)||yn(t.yError)||yn(t.yError2)}(n),o=n.x,a=n.y;if(r){if(i)throw new Error(e+" cannot be both type aggregated-upper-lower and aggregated-error");var u=n.x2,s=n.y2;if(yn(u)&&yn(s))throw new Error(e+" cannot have both x2 and y2");if(yn(u)){if(yn(o)&&On(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in "+e)}if(yn(s)){if(yn(a)&&On(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in "+e)}throw new Error("No ranged axis")}var l=n.xError,c=n.xError2,f=n.yError,h=n.yError2;if(yn(c)&&!yn(l))throw new Error(e+" cannot have xError2 without xError");if(yn(h)&&!yn(f))throw new Error(e+" cannot have yError2 without yError");if(yn(l)&&yn(f))throw new Error(e+" cannot have both xError and yError with both are quantiative");if(yn(l)){if(yn(o)&&On(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(yn(f)){if(yn(a)&&On(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}function br(t,e,n){var r=t.mark,i=t.encoding,o=t.selection,a=(t.projection,Ct(t,["mark","encoding","selection","projection"])),u=kt(r)?r:{type:r};o&&Ne(Re.selectionNotSupported(e));var s=gr(t,e),l=s.orient,c=s.inputType,f=or(t,l,e),h=f.continuousAxisChannelDef,p=f.continuousAxisChannelDef2,d=f.continuousAxisChannelDefError,v=f.continuousAxisChannelDefError2,y=f.continuousAxis,g=function(t,e,n,r,i,o,a,u){var s,l=[],c=[],f=e.field,h=!1;if("raw"===o){var p,d,v,m=t.center?t.center:t.extent?"iqr"===t.extent?"median":"mean":u.errorbar.center,y=t.extent?t.extent:"mean"===m?"stderr":"iqr";if("median"===m!==("iqr"===y)&&Ne(Re.errorBarCenterIsUsedWithWrongExtent(m,y,a)),"stderr"===y||"stdev"===y)l=[{op:y,field:f,as:"extent_"+f},{op:m,field:f,as:"center_"+f}],c=[{calculate:'datum["center_'.concat(f,'"] + datum["extent_').concat(f,'"]'),as:"upper_"+f},{calculate:'datum["center_'.concat(f,'"] - datum["extent_').concat(f,'"]'),as:"lower_"+f}],s=[{fieldPrefix:"center_",titlePrefix:J(m)},{fieldPrefix:"upper_",titlePrefix:_r(m,y,"+")},{fieldPrefix:"lower_",titlePrefix:_r(m,y,"-")}],h=!0;else t.center&&t.extent&&Ne(Re.errorBarCenterIsNotNeeded(t.extent,a)),"ci"===y?(p="mean",d="ci0",v="ci1"):(p="median",d="q1",v="q3"),l=[{op:d,field:f,as:"lower_"+f},{op:v,field:f,as:"upper_"+f},{op:p,field:f,as:"center_"+f}],s=[{fieldPrefix:"upper_",titlePrefix:jn({field:f,aggregate:v,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:jn({field:f,aggregate:d,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:jn({field:f,aggregate:p,type:"quantitative"},u,{allowDisabling:!1})}]}else{(t.center||t.extent)&&Ne(Re.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),"aggregated-upper-lower"===o?(s=[],c=[{calculate:'datum["'.concat(n.field,'"]'),as:"upper_"+f},{calculate:'datum["'.concat(f,'"]'),as:"lower_"+f}]):"aggregated-error"===o&&(s=[{fieldPrefix:"",titlePrefix:f}],c=[{calculate:'datum["'.concat(f,'"] + datum["').concat(r.field,'"]'),as:"upper_"+f}],i?c.push({calculate:'datum["'.concat(f,'"] + datum["').concat(i.field,'"]'),as:"lower_"+f}):c.push({calculate:'datum["'.concat(f,'"] - datum["').concat(r.field,'"]'),as:"lower_"+f}));for(var g=0,b=c;g<b.length;g++){var _=b[g];s.push({fieldPrefix:_.as.substring(0,6),titlePrefix:_.calculate.replace(new RegExp('datum\\[\\"',"g"),"").replace(new RegExp('\\"\\]',"g"),"")})}}return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:s,tooltipTitleWithFieldName:h}}(u,h,p,d,v,c,e,n),b=g.errorBarSpecificAggregate,_=g.postAggregateCalculates,x=g.tooltipSummary,w=g.tooltipTitleWithFieldName,k=y,E=(i[k],"x"===y?"x2":"y2"),S=(i[E],"x"===y?"xError":"yError"),O=(i[S],"x"===y?"xError2":"yError2"),A=(i[O],Kn(Ct(i,["symbol"===typeof k?k:k+"","symbol"===typeof E?E:E+"","symbol"===typeof S?S:S+"","symbol"===typeof O?O:O+""]),n)),M=A.bins,C=A.timeUnits,T=A.aggregate,j=A.groupby,D=A.encoding,P=[].concat(Object(m.a)(T),Object(m.a)(b)),z="raw"!==c?[]:j,R=nr(x,h,D,w);return{transform:[].concat(Object(m.a)(a.transform||[]),Object(m.a)(M),Object(m.a)(C),Object(m.a)(P.length?[{aggregate:P,groupby:z}]:[]),Object(m.a)(_)),groupby:z,continuousAxisChannelDef:h,continuousAxis:y,encodingWithoutContinuousAxis:D,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:R}}function _r(t,e,n){return J(t)+" "+n+" "+e}var xr="errorband",wr=H({band:1,borders:1}),kr=new At(xr,Er);function Er(t,e){var n=e.config,r=br(t,xr,n),i=r.transform,o=r.continuousAxisChannelDef,a=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.markDef,l=r.outerSpec,c=r.tooltipEncoding,f=s,h=rr(f,a,o,u,n.errorband),p=void 0!==t.encoding.x&&void 0!==t.encoding.y,d={type:p?"area":"rect"},v={type:p?"line":"rule"},y=Object.assign({},f.interpolate?{interpolate:f.interpolate}:{},f.tension&&f.interpolate?{interpolate:f.tension}:{});return p?(d=Object.assign({},d,y),v=Object.assign({},v,y)):f.interpolate?Ne(Re.errorBand1DNotSupport("interpolate")):f.tension&&Ne(Re.errorBand1DNotSupport("tension")),Object.assign({},l,{transform:i,layer:[].concat(Object(m.a)(h({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})),Object(m.a)(h({partName:"borders",mark:v,positionPrefix:"lower",extraEncoding:c})),Object(m.a)(h({partName:"borders",mark:v,positionPrefix:"upper",extraEncoding:c})))})}var Sr={};function Or(t,e,n){var r=new At(t,e);Sr[t]={normalizer:r,parts:n}}Or(sr,hr,lr),Or(dr,yr,vr),Or(xr,Er,wr);var Ar,Mr=["shortTimeLabels"],Cr=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength"],Tr={clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},jr=Object.assign({},Tr,{opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,encode:1}),Dr=X(Tr),Pr=X(jr);!function(t){t.LINEAR="linear",t.LOG="log",t.POW="pow",t.SQRT="sqrt",t.SYMLOG="symlog",t.TIME="time",t.UTC="utc",t.QUANTILE="quantile",t.QUANTIZE="quantize",t.THRESHOLD="threshold",t.BIN_ORDINAL="bin-ordinal",t.ORDINAL="ordinal",t.POINT="point",t.BAND="band"}(Ar||(Ar={}));var zr={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},Rr=H(zr);var Ir={linear:0,log:1,pow:1,sqrt:1,symlog:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Fr(t){return Ir[t]}var Lr=["linear","log","pow","sqrt","symlog","time","utc"],Nr=Object(y.Y)(Lr),Br=Object(y.Y)(["quantile","quantize","threshold"]),Ur=Lr.concat(["quantile","quantize","threshold"]),qr=Object(y.Y)(Ur),Vr=Object(y.Y)(["ordinal","bin-ordinal","point","band"]);function Wr(t){return t in Vr}function Hr(t){return t in qr}function Gr(t){return t in Nr}function Xr(t){return t in Br}var Zr={textXRangeStep:90,rangeStep:20,pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function Yr(t){return t&&t.selection}var $r={type:1,domain:1,range:1,rangeStep:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Kr=(X($r),X(Ct($r,["type","domain","range","rangeStep","scheme"])));!function(){var t={},e=!0,n=!1,r=void 0;try{for(var i,o=ye[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=!0,s=!1,l=void 0;try{for(var c,f=H(sn)[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value,p=!0,d=!1,v=void 0;try{for(var m,y=Rr[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var g=m.value,b=ni(a,h);ei(a,g)&&ti(g,h)&&(t[b]=t[b]||[],t[b].push(g))}}catch(_){d=!0,v=_}finally{try{p||null==y.return||y.return()}finally{if(d)throw v}}}}catch(_){s=!0,l=_}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}}}catch(_){n=!0,r=_}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}();function Jr(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!R(["point","band","identity"],t);case"bins":return!R(["point","band","identity","ordinal"],t);case"round":return Gr(t)||"band"===t||"point"===t;case"padding":return Gr(t)||R(["point","band"],t);case"paddingOuter":case"rangeStep":return R(["point","band"],t);case"paddingInner":return"band"===t;case"clamp":return Gr(t);case"nice":return Gr(t)||"quantize"===t||"threshold"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"constant":return"symlog"===t;case"zero":return Hr(t)&&!R(["log","time","utc","threshold","quantile"],t)}throw new Error("Invalid scale property ".concat(e,"."))}function Qr(t,e){switch(e){case"interpolate":case"scheme":return pe(t)?void 0:Re.cannotUseScalePropertyWithNonColor(t);case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return}throw new Error('Invalid scale property "'.concat(e,'".'))}function ti(t,e){return R([cn,hn],e)?void 0===t||Wr(t):e===fn?R([Ar.TIME,Ar.UTC,void 0],t):e!==ln||R([Ar.LOG,Ar.POW,Ar.SQRT,Ar.SYMLOG,Ar.QUANTILE,Ar.QUANTIZE,Ar.THRESHOLD,Ar.LINEAR,void 0],t)}function ei(t,e){switch(t){case Ut:case qt:return Gr(e)||R(["band","point"],e);case Qt:case re:case te:case ee:case ne:return Gr(e)||Xr(e)||R(["band","point"],e);case Yt:case $t:case Kt:return"band"!==e;case Jt:return"ordinal"===e}return!1}function ni(t,e){return t+"_"+e}var ri="_vgsid_";function ii(t){return"interval"===t.type}var oi={single:{on:"click",fields:[ri],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[ri],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function ai(t){return void 0!==t.concat}function ui(t){return void 0!==t.vconcat}function si(t){return void 0!==t.hconcat}function li(t){return void 0!==t.repeat}var ci=X({align:1,bounds:1,center:1,columns:1,spacing:1});function fi(t){var e=t.anchor,n=t.frame,r=t.offset,i=t.orient,o=t.color,a=Ct(t,["anchor","frame","offset","orient","color"]);return{mark:Object.assign({},a,o?{fill:o}:{}),nonMark:Object.assign({},e?{anchor:e}:{},n?{frame:n}:{},r?{offset:r}:{},i?{orient:i}:{})}}var hi={padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",invalidValues:"filter",view:{width:200,height:200},mark:{color:"#4c78a8",tooltip:{content:"encoding"}},area:{},bar:{binSpacing:1,continuousBandSize:5},circle:{},geoshape:{},line:{},point:{},rect:{},rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Zr,projection:{},axis:{},axisX:{},axisY:{},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:oi,style:{},title:{},facet:{spacing:20},repeat:{spacing:20},concat:{spacing:20}};function pi(t){return N(C(hi),t)}var di=["view"].concat(Object(m.a)(wt)),vi=["padding","facet","concat","repeat","numberFormat","timeFormat","countTitle","header","stack","scale","selection","invalidValues","overlay"],mi=Object.assign({view:["width","height"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],text:["shortTimeLabels"],tick:["bandSize","thickness"]});function yi(t){t=C(t);for(var e=0,n=vi;e<n.length;e++){delete t[n[e]]}if(t.axis){var r=!0,i=!1,o=void 0;try{for(var a,u=Mr[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;delete t.axis[s]}}catch(et){i=!0,o=et}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}if(t.legend){var l=!0,c=!1,f=void 0;try{for(var h,p=Mr[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var d=h.value;delete t.legend[d]}}catch(et){c=!0,f=et}finally{try{l||null==p.return||p.return()}finally{if(c)throw f}}var v=!0,m=!1,g=void 0;try{for(var b,_=Cr[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var x=b.value;delete t.legend[x]}}catch(et){m=!0,g=et}finally{try{v||null==_.return||_.return()}finally{if(m)throw g}}}if(t.mark){var w=!0,k=!1,E=void 0;try{for(var S,O=St[Symbol.iterator]();!(w=(S=O.next()).done);w=!0){var A=S.value;delete t.mark[A]}}catch(et){k=!0,E=et}finally{try{w||null==O.return||O.return()}finally{if(k)throw E}}}var M=!0,T=!1,j=void 0;try{for(var D,P=di[Symbol.iterator]();!(M=(D=P.next()).done);M=!0){var z=D.value,R=!0,I=!1,F=void 0;try{for(var L,N=St[Symbol.iterator]();!(R=(L=N.next()).done);R=!0){var B=L.value;delete t[z][B]}}catch(et){I=!0,F=et}finally{try{R||null==N.return||N.return()}finally{if(I)throw F}}var U=mi[z];if(U){var q=!0,V=!1,W=void 0;try{for(var G,X=U[Symbol.iterator]();!(q=(G=X.next()).done);q=!0){var Z=G.value;delete t[z][Z]}}catch(et){V=!0,W=et}finally{try{q||null==X.return||X.return()}finally{if(V)throw W}}}gi(t,z)}}catch(et){T=!0,j=et}finally{try{M||null==P.return||P.return()}finally{if(T)throw j}}var Y=!0,$=!1,K=void 0;try{for(var J,Q=H(Sr)[Symbol.iterator]();!(Y=(J=Q.next()).done);Y=!0){delete t[J.value]}}catch(et){$=!0,K=et}finally{try{Y||null==Q.return||Q.return()}finally{if($)throw K}}for(var tt in gi(t,"title","group-title"),t)Object(y.D)(t[tt])&&0===H(t[tt]).length&&delete t[tt];return H(t).length>0?t:void 0}function gi(t,e,n,r){var i="title"===e?fi(t.title).mark:r?t[e][r]:t[e];"view"===e&&(n="cell");var o=Object.assign({},i,t.style[e]);H(o).length>0&&(t.style[n||e]=o),r||delete t[e]}var bi=n(8),_i=n(6);function xi(t,e,n){return(xi="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(_i.a)(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var wi=n(7);function ki(t){return void 0!==t.layer}var Ei=function(){function t(){Object(at.a)(this,t)}return Object(ut.a)(t,[{key:"map",value:function(t,e){return Ye(t)?this.mapFacet(t,e):li(t)?this.mapRepeat(t,e):si(t)?this.mapHConcat(t,e):ui(t)?this.mapVConcat(t,e):ai(t)?this.mapConcat(t,e):this.mapLayerOrUnit(t,e)}},{key:"mapLayerOrUnit",value:function(t,e){if(ki(t))return this.mapLayer(t,e);if(Ot(t))return this.mapUnit(t,e);throw new Error(Re.INVALID_SPEC)}},{key:"mapLayer",value:function(t,e){var n=this;return Object.assign({},t,{layer:t.layer.map(function(t){return n.mapLayerOrUnit(t,e)})})}},{key:"mapHConcat",value:function(t,e){var n=this;return Object.assign({},t,{hconcat:t.hconcat.map(function(t){return n.map(t,e)})})}},{key:"mapVConcat",value:function(t,e){var n=this;return Object.assign({},t,{vconcat:t.vconcat.map(function(t){return n.map(t,e)})})}},{key:"mapConcat",value:function(t,e){var n=this,r=t.concat,i=Ct(t,["concat"]);return Object.assign({},i,{concat:r.map(function(t){return n.map(t,e)})})}},{key:"mapFacet",value:function(t,e){return Object.assign({},t,{spec:this.map(t.spec,e)})}},{key:"mapRepeat",value:function(t,e){return Object.assign({},t,{spec:this.map(t.spec,e)})}}]),t}(),Si={zero:1,center:1,normalize:1};var Oi=[lt,st,pt,ft,yt,gt,ct,dt,vt],Ai=[lt,st];function Mi(t,e,n){var r=kt(t)?t.type:t;if(!R(Oi,r))return null;var i=function(t){var e=t.x,n=t.y;if(yn(e)&&yn(n))if("quantitative"===e.type&&"quantitative"===n.type){if(e.stack)return"x";if(n.stack)return"y";if(!!e.aggregate!==!!n.aggregate)return e.aggregate?"x":"y"}else{if("quantitative"===e.type)return"x";if("quantitative"===n.type)return"y"}else{if(yn(e)&&"quantitative"===e.type)return"x";if(yn(n)&&"quantitative"===n.type)return"y"}}(e);if(!i)return null;var o,a=e[i],u=bn(a)?Sn(a,{}):void 0,s="x"===i?"y":"x",l=e[s],c=bn(l)?Sn(l,{}):void 0,f=Se.reduce(function(t,n){if("tooltip"!==n&&Yn(e,n)){var r=e[n];(Object(y.y)(r)?r:[r]).forEach(function(e){var r=Rn(e);if(!r.aggregate){var i=bn(r)?Sn(r,{}):void 0;(!i||i!==c&&i!==u)&&t.push({channel:n,fieldDef:r})}})}return t},[]);return 0===f.length?null:(o=void 0!==a.stack?a.stack:R(Ai,r)?nt(n,"zero"):n)&&Si[o]?(a.scale&&a.scale.type&&a.scale.type!==Ar.LINEAR&&Ne(Re.cannotStackNonLinearScale(a.scale.type)),Yn(e,i===Ut?Vt:Wt)?(void 0!==a.stack&&Ne(Re.cannotStackRangedMark(i)),null):(a.aggregate&&!R(It,a.aggregate)&&Ne(Re.stackNonSummativeAggregate(a.aggregate)),{groupbyChannel:l?s:void 0,fieldChannel:i,impute:xt(r),stackBy:f,offset:o})):null}function Ci(t){t.point,t.line;var e=Ct(t,["point","line"]);return H(e).length>1?e:e.type}function Ti(t){for(var e=0,n=["line","area","rule","trail"];e<n.length;e++){var r=n[e];t[r]&&(t=Object.assign({},t,Object(Mt.a)({},r,j(t[r],["point","line"]))))}return t}function ji(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return"transparent"===t.point?{opacity:0}:t.point?Object(y.D)(t.point)?t.point:{}:void 0!==t.point?null:e.point||n.shape?Object(y.D)(e.point)?e.point:{}:void 0}function Di(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.line?!0===t.line?{}:t.line:void 0!==t.line?null:e.line?!0===e.line?{}:e.line:void 0}var Pi=function(){function t(){Object(at.a)(this,t),this.name="path-overlay"}return Object(ut.a)(t,[{key:"hasMatchingType",value:function(t,e){if(Ot(t)){var n=t.mark,r=t.encoding,i=kt(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!ji(i,e[i.type],r);case"area":return!!ji(i,e[i.type],r)||!!Di(i,e[i.type])}}return!1}},{key:"run",value:function(t,e,n){var r=e.config,i=t.selection,o=t.projection,a=t.encoding,u=t.mark,s=Ct(t,["selection","projection","encoding","mark"]),l=kt(u)?u:{type:u},c=ji(l,r[l.type],a),f="area"===l.type&&Di(l,r[l.type]),h=[Object.assign({},i?{selection:i}:{},{mark:Ci(Object.assign({},l,"area"===l.type?{opacity:.7}:{})),encoding:j(a,["shape"])})],p=Mi(l,a,r?r.stack:void 0),d=a;if(p){var v=p.fieldChannel,m=p.offset;d=Object.assign({},a,Object(Mt.a)({},v,Object.assign({},a[v],m?{stack:m}:{})))}return f&&h.push(Object.assign({},o?{projection:o}:{},{mark:Object.assign({type:"line"},T(l,["clip","interpolate","tension"]),f),encoding:d})),c&&h.push(Object.assign({},o?{projection:o}:{},{mark:Object.assign({type:"point",opacity:1,filled:!0},T(l,["clip"]),c),encoding:d})),n(Object.assign({},s,{layer:h}),Object.assign({},e,{config:Ti(r)}))}}]),t}(),zi=function(){function t(){Object(at.a)(this,t),this.name="RuleForRangedLine"}return Object(ut.a)(t,[{key:"hasMatchingType",value:function(t){if(Ot(t)){var e=t.encoding;if("line"===t.mark){var n=!0,r=!1,i=void 0;try{for(var o,a=xe[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=e[ke(u)];if(e[u]&&yn(s)&&"binned"!==s.bin)return!0}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}}return!1}},{key:"run",value:function(t,e,n){var r=t.encoding;return Ne(Re.lineWithRange(!!r.x2,!!r.y2)),n(Object.assign({},t,{mark:"rule"}),e)}}]),t}();function Ri(t){var e=t.parentEncoding,n=t.encoding;if(e&&n){var r=H(e).reduce(function(t,e){return n[e]&&t.push(e),t},[]);r.length>0&&Ne(Re.encodingOverridden(r))}var i=Object.assign({},e||{},n||{});return H(i).length>0?i:void 0}function Ii(t){var e=t.parentProjection,n=t.projection;return e&&n&&Ne(Re.projectionOverridden({parentProjection:e,projection:n})),n||e}function Fi(t,e){return void 0===e&&(e=pi(t.config)),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Li.map(t,{config:e})}(t,e)}var Li=new(function(t){function e(){var t;return Object(at.a)(this,e),(t=Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))).nonFacetUnitNormalizers=[cr,mr,kr,new Pi,new zi],t}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"map",value:function(t,n){if(Ot(t)){var r=Yn(t.encoding,Lt),i=Yn(t.encoding,Nt),o=Yn(t.encoding,Bt);if(r||i||o)return this.mapFacetedUnit(t,n)}return xi(Object(_i.a)(e.prototype),"map",this).call(this,t,n)}},{key:"mapUnit",value:function(t,e){var n=e.parentEncoding,r=e.parentProjection;if(n||r)return this.mapUnitWithParentEncodingOrProjection(t,e);var i=this.mapLayerOrUnit.bind(this),o=!0,a=!1,u=void 0;try{for(var s,l=this.nonFacetUnitNormalizers[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;if(c.hasMatchingType(t,e.config))return c.run(t,e,i)}}catch(f){a=!0,u=f}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}return t}},{key:"mapRepeat",value:function(t,e){var n=t.repeat;return!Object(y.y)(n)&&t.columns&&(t=j(t,["columns"]),Ne(Re.columnsNotSupportByRowCol("repeat"))),Object.assign({},t,{spec:this.map(t.spec,e)})}},{key:"mapFacet",value:function(t,n){return Ze(t.facet)&&t.columns&&(t=j(t,["columns"]),Ne(Re.columnsNotSupportByRowCol("facet"))),xi(Object(_i.a)(e.prototype),"mapFacet",this).call(this,t,n)}},{key:"mapUnitWithParentEncodingOrProjection",value:function(t,e){var n=t.encoding,r=t.projection,i=e.parentEncoding,o=e.parentProjection,a=e.config,u=Ii({parentProjection:o,projection:r}),s=Ri({parentEncoding:i,encoding:n});return this.mapUnit(Object.assign({},t,u?{projection:u}:{},s?{encoding:s}:{}),{config:a})}},{key:"mapFacetedUnit",value:function(t,e){var n=t.encoding,r=n.row,i=n.column,o=n.facet,a=Ct(n,["row","column","facet"]),u=t.mark,s=t.width,l=t.projection,c=t.height,f=t.selection,h=(t.encoding,Ct(t,["mark","width","projection","height","selection","encoding"]));return o&&(r||i)&&Ne(Re.facetChannelDropped([].concat(Object(m.a)(r?[Lt]:[]),Object(m.a)(i?[Nt]:[])))),this.mapFacet(Object.assign({},h,{facet:r||i?Object.assign({},r?{row:r}:{},i?{column:i}:{}):o,spec:Object.assign({},l?{projection:l}:{},{mark:u},s?{width:s}:{},c?{height:c}:{},{encoding:a},f?{selection:f}:{})}),e)}},{key:"mapLayer",value:function(t,n){var r=n.parentEncoding,i=n.parentProjection,o=Ct(n,["parentEncoding","parentProjection"]),a=t.encoding,u=t.projection,s=Ct(t,["encoding","projection"]),l=Object.assign({},o,{parentEncoding:Ri({parentEncoding:r,encoding:a}),parentProjection:Ii({parentProjection:i,projection:u})});return xi(Object(_i.a)(e.prototype),"mapLayer",this).call(this,s,l)}}]),e}(Ei));function Ni(t){return Object(y.F)(t)?{type:t}:t||{}}var Bi=["background","padding"];function Ui(t){return Bi.reduce(function(e,n){return t&&void 0!==t[n]&&(e[n]=t[n]),e},{})}var qi=n(34);function Vi(t){return!!t.url}function Wi(t){return!!t.values}function Hi(t){return!!t.name&&!Vi(t)&&!Wi(t)}function Gi(t){return t&&(Xi(t)||Zi(t)||Yi(t))}function Xi(t){return!!t.sequence}function Zi(t){return!!t.sphere}function Yi(t){return!!t.graticule}var $i="main",Ki="raw";function Ji(t){return t&&!!t.field&&void 0!==t.equal}function Qi(t){return t&&!!t.field&&void 0!==t.lt}function to(t){return t&&!!t.field&&void 0!==t.lte}function eo(t){return t&&!!t.field&&void 0!==t.gt}function no(t){return t&&!!t.field&&void 0!==t.gte}function ro(t){return!!(t&&t.field&&Object(y.y)(t.range)&&2===t.range.length)}function io(t){return t&&!!t.field&&(Object(y.y)(t.oneOf)||Object(y.y)(t.in))}function oo(t){return io(t)||Ji(t)||ro(t)||Qi(t)||eo(t)||to(t)||no(t)}function ao(t,e){return Un(t,{timeUnit:e,time:!0})}function uo(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.field,r=t.timeUnit,i=r?"time("+on(r,n)+")":Sn(t,{expr:"datum"});if(Ji(t))return i+"==="+ao(t.equal,r);if(Qi(t)){var o=t.lt;return"".concat(i,"<").concat(ao(o,r))}if(eo(t)){var a=t.gt;return"".concat(i,">").concat(ao(a,r))}if(to(t)){var u=t.lte;return"".concat(i,"<=").concat(ao(u,r))}if(no(t)){var s=t.gte;return"".concat(i,">=").concat(ao(s,r))}if(io(t))return"indexof([".concat(function(t,e){return t.map(function(t){return ao(t,e)})}(t.oneOf,r).join(","),"], ").concat(i,") !== -1");if(function(t){return t&&!!t.field&&void 0!==t.valid}(t))return t.valid?"".concat(i,"!==null&&!isNaN(").concat(i,")"):"".concat(i,"===null||isNaN(").concat(i,")");if(ro(t)){var l=t.range[0],c=t.range[1];if(null!==l&&null!==c&&e)return"inrange("+i+", ["+ao(l,r)+", "+ao(c,r)+"])";var f=[];return null!==l&&f.push("".concat(i," >= ").concat(ao(l,r))),null!==c&&f.push("".concat(i," <= ").concat(ao(c,r))),f.length>0?f.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(JSON.stringify(t)))}function so(t){return oo(t)&&t.timeUnit?Object.assign({},t,{timeUnit:un(t.timeUnit)}):t}function lo(t){return void 0!==t.filter}function co(t){return void 0!==t.lookup}function fo(t){return void 0!==t.sample}function ho(t){return void 0!==t.window}function po(t){return void 0!==t.joinaggregate}function vo(t){return void 0!==t.flatten}function mo(t){return void 0!==t.calculate}function yo(t){return!!t.bin}function go(t){return void 0!==t.impute}function bo(t){return void 0!==t.timeUnit}function _o(t){return void 0!==t.aggregate}function xo(t){return void 0!==t.stack}function wo(t){return void 0!==t.fold}function ko(t){return!!t.signal}function Eo(t){return!!t.step}function So(t){return!Object(y.y)(t)&&("field"in t&&"data"in t)}var Oo=X({opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeMiterLimit:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,cursor:1,href:1,tooltip:1,cornerRadius:1,x:1,y:1,x2:1,y2:1}),Ao=["domain","grid","labels","ticks","title"],Mo={grid:"grid",gridColor:"grid",gridDash:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",domain:"main",domainColor:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontWeight:"main",labelLimit:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",maxExtent:"main",minExtent:"main",offset:"main",position:"main",tickColor:"main",tickExtra:"main",tickOffset:"both",tickOpacity:"main",tickRound:"main",ticks:"main",tickSize:"main",title:"main",titleAlign:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontWeight:"main",titleLimit:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",tickWidth:"both",tickCount:"both",values:"both",scale:"both",zindex:"both"},Co={orient:1,bandPosition:1,domain:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,values:1,zindex:1},To=Object.assign({},Co,{encoding:1});var jo=X(Object.assign({gridScale:1,scale:1},Co,{encode:1}));X(To);function Do(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{header:!1},i=t.combine(),o=i.orient,a=i.scale,u=i.title,s=i.zindex,l=Ct(i,["orient","scale","title","zindex"]);if(H(l).forEach(function(t){var n=Mo[t];n&&n!==e&&"both"!==n&&delete l[t]}),"grid"===e){if(!l.grid)return;if(l.encode){var c=l.encode.grid;l.encode=Object.assign({},c?{grid:c}:{}),0===H(l.encode).length&&delete l.encode}return Object.assign({scale:a,orient:o},l,{domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:nt(s,0)})}if(r.header||!t.mainExtracted){if(l.encode){var f=!0,h=!1,p=void 0;try{for(var d,v=Ao[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var m=d.value;t.hasAxisPart(m)||delete l.encode[m]}}catch(b){h=!0,p=b}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}0===H(l.encode).length&&delete l.encode}var g=function(t,e){return Object(y.y)(t)?t.map(function(t){return Pn(t,e)}).join(", "):t}(u,n);return Object.assign({scale:a,orient:o,grid:!1},g?{title:g}:{},l,{zindex:nt(s,1)})}}function Po(t){var e=t.component.axes,n=!0,r=!1,i=void 0;try{for(var o,a=Ae[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(e[u]){var s=!0,l=!1,c=void 0;try{for(var f,h=e[u][Symbol.iterator]();!(s=(f=h.next()).done);s=!0){if(!f.value.get("gridScale")){var p="x"===u?"height":"width";return[{name:p,update:t.getSizeSignalRef(p).signal}]}}}catch(d){l=!0,c=d}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}}}}catch(d){r=!0,i=d}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return[]}var zo={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontWeight:"fontWeight",titleLimit:"limit",titleOrient:"orient",titlePadding:"offset"},Ro={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelLimit:"limit",labelOrient:"orient",labelPadding:"offset"},Io=H(zo),Fo=H(Ro),Lo="mean";function No(t){return!!t&&("count"===t.op||!!t.field)}function Bo(t){return!!t&&Object(y.y)(t)}function Uo(t,e,n,r,i){var o=[].concat(Object(m.a)("band"===i?["axisBand"]:[]),["x"===n?"axisX":"axisY"],Object(m.a)(r?["axis"+r.substr(0,1).toUpperCase()+r.substr(1)]:[]),["axis"]),a=!0,u=!1,s=void 0;try{for(var l,c=o[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;if(e[f]&&void 0!==e[f][t])return e[f][t]}}catch(h){u=!0,s=h}finally{try{a||null==c.return||c.return()}finally{if(u)throw s}}}function qo(t,e){if(void 0!==t)return t=ot(t),"top"===e||"bottom"===e?t<=45||315<=t?"top"===e?"bottom":"top":135<=t&&t<=225?"top"===e?"top":"bottom":"middle":t<=45||315<=t||135<=t&&t<=225?"middle":45<=t&&t<=135?"left"===e?"top":"bottom":"left"===e?"bottom":"top"}function Vo(t,e){if(void 0!==t)return t=ot(t),"top"===e||"bottom"===e?t%180===0?"center":0<t&&t<180?"top"===e?"right":"left":"top"===e?"left":"right":(t+90)%180===0?"center":90<=t&&t<270?"left"===e?"left":"right":"left"===e?"right":"left"}function Wo(t){switch(t){case Ut:return"bottom";case qt:return"left"}throw new Error(Re.INVALID_CHANNEL_FOR_AXIS)}function Ho(t){return[].concat(t.type,t.style||[])}function Go(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).vgChannel;return nt(r?Xo(t,e,n.style):void 0,Xo(t,e,n.style),r?n[e.type][r]:void 0,n[e.type][t],r?n.mark[r]:n.mark[t])}function Xo(t,e,n){var r,i=Ho(e),o=!0,a=!1,u=void 0;try{for(var s,l=i[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=n[s.value],f=t;c&&void 0!==c[f]&&(r=c[f])}}catch(h){a=!0,u=h}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}return r}function Zo(t,e,n,r){if(Bn(t)){var i=xn(t)&&t.scale&&t.scale.type===Ar.UTC;return{signal:Qo(Sn(t,{expr:n}),t.timeUnit,e,r.text.shortTimeLabels,r.timeFormat,i,!0)}}var o=Yo(t,e,r);return Hn(t.bin)?{signal:Jo(Sn(t,{expr:n}),Sn(t,{expr:n,binSuffix:"end"}),o,r)}:"quantitative"===t.type?{signal:"".concat($o(Sn(t,{expr:n,binSuffix:"range"}),o))}:{signal:"''+".concat(Sn(t,{expr:n}))}}function Yo(t,e,n){return e||(t.type===ln?n.numberFormat:void 0)}function $o(t,e){return"format(".concat(t,', "').concat(e||"",'")')}function Ko(t,e,n){return $o(t,e||n.numberFormat)}function Jo(t,e,n,r){return"".concat(t," === null || isNaN(").concat(t,') ? "null" : ').concat(Ko(t,n,r),' + " - " + ').concat(Ko(e,n,r))}function Qo(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return!e||n?(n=n||i)||a?"".concat(o?"utc":"time","Format(").concat(t,", '").concat(n,"')"):void 0:function(t,e,n,r){if(t){var i=an(t,n),o="";return rn(t,qe.QUARTER)&&(o="'Q' + quarter(".concat(e,")")),i.length>0&&(o&&(o+=" + ' ' + "),o+=r?"utcFormat(".concat(e,", '").concat(i.join(" "),"')"):"timeFormat(".concat(e,", '").concat(i.join(" "),"')")),o||void 0}}(e,t,r,o)}function ta(t,e){return(Object(y.y)(t)?t:[t]).reduce(function(t,n){return t.field.push(Sn(n,e)),t.order.push(n.sort||"ascending"),t},{field:[],order:[]})}function ea(t,e){var n=Object(m.a)(t);return e.forEach(function(t){var e=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var u=o.value;if(D(u)===D(t))return}}catch(s){r=!0,i=s}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}n.push(t)}),n}function na(t,e){return t!==e&&e?t?t+", "+e:e:t}function ra(t,e){if(Object(y.y)(t.value)&&Object(y.y)(e.value))return{explicit:t.explicit,value:ea(t.value,e.value)};if(!Object(y.y)(t.value)&&!Object(y.y)(e.value))return{explicit:t.explicit,value:na(t.value,e.value)};throw new Error("It should never reach here")}var ia,oa,aa,ua,sa,la=function(){function t(e,n){Object(at.a)(this,t),this.debugName=n,this._children=[],this._parent=null,e&&(this.parent=e)}return Object(ut.a)(t,[{key:"clone",value:function(){throw new Error("Cannot clone node")}},{key:"hash",value:function(){return void 0===this._hash&&(this._hash=it()),this._hash}},{key:"producedFields",value:function(){return new Set}},{key:"dependentFields",value:function(){return new Set}},{key:"numChildren",value:function(){return this._children.length}},{key:"addChild",value:function(t,e){this._children.indexOf(t)>-1?console.warn("Attempt to add the same child twice."):void 0!==e?this._children.splice(e,0,t):this._children.push(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return this._children.splice(e,1),e}},{key:"remove",value:function(){var t=this._parent.removeChild(this),e=!0,n=!1,r=void 0;try{for(var i,o=this._children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a._parent=this._parent,this._parent.addChild(a,t++)}}catch(u){n=!0,r=u}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"insertAsParentOf",value:function(t){var e=t.parent;e.removeChild(this),this.parent=e,t.parent=this}},{key:"swapWithParent",value:function(){var t=this._parent,e=t.parent,n=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.parent=t}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=e,t.parent=this}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t,t&&t.addChild(this)}},{key:"children",get:function(){return this._children}}]),t}(),ca=function(t){function e(t,n,r,i){var o;return Object(at.a)(this,e),(o=Object(bi.a)(this,Object(_i.a)(e).call(this,t,n))).type=r,o.refCounts=i,o._source=o._name=n,!o.refCounts||o._name in o.refCounts||(o.refCounts[o._name]=0),o}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){var t=new this.constructor;return t.debugName="clone_"+this.debugName,t._source=this._source,t._name="clone_"+this._name,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}},{key:"getSource",value:function(){return this.refCounts[this._name]++,this._source}},{key:"isRequired",value:function(){return!!this.refCounts[this._name]}},{key:"setSource",value:function(t){this._source=t}}]),e}(la),fa="RawCode",ha="Literal",pa="Property",da="Identifier",va="ArrayExpression",ma="BinaryExpression",ya="CallExpression",ga="ConditionalExpression",ba="LogicalExpression",_a="MemberExpression",xa="ObjectExpression",wa="UnaryExpression";function ka(t){this.type=t}ka.prototype.visit=function(t){var e,n,r;if(t(this))return 1;for(n=0,r=(e=function(t){switch(t.type){case va:return t.elements;case ma:case ba:return[t.left,t.right];case ya:var e=t.arguments.slice();return e.unshift(t.callee),e;case ga:return[t.test,t.consequent,t.alternate];case _a:return[t.object,t.property];case xa:return t.properties;case pa:return[t.key,t.value];case wa:return[t.argument];case da:case ha:case fa:default:return[]}}(this)).length;n<r;++n)if(e[n].visit(t))return 1};var Ea=1,Sa=2,Oa=3,Aa=4,Ma=5,Ca=6,Ta=7,ja=8;(ia={})[Ea]="Boolean",ia[Sa]="<end>",ia[Oa]="Identifier",ia[Aa]="Keyword",ia[Ma]="Null",ia[Ca]="Numeric",ia[Ta]="Punctuator",ia[ja]="String",ia[9]="RegularExpression";var Da="ArrayExpression",Pa="BinaryExpression",za="CallExpression",Ra="ConditionalExpression",Ia="Identifier",Fa="Literal",La="LogicalExpression",Na="MemberExpression",Ba="ObjectExpression",Ua="Property",qa="UnaryExpression",Va="Unexpected token %0",Wa="Unexpected number",Ha="Unexpected string",Ga="Unexpected identifier",Xa="Unexpected reserved word",Za="Unexpected end of input",Ya="Invalid regular expression",$a="Invalid regular expression: missing /",Ka="Octal literals are not allowed in strict mode.",Ja="Duplicate data property in object literal not allowed in strict mode",Qa="ILLEGAL",tu="Disabled.",eu=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),nu=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function ru(t,e){if(!t)throw new Error("ASSERT: "+e)}function iu(t){return t>=48&&t<=57}function ou(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function au(t){return"01234567".indexOf(t)>=0}function uu(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function su(t){return 10===t||13===t||8232===t||8233===t}function lu(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&eu.test(String.fromCharCode(t))}function cu(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&nu.test(String.fromCharCode(t))}var fu={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function hu(){for(var t;aa<ua&&(uu(t=oa.charCodeAt(aa))||su(t));)++aa}function pu(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e)aa<ua&&ou(oa[aa])?(r=oa[aa++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):Cu({},Va,Qa);return String.fromCharCode(i)}function du(){var t,e,n,r;for(e=0,"}"===(t=oa[aa])&&Cu({},Va,Qa);aa<ua&&ou(t=oa[aa++]);)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&Cu({},Va,Qa),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function vu(){var t,e;for(t=oa.charCodeAt(aa++),e=String.fromCharCode(t),92===t&&(117!==oa.charCodeAt(aa)&&Cu({},Va,Qa),++aa,(t=pu("u"))&&"\\"!==t&&lu(t.charCodeAt(0))||Cu({},Va,Qa),e=t);aa<ua&&cu(t=oa.charCodeAt(aa));)++aa,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==oa.charCodeAt(aa)&&Cu({},Va,Qa),++aa,(t=pu("u"))&&"\\"!==t&&cu(t.charCodeAt(0))||Cu({},Va,Qa),e+=t);return e}function mu(){var t,e;return t=aa,{type:1===(e=92===oa.charCodeAt(aa)?vu():function(){var t,e;for(t=aa++;aa<ua;){if(92===(e=oa.charCodeAt(aa)))return aa=t,vu();if(!cu(e))break;++aa}return oa.slice(t,aa)}()).length?Oa:fu.hasOwnProperty(e)?Aa:"null"===e?Ma:"true"===e||"false"===e?Ea:Oa,value:e,start:t,end:aa}}function yu(){var t,e,n,r,i=aa,o=oa.charCodeAt(aa),a=oa[aa];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++aa,{type:Ta,value:String.fromCharCode(o),start:i,end:aa};default:if(61===(t=oa.charCodeAt(aa+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return aa+=2,{type:Ta,value:String.fromCharCode(o)+String.fromCharCode(t),start:i,end:aa};case 33:case 61:return aa+=2,61===oa.charCodeAt(aa)&&++aa,{type:Ta,value:oa.slice(i,aa),start:i,end:aa}}}return">>>="===(r=oa.substr(aa,4))?{type:Ta,value:r,start:i,end:aa+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:Ta,value:n,start:i,end:aa+=3}:a===(e=n.substr(0,2))[1]&&"+-<>&|".indexOf(a)>=0||"=>"===e?{type:Ta,value:e,start:i,end:aa+=2}:"<>=!+-*%&|^/".indexOf(a)>=0?{type:Ta,value:a,start:i,end:++aa}:void Cu({},Va,Qa)}function gu(){var t,e,n;if(ru(iu((n=oa[aa]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=aa,t="","."!==n){if(t=oa[aa++],n=oa[aa],"0"===t){if("x"===n||"X"===n)return++aa,function(t){for(var e="";aa<ua&&ou(oa[aa]);)e+=oa[aa++];return 0===e.length&&Cu({},Va,Qa),lu(oa.charCodeAt(aa))&&Cu({},Va,Qa),{type:Ca,value:parseInt("0x"+e,16),start:t,end:aa}}(e);if(au(n))return function(t){for(var e="0"+oa[aa++];aa<ua&&au(oa[aa]);)e+=oa[aa++];return(lu(oa.charCodeAt(aa))||iu(oa.charCodeAt(aa)))&&Cu({},Va,Qa),{type:Ca,value:parseInt(e,8),octal:!0,start:t,end:aa}}(e);n&&iu(n.charCodeAt(0))&&Cu({},Va,Qa)}for(;iu(oa.charCodeAt(aa));)t+=oa[aa++];n=oa[aa]}if("."===n){for(t+=oa[aa++];iu(oa.charCodeAt(aa));)t+=oa[aa++];n=oa[aa]}if("e"===n||"E"===n)if(t+=oa[aa++],"+"!==(n=oa[aa])&&"-"!==n||(t+=oa[aa++]),iu(oa.charCodeAt(aa)))for(;iu(oa.charCodeAt(aa));)t+=oa[aa++];else Cu({},Va,Qa);return lu(oa.charCodeAt(aa))&&Cu({},Va,Qa),{type:Ca,value:parseFloat(t),start:e,end:aa}}function bu(){var t,e,n,r;return sa=null,hu(),t=aa,e=function(){var t,e,n,r;for(ru("/"===(t=oa[aa]),"Regular expression literal must start with a slash"),e=oa[aa++],n=!1,r=!1;aa<ua;)if(e+=t=oa[aa++],"\\"===t)su((t=oa[aa++]).charCodeAt(0))&&Cu({},$a),e+=t;else if(su(t.charCodeAt(0)))Cu({},$a);else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||Cu({},$a),{value:e.substr(1,e.length-2),literal:e}}(),n=function(){var t,e,n;for(e="",n="";aa<ua&&cu((t=oa[aa]).charCodeAt(0));)++aa,"\\"===t&&aa<ua?Cu({},Va,Qa):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&Cu({},Ya,n),{value:n,literal:e}}(),r=function(t,e){var n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(t,e){if(parseInt(e,16)<=1114111)return"x";Cu({},Ya)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){Cu({},Ya)}try{return new RegExp(t,e)}catch(i){return null}}(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:aa}}function _u(){var t;return hu(),aa>=ua?{type:Sa,start:aa,end:aa}:lu(t=oa.charCodeAt(aa))?mu():40===t||41===t||59===t?yu():39===t||34===t?function(){var t,e,n,r,i="",o=!1;for(ru("'"===(t=oa[aa])||'"'===t,"String literal must starts with a quote"),e=aa,++aa;aa<ua;){if((n=oa[aa++])===t){t="";break}if("\\"===n)if((n=oa[aa++])&&su(n.charCodeAt(0)))"\r"===n&&"\n"===oa[aa]&&++aa;else switch(n){case"u":case"x":"{"===oa[aa]?(++aa,i+=du()):i+=pu(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:au(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),aa<ua&&au(oa[aa])&&(o=!0,r=8*r+"01234567".indexOf(oa[aa++]),"0123".indexOf(n)>=0&&aa<ua&&au(oa[aa])&&(r=8*r+"01234567".indexOf(oa[aa++]))),i+=String.fromCharCode(r)):i+=n}else{if(su(n.charCodeAt(0)))break;i+=n}}return""!==t&&Cu({},Va,Qa),{type:ja,value:i,octal:o,start:e,end:aa}}():46===t?iu(oa.charCodeAt(aa+1))?gu():yu():iu(t)?gu():yu()}function xu(){var t;return aa=(t=sa).end,sa=_u(),aa=t.end,t}function wu(){var t;t=aa,sa=_u(),aa=t}function ku(t,e,n){var r=new ka("||"===t||"&&"===t?La:Pa);return r.operator=t,r.left=e,r.right=n,r}function Eu(t,e){var n=new ka(za);return n.callee=t,n.arguments=e,n}function Su(t){var e=new ka(Ia);return e.name=t,e}function Ou(t){var e=new ka(Fa);return e.value=t.value,e.raw=oa.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function Au(t,e,n){var r=new ka(Na);return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function Mu(t,e,n){var r=new ka(Ua);return r.key=e,r.value=n,r.kind=t,r}function Cu(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,function(t,e){return ru(e<r.length,"Message reference must be in range"),r[e]});throw(n=new Error(i)).index=aa,n.description=i,n}function Tu(t){t.type===Sa&&Cu(t,Za),t.type===Ca&&Cu(t,Wa),t.type===ja&&Cu(t,Ha),t.type===Oa&&Cu(t,Ga),t.type===Aa&&Cu(t,Xa),Cu(t,Va,t.value)}function ju(t){var e=xu();e.type===Ta&&e.value===t||Tu(e)}function Du(t){return sa.type===Ta&&sa.value===t}function Pu(t){return sa.type===Aa&&sa.value===t}function zu(){var t=[];for(aa=sa.start,ju("[");!Du("]");)Du(",")?(xu(),t.push(null)):(t.push(Gu()),Du("]")||ju(","));return xu(),function(t){var e=new ka(Da);return e.elements=t,e}(t)}function Ru(){var t;return aa=sa.start,(t=xu()).type===ja||t.type===Ca?(t.octal&&Cu(t,Ka),Ou(t)):Su(t.value)}function Iu(){var t,e,n;return aa=sa.start,(t=sa).type===Oa?(n=Ru(),ju(":"),Mu("init",n,Gu())):t.type!==Sa&&t.type!==Ta?(e=Ru(),ju(":"),Mu("init",e,Gu())):void Tu(t)}function Fu(){var t,e,n=[],r={},i=String;for(aa=sa.start,ju("{");!Du("}");)e="$"+((t=Iu()).key.type===Ia?t.key.name:i(t.key.value)),Object.prototype.hasOwnProperty.call(r,e)?Cu({},Ja):r[e]=!0,n.push(t),Du("}")||ju(",");return ju("}"),function(t){var e=new ka(Ba);return e.properties=t,e}(n)}var Lu={if:1,this:1};function Nu(){var t,e,n;if(Du("("))return function(){var t;return ju("("),t=Xu(),ju(")"),t}();if(Du("["))return zu();if(Du("{"))return Fu();if(t=sa.type,aa=sa.start,t===Oa||Lu[sa.value])n=Su(xu().value);else if(t===ja||t===Ca)sa.octal&&Cu(sa,Ka),n=Ou(xu());else{if(t===Aa)throw new Error(tu);t===Ea?((e=xu()).value="true"===e.value,n=Ou(e)):t===Ma?((e=xu()).value=null,n=Ou(e)):Du("/")||Du("/=")?(n=Ou(bu()),wu()):Tu(xu())}return n}function Bu(){var t=[];if(ju("("),!Du(")"))for(;aa<ua&&(t.push(Gu()),!Du(")"));)ju(",");return ju(")"),t}function Uu(){var t;return aa=sa.start,function(t){return t.type===Oa||t.type===Aa||t.type===Ea||t.type===Ma}(t=xu())||Tu(t),Su(t.value)}function qu(){var t;return ju("["),t=Xu(),ju("]"),t}function Vu(){var t=function(){var t;for(t=Nu();;)if(Du("."))ju("."),t=Au(".",t,Uu());else if(Du("("))t=Eu(t,Bu());else{if(!Du("["))break;t=Au("[",t,qu())}return t}();if(sa.type===Ta&&(Du("++")||Du("--")))throw new Error(tu);return t}function Wu(){var t,e;if(sa.type!==Ta&&sa.type!==Aa)e=Vu();else{if(Du("++")||Du("--"))throw new Error(tu);if(Du("+")||Du("-")||Du("~")||Du("!"))t=xu(),e=Wu(),e=function(t,e){var n=new ka(qa);return n.operator=t,n.argument=e,n.prefix=!0,n}(t.value,e);else{if(Pu("delete")||Pu("void")||Pu("typeof"))throw new Error(tu);e=Vu()}}return e}function Hu(t){var e=0;if(t.type!==Ta&&t.type!==Aa)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11}return e}function Gu(){var t,e;return t=function(){var t,e,n,r,i,o,a,u,s,l;if(t=sa,s=Wu(),0===(i=Hu(r=sa)))return s;for(r.prec=i,xu(),e=[t,sa],o=[s,r,a=Wu()];(i=Hu(sa))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),u=o.pop().value,s=o.pop(),e.pop(),n=ku(u,s,a),o.push(n);(r=xu()).prec=i,o.push(r),e.push(sa),n=Wu(),o.push(n)}for(n=o[l=o.length-1],e.pop();l>1;)e.pop(),n=ku(o[l-1].value,o[l-2],n),l-=2;return n}(),Du("?")&&(xu(),e=Gu(),ju(":"),t=function(t,e,n){var r=new ka(Ra);return r.test=t,r.consequent=e,r.alternate=n,r}(t,e,Gu())),t}function Xu(){var t=Gu();if(Du(","))throw new Error(tu);return t}var Zu=function(t){aa=0,ua=(oa=t).length,sa=null,wu();var e=Xu();if(sa.type!==Sa)throw new Error("Unexpect token after expression.");return e},Yu={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},$u=function(t){function e(e,n,r){return function(i){return function(e,n,r,i){var o=t(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+e+(i<0?"":0===i?"()":"("+n.slice(1).map(t).join(",")+")")}(e,i,n,r)}}var n="new Date";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&Object(y.m)("Missing arguments to clamp function."),e.length>3&&Object(y.m)("Too many arguments to clamp function.");var n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:e("getDate",n,0),day:e("getDay",n,0),year:e("getFullYear",n,0),month:e("getMonth",n,0),hours:e("getHours",n,0),minutes:e("getMinutes",n,0),seconds:e("getSeconds",n,0),milliseconds:e("getMilliseconds",n,0),time:e("getTime",n,0),timezoneoffset:e("getTimezoneOffset",n,0),utcdate:e("getUTCDate",n,0),utcday:e("getUTCDay",n,0),utcyear:e("getUTCFullYear",n,0),utcmonth:e("getUTCMonth",n,0),utchours:e("getUTCHours",n,0),utcminutes:e("getUTCMinutes",n,0),utcseconds:e("getUTCSeconds",n,0),utcmilliseconds:e("getUTCMilliseconds",n,0),length:e("length",null,-1),join:e("join",null),indexof:e("indexOf",null),lastindexof:e("lastIndexOf",null),slice:e("slice",null),reverse:function(e){return"("+t(e[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:e("toUpperCase","String",0),lower:e("toLowerCase","String",0),substring:e("substring","String"),split:e("split","String"),replace:e("replace","String"),trim:e("trim","String",0),regexp:"RegExp",test:e("test","RegExp"),if:function(e){e.length<3&&Object(y.m)("Missing arguments to if function."),e.length>3&&Object(y.m)("Too many arguments to if function.");var n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}};function Ku(t){var e=Zu(t),n=new Set;return e.visit(function(t){"MemberExpression"===t.type&&function t(e){return"MemberExpression"===e.object.type?t(e.object):"datum"===e.object.name}(t)&&n.add(function t(e){var n=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(n.push.apply(n,Object(m.a)(t(e.object))),n.push.apply(n,Object(m.a)(t(e.property)))),n)}(t).slice(1).join("."))}),n}var Ju=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).transform=n,r._dependentFields=Ku(r.transform.calculate),r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this.transform))}},{key:"producedFields",value:function(){return new Set([this.transform.as])}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"assemble",value:function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}},{key:"hash",value:function(){return"Calculate ".concat(P(this.transform))}}],[{key:"parseAllForSortIndex",value:function(t,n){return n.forEachFieldDef(function(n,r){if(xn(n)&&Bo(n.sort)){var i=n.field,o=n.timeUnit,a=n.sort,u=a.map(function(t,e){return"".concat(uo({field:i,timeUnit:o,equal:t})," ? ").concat(e," : ")}).join("")+a.length;t=new e(t,{calculate:u,as:Qu(n,r,{forAs:!0})})}}),t}}]),e}(la);function Qu(t,e,n){return Sn(t,Object.assign({prefix:e,suffix:"sort_index"},n||{}))}function ts(t,e){return R(["top","bottom"],e)?"column":R(["left","right"],e)?"row":"row"===t?"row":"column"}function es(t,e,n,r){var i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return nt(e&&e.header?e.header[t]:void 0,i[t],n.header[t])}function ns(t,e,n,r){var i={},o=!0,a=!1,u=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,f=es(c,e,n,r);void 0!==f&&(i[c]=f)}}catch(h){a=!0,u=h}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}return i}var rs=["row","column"],is=["header","footer"];function os(t,e){var n=t.component.layoutHeaders[e].title,r=t.config?t.config:void 0,i=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,o=ns(["titleAnchor","titleAngle","titleOrient"],i,r,e),a=o.titleAnchor,u=o.titleAngle,s=ts(e,o.titleOrient);return{name:"".concat(e,"-title"),type:"group",role:"".concat(s,"-title"),title:Object.assign({text:n},"row"===e?{orient:"left"}:{},{style:"guide-title"},us(u,s),as(s,u,a),ds(r,i,e,Io,zo))}}function as(t,e){switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"middle"){case"start":return{align:"left"};case"end":return{align:"right"}}var n=Vo(e,"row"===t?"left":"top");return n?{align:n}:{}}function us(t,e){var n=qo(t,"row"===e?"left":"top");return n?{baseline:n}:{}}function ss(t,e){var n=t.component.layoutHeaders[e],r=[],i=!0,o=!1,a=void 0;try{for(var u,s=is[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;if(n[l]){var c=!0,f=!1,h=void 0;try{for(var p,d=n[l][Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value;r.push(fs(t,e,l,n,v))}}catch(m){f=!0,h=m}finally{try{c||null==d.return||d.return()}finally{if(f)throw h}}}}}catch(m){o=!0,a=m}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r}function ls(t,e){var n=t.sort;return No(n)?{field:Sn(n,{expr:"datum"}),order:n.order||"ascending"}:Object(y.y)(n)?{field:Qu(t,e,{expr:"datum"}),order:"ascending"}:{field:Sn(t,{expr:"datum"}),order:n||"ascending"}}function cs(t,e,n){var r=ns(["format","labelAngle","labelAnchor","labelOrient"],t,n,e),i=r.format,o=r.labelAngle,a=r.labelAnchor,u=ts(e,r.labelOrient);return Object.assign({text:Zo(t,i,"parent",n)},"row"===e?{orient:"left"}:{},{style:"guide-label",frame:"group"},us(o,u),as(u,o,a),ds(n,t,e,Fo,Ro))}function fs(t,e,n,r,i){if(i){var o=null,a=r.facetFieldDef,u=t.config?t.config:void 0;if(a&&i.labels){var s=ns(["labelOrient"],a,u,e).labelOrient;("row"===e&&!R(["top","bottom"],s)||"column"===e&&!R(["left","right"],s))&&(o=cs(a,e,u))}var l=jf(t)&&!Ze(t.facet),c=i.axes,f=c&&c.length>0;if(o||f){var h="row"===e?"height":"width";return Object.assign({name:t.getName("".concat(e,"_").concat(n)),type:"group",role:"".concat(e,"-").concat(n)},r.facetFieldDef?{from:{data:t.getName(e+"_domain")},sort:ls(a,e)}:{},f&&l?{from:{data:t.getName("facet_domain_".concat(e))}}:{},o?{title:o}:{},i.sizeSignal?{encode:{update:Object(Mt.a)({},h,i.sizeSignal)}}:{},f?{axes:c}:{})}}return null}var hs={column:{start:0,end:1},row:{start:1,end:0}};function ps(t,e){return hs[e][t]}function ds(t,e,n,r,i){var o={},a=!0,u=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;if(i[f]){var h=es(f,e,t,n);void 0!==h&&(o[i[f]]=h)}}}catch(p){u=!0,s=p}finally{try{a||null==c.return||c.return()}finally{if(u)throw s}}return o}function vs(t){return[].concat(Object(m.a)(ms(t,"width")),Object(m.a)(ms(t,"height")))}function ms(t,e){var n="width"===e?"x":"y",r=t.component.layoutSize.get(e);if(!r||"merged"===r)return[];var i=t.getSizeSignalRef(e).signal;if("range-step"===r){var o=t.getScaleComponent(n);if(o){var a=o.get("type"),u=o.get("range");if(Wr(a)&&Eo(u)){var s=t.scaleName(n);if(jf(t.parent))if("independent"===t.parent.component.resolve.scale[n])return[ys(s,u)];return[ys(s,u),{name:i,update:gs(s,o,"domain('".concat(s,"').length"))}]}}throw new Error("layout size is range step although there is no rangeStep.")}return[{name:i,value:r}]}function ys(t,e){return{name:t+"_step",value:e.step}}function gs(t,e,n){var r=e.get("type"),i=e.get("padding"),o=nt(e.get("paddingOuter"),i),a=e.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,"bandspace(".concat(n,", ").concat(a,", ").concat(o,") * ").concat(t,"_step")}var bs,_s,xs=function(t,e,n){return bs=e||ws,_s=n||Ds,zs(t.trim()).map(Rs)},ws="view",ks="[",Es="]",Ss="{",Os="}",As=":",Ms=",",Cs="@",Ts=">",js=/[[\]{}]/,Ds={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function Ps(t,e,n,r,i){for(var o,a=0,u=t.length;e<u;++e){if(o=t[e],!a&&o===n)return e;i&&i.indexOf(o)>=0?--a:r&&r.indexOf(o)>=0&&++a}return e}function zs(t){for(var e=[],n=0,r=t.length,i=0;i<r;)i=Ps(t,i,Ms,ks+Ss,Es+Os),e.push(t.substring(n,i).trim()),n=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function Rs(t){return"["===t[0]?function(t){var e,n,r=t.length,i=1;if((i=Ps(t,i,Es,ks,Es))===r)throw"Empty between selector: "+t;if(2!==(e=zs(t.substring(1,i))).length)throw"Between selector must have two elements: "+t;if((t=t.slice(i+1).trim())[0]!==Ts)throw"Expected '>' after between selector: "+t;if(e=e.map(Rs),(n=Rs(t.slice(1).trim())).between)return{between:e,stream:n};n.between=e;return n}(t):function(t){var e,n,r={source:bs},i=[],o=[0,0],a=0,u=0,s=t.length,l=0;if(t[s-1]===Os){if(!((l=t.lastIndexOf(Ss))>=0))throw"Unmatched right brace: "+t;try{o=function(t){var e=t.split(Ms);if(!t.length||e.length>2)throw t;return e.map(function(e){var n=+e;if(n!==n)throw t;return n})}(t.substring(l+1,s-1))}catch(f){throw"Invalid throttle specification: "+t}t=t.slice(0,l).trim(),s=t.length,l=0}if(!s)throw t;t[0]===Cs&&(a=++l);(e=Ps(t,l,As))<s&&(i.push(t.substring(u,e).trim()),u=l=++e);if((l=Ps(t,l,ks))===s)i.push(t.substring(u,s).trim());else if(i.push(t.substring(u,l).trim()),n=[],(u=++l)===s)throw"Unmatched left bracket: "+t;for(;l<s;){if((l=Ps(t,l,Es))===s)throw"Unmatched left bracket: "+t;if(n.push(t.substring(u,l).trim()),l<s-1&&t[++l]!==ks)throw"Expected left bracket: "+t;u=++l}if(!(s=i.length)||js.test(i[s-1]))throw"Invalid event selector: "+t;s>1?(r.type=i[1],a?r.markname=i[0].slice(1):(c=i[0],_s.hasOwnProperty(c)?r.marktype=i[0]:r.source=i[0])):r.type=i[0];var c;"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1));null!=n&&(r.filter=n);o[0]&&(r.throttle=o[0]);o[1]&&(r.debounce=o[1]);return r}(t)}var Is=n(53);function Fs(t,e,n){return(Fs=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Object(Is.a)(i,n.prototype),i}).apply(null,arguments)}function Ls(t){var e="function"===typeof Map?new Map:void 0;return(Ls=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Fs(t,arguments,Object(_i.a)(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(Is.a)(r,t)})(t)}var Ns=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).formula=n,r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this.formula))}},{key:"merge",value:function(t){this.formula=Object.assign({},this.formula,t.formula),t.remove()}},{key:"producedFields",value:function(){return new Set(G(this.formula).map(function(t){return t.as}))}},{key:"dependentFields",value:function(){return new Set(G(this.formula).map(function(t){return t.field}))}},{key:"hash",value:function(){return"TimeUnit ".concat(P(this.formula))}},{key:"assemble",value:function(){return G(this.formula).map(function(t){return{type:"formula",as:t.as,expr:on(t.timeUnit,t.field)}})}}],[{key:"makeFromEncoding",value:function(t,n){var r=n.reduceFieldDef(function(t,e){if(e.timeUnit){var n=Sn(e,{forAs:!0});t[n]={as:n,timeUnit:e.timeUnit,field:e.field}}return t},{});return 0===H(r).length?null:new e(t,r)}},{key:"makeFromTransform",value:function(t,n){return new e(t,Object(Mt.a)({},n.field,{as:n.as,timeUnit:n.timeUnit,field:n.field}))}}]),e}(la),Bs={has:function(t){return"interval"===t.type&&"global"===t.resolve&&t.bind&&"scales"===t.bind},parse:function(t,e,n){var r=Y(n.name),i=n.scales=[],o=!0,a=!1,u=void 0;try{for(var s,l=n.project[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,f=c.channel;if(De(f)){var h=t.getScaleComponent(f),p=h?h.get("type"):void 0;if(h&&Hr(p)){if(h.set("domainRaw",{signal:Q(c.field,r)},!0),i.push(c),t.repeater&&t.repeater.row===t.repeater.column)t.getScaleComponent(f===Ut?qt:Ut).set("domainRaw",{signal:Q(c.field,r)},!0)}else Ne(Re.SCALE_BINDINGS_CONTINUOUS)}}}catch(d){a=!0,u=d}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}},topLevelSignals:function(t,e,n){var r=e.scales.filter(function(t){return!n.filter(function(e){return e.name===t.signals.data}).length});if(!t.parent||!r.length)return n;var i=n.filter(function(t){return t.name===e.name})[0],o=i.update;if(o.indexOf(tl)>=0)i.update="{".concat(r.map(function(t){return"".concat(Object(y.U)(t.field),": ").concat(t.signals.data)}).join(", "),"}");else{var a=!0,u=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=", ".concat(Object(y.U)(f.field),": ").concat(f.signals.data);o.indexOf(h)<0&&(i.update=o.substring(0,o.length-1)+h+"}")}}catch(p){u=!0,s=p}finally{try{a||null==c.return||c.return()}finally{if(u)throw s}}}return n.concat(r.map(function(t){return{name:t.signals.data}}))},signals:function(t,e,n){if(t.parent){var r=!0,i=!1,o=void 0;try{for(var a,u=function(){var t=a.value,e=n.filter(function(e){return e.name===t.signals.data})[0];e.push="outer",delete e.value,delete e.update},s=e.scales[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)u()}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}return n}};function Us(t,e){var n=Object(y.U)(t.scaleName(e));return"domain(".concat(n,")")}var qs="_tuple_fields",Vs=function(t){function e(){var t,n;Object(at.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(bi.a)(this,(t=Object(_i.a)(e)).call.apply(t,[this].concat(i)))).__proto__=e.prototype,n.has={},n}return Object(wi.a)(e,t),e}(Ls(Array)),Ws="_scale_trigger",Hs={signals:function(t,e){var n=e.name,r=n+qs,i=Bs.has(e),o=[],a=[],u=[];if(e.translate&&!i){var s="!event.item || event.item.mark.name !== ".concat(Object(y.U)(n+"_brush"));Gs(e,function(t,e){var n=e.between[0].filter||(e.between[0].filter=[]);n.indexOf(s)<0&&n.push(s)})}e.project.forEach(function(n,r){var i=n.channel;if(i===Ut||i===qt){var s=e.init?e.init[r]:null,l=function(t,e,n,r){var i=n.channel,o=n.signals.visual,a=n.signals.data,u=Bs.has(e),s=Object(y.U)(t.scaleName(i)),l=t.getScaleComponent(i),c=l?l.get("type"):void 0,f=function(t){return"scale(".concat(s,", ").concat(t,")")},h=t.getSizeSignalRef(i===Ut?"width":"height").signal,p="".concat(i,"(unit)"),d=Gs(e,function(t,e){return[].concat(Object(m.a)(t),[{events:e.between[0],update:"[".concat(p,", ").concat(p,"]")},{events:e,update:"[".concat(o,"[0], clamp(").concat(p,", 0, ").concat(h,")]")}])});return d.push({events:{signal:e.name+Ws},update:Hr(c)?"[".concat(f("".concat(a,"[0]")),", ").concat(f("".concat(a,"[1]")),"]"):"[0, 0]"}),u?[{name:a,on:[]}]:[Object.assign({name:o},r?{init:bl(r,f)}:{value:[]},{on:d}),Object.assign({name:a},r?{init:bl(r)}:{},{on:[{events:{signal:o},update:"".concat(o,"[0] === ").concat(o,"[1] ? null : invert(").concat(s,", ").concat(o,")")}]})]}(t,e,n,s),c=n.signals.data,f=n.signals.visual,h=Object(y.U)(t.scaleName(i)),p=Hr(t.getScaleComponent(i).get("type"))?"+":"";o.push.apply(o,Object(m.a)(l)),a.push(c),u.push({scaleName:t.scaleName(i),expr:"(!isArray(".concat(c,") || ")+"(".concat(p,"invert(").concat(h,", ").concat(f,")[0] === ").concat(p).concat(c,"[0] && ")+"".concat(p,"invert(").concat(h,", ").concat(f,")[1] === ").concat(p).concat(c,"[1]))")})}else Ne("Interval selections only support x and y encoding channels.")}),i||o.push({name:n+Ws,value:{},on:[{events:u.map(function(t){return{scale:t.scaleName}}),update:u.map(function(t){return t.expr}).join(" && ")+" ? ".concat(n+Ws," : {}")}]});var l=e.init,c="unit: ".concat(rl(t),", fields: ").concat(r,", values");return o.concat(Object.assign({name:n+Ks},l?{init:"{".concat(c,": ").concat(bl(l),"}")}:{},{on:[{events:[{signal:a.join(" || ")}],update:a.join(" && ")+" ? {".concat(c,": [").concat(a,"]} : null")}]}))},modifyExpr:function(t,e){return e.name+Ks+", "+("global"===e.resolve?"true":"{unit: ".concat(rl(t),"}"))},marks:function(t,e,n){var r=e.name,i=e.project.has,o=i.x,a=i.y,u="data(".concat(Object(y.U)(e.name+$s),")");if(Bs.has(e))return n;var s={x:void 0!==o?{signal:"".concat(r,"_x[0]")}:{value:0},y:void 0!==a?{signal:"".concat(r,"_y[0]")}:{value:0},x2:void 0!==o?{signal:"".concat(r,"_x[1]")}:{field:{group:"width"}},y2:void 0!==a?{signal:"".concat(r,"_y[1]")}:{field:{group:"height"}}};if("global"===e.resolve){var l=!0,c=!1,f=void 0;try{for(var h,p=H(s)[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var d=h.value;s[d]=[Object.assign({test:"".concat(u,".length && ").concat(u,"[0].unit === ").concat(rl(t))},s[d]),{value:0}]}}catch(w){c=!0,f=w}finally{try{l||null==p.return||p.return()}finally{if(c)throw f}}}var v=e.mark,g=v.fill,b=v.fillOpacity,_=Ct(v,["fill","fillOpacity"]),x=H(_).reduce(function(t,e){return t[e]=[{test:[void 0!==o&&"".concat(r,"_x[0] !== ").concat(r,"_x[1]"),void 0!==a&&"".concat(r,"_y[0] !== ").concat(r,"_y[1]")].filter(function(t){return t}).join(" && "),value:_[e]},{value:null}],t},{});return[{name:r+"_brush_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:g},fillOpacity:{value:b}},update:s}}].concat(Object(m.a)(n),[{name:r+"_brush",type:"rect",clip:!0,encode:{enter:{fill:{value:"transparent"}},update:Object.assign({},s,x)}}])}};function Gs(t,e){return t.events.reduce(function(t,n){return n.between?e(t,n):(Ne("".concat(n," is not an ordered event stream for interval selections")),t)},[])}function Xs(t,e){var n=e.name,r=n+qs,i=e.project,o="(item().isVoronoi ? datum.datum : datum)",a=i.map(function(e){var n=t.fieldDef(e.channel);return n&&n.bin?"[".concat(Q(t.vgField(e.channel,{}),o),", ")+"".concat(Q(t.vgField(e.channel,{binSuffix:"end"}),o),"]"):"".concat(Q(e.field,o))}).join(", "),u="unit: ".concat(rl(t),", fields: ").concat(r,", values"),s=[{name:n+Ks,on:[{events:e.events,update:"datum && item().mark.marktype !== 'group' ? {".concat(u,": [").concat(a,"]} : null"),force:!0}]}];if(e.init){var l=e.init.map(function(t){var e=bl(t);return"{".concat(u,": ").concat(e,"}")});s.push({name:"".concat(n,"_init"),init:"modify(".concat(Object(y.U)(e.name+$s),", [").concat(l,"])")})}return s}var Zs={signals:Xs,modifyExpr:function(t,e){return e.name+Ks+", "+("global"===e.resolve?"null":"{unit: ".concat(rl(t),"}"))}},Ys={signals:Xs,modifyExpr:function(t,e){return e.name+Ks+", "+("global"===e.resolve?"true":"{unit: ".concat(rl(t),"}"))}},$s="_store",Ks="_tuple",Js="_modify",Qs="_selection_domain_",tl="vlSelectionResolve",el={single:Ys,multi:Zs,interval:Hs};function nl(t,e){var n=t.component.selection;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];e(i,el[i.type])}}function rl(t){var e=Object(y.U)(t.name),n=function(t){for(var e=t.parent;e&&!jf(e);)e=e.parent;return e}(t);if(n){var r=n.facet,i=!0,o=!1,a=void 0;try{for(var u,s=ve[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;r[l]&&(e+=" + '__facet_".concat(l,"_' + (").concat(Q(n.vgField(l),"facet"),")"))}}catch(c){o=!0,a=c}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}return e}function il(t){var e=!1;return nl(t,function(t){e=e||t.project.some(function(t){return t.field===ri})}),e}var ol={has:function(t){return"interval"!==t.type&&t.nearest},marks:function(t,e,n){var r=e.project.has,i=r.x,o=r.y,a=t.mark;if(xt(a))return Ne(Re.nearestNotSupportForContinuous(a)),n;var u={name:t.getName("voronoi"),type:"path",from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Gl(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!i&&!o?"datum.datum.x || 0":"0"},y:{expr:o||!i&&!o?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},s=0,l=!1;return n.forEach(function(e,n){var r=e.name||"";r===t.component.mark[0].name?s=n:r.indexOf("voronoi")>=0&&(l=!0)}),l||n.splice(s+1,0,u),n}},al={has:function(t){return"single"===t.type&&"global"===t.resolve&&t.bind&&"scales"!==t.bind},topLevelSignals:function(t,e,n){var r=e.name,i=e.project,o=e.bind,a=e.init&&e.init[0],u=ol.has(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.forEach(function(t,i){var s=Y("".concat(r,"_").concat(t.field));n.filter(function(t){return t.name===s}).length||n.unshift(Object.assign({name:s},a?{init:bl(a[i])}:{value:null},{on:[{events:e.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(Q(t.field,u)," : null")}],bind:o[t.field]||o[t.channel]||o}))}),n},signals:function(t,e,n){var r=e.name,i=e.project,o=n.filter(function(t){return t.name===r+Ks})[0],a=r+qs,u=i.map(function(t){return Y("".concat(r,"_").concat(t.field))}),s=u.map(function(t){return"".concat(t," !== null")}).join(" && ");return u.length&&(o.update="".concat(s," ? {fields: ").concat(a,", values: [").concat(u.join(", "),"]} : null")),delete o.value,delete o.on,n}},ul={has:function(t){return"multi"===t.type&&t.toggle},signals:function(t,e,n){return n.concat({name:e.name+"_toggle",value:!1,on:[{events:e.events,update:e.toggle}]})},modifyExpr:function(t,e,n){var r=e.name+Ks,i=e.name+"_toggle";return"".concat(i," ? null : ").concat(r,", ")+("global"===e.resolve?"".concat(i," ? null : true, "):"".concat(i," ? null : {unit: ").concat(rl(t),"}, "))+"".concat(i," ? ").concat(r," : null")}},sl={has:function(t){return!1!==t.clear},parse:function(t,e,n){e.clear&&(n.clear=xs(e.clear,"scope"))},topLevelSignals:function(t,e,n){return al.has(e)&&e.project.forEach(function(t){var r=n.findIndex(function(n){return n.name===Y("".concat(e.name,"_").concat(t.field))});-1!==r&&n[r].on.push({events:e.clear,update:"null"})}),n},signals:function(t,e,n){function r(t,r){-1!==t&&n[t].on&&n[t].on.push({events:e.clear,update:r})}if("interval"===e.type)e.project.forEach(function(t){var e=n.findIndex(function(e){return e.name===t.signals.visual});(r(e,"[0, 0]"),-1===e)&&r(n.findIndex(function(e){return e.name===t.signals.data}),"null")});else{var i=n.findIndex(function(t){return t.name===e.name+Ks});r(i,"null"),ul.has(e)&&r(i=n.findIndex(function(t){return t.name===e.name+"_toggle"}),"false")}return n}},ll="_translate_anchor",cl="_translate_delta",fl={has:function(t){return"interval"===t.type&&t.translate},signals:function(t,e,n){var r=e.name,i=Bs.has(e),o=r+ll,a=e.project.has,u=a.x,s=a.y,l=xs(e.translate,"scope");return i||(l=l.map(function(t){return t.between[0].markname=r+"_brush",t})),n.push({name:o,value:{},on:[{events:l.map(function(t){return t.between[0]}),update:"{x: x(unit), y: y(unit)"+(void 0!==u?", extent_x: "+(i?Us(t,Ut):"slice(".concat(u.signals.visual,")")):"")+(void 0!==s?", extent_y: "+(i?Us(t,qt):"slice(".concat(s.signals.visual,")")):"")+"}"}]},{name:r+cl,value:{},on:[{events:l,update:"{x: ".concat(o,".x - x(unit), y: ").concat(o,".y - y(unit)}")}]}),void 0!==u&&hl(t,e,u,"width",n),void 0!==s&&hl(t,e,s,"height",n),n}};function hl(t,e,n,r,i){var o=e.name,a=o+ll,u=o+cl,s=n.channel,l=Bs.has(e),c=i.filter(function(t){return t.name===n.signals[l?"data":"visual"]})[0],f=t.getSizeSignalRef(r).signal,h=t.getScaleComponent(s),p=h.get("type"),d=l&&s===Ut?"-":"",v="".concat(a,".extent_").concat(s),m="".concat(d).concat(u,".").concat(s," / ")+(l?"".concat(f):"span(".concat(v,")")),y="".concat(l?"log"===p?"panLog":"pow"===p?"panPow":"panLinear":"panLinear","(").concat(v,", ").concat(m)+(l&&"pow"===p?", ".concat(h.get("exponent")||1):"")+")";c.on.push({events:{signal:u},update:l?y:"clampRange(".concat(y,", 0, ").concat(f,")")})}var pl="_zoom_anchor",dl="_zoom_delta",vl={has:function(t){return"interval"===t.type&&t.zoom},signals:function(t,e,n){var r=e.name,i=Bs.has(e),o=r+dl,a=e.project.has,u=a.x,s=a.y,l=Object(y.U)(t.scaleName(Ut)),c=Object(y.U)(t.scaleName(qt)),f=xs(e.zoom,"scope");return i||(f=f.map(function(t){return t.markname=r+"_brush",t})),n.push({name:r+pl,on:[{events:f,update:i?"{"+[l?"x: invert(".concat(l,", x(unit))"):"",c?"y: invert(".concat(c,", y(unit))"):""].filter(function(t){return!!t}).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==u&&ml(t,e,u,"width",n),void 0!==s&&ml(t,e,s,"height",n),n}};function ml(t,e,n,r,i){var o=e.name,a=n.channel,u=Bs.has(e),s=i.filter(function(t){return t.name===n.signals[u?"data":"visual"]})[0],l=t.getSizeSignalRef(r).signal,c=t.getScaleComponent(a),f=c.get("type"),h=u?Us(t,a):s.name,p=o+dl,d="".concat(o).concat(pl,".").concat(a),v="".concat(u?"log"===f?"zoomLog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear","(").concat(h,", ").concat(d,", ").concat(p)+(u&&"pow"===f?", ".concat(c.get("exponent")||1):"")+")";s.on.push({events:{signal:p},update:u?v:"clampRange(".concat(v,", 0, ").concat(l,")")})}var yl=[{has:function(t){return!0},parse:function(t,e,n){var r=n.name,i=n.project||(n.project=new Vs),o={},a={},u={},s=function(t,e){for(var n="visual"===e?t.channel:t.field,i=Y("".concat(r,"_").concat(n)),o=1;u[i];o++)i=Y("".concat(r,"_").concat(n,"_").concat(o));return Object(Mt.a)({},e,u[i]=i)};if(!e.fields&&!e.encodings){var l=t.config.selection[e.type];if(e.init){var c=!0,f=!1,h=void 0;try{for(var p,d=Object(y.h)(e.init)[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value,m=!0,g=!1,b=void 0;try{for(var _,x=H(v)[Symbol.iterator]();!(m=(_=x.next()).done);m=!0){var w=_.value;be[w]?(e.encodings||(e.encodings=[])).push(w):ii(e)?(Ne('Interval selections should be initialized using "x" and/or "y" keys.'),e.encodings=l.encodings):(e.fields||(e.fields=[])).push(w)}}catch(U){g=!0,b=U}finally{try{m||null==x.return||x.return()}finally{if(g)throw b}}}}catch(U){f=!0,h=U}finally{try{c||null==d.return||d.return()}finally{if(f)throw h}}}else e.encodings=l.encodings,e.fields=l.fields}var k=!0,E=!1,S=void 0;try{for(var O,A=(e.fields||[])[Symbol.iterator]();!(k=(O=A.next()).done);k=!0){var M={type:"E",field:O.value};M.signals=Object.assign({},s(M,"data")),i.push(M)}}catch(U){E=!0,S=U}finally{try{k||null==A.return||A.return()}finally{if(E)throw S}}var C=!0,T=!1,j=void 0;try{for(var D,P=(e.encodings||[])[Symbol.iterator]();!(C=(D=P.next()).done);C=!0){var z=D.value,R=t.fieldDef(z);if(R){var I=R.field;if(R.timeUnit&&(a[I=t.vgField(z)]={as:I,field:R.field,timeUnit:R.timeUnit}),!o[I]){var F="E";if("interval"===n.type)Hr(t.getScaleComponent(z).get("type"))&&(F="R");else R.bin&&(F="R-RE");var L={field:I,channel:z,type:F};L.signals=Object.assign({},s(L,"data"),s(L,"visual")),i.push(o[I]=L),i.has[z]=o[I]}}else Ne(Re.cannotProjectOnChannelWithoutField(z))}}catch(U){T=!0,j=U}finally{try{C||null==P.return||P.return()}finally{if(T)throw j}}if(e.init)if(Bs.has(n))Ne(Re.NO_INIT_SCALE_BINDINGS);else{var N=function(t){return i.map(function(e){return void 0!==t[e.channel]?t[e.channel]:t[e.field]})};if(ii(e))n.init=N(e.init);else{var B=Object(y.y)(e.init)?e.init:[e.init];n.init=B.map(N)}}H(a).length&&(i.timeUnit=new Ns(null,a))},signals:function(t,e,n){var r=e.name+qs;return n.filter(function(t){return t.name===r}).length?n:n.concat({name:r,value:e.project.map(function(t){t.signals;return Ct(t,["signals"])})})}},ul,Bs,fl,vl,al,ol,sl];function gl(t,e){for(var n=0,r=yl;n<r.length;n++){var i=r[n];i.has(t)&&e(i)}}function bl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.v;if(Object(y.y)(t)){var n=t.map(function(t){return bl(t,e)}).join(", ");return"[".concat(n,"]")}return Ue(t)?e(Xe(t)):e(JSON.stringify(t))}function _l(t,e){return nl(t,function(n,r){e=r.marks?r.marks(t,n,e):e,gl(n,function(r){r.marks&&(e=r.marks(t,n,e))})}),e}function xl(t,e,n){var r=[];var i=$(e,function(e){var i=Y(e),o=t.getSelectionComponent(i,e),a=Object(y.U)(i+$s);if(o.project.timeUnit){var u=n||t.component.data.raw,s=o.project.timeUnit.clone();u.parent?s.insertAsParentOf(u):u.parent=s}return"none"!==o.empty&&r.push(a),"vlSelectionTest(".concat(a,", datum")+("global"===o.resolve?")":", ".concat(Object(y.U)(o.resolve),")"))});return(r.length?"!("+r.map(function(t){return"length(data(".concat(t,"))")}).join(" || ")+") || ":"")+"(".concat(i,")")}function wl(t,e,n){return $(e,function(e){return Object(y.F)(e)?e:function(t){return t&&t.selection}(e)?xl(t,e.selection,n):uo(e)})}function kl(t){var e=t.channel,n=t.channelDef,r=t.mark,i=t.scale,o=Dl(t);return yn(n)&&!Rt(n.aggregate)&&i&&Gr(i.get("type"))&&!1===i.get("zero")?El({fieldDef:n,channel:e,mark:r,ref:o}):o}function El(t){var e=t.fieldDef,n=t.channel,r=t.mark,i=t.ref;return xt(r)?i:[Sl(e,n),i]}function Sl(t,e){var n=Ol(t,!0),r="x"===ke(e)?{value:0}:{field:{group:"height"}};return Object.assign({test:n},r)}function Ol(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=Object(y.F)(t)?t:Sn(t,{expr:"datum"});var n=e?"||":"&&",r=e?"===":"!==";return"".concat(t," ").concat(r," null ").concat(n," ").concat(e?"":"!","isNaN(").concat(t,")")}function Al(t,e){var n=e[t+"Offset"];if(n)return n}function Ml(t){var e=t.channel,n=t.fieldDef,r=t.scaleName,i=t.mark,o=t.side,a=t.offset;return El({fieldDef:n,channel:e,mark:i,ref:Cl(n,r,{binSuffix:"start"===o?void 0:"end"},a?{offset:a}:{})})}function Cl(t,e,n,r){var i=Object.assign({},e?{scale:e}:{},{field:Sn(t,n)});if(r){var o=r.offset,a=r.band;return Object.assign({},i,o?{offset:o}:{},a?{band:a}:{})}return i}function Tl(t){return{scale:t,band:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]}}function jl(t){var e=t.scaleName,n=t.fieldDef,r=t.fieldDef2,i=t.offset,o=Sn(n,{expr:"datum"}),a=void 0!==r?Sn(r,{expr:"datum"}):Sn(n,{binSuffix:"end",expr:"datum"});return Object.assign({signal:'scale("'.concat(e,'", (').concat(o," + ").concat(a,") / 2)")},i?{offset:i}:{})}function Dl(t){var e=t.channel,n=t.channelDef,r=t.channel2Def,i=t.scaleName,o=t.scale,a=t.stack,u=t.offset,s=t.defaultRef;if(n){if(yn(n)){if(gn(n)){if(Hn(n.bin))return R([Ut,qt],e)&&n.type===ln?a&&a.impute?Cl(n,i,{binSuffix:"mid"},{offset:u}):jl({scaleName:i,fieldDef:n,offset:u}):Cl(n,i,Vn(n,e)?{binSuffix:"range"}:{},{offset:u});if(Gn(n.bin)){if(yn(r))return jl({scaleName:i,fieldDef:n,fieldDef2:r,offset:u});var l=e===Ut?Vt:Wt;Ne(Re.channelRequiredForBinned(l))}}if(o){var c=o.get("type");if(Wr(c))return Cl(n,i,{binSuffix:"range"},"band"===c?{band:.5,offset:u}:{offset:u})}return Cl(n,i,{},{offset:u})}if(_n(n)){var f=n.value,h=u?{offset:u}:{};return R(["x","x2"],e)&&"width"===f?Object.assign({field:{group:"width"}},h):R(["y","y2"],e)&&"height"===f?Object.assign({field:{group:"height"}},h):Object.assign({value:f},h)}}return Object(y.B)(s)?s():s}function Pl(t,e,n){var r=n.reactiveGeom,i=[],o={};function a(n,a){var u=ke(a);a!==u&&(n=Object.assign({},n,{type:t[u].type}));var s=jn(n,e,{allowDisabling:!1}),l=zl(n,e,r?"datum.datum":"datum").signal;o[s]||i.push("".concat(Object(y.U)(s),": ").concat(l)),o[s]=!0}return tr(t,function(t,e){yn(t)?a(t,e):mn(t)&&a(t.condition,e)}),i.length?{signal:"{".concat(i.join(", "),"}")}:void 0}function zl(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datum";if(t){if(_n(t))return{value:t.value};if(gn(t))return Zo(t,En(n=t)&&n.format?n.format:(Dn(n)||{}).format,r,e)}}function Rl(t){return Object.assign({},t,{mult:.5})}function Il(t){var e=t.markDef,n=t.config,r=t.defaultRef,i=t.channel,o=t.scaleName,a=t.scale,u=t.mark,s=t.checkBarAreaWithoutZero;return function(){var t=ke(i),l=nt(e[i],Go(i,e,n));if(void 0!==l)return{value:l};if(Object(y.F)(r)){if(o){var c=a.get("type");if(R([Ar.LOG,Ar.TIME,Ar.UTC],c))!s||"bar"!==u&&"area"!==u||Ne(Re.nonZeroScaleUsedWithLengthMark(u,t,{scaleType:c}));else{if(a.domainDefinitelyIncludesZero)return{scale:o,value:0};!s||"bar"!==u&&"area"!==u||Ne(Re.nonZeroScaleUsedWithLengthMark(u,t,{zeroFalse:!1===a.explicit.zero}))}}return"zeroOrMin"===r?"x"===t?{value:0}:{field:{group:"height"}}:"x"===t?{field:{group:"width"}}:{value:0}}return r}}function Fl(t){return"transparent"!==t&&null!==t&&void 0!==t}function Ll(t){var e=t.markDef,n=t.encoding,r=t.config,i=e.filled,o=e.type,a={fill:Go("fill",e,r),stroke:Go("stroke",e,r),color:Go("color",e,r)},u=R(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,s=nt(e.fill,a.fill,u),l=nt(e.stroke,a.stroke),c=i?"fill":"stroke",f=Object.assign({},s?{fill:{value:s}}:{},l?{stroke:{value:l}}:{});return n.fill||n.stroke?(e.color&&Ne(Re.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),Object.assign({},Wl("fill",t,{defaultValue:nt(s,u)}),Wl("stroke",t,{defaultValue:l}))):n.color?Object.assign({},f,Wl("color",t,{vgChannel:c,defaultValue:nt(e[c],e.color,a[c],a.color,i?u:void 0)})):Fl(e.fill)||Fl(e.stroke)?(e.color&&Ne(Re.droppingColor("property",{fill:"fill"in e,stroke:"stroke"in e})),f):e.color?Object.assign({},f,Object(Mt.a)({},c,{value:e.color})):Fl(a.fill)||Fl(a.stroke)?f:a.color?Object.assign({},u?{fill:{value:"transparent"}}:{},Object(Mt.a)({},c,{value:a.color})):{}}function Nl(t,e){var n=Ll(t),r=n.fill,i=n.stroke;return Object.assign({},function(t,e){return Oo.reduce(function(n,r){return void 0!==t[r]&&"ignore"!==e[r]&&(n[r]={value:t[r]}),n},{})}(t.markDef,e),Bl(t,"fill",r),Bl(t,"stroke",i),Wl("opacity",t),Wl("fillOpacity",t),Wl("strokeOpacity",t),Wl("strokeWidth",t),Gl(t),Xl(t,"href"))}function Bl(t,e,n){var r=t.config,i=t.mark;if("hide"===r.invalidValues&&n&&!xt(i)){var o=ql(t,{invalid:!0,channels:je});if(o)return Object(Mt.a)({},e,[{test:o,value:null}].concat(Object(m.a)(Object(y.h)(n))))}return n?Object(Mt.a)({},e,n):{}}function Ul(t,e){if(void 0!==e)return Object(Mt.a)({},t,{value:e})}function ql(t,e){var n=e.invalid,r=void 0!==n&&n,i=e.channels.reduce(function(e,n){var r=t.getScaleComponent(n);if(r){var i=r.get("type"),o=t.vgField(n,{expr:"datum"});o&&Hr(i)&&(e[o]=!0)}return e},{}),o=H(i);if(o.length>0){var a=r?"||":"&&";return o.map(function(t){return Ol(t,r)}).join(" ".concat(a," "))}}function Vl(t){if(t.config.invalidValues){var e=ql(t,{channels:["x","y"]});if(e)return{defined:{signal:e}}}return{}}function Wl(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.markDef,i=e.encoding,o=e.config,a=n.vgChannel,u=void 0===a?t:a,s=n.defaultRef,l=n.defaultValue;void 0===s&&(l=l||(u===t?r[t]:nt(r[t],r[u],Go(t,r,o,{vgChannel:u}))),s=l?{value:l}:void 0);var c=i[t];return Hl(e,c,u,function(n){return Dl({channel:t,channelDef:n,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:s})})}function Hl(t,e,n,r){var i=e&&e.condition,o=r(e);if(i){var a=(Object(y.y)(i)?i:[i]).map(function(e){var n=r(e),i=function(t){return t.selection}(e)?xl(t,e.selection):wl(t,e.test);return Object.assign({test:i},n)});return Object(Mt.a)({},n,[].concat(Object(m.a)(a),Object(m.a)(void 0!==o?[o]:[])))}return void 0!==o?Object(Mt.a)({},n,o):{}}function Gl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.encoding,r=t.markDef,i=t.config,o=n.tooltip;return Object(y.y)(o)?{tooltip:Pl({tooltip:o},i,e)}:Hl(t,o,"tooltip",function(o){var a=zl(o,t.config);if(a)return a;if(null!==o){var u=nt(r.tooltip,Go("tooltip",r,i));return Object(y.F)(u)?{value:u}:Object(y.D)(u)?"encoding"===u.content?Pl(n,i,e):{signal:"datum"}:void 0}})}function Xl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=t.encoding[e];return Hl(t,n,e,function(e){return zl(e,t.config)})}function Zl(t,e,n,r){var i,o=n.scaleName(e),a="x"===e?"width":"height";if(n.encoding.size||void 0!==n.markDef.size||r&&void 0!==r.value)if(n.markDef.orient){var u=Object(Mt.a)({},e+"c",Cl(t,o,{},{band:.5}));if(Rn(n.encoding.size))return Object.assign({},u,Wl("size",n,{vgChannel:a}));if(_n(n.encoding.size))return Object.assign({},u,Wl("size",n,{vgChannel:a}));if(void 0!==n.markDef.size)return Object.assign({},u,Object(Mt.a)({},a,{value:n.markDef.size}));if(r&&void 0!==r.value)return Object.assign({},u,Object(Mt.a)({},a,r))}else Ne(Re.cannotApplySizeToNonOrientedMark(n.markDef.type));return i={},Object(Mt.a)(i,e,Cl(t,o,{binSuffix:"range"},{})),Object(Mt.a)(i,a,r||Tl(o)),i}function Yl(t){var e,n,r=t.fieldDef,i=t.fieldDef2,o=t.channel,a=t.scaleName,u=t.mark,s=t.spacing,l=void 0===s?0:s,c=t.reverse,f={x:c?l:0,x2:c?0:l,y:c?0:l,y2:c?l:0},h=o===Ut?Vt:Wt;return Hn(r.bin)?(e={},Object(Mt.a)(e,h,Ml({channel:o,fieldDef:r,scaleName:a,mark:u,side:"start",offset:f["".concat(o,"2")]})),Object(Mt.a)(e,o,Ml({channel:o,fieldDef:r,scaleName:a,mark:u,side:"end",offset:f[o]})),e):Gn(r.bin)&&yn(i)?(n={},Object(Mt.a)(n,h,Cl(r,a,{},{offset:f["".concat(o,"2")]})),Object(Mt.a)(n,o,Cl(i,a,{},{offset:f[o]})),n):void Ne(Re.channelRequiredForBinned(h))}function $l(t,e,n,r){var i=e.encoding,o=e.mark,a=e.markDef,u=e.config,s=e.stack,l=i[t],c=i[t===Ut?Vt:Wt],f=e.scaleName(t),h=e.getScaleComponent(t),p=Al(t,e.markDef),d=l||!i.latitude&&!i.longitude?function(t){var e=t.channel,n=t.channelDef,r=t.scaleName,i=t.stack,o=t.offset;return yn(n)&&i&&e===i.fieldChannel?Cl(n,r,{suffix:"end"},{offset:o}):kl(t)}({channel:t,channelDef:l,channel2Def:c,scaleName:f,scale:h,stack:s,mark:o,offset:p,defaultRef:Il({markDef:a,config:u,defaultRef:n,channel:t,scaleName:f,scale:h,mark:o,checkBarAreaWithoutZero:!c})}):{field:e.getName(t)};return Object(Mt.a)({},r||t,d)}function Kl(t,e,n){var r=t.encoding,i=t.mark,o=t.markDef,a=t.stack,u=t.config,s="x2"===n?"x":"y",l=r[s],c=t.scaleName(s),f=t.getScaleComponent(s),h=Al(n,t.markDef),p=l||!r.latitude&&!r.longitude?function(t){var e=t.channel,n=t.channelDef,r=t.channel2Def,i=t.scaleName,o=t.scale,a=t.stack,u=t.mark,s=t.offset,l=t.defaultRef;return yn(n)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Cl(n,i,{suffix:"start"},{offset:s}):kl({channel:e,channelDef:r,scaleName:i,scale:o,stack:a,mark:u,offset:s,defaultRef:l})}({channel:n,channelDef:l,channel2Def:r[n],scaleName:c,scale:f,stack:a,mark:i,offset:h,defaultRef:Il({markDef:o,config:u,defaultRef:e,channel:n,scaleName:c,scale:f,mark:i,checkBarAreaWithoutZero:!r[n]})}):{field:t.getName(n)};return Object(Mt.a)({},n,p)}function Jl(t,e){return H(t).reduce(function(n,r){var i=t[r];return Object.assign({},n,Hl(e,i,r,function(t){return{value:t.value}}))},{})}function Ql(t,e){var n=t.scale[e],r=R(Ae,e)?"axis":"legend";return"independent"===n?("shared"===t[r][e]&&Ne(Re.independentScaleMeansIndependentGuide(e)),"independent"):t[r][e]||"shared"}var tc=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(at.a)(this,t),this.explicit=e,this.implicit=n}return Object(ut.a)(t,[{key:"clone",value:function(){return new t(C(this.explicit),C(this.implicit))}},{key:"combine",value:function(){return Object.assign({},this.explicit,this.implicit)}},{key:"get",value:function(t){return nt(this.explicit[t],this.implicit[t])}},{key:"getWithExplicit",value:function(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}},{key:"setWithExplicit",value:function(t,e){void 0!==e.value&&this.set(t,e.value,e.explicit)}},{key:"set",value:function(t,e,n){return delete this[n?"implicit":"explicit"][t],this[n?"explicit":"implicit"][t]=e,this}},{key:"copyKeyFromSplit",value:function(t,e){void 0!==e.explicit[t]?this.set(t,e.explicit[t],!0):void 0!==e.implicit[t]&&this.set(t,e.implicit[t],!1)}},{key:"copyKeyFromObject",value:function(t,e){void 0!==e[t]&&this.set(t,e[t],!0)}},{key:"copyAll",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=H(t.combine())[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=t.getWithExplicit(a);this.setWithExplicit(a,u)}}catch(s){n=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}}]),t}();function ec(t){return{explicit:!0,value:t}}function nc(t){return{explicit:!1,value:t}}function rc(t){return function(e,n,r,i){var o=t(e.value,n.value);return o>0?e:o<0?n:ic(e,n,r,i)}}function ic(t,e,n,r){return t.explicit&&e.explicit&&Ne(Re.mergeConflictingProperty(n,r,t.value,e.value)),t}function oc(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ic;return void 0===t||void 0===t.value?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:D(t.value)===D(e.value)?t:i(t,e,n,r)}var ac=function(t){function e(){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))}return Object(wi.a)(e,t),e}(tc);function uc(t){return nt(t.legend.type,sc(t))}function sc(t){var e=t.channel,n=t.timeUnit,r=t.scaleType,i=t.alwaysReturn;if(pe(e)){if(R(["quarter","month","day"],n))return"symbol";if(Gr(r))return i?"gradient":void 0}return i?"symbol":void 0}function lc(t){var e=t.legend,n=t.legendConfig,r=t.timeUnit,i=t.channel,o=t.scaleType,a=nt(e.orient,n.orient,"right"),u=uc({legend:e,channel:i,timeUnit:r,scaleType:o,alwaysReturn:!0});return nt(e.direction,n[u?"gradientDirection":"symbolDirection"],function(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===e?"horizontal":void 0}}(a,u))}function cc(t,e,n,r){var i=t.getSizeSignalRef(e).signal;return{signal:"clamp(".concat(i,", ").concat(n,", ").concat(r,")")}}function fc(t,e,n){var r=e.getScaleComponent(n).get("type");return nt(t.get("type"),sc({channel:n,scaleType:r,alwaysReturn:!0}))}function hc(t,e,n,r,i){if("symbol"===fc(i,n,r)){var o=Object.assign({},function(t,e,n){var r=!0,i=!1,o=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value,l=Go(s,e.markDef,e.config);void 0!==l&&(t[s]={value:l})}}catch(c){i=!0,o=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return t}({},n,Et),Ll(n));switch(n.mark){case lt:case vt:case dt:o.shape={value:"square"};break;case yt:case gt:o.shape={value:n.mark}}var a=n.markDef,u=n.encoding,s=n.config,l=a.filled,c=vc(u.opacity)||a.opacity;if(o.fill)if("fill"===r||l&&r===Yt)delete o.fill;else if(o.fill.field)i.get("symbolFillColor")?delete o.fill:(o.fill={value:s.legend.symbolBaseFillColor||"black"},o.fillOpacity={value:c||1});else if(Object(y.y)(o.fill)){var f=mc(u.fill||u.color)||a.fill||l&&a.color;f&&(o.fill={value:f})}if(o.stroke)if("stroke"===r||!l&&r===Yt)delete o.stroke;else if(o.stroke.field)delete o.stroke;else if(Object(y.y)(o.stroke)){var h=nt(mc(u.stroke||u.color),a.stroke,l?a.color:void 0);h&&(o.stroke={value:h})}if(r!==Jt){var p=mc(u.shape)||a.shape;p&&(o.shape={value:p})}return r!==te&&c&&(o.opacity={value:c}),o=Object.assign({},o,e),H(o).length>0?o:void 0}}function pc(t,e,n,r,i){if("gradient"===fc(i,n,r)){var o={},a=vc(n.encoding.opacity)||n.markDef.opacity;return a&&(o.opacity={value:a}),o=Object.assign({},o,e),H(o).length>0?o:void 0}}function dc(t,e,n,r,i){var o=n.legend(r),a=n.config,u={};if(Bn(t)){var s=n.getScaleComponent(r).get("type")===Ar.UTC,l=Qo("datum.value",t.timeUnit,o.format,a.legend.shortTimeLabels,a.timeFormat,s);e=Object.assign({},l?{text:{signal:l}}:{},e)}return u=Object.assign({},u,e),H(u).length>0?u:void 0}function vc(t){return yc(t,function(t,e){return Math.max(t,e.value)})}function mc(t){return yc(t,function(t,e){return nt(t,e.value)})}function yc(t,e){return function(t){return!!t&&!!t.condition&&(Object(y.y)(t.condition)||_n(t.condition))}(t)?(Object(y.y)(t.condition)?t.condition:[t.condition]).reduce(e,t.value):_n(t)?t.value:void 0}function gc(t){Tf(t)?t.component.legends=function(t){var e=t.encoding;return[Yt,$t,Kt,re,Qt,Jt,te,ee,ne].reduce(function(n,i){var o=e[i];return!t.legend(i)||!t.getScaleComponent(i)||yn(o)&&i===Jt&&o.type===pn||(n[i]=function(t,e){var n=t.fieldDef(e),i=t.legend(e),o=new ac({},function(t,e){var n=t.scaleName(Yt);if("color"===e)return t.markDef.filled?{fill:n}:{stroke:n};return Object(Mt.a)({},e,t.scaleName(e))}(t,e)),a=!0,u=!1,s=void 0;try{for(var l,c=Dr[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=_c(f,i,e,t);if(void 0!==h){var p=bc(h,f,i,n);(p||void 0===t.config.legend[f])&&o.set(f,h,p)}}}catch(m){u=!0,s=m}finally{try{a||null==c.return||c.return()}finally{if(u)throw s}}var d=i.encoding||{},v=["labels","legend","title","symbols","gradient"].reduce(function(i,a){var u=Jl(d[a]||{},t),s=r[a]?r[a](n,u,t,e,o):u;return void 0!==s&&H(s).length>0&&(i[a]={update:s}),i},{});H(v).length>0&&o.set("encode",v,!!i.encoding);return o}(t,i)),n},{})}(t):t.component.legends=function(t){var e=t.component,n=e.legends,r=e.resolve,i=!0,o=!1,a=void 0;try{for(var u,s=function(){var e=u.value;gc(e),H(e.component.legends).forEach(function(i){r.legend[i]=Ql(t.component.resolve,i),"shared"===r.legend[i]&&(n[i]=xc(n[i],e.component.legends[i]),n[i]||(r.legend[i]="independent",delete n[i]))})},l=t.children[Symbol.iterator]();!(i=(u=l.next()).done);i=!0)s()}catch(c){o=!0,a=c}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return H(n).forEach(function(e){var n=!0,i=!1,o=void 0;try{for(var a,u=t.children[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;s.component.legends[e]&&"shared"===r.legend[e]&&delete s.component.legends[e]}}catch(c){i=!0,o=c}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}}),n}(t)}function bc(t,e,n,r){switch(e){case"values":return!!n.values;case"title":if("title"===e&&t===r.title)return!0}return t===n[e]}function _c(t,e,n,r){var i=r.encoding,o=r.mark,a=Rn(i[n]),u=r.config.legend,s=a.timeUnit,l=r.getScaleComponent(n).get("type");switch(t){case"format":if(Bn(a))return;return Yo(a,e.format,r.config);case"formatType":if(Bn(a))return;return e.formatType;case"title":return jn(a,r.config,{allowDisabling:!0})||void 0;case"type":return uc({legend:e,channel:n,timeUnit:s,scaleType:l,alwaysReturn:!1});case"direction":return lc({legend:e,legendConfig:u,timeUnit:s,channel:n,scaleType:l});case"labelOverlap":return nt(e.labelOverlap,function(t){if(R(["quantile","threshold","log"],t))return"greedy"}(l));case"gradientLength":return nt(e.gradientLength,u.gradientLength,function(t){var e=t.legend,n=t.legendConfig,r=t.model,i=t.channel,o=t.scaleType,a=n.gradientHorizontalMaxLength,u=n.gradientHorizontalMinLength,s=n.gradientVerticalMaxLength,l=n.gradientVerticalMinLength;if("horizontal"===lc({legend:e,legendConfig:n,channel:i,scaleType:o})){var c=nt(e.orient,n.orient);return"top"===c||"bottom"===c?cc(r,"width",u,a):u}return cc(r,"height",l,s)}({model:r,legend:e,legendConfig:u,channel:n,scaleType:l}));case"symbolType":return nt(e.symbolType,function(t){return"line"===t?"stroke":"circle"}(o));case"values":return function(t,e){var n=t.values;if(n)return qn(e,n)}(e,a)}return e[t]}function xc(t,e){if(!t)return e.clone();var n=t.getWithExplicit("orient"),r=e.getWithExplicit("orient");if(!n.explicit||!r.explicit||n.value===r.value){var i=!1,o=!0,a=!1,u=void 0;try{for(var s,l=function(){var n=s.value,r=oc(t.getWithExplicit(n),e.getWithExplicit(n),n,"legend",function(t,e){switch(n){case"symbolType":return function(t,e){if("circle"===e.value)return e;return t}(t,e);case"title":return ra(t,e);case"type":return i=!0,nc("symbol")}return ic(t,e,n,"legend")});t.setWithExplicit(n,r)},c=Pr[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)l()}catch(f){a=!0,u=f}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}return i&&(((t.implicit||{}).encode||{}).gradient&&K(t.implicit,["encode","gradient"]),((t.explicit||{}).encode||{}).gradient&&K(t.explicit,["encode","gradient"])),t}}function wc(t){var e=t.component.legends,n={},r=!0,i=!1,o=void 0;try{for(var a,u=H(e)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value,l=t.getScaleComponent(s),c=D(l.domains);if(n[c]){var f=!0,h=!1,p=void 0;try{for(var d,v=n[c][Symbol.iterator]();!(f=(d=v.next()).done);f=!0){xc(d.value,e[s])||n[c].push(e[s])}}catch(m){h=!0,p=m}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}else n[c]=[e[s].clone()]}}catch(m){i=!0,o=m}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return L(G(n)).map(function(t){var e=t.combine();if(e.encode&&e.encode.symbols){var n=e.encode.symbols.update;!n.fill||"transparent"===n.fill.value||n.stroke||e.stroke||(n.stroke={value:"transparent"}),e.fill&&delete n.fill}return e})}function kc(t){return zf(t)||Pf(t)||Df(t)?function(t){return t.children.reduce(function(t,e){return t.concat(e.assembleProjections())},Ec(t))}(t):Ec(t)}function Ec(t){var e=t.component.projection;if(!e||e.merged)return[];var n=e.combine(),r=n.name,i=Ct(n,["name"]);if(e.data){var o={signal:"[".concat(e.size.map(function(t){return t.signal}).join(", "),"]")},a=e.data.reduce(function(e,n){var r=ko(n)?n.signal:"data('".concat(t.lookupDataSource(n),"')");return R(e,r)||e.push(r),e},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:o,fit:{signal:a.length>1?"[".concat(a.join(", "),"]"):a[0]}},i)]}return[Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}},i)]}var Sc=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],Oc=function(t){function e(t,n,r,i){var o;return Object(at.a)(this,e),(o=Object(bi.a)(this,Object(_i.a)(e).call(this,Object.assign({},n),{name:t}))).specifiedProjection=n,o.size=r,o.data=i,o.merged=!1,o}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"isFit",get:function(){return!!this.data}}]),e}(tc);function Ac(t){t.component.projection=Tf(t)?function(t){if(t.hasProjection){var e=t.specifiedProjection,n=!(e&&(null!=e.scale||null!=e.translate)),r=n?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,i=n?function(t){var e=[];[[Gt,Ht],[Zt,Xt]].forEach(function(n){(t.channelHasField(n[0])||t.channelHasField(n[1]))&&e.push({signal:t.getName("geojson_".concat(e.length))})}),t.channelHasField(Jt)&&t.fieldDef(Jt).type===pn&&e.push({signal:t.getName("geojson_".concat(e.length))});0===e.length&&e.push(t.requestDataName($i));return e}(t):void 0;return new Oc(t.projectionName(!0),Object.assign({},t.config.projection||{},e||{}),r,i)}return}(t):function(t){if(0===t.children.length)return;var e;t.children.forEach(function(t){return Ac(t)});var n=F(t.children,function(t){var n=t.component.projection;if(n){if(e){var r=function(t,e){var n=F(Sc,function(n){return!t.explicit.hasOwnProperty(n)&&!e.explicit.hasOwnProperty(n)||!(!t.explicit.hasOwnProperty(n)||!e.explicit.hasOwnProperty(n)||D(t.get(n))!==D(e.get(n)))});if(D(t.size)===D(e.size)){if(n)return t;if(D(t.explicit)===D({}))return e;if(D(e.explicit)===D({}))return t}return null}(e,n);return r&&(e=r),!!r}return e=n,!0}return!0});if(e&&n){var r=t.projectionName(!0),i=new Oc(r,e.specifiedProjection,e.size,C(e.data));return t.children.forEach(function(t){var e=t.component.projection;if(e){var n;if(e.isFit)(n=i.data).push.apply(n,Object(m.a)(t.component.projection.data));t.renameProjection(e.get("name"),r),e.merged=!0}}),i}return}(t)}var Mc=n(17),Cc=function(t){function e(t){var n,r;if(Object(at.a)(this,e),n=Object(bi.a)(this,Object(_i.a)(e).call(this,null)),Gi(t=t||{name:"source"})||(r=t.format?Object.assign({},j(t.format,["parse"])):{}),Wi(t))n._data={values:t.values};else if(Vi(t)){if(n._data={url:t.url},!r.type){var i=/(?:\.([^.]+))?$/.exec(t.url)[1];R(["json","csv","tsv","dsv","topojson"],i)||(i="json"),r.type=i}}else Zi(t)?n._data={values:[{type:"Sphere"}]}:(Hi(t)||Gi(t))&&(n._data={});return n._generator=Gi(t),t.name&&(n._name=t.name),r&&H(r).length>0&&(n._data.format=r),n}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"hasName",value:function(){return!!this._name}},{key:"remove",value:function(){throw new Error("Source nodes are roots and cannot be removed.")}},{key:"hash",value:function(){throw new Error("Cannot hash sources")}},{key:"assemble",value:function(){return Object.assign({name:this._name},this._data,{transform:[]})}},{key:"data",get:function(){return this._data}},{key:"generator",get:function(){return this._generator}},{key:"dataName",get:function(){return this._name},set:function(t){this._name=t}},{key:"parent",set:function(t){throw new Error("Source nodes have to be roots.")}}]),e}(la);function Tc(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=!0,s=!1,l=void 0;try{for(var c,f=a.children[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value;if(h.parent!==a)return console.error("Dataflow graph is inconsistent.",a,h),!1}}catch(p){s=!0,l=p}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}if(!Tc(a.children))return!1}}catch(p){n=!0,r=p}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return!0}var jc=function(){function t(){Object(at.a)(this,t),this._mutated=!1}return Object(ut.a)(t,[{key:"setMutated",value:function(){this._mutated=!0}},{key:"mutatedFlag",get:function(){return this._mutated}}]),t}(),Dc=function(t){function e(){var t;return Object(at.a)(this,e),(t=Object(bi.a)(this,Object(_i.a)(e).call(this)))._continue=!1,t}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"setContinue",value:function(){this._continue=!0}},{key:"reset",value:function(){}},{key:"optimizeNextFromLeaves",value:function(t){if(t instanceof Cc)return!1;var e=t.parent;return this.run(t).continueFlag&&this.optimizeNextFromLeaves(e),this.mutatedFlag}},{key:"continueFlag",get:function(){return this._continue}},{key:"flags",get:function(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}},set:function(t){var e=t.continueFlag,n=t.mutatedFlag;e&&this.setContinue(),n&&this.setMutated()}}]),e}(jc),Pc=function(t){function e(){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))}return Object(wi.a)(e,t),e}(jc);function zc(t,e,n,r){if(gn(n)&&Hn(n.bin))t.add(Sn(n,{})),t.add(Sn(n,{binSuffix:"end"})),Vn(n,e)&&t.add(Sn(n,{binSuffix:"range"}));else if(function(t){switch(t){case Ht:case Xt:case Gt:case Zt:return!0}return!1}(e)){var i=function(t){switch(t){case Ht:return"y";case Xt:return"y2";case Gt:return"x";case Zt:return"x2"}}(e);t.add(r.getName(i))}else t.add(Sn(n));return t}var Rc=function(t){function e(t,n,r){var i;return Object(at.a)(this,e),(i=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).dimensions=n,i.measures=r,i}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,new Set(this.dimensions),C(this.measures))}},{key:"merge",value:function(t){return function(t,e){if(t.size!==e.size)return!1;var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(!e.has(u))return!1}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0}(this.dimensions,t.dimensions)?(function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=H(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=e[u],l=!0,c=!1,f=void 0;try{for(var h,p=H(s)[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var d=h.value;u in t?t[u][d]=new Set([].concat(Object(m.a)(t[u][d]||[]),Object(m.a)(s[d]))):t[u]=Object(Mt.a)({},d,s[d])}}catch(v){c=!0,f=v}finally{try{l||null==p.return||p.return()}finally{if(c)throw f}}}}catch(v){r=!0,i=v}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}(this.measures,t.measures),!0):(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Fe.debug.apply(Fe,arguments)}("different dimensions, cannot merge"),!1)}},{key:"addDimensions",value:function(t){t.forEach(this.dimensions.add,this.dimensions)}},{key:"dependentFields",value:function(){return new Set([].concat(Object(m.a)(this.dimensions),Object(m.a)(H(this.measures))))}},{key:"producedFields",value:function(){var t=new Set,e=!0,n=!1,r=void 0;try{for(var i,o=H(this.measures)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=!0,s=!1,l=void 0;try{for(var c,f=H(this.measures[a])[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value,p=this.measures[a][h];0===p.size?t.add("".concat(h,"_").concat(a)):p.forEach(t.add,t)}}catch(d){s=!0,l=d}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}}}catch(d){n=!0,r=d}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"hash",value:function(){return"Aggregate ".concat(P({dimensions:this.dimensions,measures:this.measures}))}},{key:"assemble",value:function(){var t=[],e=[],n=[],r=!0,i=!1,o=void 0;try{for(var a,u=H(this.measures)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value,l=!0,c=!1,f=void 0;try{for(var h,p=H(this.measures[s])[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var d=h.value,v=!0,y=!1,g=void 0;try{for(var b,_=this.measures[s][d][Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var x=b.value;n.push(x),t.push(d),e.push("*"===s?null:tt(s))}}catch(w){y=!0,g=w}finally{try{v||null==_.return||_.return()}finally{if(y)throw g}}}}catch(w){c=!0,f=w}finally{try{l||null==p.return||p.return()}finally{if(c)throw f}}}}catch(w){i=!0,o=w}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return{type:"aggregate",groupby:Object(m.a)(this.dimensions),ops:t,fields:e,as:n}}},{key:"groupBy",get:function(){return this.dimensions}}],[{key:"makeFromEncoding",value:function(t,n){var r=!1;n.forEachFieldDef(function(t){t.aggregate&&(r=!0)});var i={},o=new Set;return r?(n.forEachFieldDef(function(t,e){var r=t.aggregate,a=t.field;if(r)if("count"===r)i["*"]=i["*"]||{},i["*"].count=new Set([Sn(t,{forAs:!0})]);else{if(jt(r)||Dt(r)){var u=jt(r)?"argmin":"argmax",s=r[u];i[s]=i[s]||{},i[s][u]=new Set([Sn({op:u,field:s},{forAs:!0})])}else i[a]=i[a]||{},i[a][r]=new Set([Sn(t,{forAs:!0})]);De(e)&&"unaggregated"===n.scaleDomain(e)&&(i[a]=i[a]||{},i[a].min=new Set([Sn({field:a,aggregate:"min"},{forAs:!0})]),i[a].max=new Set([Sn({field:a,aggregate:"max"},{forAs:!0})]))}else zc(o,e,t,n)}),o.size+H(i).length===0?null:new e(t,o,i)):null}},{key:"makeFromTransform",value:function(t,n){var r=new Set,i={},o=!0,a=!1,u=void 0;try{for(var s,l=n.aggregate[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,f=c.op,h=c.field,p=c.as;f&&("count"===f?(i["*"]=i["*"]||{},i["*"].count=new Set([p||Sn(c,{forAs:!0})])):(i[h]=i[h]||{},i[h][f]=new Set([p||Sn(c,{forAs:!0})])))}}catch(_){a=!0,u=_}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}var d=!0,v=!1,m=void 0;try{for(var y,g=(n.groupby||[])[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var b=y.value;r.add(b)}}catch(_){v=!0,m=_}finally{try{d||null==g.return||g.return()}finally{if(v)throw m}}return r.size+H(i).length===0?null:new e(t,r,i)}}]),e}(la);function Ic(t,e,n){var r;r=function(t){return"as"in t}(t)?Object(y.F)(t.as)?[t.as,"".concat(t.as,"_end")]:[t.as[0],t.as[1]]:[Sn(t,{forAs:!0}),Sn(t,{binSuffix:"end",forAs:!0})];var i=Ln(e,void 0)||{},o=function(t,e){return"".concat(Wn(t),"_").concat(e)}(i,t.field),a=function(t,e){return{signal:t.getName("".concat(e,"_bins")),extentSignal:t.getName("".concat(e,"_extent"))}}(n,o),u=a.signal,s=a.extentSignal;return{key:o,binComponent:Object.assign({bin:i,field:t.field,as:r},u?{signal:u}:{},s?{extentSignal:s}:{})}}var Fc=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).bins=n,r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this.bins))}},{key:"merge",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=H(t.bins)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;u in this.bins?e.renameSignal(t.bins[u].signal,this.bins[u].signal):this.bins[u]=t.bins[u]}}catch(d){r=!0,i=d}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var s=!0,l=!1,c=void 0;try{for(var f,h=t.children[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;t.removeChild(p),p.parent=this}}catch(d){l=!0,c=d}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}t.remove()}},{key:"producedFields",value:function(){return new Set(L(G(this.bins).map(function(t){return t.as})))}},{key:"dependentFields",value:function(){return new Set(G(this.bins).map(function(t){return t.field}))}},{key:"hash",value:function(){return"Bin ".concat(P(this.bins))}},{key:"assemble",value:function(){return L(G(this.bins).map(function(t){var e=[],n=Object.assign({type:"bin",field:t.field,as:t.as,signal:t.signal},t.bin);return!t.bin.extent&&t.extentSignal&&(e.push({type:"extent",field:t.field,signal:t.extentSignal}),n.extent={signal:t.extentSignal}),e.push(n),t.formula&&e.push({type:"formula",expr:t.formula,as:t.formulaAs}),e}))}}],[{key:"makeFromEncoding",value:function(t,n){var r=n.reduceFieldDef(function(t,e,r){if(gn(e)&&Hn(e.bin)){var i=Ic(e,e.bin,n),o=i.key,a=i.binComponent;t[o]=Object.assign({},a,t[o],function(t,e,n,r){if(Vn(e,n)){var i=Tf(t)&&(t.axis(n)||t.legend(n))||{},o=Sn(e,{expr:"datum"}),a=Sn(e,{expr:"datum",binSuffix:"end"});return{formulaAs:Sn(e,{binSuffix:"range",forAs:!0}),formula:Jo(o,a,i.format,r)}}return{}}(n,e,r,n.config))}return t},{});return 0===H(r).length?null:new e(t,r)}},{key:"makeFromTransform",value:function(t,n,r){var i=Ic(n,n.bin,r),o=i.key,a=i.binComponent;return new e(t,Object(Mt.a)({},o,a))}}]),e}(la),Lc=function(t){function e(t,n,r,i){var o;Object(at.a)(this,e),(o=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).model=n,o.name=r,o.data=i;var a=!0,u=!1,s=void 0;try{for(var l,c=ve[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,h=n.facet[f];if(h){var p=h.bin,d=h.sort;o[f]=Object.assign({name:n.getName("".concat(f,"_domain")),fields:[Sn(h)].concat(Object(m.a)(Hn(p)?[Sn(h,{binSuffix:"end"})]:[]))},No(d)?{sortField:d}:Object(y.y)(d)?{sortIndexField:Qu(h,f)}:{})}}}catch(v){u=!0,s=v}finally{try{a||null==c.return||c.return()}finally{if(u)throw s}}return o.childModel=n.child,o}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"hash",value:function(){var t="Facet",e=!0,n=!1,r=void 0;try{for(var i,o=ve[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this[a]&&(t+=" ".concat(a.charAt(0),":").concat(P(this[a])))}}catch(u){n=!0,r=u}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"getSource",value:function(){return this.name}},{key:"getChildIndependentFieldsWithStep",value:function(){for(var t={},e=0,n=["x","y"];e<n.length;e++){var r=n[e],i=this.childModel.component.scales[r];if(i&&!i.merged){var o=i.get("type"),a=i.get("range");if(Wr(o)&&Eo(a)){var u=hf(pf(this.childModel,r));u?t[r]=u:Ne("Unknown field for ${channel}.  Cannot calculate view size.")}}}return t}},{key:"assembleRowColumnHeaderData",value:function(t,e,n){var r={row:"y",column:"x"}[t],i=[],o=[],a=[];n&&n[r]&&(e?(i.push("distinct_".concat(n[r])),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push("distinct_".concat(n[r])));var u=this[t],s=u.sortField,l=u.sortIndexField;if(s){var c=s.op,f=void 0===c?Lo:c,h=s.field;i.push(h),o.push(f),a.push(Sn(s,{forAs:!0}))}else l&&(i.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:e||this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},i.length?{fields:i,ops:o,as:a}:{})]}}},{key:"assembleFacetHeaderData",value:function(t){var e=this.model.layout.columns,n=this.model.component.layoutHeaders,r=[],i={},o=!0,a=!1,u=void 0;try{for(var s,l=rs[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,f=!0,h=!1,p=void 0;try{for(var d,v=is[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var m=d.value,y=n[c]&&n[c][m]||[],g=!0,b=!1,_=void 0;try{for(var x,w=y[Symbol.iterator]();!(g=(x=w.next()).done);g=!0){var k=x.value;if(k.axes&&k.axes.length>0){i[c]=!0;break}}}catch(M){b=!0,_=M}finally{try{g||null==w.return||w.return()}finally{if(b)throw _}}}}catch(M){h=!0,p=M}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}if(i[c]){var E='length(data("'.concat(this.facet.name,'"))'),S="row"===c?e?{signal:"ceil(".concat(E," / ").concat(e,")")}:1:e?{signal:"min(".concat(E,", ").concat(e,")")}:{signal:E};r.push({name:"".concat(this.facet.name,"_").concat(c),transform:[{type:"sequence",start:0,stop:S}]})}}}catch(M){a=!0,u=M}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}var O=i.row,A=i.column;return(O||A)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}},{key:"assemble",value:function(){var t=[],e=null,n=this.getChildIndependentFieldsWithStep(),r=this.column,i=this.row,o=this.facet;if(r&&i&&(n.x||n.y)){e="cross_".concat(this.column.name,"_").concat(this.row.name);var a=[].concat(n.x||[],n.y||[]),u=a.map(function(){return"distinct"});t.push({name:e,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(var s=0,l=[Nt,Lt];s<l.length;s++){var c=l[s];this[c]&&t.push(this.assembleRowColumnHeaderData(c,e,n))}if(o){var f=this.assembleFacetHeaderData(n);f&&t.push.apply(t,Object(m.a)(f))}return t}},{key:"fields",get:function(){var t=[],e=!0,n=!1,r=void 0;try{for(var i,o=ve[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this[a]&&this[a].fields&&t.push.apply(t,Object(m.a)(this[a].fields))}}catch(u){n=!0,r=u}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}}]),e}(la),Nc=function(t){function e(t,n,r){var i;return Object(at.a)(this,e),(i=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).model=n,i.filter=r,i.expr=wl(i.model,i.filter,Object(qi.a)(i)),i._dependentFields=Ku(i.expr),i}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,this.model,C(this.filter))}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"assemble",value:function(){return{type:"filter",expr:this.expr}}},{key:"hash",value:function(){return"Filter ".concat(this.expr)}}]),e}(la);function Bc(t){return"'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]?t.slice(1,-1):t}var Uc=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t)))._parse=n,r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this._parse))}}]),Object(ut.a)(e,[{key:"hash",value:function(){return"Parse ".concat(P(this._parse))}},{key:"merge",value:function(t){this._parse=Object.assign({},this._parse,t.parse),t.remove()}},{key:"assembleFormatParse",value:function(){var t={},e=!0,n=!1,r=void 0;try{for(var i,o=H(this._parse)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=this._parse[a];1===et(a)&&(t[a]=u)}}catch(s){n=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"producedFields",value:function(){return new Set(H(this._parse))}},{key:"dependentFields",value:function(){return new Set(H(this._parse))}},{key:"assembleTransforms",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return H(this._parse).filter(function(t){return!e||et(t)>1}).map(function(e){var n,r=function(t,e){var n=Q(t);if("number"===e)return"toNumber(".concat(n,")");if("boolean"===e)return"toBoolean(".concat(n,")");if("string"===e)return"toString(".concat(n,")");if("date"===e)return"toDate(".concat(n,")");if("flatten"===e)return n;if(0===e.indexOf("date:")){var r=Bc(e.slice(5,e.length));return"timeParse(".concat(n,",'").concat(r,"')")}if(0===e.indexOf("utc:")){var i=Bc(e.slice(4,e.length));return"utcParse(".concat(n,",'").concat(i,"')")}return Ne(Re.unrecognizedParse(e)),null}(e,t._parse[e]);return r?{type:"formula",expr:r,as:(n=e,"".concat(Object(y.T)(n).join(".")))}:null}).filter(function(t){return null!==t})}},{key:"parse",get:function(){return this._parse}}],[{key:"makeExplicit",value:function(t,e,n){var r={},i=e.data;return!Gi(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(t,r,{},n)}},{key:"makeImplicitFromFilterTransform",value:function(t,e,n){var r={};return function t(e,n){if(O(e))t(e.not,n);else if(S(e)){var r=!0,i=!1,o=void 0;try{for(var a,u=e.and[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)t(a.value,n)}catch(p){i=!0,o=p}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}else if(E(e)){var s=!0,l=!1,c=void 0;try{for(var f,h=e.or[Symbol.iterator]();!(s=(f=h.next()).done);s=!0)t(f.value,n)}catch(p){l=!0,c=p}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}}else n(e)}(e.filter,function(t){if(oo(t)){var e=null;Ji(t)?e=t.equal:ro(t)?e=t.range[0]:io(t)&&(e=(t.oneOf||t.in)[0]),e&&(Ue(e)?r[t.field]="date":Object(y.C)(e)?r[t.field]="number":Object(y.F)(e)&&(r[t.field]="string")),t.timeUnit&&(r[t.field]="date")}}),0===H(r).length?null:this.makeWithAncestors(t,{},r,n)}},{key:"makeImplicitFromEncoding",value:function(t,e,n){var r={};function i(t){var e;Bn(t)?r[t.field]="date":function(t){return"quantitative"===t.type||Hn(t.bin)}(t)&&((e=t.aggregate)&&Object(y.F)(e)&&R(["min","max"],e))?r[t.field]="number":et(t.field)>1?t.field in r||(r[t.field]="flatten"):xn(t)&&No(t.sort)&&et(t.sort.field)>1&&(t.sort.field in r||(r[t.sort.field]="flatten"))}return(Tf(e)||jf(e))&&e.forEachFieldDef(function(t,n){if(gn(t))i(t);else{var r=ke(n);if(r===n)throw new Error("Non-secondary channel ".concat(n," must have type in its field definition ").concat(JSON.stringify(t)));var o=e.fieldDef(r);i(Object.assign({},t,{type:o.type}))}}),this.makeWithAncestors(t,{},r,n)}},{key:"makeWithAncestors",value:function(t,n,r,i){var o=!0,a=!1,u=void 0;try{for(var s,l=H(r)[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,f=i.getWithExplicit(c);void 0!==f.value&&(f.explicit||f.value===r[c]||"derived"===f.value||"flatten"===r[c]?delete r[c]:Ne(Re.differentParse(c,r[c],f.value)))}}catch(M){a=!0,u=M}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}var h=!0,p=!1,d=void 0;try{for(var v,m=H(n)[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var y=v.value,g=i.get(y);void 0!==g&&(g===n[y]?delete n[y]:Ne(Re.differentParse(y,n[y],g)))}}catch(M){p=!0,d=M}finally{try{h||null==m.return||m.return()}finally{if(p)throw d}}var b=new tc(n,r);i.copyAll(b);var _={},x=!0,w=!1,k=void 0;try{for(var E,S=H(b.combine())[Symbol.iterator]();!(x=(E=S.next()).done);x=!0){var O=E.value,A=b.get(O);null!==A&&(_[O]=A)}}catch(M){w=!0,k=M}finally{try{x||null==S.return||S.return()}finally{if(w)throw k}}return 0===H(_).length||i.parseNothing?null:new e(t,_)}}]),e}(la),qc=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).transform=n,r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this.transform))}},{key:"addDimensions",value:function(t){this.transform.groupby=U(this.transform.groupby.concat(t),function(t){return t})}},{key:"dependentFields",value:function(){var t=new Set;return this.transform.groupby.forEach(function(e){return t.add(e)}),this.transform.joinaggregate.map(function(t){return t.field}).filter(function(t){return void 0!==t}).forEach(function(e){return t.add(e)}),t}},{key:"producedFields",value:function(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}},{key:"getDefaultName",value:function(t){return t.as||Sn(t)}},{key:"hash",value:function(){return"JoinAggregateTransform ".concat(P(this.transform))}},{key:"assemble",value:function(){var t=[],e=[],n=[],r=!0,i=!1,o=void 0;try{for(var a,u=this.transform.joinaggregate[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;e.push(s.op),n.push(this.getDefaultName(s)),t.push(void 0===s.field?null:s.field)}}catch(c){i=!0,o=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}var l=this.transform.groupby;return Object.assign({type:"joinaggregate",as:n,ops:e,fields:t},void 0!==l?{groupby:l}:{})}}]),e}(la);var Vc=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t)))._stack=n,r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this._stack))}}]),Object(ut.a)(e,[{key:"addDimensions",value:function(t){var e;(e=this._stack.facetby).push.apply(e,Object(m.a)(t))}},{key:"dependentFields",value:function(){var t=new Set;t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add),this._stack.facetby.forEach(t.add);var e=this._stack.sort.field;return Object(y.y)(e)?e.forEach(t.add):t.add(e),t}},{key:"producedFields",value:function(){return new Set(this._stack.as)}},{key:"hash",value:function(){return"Stack ".concat(P(this._stack))}},{key:"getGroupbyFields",value:function(){var t=this._stack,e=t.dimensionFieldDef,n=t.impute,r=t.groupby;return e?e.bin?n?[Sn(e,{binSuffix:"mid"})]:[Sn(e,{}),Sn(e,{binSuffix:"end"})]:[Sn(e)]:r||[]}},{key:"assemble",value:function(){var t=[],e=this._stack,n=e.facetby,r=e.dimensionFieldDef,i=e.stackField,o=e.stackby,a=e.sort,u=e.offset,s=e.impute,l=e.as;return s&&r&&(r.bin&&t.push({type:"formula",expr:"("+Sn(r,{expr:"datum"})+"+"+Sn(r,{expr:"datum",binSuffix:"end"})+")/2",as:Sn(r,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:i,groupby:[].concat(Object(m.a)(o),Object(m.a)(n)),key:Sn(r,{binSuffix:"mid"}),method:"value",value:0})),t.push({type:"stack",groupby:[].concat(Object(m.a)(this.getGroupbyFields()),Object(m.a)(n)),field:i,sort:a,as:l,offset:u}),t}},{key:"stack",get:function(){return this._stack}}],[{key:"makeFromTransform",value:function(t,n){var r=n.stack,i=n.groupby,o=n.as,a=n.offset,u=void 0===a?"zero":a,s=[],l=[];if(void 0!==n.sort){var c=!0,f=!1,h=void 0;try{for(var p,d=n.sort[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value;s.push(v.field),l.push(nt(v.order,"ascending"))}}catch(m){f=!0,h=m}finally{try{c||null==d.return||d.return()}finally{if(f)throw h}}}return new e(t,{stackField:r,groupby:i,offset:u,sort:{field:s,order:l},facetby:[],as:function(t){return Object(y.y)(t)&&t.every(function(t){return Object(y.F)(t)})&&t.length>1}(o)?o:Object(y.F)(o)?[o,o+"_end"]:[n.stack+"_start",n.stack+"_end"]})}},{key:"makeFromEncoding",value:function(t,n){var r,i=n.stack,o=n.encoding;if(!i)return null;i.groupbyChannel&&(r=Rn(o[i.groupbyChannel]));var a,u=function(t){return t.stack.stackBy.reduce(function(t,e){var n=Sn(e.fieldDef);return n&&t.push(n),t},[])}(n),s=n.encoding.order;return a=Object(y.y)(s)||yn(s)?ta(s):u.reduce(function(t,e){return t.field.push(e),t.order.push("descending"),t},{field:[],order:[]}),new e(t,{dimensionFieldDef:r,stackField:n.vgField(i.fieldChannel),facetby:[],stackby:u,sort:a,offset:i.offset,impute:i.impute,as:[n.vgField(i.fieldChannel,{suffix:"start",forAs:!0}),n.vgField(i.fieldChannel,{suffix:"end",forAs:!0})]})}}]),e}(la),Wc=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).transform=n,r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this.transform))}},{key:"addDimensions",value:function(t){this.transform.groupby=U(this.transform.groupby.concat(t),function(t){return t})}},{key:"dependentFields",value:function(){var t=new Set;return this.transform.groupby.forEach(function(e){return t.add(e)}),this.transform.sort.forEach(function(e){return t.add(e.field)}),this.transform.window.map(function(t){return t.field}).filter(function(t){return void 0!==t}).forEach(function(e){return t.add(e)}),t}},{key:"producedFields",value:function(){return new Set(this.transform.window.map(this.getDefaultName))}},{key:"getDefaultName",value:function(t){return t.as||Sn(t)}},{key:"hash",value:function(){return"WindowTransform ".concat(P(this.transform))}},{key:"assemble",value:function(){var t=[],e=[],n=[],r=[],i=!0,o=!1,a=void 0;try{for(var u,s=this.transform.window[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;e.push(l.op),n.push(this.getDefaultName(l)),r.push(void 0===l.param?null:l.param),t.push(void 0===l.field?null:l.field)}}catch(w){o=!0,a=w}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var c=this.transform.frame,f=this.transform.groupby;if(c&&null===c[0]&&null===c[1]&&e.every(function(t){return Pt(t)}))return Object.assign({type:"joinaggregate",as:n,ops:e,fields:t},void 0!==f?{groupby:f}:{});var h=[],p=[];if(void 0!==this.transform.sort){var d=!0,v=!1,m=void 0;try{for(var y,g=this.transform.sort[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var b=y.value;h.push(b.field),p.push(b.order||"ascending")}}catch(w){v=!0,m=w}finally{try{d||null==g.return||g.return()}finally{if(v)throw m}}}var _={field:h,order:p},x=this.transform.ignorePeers;return Object.assign({type:"window",params:r,as:n,ops:e,fields:t,sort:_},void 0!==x?{ignorePeers:x}:{},void 0!==f?{groupby:f}:{},void 0!==c?{frame:c}:{})}}]),e}(la);var Hc=function(t){function e(){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"run",value:function(t){var e=t.parent;if(t instanceof Uc){if(e instanceof Cc)return this.flags;if(e.numChildren()>1)return this.setContinue(),this.flags;if(e instanceof Uc)this.setMutated(),e.merge(t);else{if(W(e.producedFields(),t.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),t.swapWithParent()}}return this.setContinue(),this.flags}}]),e}(Dc),Gc=function(t){function e(){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"mergeNodes",value:function(t,e){var n=e.shift(),r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;t.removeChild(s),s.parent=n,s.remove()}}catch(l){i=!0,o=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}},{key:"run",value:function(t){for(var e=t.children.map(function(t){return t.hash()}),n={},r=0;r<e.length;r++)void 0===n[e[r]]?n[e[r]]=[t.children[r]]:n[e[r]].push(t.children[r]);var i=!0,o=!1,a=void 0;try{for(var u,s=H(n)[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;n[l].length>1&&(this.setMutated(),this.mergeNodes(t,n[l]))}}catch(m){o=!0,a=m}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var c=!0,f=!1,h=void 0;try{for(var p,d=t.children[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value;this.run(v)}}catch(m){f=!0,h=m}finally{try{c||null==d.return||d.return()}finally{if(f)throw h}}return this.mutatedFlag}}]),e}(Pc),Xc=function(t){function e(){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"run",value:function(t){return t instanceof ca||t.numChildren()>0||t instanceof Lc?this.flags:(this.setMutated(),t.remove(),this.flags)}}]),e}(Dc),Zc=function(t){function e(){var t;return Object(at.a)(this,e),(t=Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))).fields=new Set,t}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"run",value:function(t){if(this.setContinue(),t instanceof Ns){var e=t.producedFields();q(e,this.fields)?(this.setMutated(),t.remove()):this.fields=new Set([].concat(Object(m.a)(this.fields),Object(m.a)(e)))}return this.flags}},{key:"reset",value:function(){this.fields.clear()}}]),e}(Dc);function Yc(t){if(t instanceof Lc)if(1!==t.numChildren()||t.children[0]instanceof ca){var e=t.model.component.data.main;!function t(e){if(e instanceof ca&&e.type===$i&&1===e.numChildren()){var n=e.children[0];n instanceof Lc||(n.swapWithParent(),t(e))}}(e);var n=(c=t,function t(e){if(!(e instanceof Lc)){var n=e.clone();if(n instanceof ca){var r=tf+n.getSource();n.setSource(r),c.model.component.data.outputNodes[r]=n}else(n instanceof Rc||n instanceof Vc||n instanceof Wc||n instanceof qc)&&n.addDimensions(c.fields);return L(e.children.map(t)).forEach(function(t){return t.parent=n}),[n]}return L(e.children.map(t))}),r=L(t.children.map(n)),i=!0,o=!1,a=void 0;try{for(var u,s=r[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){u.value.parent=e}}catch(f){o=!0,a=f}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}else{var l=t.children[0];(l instanceof Rc||l instanceof Vc||l instanceof Wc||l instanceof qc)&&l.addDimensions(t.fields),l.swapWithParent(),Yc(t)}else t.children.map(Yc);var c}var $c=function(t){function e(){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"run",value:function(t){t instanceof ca&&!t.isRequired()&&(this.setMutated(),t.remove());var e=!0,n=!1,r=void 0;try{for(var i,o=t.children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.run(a)}}catch(u){n=!0,r=u}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return this.mutatedFlag}}]),e}(Pc),Kc=function(t){function e(){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"run",value:function(t){var e=t.parent,n=e.children.filter(function(t){return t instanceof Uc});if(n.length>1){var r={},i=!0,o=!1,a=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value.parse,c=!0,f=!1,h=void 0;try{for(var p,d=H(l)[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value;void 0===r[v]?r[v]=l[v]:r[v]!==l[v]&&delete r[v]}}catch(C){f=!0,h=C}finally{try{c||null==d.return||d.return()}finally{if(f)throw h}}}}catch(C){o=!0,a=C}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(0!==H(r).length){this.setMutated();var m=new Uc(e,r),y=!0,g=!1,b=void 0;try{for(var _,x=n[Symbol.iterator]();!(y=(_=x.next()).done);y=!0){var w=_.value,k=!0,E=!1,S=void 0;try{for(var O,A=H(r)[Symbol.iterator]();!(k=(O=A.next()).done);k=!0){var M=O.value;delete w.parse[M]}}catch(C){E=!0,S=C}finally{try{k||null==A.return||A.return()}finally{if(E)throw S}}e.removeChild(w),w.parent=m,0===H(w.parse).length&&w.remove()}}catch(C){g=!0,b=C}finally{try{y||null==x.return||x.return()}finally{if(g)throw b}}}}return this.setContinue(),this.flags}}]),e}(Dc),Jc=function(t){function e(){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"run",value:function(t){var e=t.parent,n=e.children.filter(function(t){return t instanceof Rc}),r={},i=!0,o=!1,a=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value,c=P(H(l.groupBy).sort());c in r||(r[c]=[]),r[c].push(l)}}catch(E){o=!0,a=E}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var f=!0,h=!1,p=void 0;try{for(var d,v=H(r)[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var m=r[d.value];if(m.length>1){var y=m.pop(),g=!0,b=!1,_=void 0;try{for(var x,w=m[Symbol.iterator]();!(g=(x=w.next()).done);g=!0){var k=x.value;y.merge(k)&&(e.removeChild(k),k.parent=y,k.remove(),this.setMutated())}}catch(E){b=!0,_=E}finally{try{g||null==w.return||w.return()}finally{if(b)throw _}}}}}catch(E){h=!0,p=E}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}return this.setContinue(),this.flags}}]),e}(Dc),Qc=function(t){function e(t){var n;return Object(at.a)(this,e),(n=Object(bi.a)(this,Object(_i.a)(e).call(this))).model=t,n}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"run",value:function(t){var e=t.parent,n=!(e instanceof Cc||e instanceof Nc||e instanceof Uc),r=[],i=[],o=!0,a=!1,u=void 0;try{for(var s,l=e.children[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;c instanceof Fc&&(n&&!W(e.producedFields(),c.dependentFields())?r.push(c):i.push(c))}}catch(b){a=!0,u=b}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}if(r.length>0){for(var f=r.pop(),h=0,p=r;h<p.length;h++){var d=p[h];f.merge(d,this.model)}this.setMutated(),e instanceof Fc?e.merge(f,this.model):f.swapWithParent()}if(i.length>1){for(var v=i.pop(),m=0,y=i;m<y.length;m++){var g=y[m];v.merge(g,this.model)}this.setMutated()}return this.setContinue(),this.flags}}]),e}(Dc),tf="scale_",ef=5;function nf(t){var e=[];return t.forEach(function t(n){0===n.numChildren()?e.push(n):n.children.forEach(t)}),e}function rf(t){return t}function of(t,e,n){return e.map(function(e){if(t instanceof Dc){var n=t.optimizeNextFromLeaves(e);return t.reset(),n}return t.run(e)}).some(rf)||n}function af(t,e){var n=t.sources,r=!1;return r=of(new $c,n,r),n=n.filter(function(t){return t.numChildren()>0}),r=of(new Xc,nf(n),r),n=n.filter(function(t){return t.numChildren()>0}),r=of(new Hc,nf(n),r),r=of(new Qc(e),nf(n),r),r=of(new Zc,nf(n),r),r=of(new Kc,nf(n),r),r=of(new Jc,nf(n),r),r=of(new Gc,n,r),t.sources=n,r}var uf=function(){function t(e){Object(at.a)(this,t),Object.defineProperty(this,"signal",{enumerable:!0,get:e})}return Object(ut.a)(t,null,[{key:"fromName",value:function(e,n){return new t(function(){return e(n)})}}]),t}();function sf(t){Tf(t)?function(t){var e=t.specifiedScales,n=t.component.scales;H(n).forEach(function(r){var i=e[r],o=i?i.domain:void 0,a=function(t,e){var n=t.getScaleComponent(e).get("type"),r=function(t,e,n,r){if("unaggregated"===t){var i=ff(e,n),o=i.valid,a=i.reason;if(!o)return void Ne(a)}else if(void 0===t&&r.useUnaggregatedDomain){var u=ff(e,n),s=u.valid;if(s)return"unaggregated"}return t}(t.scaleDomain(e),t.fieldDef(e),n,t.config.scale);r!==t.scaleDomain(e)&&(t.specifiedScales[e]=Object.assign({},t.specifiedScales[e],{domain:r}));if("x"===e&&t.channelHasField("x2"))return t.channelHasField("x")?lf(n,r,t,"x").concat(lf(n,r,t,"x2")):lf(n,r,t,"x2");if("y"===e&&t.channelHasField("y2"))return t.channelHasField("y")?lf(n,r,t,"y").concat(lf(n,r,t,"y2")):lf(n,r,t,"y2");return lf(n,r,t,e)}(t,r),u=n[r];if(u.domains=a,Yr(o)&&u.set("domainRaw",{signal:Qs+P(o)},!0),t.component.data.isFaceted){for(var s=t;!jf(s)&&s.parent;)s=s.parent;var l=s.component.resolve.scale[r];if("shared"===l){var c=!0,f=!1,h=void 0;try{for(var p,d=a[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value;So(v)&&(v.data=tf+v.data.replace(tf,""))}}catch(m){f=!0,h=m}finally{try{c||null==d.return||d.return()}finally{if(f)throw h}}}}})}(t):function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t.children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;sf(a)}}catch(s){n=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}var u=t.component.scales;H(u).forEach(function(e){var n,r=null,i=!0,o=!1,a=void 0;try{for(var l,c=t.children[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value,h=f.component.scales[e];if(h){n=void 0===n?h.domains:n.concat(h.domains);var p=h.get("domainRaw");r&&p&&r.signal!==p.signal&&Ne("The same selection must be used to override scale domains in a layered view."),r=p}}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}u[e].domains=n,r&&u[e].set("domainRaw",r,!0)})}(t)}function lf(t,e,n,r){var i=n.fieldDef(r);if(e&&"unaggregated"!==e&&!Yr(e)){var o=i.type,a=i.timeUnit;return"temporal"===o||a?function(t,e,n){return t.map(function(t){var r=Un(t,{timeUnit:n,type:e});return{signal:"{data: ".concat(r,"}")}})}(e,o,a):[e]}var u=n.stack;if(u&&r===u.fieldChannel){if("normalize"===u.offset)return[[0,1]];var s=n.requestDataName($i);return[{data:s,field:n.vgField(r,{suffix:"start"})},{data:s,field:n.vgField(r,{suffix:"end"})}]}var l=De(r)?function(t,e,n){if(!Wr(n))return;var r=t.fieldDef(e),i=r.sort;if(Bo(i))return{op:"min",field:Qu(r,e),order:"ascending"};var o=null!==t.stack;if(No(i))return cf(i,o);if(function(t){return!!t&&!!t.encoding}(i)){var a=i.encoding,u=i.order,s=t.fieldDef(a),l=s.aggregate,c=s.field,f={op:l,field:c,order:u};return cf(f,o)}if("descending"===i)return{op:"min",field:t.vgField(e),order:"descending"};if(R(["ascending",void 0],i))return!0;return}(n,r,t):void 0;if("unaggregated"===e){var c=n.requestDataName($i),f=i.field;return[{data:c,field:Sn({field:f,aggregate:"min"})},{data:c,field:Sn({field:f,aggregate:"max"})}]}if(Hn(i.bin)){if(Wr(t))return"bin-ordinal"===t?[]:[{data:Z(l)?n.requestDataName($i):n.requestDataName(Ki),field:n.vgField(r,Vn(i,r)?{binSuffix:"range"}:{}),sort:!0!==l&&Object(y.D)(l)?l:{field:n.vgField(r,{}),op:"min"}}];if(Hn(i.bin)){var h=n.getName(Sn(i,{suffix:"bins"}));return[new uf(function(){var t=n.getSignalName(h);return"[".concat(t,".start, ").concat(t,".stop]")})]}return[{data:n.requestDataName($i),field:n.vgField(r,{})}]}return l?[{data:Z(l)?n.requestDataName($i):n.requestDataName(Ki),field:n.vgField(r),sort:l}]:[{data:n.requestDataName($i),field:n.vgField(r)}]}function cf(t,e){var n=t.op,r=t.field,i=t.order;return Object.assign({op:n||(e?"sum":Lo)},r?{field:tt(r)}:{},i?{order:i}:{})}function ff(t,e){var n=t.aggregate,r=t.type;return n?Object(y.F)(n)&&!Ft[n]?{valid:!1,reason:Re.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===e?{valid:!1,reason:Re.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:Re.unaggregateDomainHasNoEffectForRawField(t)}}function hf(t){if(So(t)&&Object(y.F)(t.field))return t.field;if(function(t){return!Object(y.y)(t)&&"fields"in t&&!("data"in t)}(t)){var e,n=!0,r=!1,i=void 0;try{for(var o,a=t.fields[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(So(u)&&Object(y.F)(u.field))if(e){if(e!==u.field)return Ne("Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect."),e}else e=u.field}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return Ne("Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect."),e}if(function(t){return!Object(y.y)(t)&&"fields"in t&&"data"in t}(t)){Ne("Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect.");var s=t.fields[0];return Object(y.F)(s)?s:void 0}}function pf(t,e){return function(t){var e=U(t.map(function(t){return So(t)?(t.sort,Ct(t,["sort"])):t}),P),n=U(t.map(function(t){if(So(t)){var e=t.sort;return void 0===e||Z(e)||("count"===e.op&&delete e.field,"ascending"===e.order&&delete e.order),e}}).filter(function(t){return void 0!==t}),P);if(0!==e.length){if(1===e.length){var r=t[0];if(So(r)&&n.length>0){var i=n[0];return n.length>1&&(Ne(Re.MORE_THAN_ONE_SORT),i=!0),Object.assign({},r,{sort:i})}return r}var o,a=U(n.map(function(t){return Z(t)?t:"count"===t.op?t:(Ne(Re.domainSortDropped(t)),!0)}),P);1===a.length?o=a[0]:a.length>1&&(Ne(Re.MORE_THAN_ONE_SORT),o=!0);var u=U(t.map(function(t){return So(t)?t.data:null}),function(t){return t});return 1===u.length&&null!==u[0]?Object.assign({data:u[0],fields:e.map(function(t){return t.field})},o?{sort:o}:{}):Object.assign({fields:e},o?{sort:o}:{})}}(t.component.scales[e].domains.map(function(e){return So(e)&&(e.data=t.lookupDataSource(e.data)),e}))}function df(t){return H(t.component.scales).reduce(function(e,n){var r=t.component.scales[n];if(r.merged)return e;var i=r.combine(),o=i.domainRaw,a=i.name,u=i.type,s=(i.domainRaw,i.range,Ct(i,["name","type","domainRaw","range"])),l=function(t,e,n){if(("x"===n||"y"===n)&&Eo(t))return{step:{signal:e+"_step"}};return t}(i.range,a,n);o&&function(t){return t.signal.indexOf(Qs)>=0}(o)&&(o=function(t,e){var n=JSON.parse(e.signal.replace(Qs,"")),r=Y(n.selection),i=n.encoding,o=n.field,a=t.component.selection&&t.component.selection[r];if(!a){if(a=t.getSelectionComponent(r,n.selection),i||o){if(i&&!o){var u=a.project.filter(function(t){return t.channel===i});!u.length||u.length>1?(o=a.project[0].field,Ne((u.length?"Multiple ":"No ")+"matching ".concat(Object(y.U)(i)," encoding found for selection ").concat(Object(y.U)(n.selection),". ")+'Using "field": '.concat(Object(y.U)(o),"."))):o=u[0].field}}else o=a.project[0].field,a.project.length>1&&Ne('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(Object(y.U)(o),"."));return{signal:Q(o,r)}}return Ne('Use "bind": "scales" to setup a binding for scales and selections within the same view.'),{signal:"null"}}(t,o));var c=pf(t,n);return e.push(Object.assign({name:a,type:u},c?{domain:c}:{},o?{domainRaw:o}:{},{range:l},s)),e},[])}var vf=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,{},{name:t}))).merged=!1,r.domains=[],r.setWithExplicit("type",n),r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"domainDefinitelyIncludesZero",get:function(){if(!1!==this.get("zero"))return!0;var t=this.domains;return!!Object(y.y)(t)&&I(t,function(t){return Object(y.y)(t)&&2===t.length&&t[0]<=0&&t[1]>=0})}}]),e}(tc),mf=["range","rangeStep","scheme"];function yf(t){return"x"===t?"width":"y"===t?"height":void 0}function gf(t){var e=t.component.scales;je.forEach(function(n){var r=e[n];if(r){var i=t.getScaleComponent(n),o=t.specifiedScales[n],a=t.fieldDef(n),u=yf(n),s=u?!!t.component.layoutSize.get(u):void 0,l=i.get("type"),c=R(["point","band"],l)||!!o.rangeStep;u&&t.fit&&!s&&c&&(Ne(Re.CANNOT_FIX_RANGE_STEP_WITH_FIT),s=!0);var f=function(t){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=Ae[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=bf(t,u);void 0!==s&&e.push(s)}}catch(l){r=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}(t),h=function(t,e,n,r,i,o,a,u,s,l,c){for(var f=s||null===i.rangeStep,h=0,p=mf;h<p.length;h++){var d=p[h];if(void 0!==i[d]){var v=Jr(n,d),m=Qr(t,d);if(v)if(m)Ne(m);else switch(d){case"range":return ec(i[d]);case"scheme":return ec(_f(i[d]));case"rangeStep":var g=i[d];if(null!==g){if(!s)return ec({step:g});Ne(Re.rangeStepDropped(t))}}else Ne(Re.scalePropertyNotWorkWithScaleType(n,d,t))}}return nc(function(t,e,n,r,i,o,a,u,s,l,c){switch(t){case Ut:case qt:if(R(["point","band"],n)&&!l)if(t===Ut&&"text"===a){if(i.scale.textXRangeStep)return{step:i.scale.textXRangeStep}}else if(i.scale.rangeStep)return{step:i.scale.rangeStep};return t===qt&&Hr(n)?[uf.fromName(e,u),0]:[0,uf.fromName(e,u)];case Qt:var f=function(t,e,n){if(e)return 0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(Re.incompatibleChannel("size",t))}(a,o,i),h=function(t,e,n){var r=n.scale;switch(t){case"bar":case"tick":if(void 0!==n.scale.maxBandSize)return n.scale.maxBandSize;var i=wf(e,n.scale);return Object(y.C)(i)?i-1:new uf(function(){return"".concat(i.signal," - 1")});case"line":case"trail":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":if(n.scale.maxSize)return n.scale.maxSize;var o=wf(e,r);return Object(y.C)(o)?Math.pow(xf*o,2):new uf(function(){return"pow(".concat(xf," * ").concat(o.signal,", 2)")})}throw new Error(Re.incompatibleChannel("size",t))}(a,s,i);return Xr(n)?function(t,e,n){var r=function(){var r=ko(e)?e.signal:e,i="(".concat(r," - ").concat(t,") / (").concat(n," - 1)");return"sequence(".concat(t,", ").concat(e," + ").concat(i,", ").concat(i,")")};return ko(e)?new uf(r):{signal:r()}}(f,h,function(t,e,n,r){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return void 0!==n&&Object(y.y)(n)?n.length+1:(Ne(Re.domainRequiredForThresholdScale(r)),3)}}(n,i,c,t)):[f,h];case re:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Jt:return"symbol";case Yt:case $t:case Kt:return"ordinal"===n?"nominal"===r?"category":"ordinal":"rect"===a||"geoshape"===a?"heatmap":"ramp";case te:case ee:case ne:return[i.scale.minOpacity,i.scale.maxOpacity]}throw new Error("Scale range undefined for channel ".concat(t))}(t,e,n,r,o,a,u,l,c,f,i.domain))}(n,t.getSignalName.bind(t),l,a.type,o,t.config,r.get("zero"),t.mark,s,t.getName(u),f);r.setWithExplicit("range",h)}})}function bf(t,e){var n=t.getScaleComponent(e);if(n){var r=n.get("type"),i=t.fieldDef(e);if(Wr(r)){var o=n&&n.get("range");if(o&&Eo(o)&&Object(y.C)(o.step))return o.step}else if(i&&i.bin&&Hn(i.bin)){var a=t.getName(Sn(i,{suffix:"bins"})),u=yf(e),s=t.getName(u);return new uf(function(){var e=t.getSignalName(a),n="(".concat(e,".stop - ").concat(e,".start) / ").concat(e,".step");return"".concat(t.getSignalName(s)," / (").concat(n,")")})}}}function _f(t){return function(t){return t&&!!t.name}(t)?Object.assign({scheme:t.name},j(t,["name"])):{scheme:t}}var xf=.95;function wf(t,e){if(t.length>0){var n=1/0,r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;ko(s)?n=void 0:void 0!==n&&s<n&&(n=s)}}catch(l){i=!0,o=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return void 0!==n?n:new uf(function(){var e=t.map(function(t){return ko(t)?t.signal:t});return"min(".concat(e.join(", "),")")})}return e.rangeStep?e.rangeStep:21}function kf(t,e){Tf(t)?function(t,e){var n=t.component.scales;H(n).forEach(function(r){var i=t.specifiedScales[r],o=n[r],a=t.getScaleComponent(r),u=t.fieldDef(r),s=t.config,l=i[e],c=a.get("type"),f=Jr(c,e),h=Qr(r,e);if(void 0!==l&&(f?h&&Ne(h):Ne(Re.scalePropertyNotWorkWithScaleType(c,e,r))),f&&void 0===h)if(void 0!==l)o.copyKeyFromObject(e,i);else{var p=function(t,e,n,r,i,o,a,u,s,l){var c=l.scale,f=r.type,h=r.sort;switch(t){case"bins":return function(t,e,n){var r=e.bin;if(Hn(r)){var i=t.getName(Sn(e,{suffix:"bins"}));return new uf(function(){return t.getSignalName(i)})}if(Gn(r)&&Xn(r)&&void 0!==r.step)return{step:r.step};return}(e,r);case"interpolate":return function(t,e){if(R([Yt,$t,Kt],t)&&"nominal"!==e)return"hcl";return}(n,f);case"nice":return function(t,e,n){if(n.bin||R([Ar.TIME,Ar.UTC],t))return;return!!R([Ut,qt],e)||void 0}(i,n,r);case"padding":return function(t,e,n,r,i,o){if(R([Ut,qt],t)){if(Gr(e)){if(void 0!==n.continuousPadding)return n.continuousPadding;var a=i.type,u=i.orient;if("bar"===a&&!r.bin&&("vertical"===u&&"x"===t||"horizontal"===u&&"y"===t))return o.continuousBandSize}if(e===Ar.POINT)return n.pointPadding}return}(n,i,c,r,s,l.bar);case"paddingInner":return function(t,e,n,r){if(void 0!==t)return;if(R([Ut,qt],e)){var i=r.bandPaddingInner,o=r.barBandPaddingInner,a=r.rectBandPaddingInner;return nt(i,"bar"===n?o:a)}return}(o,n,s.type,c);case"paddingOuter":return function(t,e,n,r,i,o){if(void 0!==t)return;if(R([Ut,qt],e)&&n===Ar.BAND){var a=o.bandPaddingOuter,u=o.barBandPaddingOuter,s=o.rectBandPaddingOuter;return nt(a,"bar"===r?u:s,i/2)}return}(o,n,i,s.type,a,c);case"reverse":return function(t,e){if(Hr(t)&&"descending"===e)return!0;return}(i,h);case"zero":return function(t,e,n,r,i){if(n&&"unaggregated"!==n&&Hr(i)){if(Object(y.y)(n)){var o=n[0],a=n[n.length-1];if(o<=0&&a>=0)return!0}return!1}if("size"===t&&"quantitative"===e.type&&!Xr(i))return!0;if(!e.bin&&R([Ut,qt],t)){var u=r.orient,s=r.type;return!R(["bar","area","line","trail"],s)||!("horizontal"===u&&"y"===t||"vertical"===u&&"x"===t)}return!1}(n,r,u,s,i)}return c[t]}(e,t,r,u,a.get("type"),a.get("padding"),a.get("paddingInner"),i.domain,t.markDef,s);void 0!==p&&o.set(e,p,!1)}})}(t,e):Sf(t,e)}function Ef(t){Tf(t)?gf(t):Sf(t,"range")}function Sf(t,e){var n=t.component.scales,r=!0,i=!1,o=void 0;try{for(var a,u=t.children[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;"range"===e?Ef(s):kf(s,e)}}catch(l){i=!0,o=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}H(n).forEach(function(r){var i,o=!0,a=!1,u=void 0;try{for(var s,c=t.children[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var f=s.value.component.scales[r];if(f)i=oc(i,f.getWithExplicit(e),e,"scale",rc(function(t,n){switch(e){case"range":return t.step&&n.step?t.step-n.step:0}return 0}))}}catch(l){a=!0,u=l}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}n[r].setWithExplicit(e,i)})}function Of(t,e,n,r,i){var o=function(t,e,n,r,i){switch(e.type){case"nominal":case"ordinal":if(pe(t)||"discrete"===ze(t))return"shape"===t&&"ordinal"===e.type&&Ne(Re.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(R(["x","y"],t)){if(R(["rect","bar","rule"],n))return"band";if("bar"===n)return"band"}return"point";case"temporal":return pe(t)?"time":"discrete"===ze(t)?(Ne(Re.discreteChannelCannotEncode(t,"temporal")),"ordinal"):"time";case"quantitative":return pe(t)?Hn(e.bin)?"bin-ordinal":"linear":"discrete"===ze(t)?(Ne(Re.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(Re.invalidFieldType(e.type))}(e,n,r),a=t.type;return De(e)?void 0!==a?ei(e,a)?ti(a,n.type)?a:(Ne(Re.scaleTypeNotWorkWithFieldDef(a,o)),o):(Ne(Re.scaleTypeNotWorkWithChannel(e,a,o)),o):o:null}function Af(t){Tf(t)?t.component.scales=function(t){var e=t.encoding,n=t.config,r=t.mark;return je.reduce(function(i,o){var a,u,s=e[o];if(yn(s)&&r===bt&&o===Jt&&s.type===pn)return i;if(yn(s)?(a=s,u=s.scale):mn(s)&&(a=s.condition,u=s.condition.scale),a&&null!==u&&!1!==u){var l=Of(u=u||{},o,a,r,n.scale);i[o]=new vf(t.scaleName(o+"",!0),{value:l,explicit:u.type===l})}return i},{})}(t):t.component.scales=function(t){var e=t.component.scales={},n={},r=t.component.resolve,i=!0,o=!1,a=void 0;try{for(var u,s=function(){var e=u.value;Af(e),H(e.component.scales).forEach(function(i){if(r.scale[i]=r.scale[i]||function(t,e){if(zf(e)||jf(e))return"shared";if(Pf(e)||Df(e))return R(Ae,t)?"independent":"shared";throw new Error("invalid model type for resolve")}(i,t),"shared"===r.scale[i]){var o=n[i],a=e.component.scales[i].getWithExplicit("type");o?!function(t,e){var n=zr[t],r=zr[e];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}(o.value,a.value)?(r.scale[i]="independent",delete n[i]):n[i]=oc(o,a,"type","scale",Mf):n[i]=a}})},l=t.children[Symbol.iterator]();!(i=(u=l.next()).done);i=!0)s()}catch(c){o=!0,a=c}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return H(n).forEach(function(r){var i=t.scaleName(r,!0),o=n[r];e[r]=new vf(i,o);var a=!0,u=!1,s=void 0;try{for(var l,f=t.children[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value,p=h.component.scales[r];p&&(h.renameScale(p.get("name"),i),p.merged=!0)}}catch(c){u=!0,s=c}finally{try{a||null==f.return||f.return()}finally{if(u)throw s}}}),e}(t)}var Mf=rc(function(t,e){return Fr(t)-Fr(e)});var Cf=function(){function t(){Object(at.a)(this,t),this.nameMap={}}return Object(ut.a)(t,[{key:"rename",value:function(t,e){this.nameMap[t]=e}},{key:"has",value:function(t){return void 0!==this.nameMap[t]}},{key:"get",value:function(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}]),t}();function Tf(t){return t&&"unit"===t.type}function jf(t){return t&&"facet"===t.type}function Df(t){return t&&"repeat"===t.type}function Pf(t){return t&&"concat"===t.type}function zf(t){return t&&"layer"===t.type}var Rf=function(){function t(e,n,r,i,o,a,u,s){var l=this;Object(at.a)(this,t),this.type=n,this.parent=r,this.config=o,this.repeater=a,this.view=s,this.children=[],this.correctDataNames=function(t){return t.from&&t.from.data&&(t.from.data=l.lookupDataSource(t.from.data)),t.from&&t.from.facet&&t.from.facet.data&&(t.from.facet.data=l.lookupDataSource(t.from.facet.data)),t},this.parent=r,this.config=o,this.repeater=a,this.name=e.name||i,this.title=Object(y.F)(e.title)?{text:e.title}:e.title,this.scaleNameMap=r?r.scaleNameMap:new Cf,this.projectionNameMap=r?r.projectionNameMap:new Cf,this.signalNameMap=r?r.signalNameMap:new Cf,this.data=e.data,this.description=e.description,this.transforms=(e.transform||[]).map(function(t){return lo(t)?{filter:A(t.filter,so)}:t}),this.layout=Ot(e)||ki(e)?{}:function(t,e,n){var r=n[e],i={},o=r.spacing,a=r.columns;void 0!==o&&(i.spacing=o),void 0!==a&&(Ye(t)&&!Ze(t.facet)||li(t)&&Object(y.y)(t.repeat)||ai(t))&&(i.columns=a);var u=!0,s=!1,l=void 0;try{for(var c,f=ci[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value;if(void 0!==t[h])if("spacing"===h){var p=t[h];i[h]=Object(y.C)(p)?p:{row:p.row||o,column:p.column||o}}else i[h]=t[h]}}catch(d){s=!0,l=d}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}return i}(e,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Ye(e)||r&&r.component.data.isFaceted&&!e.data},layoutSize:new tc,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},u?C(u):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object(ut.a)(t,[{key:"initSize",value:function(t){var e=t.width,n=t.height;e&&this.component.layoutSize.set("width",e,!0),n&&this.component.layoutSize.set("height",n,!0)}},{key:"parse",value:function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}},{key:"parseScale",value:function(){!function(t){Af(t),sf(t);var e=!0,n=!1,r=void 0;try{for(var i,o=Kr[Symbol.iterator]();!(e=(i=o.next()).done);e=!0)kf(t,i.value)}catch(a){n=!0,r=a}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}Ef(t)}(this)}},{key:"parseProjection",value:function(){Ac(this)}},{key:"renameTopLevelLayoutSizeSignal",value:function(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}},{key:"parseLegends",value:function(){gc(this)}},{key:"assembleGroupStyle",value:function(){if("unit"===this.type||"layer"===this.type)return this.view&&this.view.style||"cell"}},{key:"assembleEncodeFromView",value:function(t){t.style;var e=Ct(t,["style"]),n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];void 0!==i&&(n[r]={value:i})}return n}},{key:"assembleGroupEncodeEntry",value:function(t){var e=void 0;return this.view&&(e=this.assembleEncodeFromView(this.view)),t||"unit"!==this.type&&"layer"!==this.type?e:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},e||{})}},{key:"assembleLayout",value:function(){if(this.layout){var t=this.layout,e=t.spacing,n=Ct(t,["spacing"]),r=this.component,i=this.config,o=function(t,e){var n={},r=!0,i=!1,o=void 0;try{for(var a,u=ve[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value,l=t[s];if(l&&l.facetFieldDef){var c=ns(["titleAnchor","titleOrient"],l.facetFieldDef,e,s),f=c.titleAnchor,h=ts(s,c.titleOrient),p=ps(f,h);void 0!==p&&(n[h]=p)}}}catch(d){i=!0,o=d}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return H(n).length>0?n:void 0}(r.layoutHeaders,i);return Object.assign({padding:e},this.assembleDefaultLayout(),n,o?{titleBand:o}:{})}}},{key:"assembleDefaultLayout",value:function(){return{}}},{key:"assembleHeaderMarks",value:function(){var t=this.component.layoutHeaders,e=[],n=!0,r=!1,i=void 0;try{for(var o,a=ve[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;t[u].title&&e.push(os(this,u))}}catch(d){r=!0,i=d}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var s=!0,l=!1,c=void 0;try{for(var f,h=rs[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;e=e.concat(ss(this,p))}}catch(d){l=!0,c=d}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}return e}},{key:"assembleAxes",value:function(){return function(t,e){var n=t.x,r=void 0===n?[]:n,i=t.y,o=void 0===i?[]:i;return[].concat(Object(m.a)(r.map(function(t){return Do(t,"main",e)})),Object(m.a)(r.map(function(t){return Do(t,"grid",e)})),Object(m.a)(o.map(function(t){return Do(t,"main",e)})),Object(m.a)(o.map(function(t){return Do(t,"grid",e)}))).filter(function(t){return t})}(this.component.axes,this.config)}},{key:"assembleLegends",value:function(){return wc(this)}},{key:"assembleProjections",value:function(){return kc(this)}},{key:"assembleTitle",value:function(){var t=this.title||{},e=t.encoding,n=Ct(t,["encoding"]),r=Object.assign({},fi(this.config.title).nonMark,n,e?{encode:{update:e}}:{});if(r.text)return R(["unit","layer"],this.type)?R(["middle",void 0],r.anchor)&&(r.frame=r.frame||"group"):r.anchor=r.anchor||"start",H(r).length>0?r:void 0}},{key:"assembleGroup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};(t=t.concat(this.assembleSignals())).length>0&&(e.signals=t);var n=this.assembleLayout();n&&(e.layout=n),e.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||jf(this.parent)?function t(e){return zf(e)||Pf(e)||Df(e)?e.children.reduce(function(e,n){return e.concat(t(n))},df(e)):df(e)}(this):[];r.length>0&&(e.scales=r);var i=this.assembleAxes();i.length>0&&(e.axes=i);var o=this.assembleLegends();return o.length>0&&(e.legends=o),e}},{key:"hasDescendantWithFieldOnChannel",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(Tf(a)){if(a.channelHasField(t))return!0}else if(a.hasDescendantWithFieldOnChannel(t))return!0}}catch(u){n=!0,r=u}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return!1}},{key:"getName",value:function(t){return Y((this.name?this.name+"_":"")+t)}},{key:"requestDataName",value:function(t){var e=this.getName(t),n=this.component.data.outputNodeRefCounts;return n[e]=(n[e]||0)+1,e}},{key:"getSizeSignalRef",value:function(t){if(jf(this.parent)){var e="width"===t?"x":"y",n=this.component.scales[e];if(n&&!n.merged){var r=n.get("type"),i=n.get("range");if(Wr(r)&&Eo(i)){var o=n.get("name"),a=hf(pf(this,e));return a?{signal:gs(o,n,Sn({aggregate:"distinct",field:a},{expr:"datum"}))}:(Ne("Unknown field for ${channel}.  Cannot calculate view size."),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}},{key:"lookupDataSource",value:function(t){var e=this.component.data.outputNodes[t];return e?e.getSource():t}},{key:"getSignalName",value:function(t){return this.signalNameMap.get(t)}},{key:"renameSignal",value:function(t,e){this.signalNameMap.rename(t,e)}},{key:"renameScale",value:function(t,e){this.scaleNameMap.rename(t,e)}},{key:"renameProjection",value:function(t,e){this.projectionNameMap.rename(t,e)}},{key:"scaleName",value:function(t,e){return e?this.getName(t):_e(t)&&De(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}},{key:"projectionName",value:function(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}},{key:"getScaleComponent",value:function(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var e=this.component.scales[t];return e&&!e.merged?e:this.parent?this.parent.getScaleComponent(t):void 0}},{key:"getSelectionComponent",value:function(t,e){var n=this.component.selection[t];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(t,e)),!n)throw new Error(Re.selectionNotFound(e));return n}},{key:"width",get:function(){return this.getSizeSignalRef("width")}},{key:"height",get:function(){return this.getSizeSignalRef("height")}}]),t}(),If=function(t){function e(){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"vgField",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.fieldDef(t);if(n)return Sn(n,e)}},{key:"reduceFieldDef",value:function(t,e,n){return er(this.getMapping(),function(e,n,r){var i=zn(n);return i?t(e,i,r):e},e,n)}},{key:"forEachFieldDef",value:function(t,e){tr(this.getMapping(),function(e,n){var r=zn(e);r&&t(r,n)},e)}}]),e}(Rf),Ff=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).fieldDefs=n,r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,Object.assign({},this.fieldDefs))}},{key:"assemble",value:function(){var t=this,e=H(this.filter).reduce(function(e,n){var r=t.fieldDefs[n],i=Sn(r,{expr:"datum"});return null!==r&&(e.push("".concat(i," !== null")),e.push("!isNaN(".concat(i,")"))),e},[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}},{key:"filter",get:function(){return this.fieldDefs}}],[{key:"make",value:function(t,n){var r=n.config,i=n.mark;if("filter"!==r.invalidValues)return null;var o=n.reduceFieldDef(function(t,e,r){var o=De(r)&&n.getScaleComponent(r);o&&(!Hr(o.get("type"))||e.aggregate||xt(i)||(t[e.field]=e));return t},{});return H(o).length?new e(t,o):null}}]),e}(la),Lf=function(t){function e(t,n){var r;Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).transform=n,r.transform=C(n);var i=r.transform,o=i.flatten,a=i.as,u=void 0===a?[]:a;return r.transform.as=o.map(function(t,e){return u[e]||t}),r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(this.parent,C(this.transform))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FlattenTransform ".concat(P(this.transform))}},{key:"assemble",value:function(){var t=this.transform;return{type:"flatten",fields:t.flatten,as:t.as}}}]),e}(la),Nf=function(t){function e(t,n){var r;Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).transform=n,r.transform=C(n);var i=r.transform.as||[void 0,void 0];return r.transform.as=[i[0]||"key",i[1]||"value"],r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this.transform))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FoldTransform ".concat(P(this.transform))}},{key:"assemble",value:function(){var t=this.transform;return{type:"fold",fields:t.fold,as:t.as}}}]),e}(la),Bf=function(t){function e(t,n,r,i){var o;return Object(at.a)(this,e),(o=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).fields=n,o.geojson=r,o.signal=i,o}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this.fields),this.geojson,this.signal)}},{key:"assemble",value:function(){return Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{},this.geojson?{geojson:this.geojson}:{},{signal:this.signal})}}],[{key:"parseAll",value:function(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;var r=0;if([[Gt,Ht],[Zt,Xt]].forEach(function(i){var o=i.map(function(t){return n.channelHasField(t)?n.fieldDef(t).field:_n(n.encoding[t])?{expr:n.encoding[t].value+""}:void 0});(o[0]||o[1])&&(t=new e(t,o,null,n.getName("geojson_".concat(r++))))}),n.channelHasField(Jt)){var i=n.fieldDef(Jt);i.type===pn&&(t=new e(t,null,i.field,n.getName("geojson_".concat(r++))))}return t}}]),e}(la),Uf=function(t){function e(t,n,r,i){var o;return Object(at.a)(this,e),(o=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).projection=n,o.fields=r,o.as=i,o}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,this.projection,C(this.fields),C(this.as))}},{key:"assemble",value:function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}],[{key:"parseAll",value:function(t,n){return n.projectionName()?([[Gt,Ht],[Zt,Xt]].forEach(function(r){var i=r.map(function(t){return n.channelHasField(t)?n.fieldDef(t).field:_n(n.encoding[t])?{expr:n.encoding[t].value+""}:void 0}),o=r[0]===Zt?"2":"";(i[0]||i[1])&&(t=new e(t,n.projectionName(),i,[n.getName("x"+o),n.getName("y"+o)]))}),t):t}}]),e}(la),qf=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).params=n,r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,this.params)}},{key:"assemble",value:function(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}]),e}(la),Vf=function(t){function e(t){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).call(this,t))}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null)}}]),Object(ut.a)(e,[{key:"producedFields",value:function(){return new Set([ri])}},{key:"hash",value:function(){return"Identifier"}},{key:"assemble",value:function(){return{type:"identifier",as:ri}}}]),e}(la);function Wf(t,e){var n=t.config,r=t.encoding,i=t.markDef,o=i.orient,a=r.size,u="x"===e?"horizontal"===o:"vertical"===o,s="x"===e?"x2":"y2",l=r[e],c=r[s],f=t.scaleName(e),h=t.getScaleComponent(e),p=nt(i.binSpacing,n.bar.binSpacing),d=h?h.get("reverse"):void 0;if(yn(l)&&Gn(l.bin))return Yl({fieldDef:l,fieldDef2:c,channel:e,mark:"bar",scaleName:f,spacing:p,reverse:d});if(u||c)return Object.assign({},$l(e,t,"zeroOrMin"),Kl(t,"zeroOrMin",s));var v="x"===e?"width":"height";if(yn(l)){var m=h.get("type");if(Hn(l.bin)&&!a&&!Wr(m))return Yl({fieldDef:l,channel:e,scaleName:f,mark:"bar",spacing:p,reverse:d});if(m===Ar.BAND)return Zl(l,e,t,Hf(i,v,f,h,n))}return function(t,e,n,r){var i="x"===t?"xc":"yc",o="x"===t?"width":"height";return Object.assign({},$l(t,e,n,i),Wl("size",e,{defaultRef:r,vgChannel:o}))}(e,t,Rl(t[v]),Hf(i,v,f,h,n))}function Hf(t,e,n,r,i){var o=nt(t[e],t.size,Go("size",t,i,{vgChannel:e}));if(void 0!==o)return{value:o};if(r){var a=r.get("type");if("point"!==a&&"band"!==a)return{value:i.bar.continuousBandSize};if(void 0!==i.bar.discreteBandSize)return{value:i.bar.discreteBandSize};if(a!==Ar.POINT)return Tl(n);var u=r.get("range");if(Eo(u)&&Object(y.C)(u.step))return{value:u.step-1};Ne(Re.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}return{value:nt(i.bar.discreteBandSize,i.scale.rangeStep?i.scale.rangeStep-1:void 0,20)}}function Gf(t,e){t.config;var n=t.width,r=t.height;return Object.assign({},Nl(t,{size:"include",orient:"ignore"}),$l("x",t,Rl(n)),$l("y",t,Rl(r)),Wl("size",t),function(t,e,n){if(n)return{shape:{value:n}};return Wl("shape",t)}(t,0,e))}function Xf(t,e){var n="x"===e?"x2":"y2",r=t.encoding[e],i=t.encoding[n],o=t.getScaleComponent(e),a=o?o.get("type"):void 0,u=t.scaleName(e);if(yn(r)&&(Hn(r.bin)||Gn(r.bin)))return Yl({fieldDef:r,fieldDef2:i,channel:e,mark:"rect",scaleName:u,spacing:0,reverse:o.get("reverse")});if(yn(r)&&o&&Wr(a)){if(a===Ar.BAND)return Zl(r,e,t);throw new Error(Re.scaleTypeNotWorkWithMark(ht,a))}return Object.assign({},$l(e,t,"zeroOrMax"),Kl(t,"zeroOrMin",n))}function Zf(t){var e=t.config,n=t.markDef,r=n.orient,i="horizontal"===r?"width":"height",o=t.getScaleComponent("horizontal"===r?"x":"y"),a=nt(n[i],n.size,Go("size",n,e,{vgChannel:i}),e.tick.bandSize);if(void 0!==a)return a;var u=o?o.get("range"):void 0,s=u&&Eo(u)?u.step:e.scale.rangeStep;if("number"!==typeof s)throw new Error("Function does not handle non-numeric rangeStep");return 3*s/4}var Yf={area:{vgMark:"area",encodeEntry:function(t){return Object.assign({},Nl(t,{size:"ignore",orient:"include"}),$l("x",t,"zeroOrMin"),$l("y",t,"zeroOrMin"),Kl(t,"zeroOrMin","horizontal"===t.markDef.orient?"x2":"y2"),Vl(t))}},bar:{vgMark:"rect",encodeEntry:function(t){return Object.assign({},Nl(t,{size:"ignore",orient:"ignore"}),Wf(t,"x"),Wf(t,"y"))}},circle:{vgMark:"symbol",encodeEntry:function(t){return Gf(t,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function(t){return Object.assign({},Nl(t,{size:"ignore",orient:"ignore"}))},postEncodingTransform:function(t){var e=t.encoding.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},e&&yn(e)&&e.type===pn?{field:Sn(e,{expr:"datum"})}:{})]}},line:{vgMark:"line",encodeEntry:function(t){var e=t.width,n=t.height;return Object.assign({},Nl(t,{size:"ignore",orient:"ignore"}),$l("x",t,Rl(e)),$l("y",t,Rl(n)),Wl("size",t,{vgChannel:"strokeWidth"}),Vl(t))}},point:{vgMark:"symbol",encodeEntry:function(t){return Gf(t)}},rect:{vgMark:"rect",encodeEntry:function(t){return Object.assign({},Nl(t,{size:"ignore",orient:"ignore"}),Xf(t,"x"),Xf(t,"y"))}},rule:{vgMark:"rule",encodeEntry:function(t){var e=t.markDef,n=t.width,r=t.height,i=e.orient;return t.encoding.x||t.encoding.y||t.encoding.latitude||t.encoding.longitude?Object.assign({},Nl(t,{size:"ignore",orient:"ignore"}),$l("x",t,"horizontal"===i?"zeroOrMin":Rl(n)),$l("y",t,"vertical"===i?"zeroOrMin":Rl(r)),"vertical"!==i?Kl(t,"zeroOrMax","x2"):{},"horizontal"!==i?Kl(t,"zeroOrMax","y2"):{},Wl("size",t,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:function(t){return Gf(t,"square")}},text:{vgMark:"text",encodeEntry:function(t){var e=t.config,n=(t.encoding,t.width),r=t.height;return Object.assign({},Nl(t,{size:"ignore",orient:"ignore"}),$l("x",t,Rl(n)),$l("y",t,Rl(r)),Xl(t),Wl("size",t,{vgChannel:"fontSize"}),Ul("align",function(t,e,n){if(void 0===(t.align||Go("align",t,n)))return"center";return}(t.markDef,0,e)),Ul("baseline",function(t,e,n){if(void 0===(t.baseline||Go("baseline",t,n)))return"middle";return}(t.markDef,0,e)))}},tick:{vgMark:"rect",encodeEntry:function(t){var e=t.config,n=t.markDef,r=t.width,i=t.height,o=n.orient,a="horizontal"===o?"width":"height",u="horizontal"===o?"height":"width";return Object.assign({},Nl(t,{size:"ignore",orient:"ignore"}),$l("x",t,Rl(r),"xc"),$l("y",t,Rl(i),"yc"),Wl("size",t,{defaultValue:Zf(t),vgChannel:a}),Object(Mt.a)({},u,{value:nt(n.thickness,e.tick.thickness)}))}},trail:{vgMark:"trail",encodeEntry:function(t){var e=t.width,n=t.height;return Object.assign({},Nl(t,{size:"include",orient:"ignore"}),$l("x",t,Rl(e)),$l("y",t,Rl(n)),Wl("size",t),Vl(t))}}};function $f(t){return R([ct,st,mt],t.mark)?function(t){var e=Qf(t.mark,t.encoding),n=Jf(t,{fromPrefix:e.length>0?Kf:""});return e.length>0?[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:Kf+t.requestDataName($i),data:t.requestDataName($i),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}(t):Jf(t)}var Kf="faceted_path_";function Jf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""},n=t.mark,r=nt(t.markDef.clip,function(t){var e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return!!(e&&e.get("domainRaw")||n&&n.get("domainRaw"))||void 0}(t),function(t){var e=t.component.projection;return!(!e||e.isFit)||void 0}(t)),i=Ho(t.markDef),o=t.encoding.key,a=function(t){var e=t.encoding,n=t.stack,r=t.mark,i=t.markDef,o=t.config,a=e.order;if(!(!Object(y.y)(a)&&_n(a)&&z(a.value)||!a&&z(i.order)||z(Go("order",i,o)))){if((Object(y.y)(a)||yn(a))&&!n)return ta(a,{expr:"datum"});if(xt(r)){var u=e["horizontal"===i.orient?"y":"x"];if(yn(u)){var s=u.sort;return{field:No(s)?Sn({aggregate:$n(t.encoding)?s.op:void 0,field:s.field},{expr:"datum"}):Sn(u,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"}),order:"descending"}}}}}(t),u=Yf[n].postEncodingTransform?Yf[n].postEncodingTransform(t):null;return[Object.assign({name:t.getName("marks"),type:Yf[n].vgMark},r?{clip:!0}:{},i?{style:i}:{},o?{key:{field:o.field}}:{},a?{sort:a}:{},{from:{data:e.fromPrefix+t.requestDataName($i)},encode:{update:Yf[n].encodeEntry(t)}},u?{transform:u}:{})]}function Qf(t,e){return H(e).reduce(function(n,r){switch(r){case"x":case"y":case"order":case"href":case"x2":case"y2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case"shape":case"tooltip":return n;case"detail":case"key":var i=e[r];return(Object(y.y)(i)||yn(i))&&(Object(y.y)(i)?i:[i]).forEach(function(t){t.aggregate||n.push(Sn(t,{}))}),n;case"size":if("trail"===t)return n;case"color":case"fill":case"stroke":case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":var o=Rn(e[r]);return o&&!o.aggregate&&n.push(Sn(o,{})),n;default:throw new Error("Bug: Channel ".concat(r," unimplemented for line mark"))}},[])}var th=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).transform=n,r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this.transform))}},{key:"producedFields",value:function(){return new Set([this.transform.impute])}},{key:"processSequence",value:function(t){var e=t.start,n=void 0===e?0:e,r=t.stop,i=t.step,o=[n,r].concat(Object(m.a)(i?[i]:[])).join(",");return{signal:"sequence(".concat(o,")")}}},{key:"hash",value:function(){return"Impute ".concat(P(this.transform))}},{key:"assemble",value:function(){var t,e,n=this.transform,r=n.impute,i=n.key,o=n.keyvals,a=n.method,u=n.groupby,s=n.value,l=n.frame,c=void 0===l?[null,null]:l,f=Object.assign({type:"impute",field:r,key:i},o?{keyvals:(t=o,t&&void 0!==t.start&&void 0!==t.stop?this.processSequence(o):o)}:{},{method:"value"},u?{groupby:u}:{},{value:null});a&&"value"!==a?e=[Object.assign({type:"window",as:["imputed_".concat(r,"_value")],ops:[a],fields:[r],frame:c,ignorePeers:!1},u?{groupby:u}:{}),{type:"formula",expr:"datum.".concat(r," === null ? datum.imputed_").concat(r,"_value : datum.").concat(r),as:r}]:e=[{type:"formula",expr:"datum.".concat(r," === null ? ").concat(s," : datum.").concat(r),as:r}];return[f].concat(Object(m.a)(e))}}],[{key:"makeFromTransform",value:function(t,n){return new e(t,n)}},{key:"makeFromEncoding",value:function(t,n){var r=n.encoding,i=r.x,o=r.y;if(yn(i)&&yn(o)){var a=i.impute?i:o.impute?o:void 0;if(void 0===a)return;var u=i.impute?o:o.impute?i:void 0,s=a.impute,l=s.method,c=s.value,f=s.frame,h=s.keyvals,p=Qf(n.mark,r);return new e(t,Object.assign({impute:a.field,key:u.field},l?{method:l}:{},void 0!==c?{value:c}:{},f?{frame:f}:{},void 0!==h?{keyvals:h}:{},p.length?{groupby:p}:{}))}return null}}]),e}(la),eh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(at.a)(this,e),(t=Object(bi.a)(this,Object(_i.a)(e).call(this,n,r))).explicit=n,t.implicit=r,t.parseNothing=i,t}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){var t=xi(Object(_i.a)(e.prototype),"clone",this).call(this);return t.parseNothing=this.parseNothing,t}}]),e}(tc),nh=function(t){function e(t,n,r){var i;return Object(at.a)(this,e),(i=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).transform=n,i.secondary=r,i}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this.transform),this.secondary)}},{key:"producedFields",value:function(){return new Set(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))}},{key:"hash",value:function(){return"Lookup ".concat(P({transform:this.transform,secondary:this.secondary}))}},{key:"assemble",value:function(){var t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var e=this.transform.as;Object(y.F)(e)||(Ne(Re.NO_FIELDS_NEEDS_AS),e="_lookup"),t={as:[e]}}return Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t,this.transform.default?{default:this.transform.default}:{})}}],[{key:"make",value:function(t,n,r,i){var o=n.component.data.sources,a=xh(r.from.data,o);a||(a=new Cc(r.from.data),o.push(a));var u=n.getName("lookup_".concat(i)),s=new ca(a,u,"lookup",n.component.data.outputNodeRefCounts);return n.component.data.outputNodes[u]=s,new e(t,r,s.getSource())}}]),e}(la),rh=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).transform=n,r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,C(this.transform))}},{key:"hash",value:function(){return"SampleTransform ".concat(P(this.transform))}},{key:"assemble",value:function(){return{type:"sample",size:this.transform.sample}}}]),e}(la),ih=function(t){function e(t,n){var r;return Object(at.a)(this,e),(r=Object(bi.a)(this,Object(_i.a)(e).call(this,t))).params=n,r}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(null,this.params)}},{key:"assemble",value:function(){return Object.assign({type:"sequence"},this.params)}}]),e}(la);function oh(t){var e=0;return function n(r,i){var o,a;r instanceof Cc&&(r.generator||Vi(r.data)||(t.push(i),i={name:null,source:i.name,transform:[]}));r instanceof Uc&&(r.parent instanceof Cc&&!i.source?(i.format=Object.assign({},i.format||{},{parse:r.assembleFormatParse()}),(o=i.transform).push.apply(o,Object(m.a)(r.assembleTransforms(!0)))):(a=i.transform).push.apply(a,Object(m.a)(r.assembleTransforms())));if(r instanceof Lc)return i.name||(i.name="data_".concat(e++)),!i.source||i.transform.length>0?(t.push(i),r.data=i.name):r.data=i.source,void r.assemble().forEach(function(e){return t.push(e)});(r instanceof qf||r instanceof ih||r instanceof Ff||r instanceof Nc||r instanceof Ju||r instanceof Uf||r instanceof Bf||r instanceof Rc||r instanceof nh||r instanceof Wc||r instanceof qc||r instanceof Nf||r instanceof Lf||r instanceof Vf||r instanceof rh)&&i.transform.push(r.assemble()),(r instanceof Fc||r instanceof Ns||r instanceof th||r instanceof Vc)&&(i.transform=i.transform.concat(r.assemble())),r instanceof ca&&(i.source&&0===i.transform.length?r.setSource(i.source):r.parent instanceof ca?r.setSource(i.name):(i.name||(i.name="data_".concat(e++)),r.setSource(i.name),1===r.numChildren()&&(t.push(i),i={name:null,source:i.name,transform:[]})));switch(r.numChildren()){case 0:r instanceof ca&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(r.children[0],i);break;default:i.name||(i.name="data_".concat(e++));var u=i.name;!i.source||i.transform.length>0?t.push(i):u=i.source,r.children.forEach(function(t){n(t,{name:null,source:u,transform:[]})})}}}function ah(t,e){if(t.channelHasField(e)){var n=t.facet[e],r=es("title",null,t.config,e),i=jn(n,t.config,{allowDisabling:!0,includeDefault:void 0===r||!!r});t.child.component.layoutHeaders[e].title&&(i+=" / "+t.child.component.layoutHeaders[e].title,t.child.component.layoutHeaders[e].title=null);var o=R(["bottom","right"],es("labelOrient",n,t.config,e))?"footer":"header";t.component.layoutHeaders[e]=Object(Mt.a)({title:i,facetFieldDef:n},o,"facet"===e?[]:[uh(t,e,!0)])}}function uh(t,e,n){var r="row"===e?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(r)?t.child.getSizeSignalRef(r):void 0,axes:[]}}function sh(t,e){var n,r=t.child;if(r.component.axes[e]){var i=t.component,o=i.layoutHeaders,a=i.resolve;if(a.axis[e]=Ql(a,e),"shared"===a.axis[e]){var u="x"===e?"column":"row",s=o[u],l=!0,c=!1,f=void 0;try{for(var h,p=r.component.axes[e][Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var d=h.value,v="top"===(n=d.get("orient"))||"left"===n?"header":"footer";s[v]=s[v]||[uh(t,u,!1)];var m=Do(d,"main",t.config,{header:!0});s[v][0].axes.push(m),d.mainExtracted=!0}}catch(y){c=!0,f=y}finally{try{l||null==p.return||p.return()}finally{if(c)throw f}}}}}function lh(t){hh(t);var e=t.component.layoutSize;e.setWithExplicit("width",ph(t,"width")),e.setWithExplicit("height",ph(t,"height"))}var ch=lh,fh={vconcat:"width",hconcat:"height"};function hh(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t.children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.parseLayoutSize()}}catch(a){n=!0,r=a}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}function ph(t,e){var n,r="width"===e?"x":"y",i=t.component.resolve,o=!0,a=!1,u=void 0;try{for(var s,l=t.children[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value.component.layoutSize.getWithExplicit(e),f=i.scale[r];if("independent"===f&&"range-step"===c.value){n=void 0;break}if(n){if("independent"===f&&n.value!==c.value){n=void 0;break}n=oc(n,c,e,"")}else n=c}}catch(g){a=!0,u=g}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}if(n){var h=!0,p=!1,d=void 0;try{for(var v,m=t.children[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var y=v.value;t.renameSignal(y.getName(e),t.getName(e)),y.component.layoutSize.set(e,"merged",!1)}}catch(g){p=!0,d=g}finally{try{h||null==m.return||m.return()}finally{if(p)throw d}}return n}return{explicit:!1,value:void 0}}function dh(t,e){var n="width"===e?"x":"y",r=t.config,i=t.getScaleComponent(n);if(i){var o=i.get("type"),a=i.get("range");return Wr(o)&&Eo(a)?"range-step":r.view[e]}return t.hasProjection?r.view[e]:"width"===e&&"text"===t.mark?r.scale.textXRangeStep:r.scale.rangeStep||Zr.rangeStep}function vh(t,e){return(n=t.field)&&!Object(y.F)(n)&&"repeat"in n?t.field.repeat in e?Object.assign({},t,{field:e[t.field.repeat]}):void Ne(Re.noSuchRepeatedValue(t.field.repeat)):t;var n}function mh(t,e){if(void 0!==(t=vh(t,e))){if(null===t)return null;if(function(t){return gn(t)&&!!t.sort}(t)&&No(t.sort)){var n=vh(t.sort,e);t=Object.assign({},t,n?{sort:n}:{})}return t}}function yh(t,e){if(!yn(t)){if(mn(t)){var n=mh(t.condition,e);if(n)return Object.assign({},t,{condition:n});t.condition;return Ct(t,["condition"])}return t}var r=mh(t,e);return r||(vn(t)?{condition:t.condition}:void 0)}function gh(t,e){var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(Object(y.y)(i))n[r]=i.map(function(t){return yh(t,e)}).filter(function(t){return t});else{var o=yh(i,e);void 0!==o&&(n[r]=o)}}return n}function bh(t,e,n){return Sn(e,Object.assign({suffix:"by_".concat(Sn(t))},n||{}))}var _h=function(t){function e(t,n,r,i,o){var a;Object(at.a)(this,e),(a=Object(bi.a)(this,Object(_i.a)(e).call(this,t,"facet",n,r,o,i,t.resolve))).child=Rh(t.spec,Object(qi.a)(a),a.getName("child"),void 0,i,o,!1),a.children=[a.child];var u=function(t,e){return Ze(t)?gh(t,e):mh(t,e)}(t.facet,i);return a.facet=a.initFacet(u),a}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"initFacet",value:function(t){return Ze(t)?er(t,function(t,e,n){return R([Lt,Nt],n)?void 0===e.field?(Ne(Re.emptyFieldDef(e,n)),t):(t[n]=In(e,n),t):(Ne(Re.incompatibleChannel(n,"facet")),t)},{}):{facet:In(t,"facet")}}},{key:"channelHasField",value:function(t){return!!this.facet[t]}},{key:"fieldDef",value:function(t){return this.facet[t]}},{key:"parseData",value:function(){this.component.data=wh(this),this.child.parseData()}},{key:"parseLayoutSize",value:function(){hh(this)}},{key:"parseSelections",value:function(){this.child.parseSelections(),this.component.selection=this.child.component.selection}},{key:"parseMarkGroup",value:function(){this.child.parseMarkGroup()}},{key:"parseAxesAndHeaders",value:function(){this.child.parseAxesAndHeaders(),function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=ve[Symbol.iterator]();!(e=(i=o.next()).done);e=!0)ah(t,i.value)}catch(a){n=!0,r=a}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}sh(t,"x"),sh(t,"y")}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.child.assembleSelectionTopLevelSignals(t)}},{key:"assembleSignals",value:function(){return this.child.assembleSignals(),[]}},{key:"assembleSelectionData",value:function(t){return this.child.assembleSelectionData(t)}},{key:"getHeaderLayoutMixins",value:function(){var t={},e=!0,n=!1,r=void 0;try{for(var i,o=ve[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=!0,s=!1,l=void 0;try{for(var c,f=is[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value,p=this.component.layoutHeaders[a],d=p[h],v=p.facetFieldDef;if(v){var m=es("titleOrient",v,this.config,a);if(R(["right","bottom"],m)){var y=ts(a,m);t.titleAnchor=t.titleAnchor||{},t.titleAnchor[y]="end"}}if(d&&d[0]){var g="row"===a?"height":"width",b="header"===h?"headerBand":"footerBand";"facet"===a||this.child.component.layoutSize.get(g)||(t[b]=t[b]||{},t[b][a]=.5),p.title&&(t.offset=t.offset||{},t.offset["row"===a?"rowTitle":"columnTitle"]=10)}}}catch(_){s=!0,l=_}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}}}catch(_){n=!0,r=_}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"assembleDefaultLayout",value:function(){var t=this.facet,e=t.column,n=t.row,r=e?this.columnDistinctSignal():n?1:void 0,i="all";return(n||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(i="none"),Object.assign({},this.getHeaderLayoutMixins(),r?{columns:r}:{},{bounds:"full",align:i})}},{key:"assembleLayoutSignals",value:function(){return this.child.assembleLayoutSignals()}},{key:"columnDistinctSignal",value:function(){if(!(this.parent&&this.parent instanceof e)){var t=this.getName("column_domain");return{signal:"length(data('".concat(t,"'))")}}}},{key:"assembleGroup",value:function(t){return this.parent&&this.parent instanceof e?Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:Sn(this.facet.column,{prefix:"distinct"})}}}}:{},xi(Object(_i.a)(e.prototype),"assembleGroup",this).call(this,t)):xi(Object(_i.a)(e.prototype),"assembleGroup",this).call(this,t)}},{key:"getCardinalityAggregateForChild",value:function(){var t=[],n=[],r=[];if(this.child instanceof e){if(this.child.channelHasField("column")){var i=Sn(this.child.facet.column);t.push(i),n.push("distinct"),r.push("distinct_".concat(i))}}else for(var o=0,a=["x","y"];o<a.length;o++){var u=a[o],s=this.child.component.scales[u];if(s&&!s.merged){var l=s.get("type"),c=s.get("range");if(Wr(l)&&Eo(c)){var f=hf(pf(this.child,u));f?(t.push(f),n.push("distinct"),r.push("distinct_".concat(f))):Ne("Unknown field for ${channel}.  Cannot calculate view size.")}}}return{fields:t,ops:n,as:r}}},{key:"assembleFacet",value:function(){var t=this.component.data.facetRoot,e=t.name,n=t.data,r=this.facet,i=r.row,o=r.column,a=this.getCardinalityAggregateForChild(),u=a.fields,s=a.ops,l=a.as,c=[],f=!0,h=!1,p=void 0;try{for(var d,v=ve[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var m=d.value,g=this.facet[m];if(g){c.push(Sn(g));var b=g.bin,_=g.sort;if(Hn(b)&&c.push(Sn(g,{binSuffix:"end"})),No(_)){var x=_.field,w=_.op,k=void 0===w?Lo:w,E=bh(g,_);i&&o?(u.push(E),s.push("max"),l.push(E)):(u.push(x),s.push(k),l.push(E))}else if(Object(y.y)(_)){var S=Qu(g,m);u.push(S),s.push("max"),l.push(S)}}}}catch(A){h=!0,p=A}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}var O=!!i&&!!o;return Object.assign({name:e,data:n,groupby:c},O||u.length?{aggregate:Object.assign({},O?{cross:O}:{},u.length?{fields:u,ops:s,as:l}:{})}:{})}},{key:"facetSortFields",value:function(t){var e=this.facet[t];return e?No(e.sort)?[bh(e,e.sort,{expr:"datum"})]:Object(y.y)(e.sort)?[Qu(e,t,{expr:"datum"})]:[Sn(e,{expr:"datum"})]:[]}},{key:"facetSortOrder",value:function(t){var e=this.facet[t];if(e){var n=e.sort;return[(No(n)?n.order:!Object(y.y)(n)&&n)||"ascending"]}return[]}},{key:"assembleLabelTitle",value:function(){var t=this.facet,e=this.config;if(t.facet)return cs(t.facet,"facet",e);var n={row:["top","bottom"],column:["left","right"]},r=!0,i=!1,o=void 0;try{for(var a,u=rs[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;if(t[s]){var l=es("labelOrient",t[s],e,s);if(R(n[s],l))return cs(t[s],s,e)}}}catch(c){i=!0,o=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}},{key:"assembleMarks",value:function(){var t=this,e=this.child,n=function(t){var e=[],n=oh(e);return t.children.forEach(function(e){return n(e,{source:t.name,name:null,transform:[]})}),e}(this.component.data.facetRoot),r=e.assembleGroupEncodeEntry(!1),i=this.assembleLabelTitle()||e.assembleTitle(),o=e.assembleGroupStyle();return[Object.assign({name:this.getName("cell"),type:"group"},i?{title:i}:{},o?{style:o}:{},{from:{facet:this.assembleFacet()},sort:{field:L(ve.map(function(e){return t.facetSortFields(e)})),order:L(ve.map(function(e){return t.facetSortOrder(e)}))}},n.length>0?{data:n}:{},r?{encode:{update:r}}:{},e.assembleGroup(function(t,e){if(t.component.selection&&H(t.component.selection).length){var n=Object(y.U)(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:xs("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(n,").datum")}]})}return e}(this,[])))]}},{key:"getMapping",value:function(){return this.facet}}]),e}(If);function xh(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=u.data;if(Wi(t)&&Wi(s)){var l=t.values,c=s.values;if(M(l,c))return u}else if(Vi(t)&&Vi(s)){if(t.url===s.url)return u}else if(Hi(t)&&t.name===u.dataName)return u}}catch(f){r=!0,i=f}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}function wh(t){var e=function(t,e){if(t.data||!t.parent){var n=xh(t.data,e);if(n)return Gi(t.data)||(n.data.format=N({},t.data.format,n.data.format)),n;var r=new Cc(t.data);return e.push(r),r}return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}(t,t.component.data.sources),n=t.component.data,r=n.outputNodes,i=n.outputNodeRefCounts,o=t.parent?t.parent.component.data.ancestorParse.clone():new eh,a=t.data;Gi(a)?(Xi(a)?e=new ih(e,a.sequence):Yi(a)&&(e=new qf(e,a.graticule)),o.parseNothing=!0):a&&a.format&&null===a.format.parse&&(o.parseNothing=!0),e=Uc.makeExplicit(e,t,o)||e,!il(t)||!Tf(t)&&!zf(t)||t.parent&&zf(t.parent)||(e=new Vf(e));var u=t.parent&&zf(t.parent);(Tf(t)||jf(t))&&u&&(e=Fc.makeFromEncoding(e,t)||e),t.transforms.length>0&&(e=function(t,e,n){var r=0,i=!0,o=!1,a=void 0;try{for(var u,s=e.transforms[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value,c=void 0,f=void 0;if(mo(l))f=t=new Ju(t,l),c="derived";else if(lo(l))f=t=Uc.makeImplicitFromFilterTransform(t,l,n)||t,t=new Nc(t,e,l.filter);else if(yo(l))f=t=Fc.makeFromTransform(t,l,e),c="number";else if(bo(l))f=t=Ns.makeFromTransform(t,l),c="date",void 0===n.getWithExplicit(l.field).value&&(t=new Uc(t,Object(Mt.a)({},l.field,c)),n.set(l.field,c,!1));else if(_o(l))f=t=Rc.makeFromTransform(t,l),c="number",il(e)&&(t=new Vf(t));else if(co(l))f=t=nh.make(t,e,l,r++),c="derived";else if(ho(l))f=t=new Wc(t,l),c="number";else if(po(l))f=t=new qc(t,l),c="number";else if(xo(l))f=t=Vc.makeFromTransform(t,l),c="derived";else if(wo(l))f=t=new Nf(t,l),c="derived";else if(vo(l))f=t=new Lf(t,l),c="derived";else if(fo(l))t=new rh(t,l);else{if(!go(l)){Ne(Re.invalidTransformIgnored(l));continue}f=t=th.makeFromTransform(t,l),c="derived"}if(f&&void 0!==c){var h=!0,p=!1,d=void 0;try{for(var v,m=f.producedFields()[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var y=v.value;n.set(y,c,!1)}}catch(g){p=!0,d=g}finally{try{h||null==m.return||m.return()}finally{if(p)throw d}}}}}catch(g){o=!0,a=g}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t}(e,t,o)),e=Uc.makeImplicitFromEncoding(e,t,o)||e,Tf(t)&&(e=Bf.parseAll(e,t),e=Uf.parseAll(e,t)),(Tf(t)||jf(t))&&(u||(e=Fc.makeFromEncoding(e,t)||e),e=Ns.makeFromEncoding(e,t)||e,e=Ju.parseAllForSortIndex(e,t));var s=t.getName(Ki),l=new ca(e,s,Ki,i);if(r[s]=l,e=l,Tf(t)){var c=Rc.makeFromEncoding(e,t);c&&(e=c,il(t)&&(e=new Vf(e))),e=th.makeFromEncoding(e,t)||e,e=Vc.makeFromEncoding(e,t)||e}Tf(t)&&(e=Ff.make(e,t)||e);var f=t.getName($i),h=new ca(e,f,$i,i);r[f]=h,e=h;var p=null;if(jf(t)){var d=t.getName("facet");e=function(t,e){var n=e.row,r=e.column;if(n&&r){for(var i=null,o=0,a=[n,r];o<a.length;o++){var u=a[o];if(No(u.sort)){var s=u.sort,l=s.field,c=s.op;t=i=new qc(t,{joinaggregate:[{op:void 0===c?Lo:c,field:l,as:bh(u,u.sort,{forAs:!0})}],groupby:[Sn(u)]})}}return i}return null}(e=Ju.parseAllForSortIndex(e,t),t.facet)||e,p=new Lc(e,t,d,h.getSource()),r[d]=p,e=p}return Object.assign({},t.component.data,{outputNodes:r,outputNodeRefCounts:i,raw:l,main:h,facetRoot:p,ancestorParse:o})}var kh=function(t){function e(t,n,r,i,o,a,u){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).call(this,t,n,r,i,o,a,u))}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"parseData",value:function(){this.component.data=wh(this),this.children.forEach(function(t){t.parseData()})}},{key:"parseSelections",value:function(){var t=this;this.component.selection={};var e=!0,n=!1,r=void 0;try{for(var i,o=function(){var e=i.value;e.parseSelections(),H(e.component.selection).forEach(function(n){t.component.selection[n]=e.component.selection[n]})},a=this.children[Symbol.iterator]();!(e=(i=a.next()).done);e=!0)o()}catch(u){n=!0,r=u}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"parseMarkGroup",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.parseMarkGroup()}}catch(o){e=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"parseAxesAndHeaders",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.parseAxesAndHeaders()}}catch(o){e=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.children.reduce(function(t,e){return e.assembleSelectionTopLevelSignals(t)},t)}},{key:"assembleSignals",value:function(){return this.children.forEach(function(t){return t.assembleSignals()}),[]}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce(function(t,e){return[].concat(Object(m.a)(t),Object(m.a)(e.assembleLayoutSignals()))},vs(this))}},{key:"assembleSelectionData",value:function(t){return this.children.reduce(function(t,e){return e.assembleSelectionData(t)},t)}},{key:"assembleMarks",value:function(){return this.children.map(function(t){var e=t.assembleTitle(),n=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign({type:"group",name:t.getName("group")},e?{title:e}:{},n?{style:n}:{},r?{encode:{update:r}}:{},t.assembleGroup())})}}]),e}(Rf),Eh=function(t){function e(t,n,r,i,o){var a;return Object(at.a)(this,e),a=Object(bi.a)(this,Object(_i.a)(e).call(this,t,"concat",n,r,o,i,t.resolve)),t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&Ne(Re.CONCAT_CANNOT_SHARE_AXIS),a.concatType=ui(t)?"vconcat":si(t)?"hconcat":"concat",a.children=a.getChildren(t).map(function(t,e){return Rh(t,Object(qi.a)(a),a.getName("concat_"+e),void 0,i,o,!1)}),a}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"getChildren",value:function(t){return ui(t)?t.vconcat:si(t)?t.hconcat:t.concat}},{key:"parseLayoutSize",value:function(){!function(t){hh(t);var e=t.component.layoutSize,n=fh[t.concatType];n&&e.setWithExplicit(n,ph(t,n))}(this)}},{key:"parseAxisGroup",value:function(){return null}},{key:"assembleDefaultLayout",value:function(){return Object.assign({},"vconcat"===this.concatType?{columns:1}:{},{bounds:"full",align:"each"})}}]),e}(kh);var Sh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(at.a)(this,e),(t=Object(bi.a)(this,Object(_i.a)(e).call(this))).explicit=n,t.implicit=r,t.mainExtracted=i,t}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"clone",value:function(){return new e(C(this.explicit),C(this.implicit),this.mainExtracted)}},{key:"hasAxisPart",value:function(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!(!1===(e=this.get(t))||null===e));var e}}]),e}(tc);var Oh={bottom:"top",top:"bottom",left:"right",right:"left"};function Ah(t,e){if(!t)return e.map(function(t){return t.clone()});if(t.length===e.length){for(var n=t.length,r=0;r<n;r++){var i=t[r],o=e[r];if(!!i!==!!o)return;if(i&&o){var a=i.getWithExplicit("orient"),u=o.getWithExplicit("orient");if(a.explicit&&u.explicit&&a.value!==u.value)return;t[r]=Mh(i,o)}}return t}}function Mh(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=function(){var n=o.value,r=oc(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",function(t,e){switch(n){case"title":return ra(t,e);case"gridScale":return{explicit:t.explicit,value:nt(t.value,e.value)}}return ic(t,e,n,"axis")});t.setWithExplicit(n,r)},u=jo[Symbol.iterator]();!(n=(o=u.next()).done);n=!0)a()}catch(s){r=!0,i=s}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return t}function Ch(t,e){var n="x"===e?"x2":"y2",r=t.fieldDef(e),i=t.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?na(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}function Th(t,e){var n=e.axis(t),r=new Sh;jo.forEach(function(i){var o=function(t,e,n,r){var i=r.fieldDef(n),o=function(t,e,n,r){if(void 0!==e.labelAngle)return ot(e.labelAngle);var i=Uo("labelAngle",t.config,n,Wo(n),t.getScaleComponent(n).get("type"));return void 0!==i?ot(i):n===Ut&&R([hn,cn],r.type)?270:void 0}(r,e,n,i),a=nt(e.orient,Wo(n));switch(t){case"scale":return r.scaleName(n);case"gridScale":return function(t,e){var n="x"===e?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}(r,n);case"format":if(Bn(i))return;return Yo(i,e.format,r.config);case"formatType":if(Bn(i))return;return e.formatType;case"grid":if(Gn(r.fieldDef(n).bin))return!1;var u=r.getScaleComponent(n).get("type");return nt(e.grid,function(t,e){return!Wr(t)&&!Hn(e.bin)}(u,i));case"labelAlign":return nt(e.labelAlign,Vo(o,a));case"labelAngle":return o;case"labelBaseline":return nt(e.labelBaseline,qo(o,a));case"labelFlush":return nt(e.labelFlush,function(t,e){if("x"===e&&R(["quantitative","temporal"],t.type))return!0}(i,n));case"labelOverlap":var s=r.getScaleComponent(n).get("type");return nt(e.labelOverlap,function(t,e){if("nominal"!==t.type)return"log"!==e||"greedy"}(i,s));case"orient":return a;case"tickCount":var l=r.getScaleComponent(n).get("type"),c=r.scaleName(n),f="x"===n?"width":"y"===n?"height":void 0,h=f?r.getSizeSignalRef(f):void 0;return nt(e.tickCount,function(t){var e=t.fieldDef,n=t.scaleType,r=t.size;if(t.scaleName,t.specifiedAxis,!Wr(n)&&"log"!==n&&!R(["month","hours","day","quarter"],e.timeUnit))return Hn(e.bin)?{signal:"ceil(".concat(r.signal,"/10)")}:{signal:"ceil(".concat(r.signal,"/40)")}}({fieldDef:i,scaleType:l,size:h,scaleName:c,specifiedAxis:e}));case"title":var p="x"===n?"x2":"y2",d=r.fieldDef(p);return nt(e.title,Ch(r,n),ea([dn(i)],d?[dn(d)]:[]));case"values":return function(t,e,n,r){var i=t.values;if(i)return qn(n,i)}(e,0,i)}return v=t,To[v]?e[t]:void 0;var v}(i,n,t,e);if(void 0!==o){var a=function(t,e,n,r,i){switch(e){case"titleAngle":case"labelAngle":return t===ot(n[e]);case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===Ch(r,i))return!0}return t===n[e]}(o,i,n,e,t),u=Uo(i,e.config,t,r.get("orient"),e.getScaleComponent(t).get("type"));a||void 0===u?r.set(i,o,a):R(["grid","orient"],i)&&u&&r.set(i,u,!1)}});var i=n.encoding||{},o=Ao.reduce(function(n,o){if(!r.hasAxisPart(o))return n;var a=Jl(i[o]||{},e),u="labels"===o?function(t,e,n,r){var i=t.fieldDef(e)||("x"===e?t.fieldDef("x2"):"y"===e?t.fieldDef("y2"):void 0),o=t.axis(e),a=t.config,u={};if(Bn(i)){var s=t.getScaleComponent(e).get("type")===Ar.UTC,l=Qo("datum.value",i.timeUnit,o.format,a.axis.shortTimeLabels,null,s);l&&(u.text={signal:l})}return u=Object.assign({},u,n),0===H(u).length?void 0:u}(e,t,a,r.get("orient")):a;return void 0!==u&&H(u).length>0&&(n[o]={update:u}),n},{});return H(o).length>0&&r.set("encode",o,!!n.encoding||void 0!==n.labelAngle),r}function jh(t,e,n){var r=kt(t)?Object.assign({},t):{type:t},i=r.orient||Go("orient",r,n);return r.orient=function(t,e,n){switch(t){case ft:case yt:case gt:case dt:case ht:return}var r=e.x,i=e.y,o=e.x2,a=e.y2;switch(t){case lt:if(yn(r)&&Gn(r.bin))return"vertical";if(yn(i)&&Gn(i.bin))return"horizontal";if(a||o){if(n)return n;if(!o&&yn(r)&&r.type===ln&&!Hn(r.bin))return"horizontal";if(!a&&yn(i)&&i.type===ln&&!Hn(i.bin))return"vertical"}case pt:if(o&&a)return;case st:if(a)return yn(i)&&Gn(i.bin)?"horizontal":"vertical";if(o)return yn(r)&&Gn(r.bin)?"vertical":"horizontal";if(t===pt){if(e.x&&!e.y)return"vertical";if(e.y&&!e.x)return"horizontal"}case ct:case vt:var u=yn(e.x)&&On(e.x),s=yn(e.y)&&On(e.y);if(u&&!s)return"tick"!==t?"horizontal":"vertical";if(!u&&s)return"tick"!==t?"vertical":"horizontal";if(u&&s){var l=e.x,c=e.y,f=l.type===fn,h=c.type===fn;return f&&!h?"tick"!==t?"vertical":"horizontal":!f&&h?"tick"!==t?"horizontal":"vertical":!l.aggregate&&c.aggregate?"tick"!==t?"vertical":"horizontal":l.aggregate&&!c.aggregate?"tick"!==t?"horizontal":"vertical":n||"vertical"}return n||void 0}return"vertical"}(r.type,e,i),void 0!==i&&i!==r.orient&&Ne(Re.orientOverridden(r.orient,i)),void 0===nt(r.opacity,Go("opacity",r,n))&&(r.opacity=function(t,e){if(R([ft,vt,yt,gt],t)&&!$n(e))return.7;return}(r.type,e)),void 0===r.filled&&(r.filled=function(t,e){var n=Go("filled",t,e),r=t.type;return nt(n,r!==ft&&r!==ct&&r!==pt)}(r,n)),void 0===(r.cursor||Go("cursor",r,n))&&(r.cursor=function(t,e,n){if(e.href||t.href||Go("href",t,n))return"pointer";return t.cursor}(r,e,n)),r}var Dh=function(t){function e(t,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;Object(at.a)(this,e),(i=Object(bi.a)(this,Object(_i.a)(e).call(this,t,"unit",n,r,u,a,void 0,t.view))).fit=s,i.specifiedScales={},i.specifiedAxes={},i.specifiedLegends={},i.specifiedProjection={},i.selection={},i.children=[],i.initSize(Object.assign({},o,t.width?{width:t.width}:{},t.height?{height:t.height}:{}));var l=kt(t.mark)?t.mark.type:t.mark,c=i.encoding=Jn(function(t,e){return gh(t,e)}(t.encoding||{},a),l);return i.markDef=jh(t.mark,c,u),i.stack=Mi(l,c,i.config.stack),i.specifiedScales=i.initScales(l,c),i.specifiedAxes=i.initAxes(c),i.specifiedLegends=i.initLegend(c),i.specifiedProjection=t.projection,i.selection=t.selection,i}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"scaleDomain",value:function(t){var e=this.specifiedScales[t];return e?e.domain:void 0}},{key:"axis",value:function(t){return this.specifiedAxes[t]}},{key:"legend",value:function(t){return this.specifiedLegends[t]}},{key:"initScales",value:function(t,e){return je.reduce(function(t,n){var r,i,o=e[n];return yn(o)?(r=o,i=o.scale):mn(o)&&(r=o.condition,i=o.condition.scale),r&&(t[n]=i||{}),t},{})}},{key:"initAxes",value:function(t){return[Ut,qt].reduce(function(e,n){var r=t[n];if(yn(r)||n===Ut&&yn(t.x2)||n===qt&&yn(t.y2)){var i=yn(r)?r.axis:null;null!==i&&(e[n]=Object.assign({},i))}return e},{})}},{key:"initLegend",value:function(t){return Ce.reduce(function(e,n){var r=t[n];if(r){var i=yn(r)?r.legend:mn(r)?r.condition.legend:null;null!==i&&!1!==i&&function(t){switch(t){case Yt:case $t:case Kt:case Qt:case Jt:case te:return!0;case ee:case ne:case re:return!1}}(n)&&(e[n]=Object.assign({},i))}return e},{})}},{key:"parseData",value:function(){this.component.data=wh(this)}},{key:"parseLayoutSize",value:function(){!function(t){var e=t.component.layoutSize;if(!e.explicit.width){var n=dh(t,"width");e.set("width",n,!1)}if(!e.explicit.height){var r=dh(t,"height");e.set("height",r,!1)}}(this)}},{key:"parseSelections",value:function(){this.component.selection=function(t,e){var n={},r=t.config.selection;e&&(e=C(e));var i=function(i){if(!e.hasOwnProperty(i))return o=i,"continue";var a=e[i],u=r[a.type],s=(u.fields,u.encodings,Ct(u,["fields","encodings"]));for(var l in s)"encodings"===l&&a.fields||"fields"===l&&a.encodings||("mark"===l&&(a[l]=Object.assign({},s[l],a[l])),void 0!==a[l]&&!0!==a[l]||(a[l]=s[l]||a[l]));i=Y(i);var c=n[i]=Object.assign({},a,{name:i,events:Object(y.F)(a.on)?xs(a.on,"scope"):a.on});gl(c,function(e){e.parse&&e.parse(t,a,c)}),o=i};for(var o in e)i(o);return n}(this,this.selection)}},{key:"parseMarkGroup",value:function(){this.component.mark=$f(this)}},{key:"parseAxesAndHeaders",value:function(){var t;this.component.axes=(t=this,Ae.reduce(function(e,n){return t.component.scales[n]&&t.axis(n)&&(e[n]=[Th(n,t)]),e},{}))}},{key:"assembleSelectionTopLevelSignals",value:function(t){return function(t,e){var n=!1;return nl(t,function(r,i){var o=r.name,a=Object(y.U)(o+$s);e.filter(function(t){return t.name===o}).length||e.push({name:r.name,update:"".concat(tl,"(").concat(a)+("global"===r.resolve?")":", ".concat(Object(y.U)(r.resolve),")"))}),n=!0,i.topLevelSignals&&(e=i.topLevelSignals(t,r,e)),gl(r,function(n){n.topLevelSignals&&(e=n.topLevelSignals(t,r,e))})}),n&&(e.filter(function(t){return"unit"===t.name}).length||e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})),e}(this,t)}},{key:"assembleSignals",value:function(){return[].concat(Object(m.a)(Po(this)),Object(m.a)((e=[],nl(t=this,function(n,r){var i,o=n.name,a=r.modifyExpr(t,n);(i=e).push.apply(i,Object(m.a)(r.signals(t,n))),gl(n,function(r){r.signals&&(e=r.signals(t,n,e)),r.modifyExpr&&(a=r.modifyExpr(t,n,a))}),e.push({name:o+Js,update:"modify(".concat(Object(y.U)(n.name+$s),", ").concat(a,")")})}),e)));var t,e}},{key:"assembleSelectionData",value:function(t){return function(t,e){return nl(t,function(t){e.filter(function(e){return e.name===t.name+$s}).length||e.push({name:t.name+$s})}),e}(this,t)}},{key:"assembleLayout",value:function(){return null}},{key:"assembleLayoutSignals",value:function(){return vs(this)}},{key:"assembleMarks",value:function(){var t=this.component.mark||[];return this.parent&&zf(this.parent)||(t=_l(this,t)),t.map(this.correctDataNames)}},{key:"getMapping",value:function(){return this.encoding}},{key:"toSpec",value:function(t,e){var n,r=C(this.encoding);return n={mark:this.markDef,encoding:r},t||(n.config=C(this.config)),e||(n.data=C(this.data)),n}},{key:"channelHasField",value:function(t){return Yn(this.encoding,t)}},{key:"fieldDef",value:function(t){return Rn(this.encoding[t])}},{key:"hasProjection",get:function(){var t=this.encoding,e=this.mark===bt,n=t&&fe.some(function(e){return yn(t[e])});return e||n}},{key:"mark",get:function(){return this.markDef.type}}]),e}(If),Ph=function(t){function e(t,n,r,i,o,a,u){var s;Object(at.a)(this,e),s=Object(bi.a)(this,Object(_i.a)(e).call(this,t,"layer",n,r,a,o,t.resolve,t.view));var l=Object.assign({},i,t.width?{width:t.width}:{},t.height?{height:t.height}:{});return s.initSize(l),s.children=t.layer.map(function(t,n){if(ki(t))return new e(t,Object(qi.a)(s),s.getName("layer_"+n),l,o,a,u);if(Ot(t))return new Dh(t,Object(qi.a)(s),s.getName("layer_"+n),l,o,a,u);throw new Error(Re.INVALID_SPEC)}),s}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"parseData",value:function(){this.component.data=wh(this);var t=!0,e=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.parseData()}}catch(o){e=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"parseLayoutSize",value:function(){lh(this)}},{key:"parseSelections",value:function(){var t=this;this.component.selection={};var e=!0,n=!1,r=void 0;try{for(var i,o=function(){var e=i.value;e.parseSelections(),H(e.component.selection).forEach(function(n){t.component.selection[n]=e.component.selection[n]})},a=this.children[Symbol.iterator]();!(e=(i=a.next()).done);e=!0)o()}catch(u){n=!0,r=u}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"parseMarkGroup",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.parseMarkGroup()}}catch(o){e=!0,n=o}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"parseAxesAndHeaders",value:function(){!function(t){var e=t.component,n=e.axes,r=e.resolve,i={top:0,bottom:0,right:0,left:0},o=!0,a=!1,u=void 0;try{for(var s,l=t.children[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;c.parseAxesAndHeaders();var f=!0,h=!1,p=void 0;try{for(var d,v=H(c.component.axes)[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var m=d.value;r.axis[m]=Ql(t.component.resolve,m),"shared"===r.axis[m]&&(n[m]=Ah(n[m],c.component.axes[m]),n[m]||(r.axis[m]="independent",delete n[m]))}}catch(q){h=!0,p=q}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}}catch(q){a=!0,u=q}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}for(var y=0,g=[Ut,qt];y<g.length;y++){var b=g[y],_=!0,x=!1,w=void 0;try{for(var k,E=t.children[Symbol.iterator]();!(_=(k=E.next()).done);_=!0){var S=k.value;if(S.component.axes[b]){if("independent"===r.axis[b]){n[b]=(n[b]||[]).concat(S.component.axes[b]);var O=!0,A=!1,M=void 0;try{for(var C,T=S.component.axes[b][Symbol.iterator]();!(O=(C=T.next()).done);O=!0){var j=C.value,D=j.getWithExplicit("orient"),P=D.value,z=D.explicit;if(i[P]>0&&!z){var R=Oh[P];i[P]>i[R]&&j.set("orient",R,!1)}i[P]++}}catch(q){A=!0,M=q}finally{try{O||null==T.return||T.return()}finally{if(A)throw M}}}delete S.component.axes[b]}}}catch(q){x=!0,w=q}finally{try{_||null==E.return||E.return()}finally{if(x)throw w}}if("independent"===r.axis[b]&&n[b]&&n[b].length>1){var I=!0,F=!1,L=void 0;try{for(var N,B=n[b][Symbol.iterator]();!(I=(N=B.next()).done);I=!0){var U=N.value;U.get("grid")&&!U.explicit.grid&&(U.implicit.grid=!1)}}catch(q){F=!0,L=q}finally{try{I||null==B.return||B.return()}finally{if(F)throw L}}}}}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.children.reduce(function(t,e){return e.assembleSelectionTopLevelSignals(t)},t)}},{key:"assembleSignals",value:function(){return this.children.reduce(function(t,e){return t.concat(e.assembleSignals())},Po(this))}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce(function(t,e){return t.concat(e.assembleLayoutSignals())},vs(this))}},{key:"assembleSelectionData",value:function(t){return this.children.reduce(function(t,e){return e.assembleSelectionData(t)},t)}},{key:"assembleTitle",value:function(){var t=xi(Object(_i.a)(e.prototype),"assembleTitle",this).call(this);if(t)return t;var n=!0,r=!1,i=void 0;try{for(var o,a=this.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){if(t=o.value.assembleTitle())return t}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}},{key:"assembleLayout",value:function(){return null}},{key:"assembleMarks",value:function(){return function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=t.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;Tf(u)&&(e=_l(u,e))}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}(this,L(this.children.map(function(t){return t.assembleMarks()})))}},{key:"assembleLegends",value:function(){return this.children.reduce(function(t,e){return t.concat(e.assembleLegends())},wc(this))}}]),e}(Rf),zh=function(t){function e(t,n,r,i,o){var a;return Object(at.a)(this,e),a=Object(bi.a)(this,Object(_i.a)(e).call(this,t,"repeat",n,r,o,i,t.resolve)),t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&Ne(Re.REPEAT_CANNOT_SHARE_AXIS),a.repeat=t.repeat,a.children=a._initChildren(t,a.repeat,i,o),a}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"_initChildren",value:function(t,e,n,r){var i=[],o=!Object(y.y)(e)&&e.row||[n?n.row:null],a=!Object(y.y)(e)&&e.column||[n?n.column:null],u=Object(y.y)(e)&&e||[n?n.repeat:null],s=!0,l=!1,c=void 0;try{for(var f,h=u[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,d=!0,v=!1,m=void 0;try{for(var g,b=o[Symbol.iterator]();!(d=(g=b.next()).done);d=!0){var _=g.value,x=!0,w=!1,k=void 0;try{for(var E,S=a[Symbol.iterator]();!(x=(E=S.next()).done);x=!0){var O=E.value,A=(p?"__repeat_repeat_".concat(p):"")+(_?"__repeat_row_".concat(_):"")+(O?"__repeat_column_".concat(O):""),M={repeat:p,row:_,column:O};i.push(Rh(t.spec,this,this.getName("child"+A),void 0,M,r,!1))}}catch(C){w=!0,k=C}finally{try{x||null==S.return||S.return()}finally{if(w)throw k}}}}catch(C){v=!0,m=C}finally{try{d||null==b.return||b.return()}finally{if(v)throw m}}}}catch(C){l=!0,c=C}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}return i}},{key:"parseLayoutSize",value:function(){ch(this)}},{key:"assembleDefaultLayout",value:function(){var t=this.repeat,e=Object(y.y)(t)?void 0:t.column?t.column.length:1;return Object.assign({},e?{columns:e}:{},{bounds:"full",align:"all"})}}]),e}(kh);function Rh(t,e,n,r,i,o,a){if(Ye(t))return new _h(t,e,n,i,o);if(ki(t))return new Ph(t,e,n,r,i,o,a);if(Ot(t))return new Dh(t,e,n,r,i,o,a);if(li(t))return new zh(t,e,n,i,o);if(function(t){return ui(t)||si(t)||ai(t)}(t))return new Eh(t,e,n,i,o);throw new Error(Re.INVALID_SPEC)}function Ih(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.logger&&(e=n.logger,Fe=e),n.fieldTitle&&Tn(n.fieldTitle);try{var r=pi(N({},n.config,t.config)),i=Fi(t,r),o=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object.assign({type:"pad"},Ni(e),Ni(t));return"fit"===r.type&&(n||(Ne(Re.FIT_NON_SINGLE),r.type="pad")),r}(t.autosize,r.autosize,ki(i)||Ot(i)),a=Rh(i,null,"",void 0,void 0,r,"fit"===o.type);return a.parse(),function(t,e){Tc(t.sources);for(var n=0,r=0,i=0;i<ef&&af(t,e);i++)n++;t.sources.map(Yc);for(var o=0;o<ef&&af(t,e);o++)r++;Tc(t.sources),Math.max(n,r)===ef&&Ne("Maximum optimization runs(".concat(ef,") reached."))}(a.component.data,a),function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=t.config?yi(t.config):void 0,o=[].concat(t.assembleSelectionData([]),function(t,e){var n=[],r=oh(n),i=0;t.sources.forEach(function(t){t.hasName()||(t.dataName="source_".concat(i++));var e=t.assemble();r(t,e)}),n.forEach(function(t){0===t.transform.length&&delete t.transform});for(var o=0,a=0;a<n.length;a++){var u=n[a];0!==(u.transform||[]).length||u.source||n.splice(o++,0,n.splice(a,1)[0])}for(var s=0,l=n;s<l.length;s++){var c=l[s],f=!0,h=!1,p=void 0;try{for(var d,v=(c.transform||[])[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var m=d.value;"lookup"===m.type&&(m.from=t.outputNodes[m.from].getSource())}}catch(_){h=!0,p=_}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}for(var y=0,g=n;y<g.length;y++){var b=g[y];b.name in e&&(b.values=e[b.name])}return n}(t.component.data,n)),a=t.assembleProjections(),u=t.assembleTitle(),s=t.assembleGroupStyle(),l=t.assembleGroupEncodeEntry(!0),c=t.assembleLayoutSignals();return c=c.filter(function(t){return"width"!==t.name&&"height"!==t.name||void 0===t.value||(e[t.name]=+t.value,!1)}),{spec:Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{},e,u?{title:u}:{},s?{style:s}:{},l?{encode:{update:l}}:{},{data:o},a.length>0?{projections:a}:{},t.assembleGroup([].concat(Object(m.a)(c),Object(m.a)(t.assembleSelectionTopLevelSignals([])))),i?{config:i}:{},r?{usermeta:r}:{})}}(a,function(t,e,n){return Object.assign({autosize:1===H(n).length&&n.type?n.type:n},Ui(e),Ui(t))}(t,r,o),t.datasets,t.usermeta)}finally{n.logger&&Le(),n.fieldTitle&&Tn(Mn)}}new(function(t){function e(){return Object(at.a)(this,e),Object(bi.a)(this,Object(_i.a)(e).apply(this,arguments))}return Object(wi.a)(e,t),Object(ut.a)(e,[{key:"mapUnit",value:function(t,e){var n=e.config;if(t.encoding){var r=t.encoding,i=t.transform,o=Kn(r,n),a=o.bins,u=o.timeUnits,s=o.aggregate,l=o.groupby,c=o.encoding,f=[].concat(Object(m.a)(i||[]),Object(m.a)(a),Object(m.a)(u),Object(m.a)(s.length?[{aggregate:s,groupby:l}]:[]));return Object.assign({},t,f.length>0?{transform:f}:{},{encoding:c})}return t}}]),e}(Ei));v.version;function Fh(t){var e=t||y.v,n=[],r={};return n.add=function(t){var i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=function(t){var i,o=e(t);return r[o]&&(r[o]=0,(i=n.indexOf(t))>=0&&n.splice(i,1)),n},n}var Lh=n(10),Nh=n.n(Lh);function Bh(t,e,n,r,i,o,a){try{var u=t[o](a),s=u.value}catch(l){return void n(l)}u.done?e(s):Promise.resolve(s).then(r,i)}function Uh(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){Bh(o,r,i,a,u,"next",t)}function u(t){Bh(o,r,i,a,u,"throw",t)}a(void 0)})}}var qh=function(t,e){return Vh.apply(this,arguments)};function Vh(){return(Vh=Uh(Nh.a.mark(function t(e,n){return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.error(t.t0);case 8:case"end":return t.stop()}},t,null,[[0,5]])}))).apply(this,arguments)}var Wh=Symbol("vega_id"),Hh=1;function Gh(t){return!(!t||!Xh(t))}function Xh(t){return t[Wh]}function Zh(t,e){return t[Wh]=e,t}function Yh(t){var e=t===Object(t)?t:{data:t};return Xh(e)?e:Zh(e,Hh++)}function $h(t){return Kh(t,Yh({}))}function Kh(t,e){for(var n in t)e[n]=t[n];return e}function Jh(t,e){return Zh(e,Xh(t))}function Qh(t){return t&&t.constructor===tp}function tp(){var t=[],e=[],n=[],r=[],i=[],o=!1;return{constructor:tp,insert:function(e){for(var n=Object(y.h)(e),r=0,i=n.length;r<i;++r)t.push(n[r]);return this},remove:function(t){for(var n=Object(y.B)(t)?r:e,i=Object(y.h)(t),o=0,a=i.length;o<a;++o)n.push(i[o]);return this},modify:function(t,e,r){var o={field:e,value:Object(y.k)(r)};return Object(y.B)(t)?(o.filter=t,i.push(o)):(o.tuple=t,n.push(o)),this},encode:function(t,e){return Object(y.B)(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},reflow:function(){return o=!0,this},pulse:function(a,u){var s,l,c,f,h,p,d={},v={};for(s=0,l=u.length;s<l;++s)d[Xh(u[s])]=1;for(s=0,l=e.length;s<l;++s)d[Xh(h=e[s])]=-1;for(s=0,l=r.length;s<l;++s)f=r[s],u.forEach(function(t){f(t)&&(d[Xh(t)]=-1)});for(s=0,l=t.length;s<l;++s)p=Xh(h=t[s]),d[p]?d[p]=1:a.add.push(Yh(t[s]));for(s=0,l=u.length;s<l;++s)h=u[s],d[Xh(h)]<0&&a.rem.push(h);function m(t,e,n){n?t[e]=n(t):a.encode=e,o||(v[Xh(t)]=t)}for(s=0,l=n.length;s<l;++s)h=(c=n[s]).tuple,f=c.field,(p=d[Xh(h)])>0&&(m(h,f,c.value),a.modifies(f));for(s=0,l=i.length;s<l;++s)c=i[s],f=c.filter,u.forEach(function(t){f(t)&&d[Xh(t)]>0&&m(t,c.field,c.value)}),a.modifies(c.field);if(o)a.mod=e.length||r.length?u.filter(function(t){return d[Xh(t)]>0}):u.slice();else for(p in v)a.mod.push(v[p]);return a}}}var ep="_:mod:_";function np(){Object.defineProperty(this,ep,{writable:!0,value:{}})}var rp=np.prototype;rp.set=function(t,e,n,r){var i=this,o=i[t],a=i[ep];return null!=e&&e>=0?(o[e]!==n||r)&&(o[e]=n,a[e+":"+t]=-1,a[t]=-1):(o!==n||r)&&(i[t]=n,a[t]=Object(y.y)(n)?1+n.length:-1),i},rp.modified=function(t,e){var n,r=this[ep];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Object(y.y)(t)){for(n=0;n<t.length;++n)if(r[t[n]])return!0;return!1}return null!=e&&e>=0?e+1<r[t]||!!r[e+":"+t]:!!r[t]},rp.clear=function(){return this[ep]={},this};var ip=0,op=new np;function ap(t,e,n,r){this.id=++ip,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}var up=ap.prototype;function sp(t){return function(e){var n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}up.targets=function(){return this._targets||(this._targets=Fh(y.u))},up.set=function(t){return this.value!==t?(this.value=t,1):0},up.skip=sp(1),up.modified=sp(2),up.parameters=function(t,e,n){e=!1!==e;var r,i,o,a,u=this,s=u._argval=u._argval||new np,l=u._argops=u._argops||[],c=[];function f(t,n,r){r instanceof ap?(r!==u&&(e&&r.targets().add(u),c.push(r)),l.push({op:r,name:t,index:n})):s.set(t,n,r)}for(r in t)if(i=t[r],"pulse"===r)Object(y.h)(i).forEach(function(t){t instanceof ap?t!==u&&(t.targets().add(u),c.push(t)):Object(y.m)("Pulse parameters must be operator instances.")}),u.source=i;else if(Object(y.y)(i))for(s.set(r,-1,Array(o=i.length)),a=0;a<o;++a)f(r,a,i[a]);else f(r,-1,i);return this.marshall().clear(),n&&(l.initonly=!0),c},up.marshall=function(t){var e,n,r,i,o,a=this._argval||op,u=this._argops;if(u){for(n=0,r=u.length;n<r;++n)o=(i=(e=u[n]).op).modified()&&i.stamp===t,a.set(e.name,e.index,i.value,o);if(u.initonly){for(n=0;n<r;++n)(e=u[n]).op.targets().remove(this);this._argops=null,this._update=null}}return a},up.evaluate=function(t){var e=this._update;if(e){var n=this.marshall(t.stamp),r=e.call(this,n,t);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},up.run=function(t){return t.stamp<=this.stamp?t.StopPropagation:(this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.stamp=t.stamp,this.pulse=e||t);var e};var lp=0;function cp(t,e,n){this.id=++lp,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function fp(t,e,n){return new cp(t,e,n)}var hp=cp.prototype;hp._filter=y.bb,hp._apply=y.v,hp.targets=function(){return this._targets||(this._targets=Fh(y.u))},hp.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},hp.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},hp.filter=function(t){var e=fp(t);return this.targets().add(e),e},hp.apply=function(t){var e=fp(null,t);return this.targets().add(e),e},hp.merge=function(){var t=fp();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},hp.throttle=function(t){var e=-1;return this.filter(function(){var n=Date.now();return n-e>t?(e=n,1):0})},hp.debounce=function(t){var e=fp();return this.targets().add(fp(null,null,Object(y.l)(t,function(t){var n=t.dataflow;e.receive(t),n&&n.run&&n.run()}))),e},hp.between=function(t,e){var n=!1;return t.targets().add(fp(null,null,function(){n=!0})),e.targets().add(fp(null,null,function(){n=!1})),this.filter(function(){return n})};var pp=/^([A-Za-z]+:)?\/\//,dp="file://";function vp(t,e){return mp.apply(this,arguments)}function mp(){return(mp=Uh(Nh.a.mark(function t(e,n){var r,i;return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(e,n);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function yp(t,e){return gp.apply(this,arguments)}function gp(){return(gp=Uh(Nh.a.mark(function t(e,n){var r,i,o,a,u,s;return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(y.n)({},this.options,n),r=this.fileAccess,i={href:null},null!=e&&"string"===typeof e||Object(y.m)("Sanitize failure, invalid URI: "+Object(y.U)(e)),a=pp.test(e),(s=n.baseURL)&&!a&&(e.startsWith("/")||"/"===s[s.length-1]||(e="/"+e),e=s+e),u=(o=e.startsWith(dp))||"file"===n.mode||"http"!==n.mode&&!a&&r,o?e=e.slice(dp.length):e.startsWith("//")&&("file"===n.defaultProtocol?(e=e.slice(2),u=!0):e=(n.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!u}),i.href=e,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),t.abrupt("return",i);case 12:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function bp(t){return t?function(e){return new Promise(function(n,r){t.readFile(e,function(t,e){t?r(t):n(e)})})}:_p}function _p(){return xp.apply(this,arguments)}function xp(){return(xp=Uh(Nh.a.mark(function t(){return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(y.m)("No file system access.");case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function wp(t){return t?function(){var e=Uh(Nh.a.mark(function e(n,r){var i,o,a;return Nh.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(y.n)({},this.options.http,r),o=r&&r.response,e.next=4,t(n,i);case 4:return a=e.sent,e.abrupt("return",a.ok?Object(y.B)(a[o])?a[o]():a.text():Object(y.m)(a.status+""+a.statusText));case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}():kp}function kp(){return Ep.apply(this,arguments)}function Ep(){return(Ep=Uh(Nh.a.mark(function t(){return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(y.m)("No HTTP fetch method available.");case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}var Sp={boolean:y.V,integer:y.X,number:y.X,date:y.W,string:y.Z,unknown:y.v},Op=[function(t){return"true"===t||"false"===t||!0===t||!1===t},function(t){return Cp(t)&&(t=+t)===~~t},Cp,function(t){return!isNaN(Date.parse(t))}],Ap=["boolean","integer","number","date"];function Mp(t,e){return e.reduce(function(e,n){return e[n]=function(t,e){if(!t||!t.length)return"unknown";var n,r,i,o,a=0,u=t.length,s=Op.length,l=Op.map(function(t,e){return e+1});for(r=0,u=t.length;r<u;++r)for(n=e?t[r][e]:t[r],i=0;i<s;++i)if(l[i]&&null!=(o=n)&&o===o&&!Op[i](n)&&(l[i]=0,++a===Op.length))return"string";return a=l.reduce(function(t,e){return 0===t?e:t},0)-1,Ap[a]}(t,n),e},{})}function Cp(t){return!isNaN(+t)&&!(t instanceof Date)}var Tp=n(42);function jp(t){var e=function(e,n){var r={delimiter:t};return Dp(e,n?Object(y.n)(n,r):r)};return e.responseType="text",e}function Dp(t,e){return e.header&&(t=e.header.map(y.U).join(e.delimiter)+"\n"+t),Object(Tp.b)(e.delimiter).parse(t+"")}Dp.responseType="text";var Pp=n(81),zp=function(t){return t},Rp=function(t){if(null==t)return zp;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,u){u||(e=n=0);var s=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+a;s<l;)c[s]=t[s],++s;return c}},Ip=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},Fp=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return Lp(t,e)})}:Lp(t,e)};function Lp(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=Np(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function Np(t,e){var n=Rp(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&Ip(e,a)}function o(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function u(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(u)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=s(e.arcs);break;case"MultiPolygon":n=e.arcs.map(s);break;default:return null}return{type:r,coordinates:n}}(e)}var Bp=function(t,e){var n={},r={},i={},o=[],a=-1;function u(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)}),e.forEach(function(e){var n,o,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1];return e<0?[n,i]:[i,n]}(e),u=a[0],s=a[1];if(n=i[u])if(delete i[n.end],n.push(e),n.end=s,o=r[s]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[s])if(delete r[n.start],n.unshift(e),n.start=u,o=i[u]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=u]=i[n.end=s]=n}),u(i,r),u(r,i),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o},Up=function(t){return Np(t,function(t,e,n){var r,i,o;if(arguments.length>1)r=function(t,e,n){var r,i=[],o=[];function a(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:r})}function u(t){t.forEach(a)}function s(t){t.forEach(u)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":u(e.arcs);break;case"MultiLineString":case"Polygon":s(e.arcs);break;case"MultiPolygon":e.arcs.forEach(s)}}(e),o.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}(0,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:Bp(t,r)}}.apply(this,arguments))};function qp(t,e){var n,r,i;return t=Object(Pp.a)(t,e),n=e&&(i=e.feature)?Fp:e&&(i=e.mesh)?Up:Object(y.m)("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?n(t,r):Object(y.m)("Invalid TopoJSON object: "+i))&&r.features||[r]}qp.responseType="json";var Vp={dsv:Dp,csv:jp(","),tsv:jp("\t"),json:Pp.a,topojson:qp};function Wp(t,e){return arguments.length>1?(Vp[t]=e,this):Vp.hasOwnProperty(t)?Vp[t]:null}function Hp(t){var e=Wp(t);return e&&e.responseType||"text"}var Gp=n(25);var Xp=function(t,e){return function(n){return{options:n||{},sanitize:yp,load:vp,fileAccess:!!e,file:bp(e),http:wp(t)}}}("undefined"!==typeof fetch&&fetch,null),Zp=function(t,e,n){var r=Wp((e=e||{}).type||"json");return r||Object(y.m)("Unknown data format type: "+e.type),t=r(t,e),e.parse&&function(t,e,n){if(t.length){n=n||Gp.b;var r,i,o,a,u,s,l,c=t.columns||Object.keys(t[0]);for("auto"===e&&(e=Mp(t,c)),c=Object.keys(e),r=c.map(function(t){var r,i,o=e[t];if(o&&(0===o.indexOf("date:")||0===o.indexOf("utc:")))return("'"===(i=(r=o.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?Object(Gp.d)(i):n(i);if(!Sp[o])throw Error("Illegal format pattern: "+t+":"+o);return Sp[o]}),a=0,s=t.length,l=c.length;a<s;++a)for(i=t[a],u=0;u<l;++u)o=c[u],i[o]=r[u](i[o])}}(t,e.parse,n),t.hasOwnProperty("columns")&&delete t.columns,t};function Yp(){return(Yp=Uh(Nh.a.mark(function t(e,n){var r,i,o;return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,i=0,t.prev=2,t.next=5,r.loader().load(e,{context:"dataflow",response:Hp(n&&n.type)});case 5:o=t.sent;try{o=Zp(o,n)}catch(a){i=-2,r.warn("Data ingestion failed",e,a)}t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),i=-1,r.warn("Loading failed",e,t.t0);case 13:return t.abrupt("return",{data:o,status:i});case 14:case"end":return t.stop()}},t,this,[[2,9]])}))).apply(this,arguments)}function $p(){return($p=Uh(Nh.a.mark(function t(e,n,r){var i,o,a;return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(o=(i=this)._pending||Kp(i)).requests+=1,t.next=4,i.request(n,r);case 4:return a=t.sent,i.pulse(e,i.changeset().remove(y.bb).insert(a.data||[])),o.done(),t.abrupt("return",a);case 8:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function Kp(t){var e,n=new Promise(function(t){e=t});return n.requests=0,n.done=function(){0===--n.requests&&(t._pending=null,e(t))},t._pending=n}var Jp={skip:!0};function Qp(t,e,n,r,i,o){var a,u,s=Object(y.n)({},o,Jp);Object(y.B)(n)||(n=Object(y.k)(n)),void 0===r?a=function(e){return t.touch(n(e))}:Object(y.B)(r)?(u=new ap(null,r,i,!1),a=function(e){u.evaluate(e);var r=n(e),i=u.value;Qh(i)?t.pulse(r,i,o):t.update(r,i,s)}):a=function(e){return t.update(n(e),r,s)},e.apply(a)}function td(t,e,n,r,i,o){if(void 0===r)e.targets().add(n);else{var a=o||{},u=new ap(null,function(t,e){return e=Object(y.B)(e)?e:Object(y.k)(e),t?function(n,r){var i=e(n,r);return t.skip()||(t.skip(i!==this.value).value=i),i}:e}(n,r),i,!1);u.modified(a.force),u.rank=e.rank,e.targets().add(u),n&&(u.skip(!0),u.value=n.value,u.targets().add(n),t.connect(n,[u]))}}var ed={};function nd(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}var rd=nd.prototype;function id(t,e){return t?function(n,r){return t(n,r)&&e(n,r)}:e}function od(t,e){var n=[];return Object(y.db)(t,e,function(t){n.push(t)}),n}function ad(t,e){var n={};return t.visit(e,function(t){n[Xh(t)]=1}),function(t){return n[Xh(t)]?null:t}}function ud(t,e,n,r){var i,o,a,u,s,l=this,c=0;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n,a=0,u=n.length;a<u;++a)if((i=n[a]).stamp===e){if(i.fields)for(s in o=l.fields||(l.fields={}),i.fields)o[s]=1;i.changed(l.ADD)&&(c|=l.ADD),i.changed(l.REM)&&(c|=l.REM),i.changed(l.MOD)&&(c|=l.MOD)}this.changes=c}rd.StopPropagation=ed,rd.ADD=1,rd.REM=2,rd.MOD=4,rd.ADD_REM=3,rd.ADD_MOD=5,rd.ALL=7,rd.REFLOW=8,rd.SOURCE=16,rd.NO_SOURCE=32,rd.NO_FIELDS=64,rd.fork=function(t){return new nd(this.dataflow).init(this,t)},rd.clone=function(){var t=this.fork(7);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(23)},rd.addAll=function(){var t=this;return this.source&&this.source.length!==this.add.length?((t=new nd(this.dataflow).init(this)).add=t.source,t):t},rd.init=function(t,e){var n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),1&e?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),2&e?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),4&e?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),32&e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source),n},rd.runAfter=function(t){this.dataflow.runAfter(t)},rd.changed=function(t){var e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},rd.reflow=function(t){if(t)return this.fork(7).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,ad(this,1))),this},rd.modifies=function(t){var e=Object(y.h)(t),n=this.fields||(this.fields={});return e.forEach(function(t){n[t]=!0}),this},rd.modified=function(t){var e=this.fields;return!(!this.mod.length||!e)&&(arguments.length?Object(y.y)(t)?t.some(function(t){return e[t]}):e[t]:!!e)},rd.filter=function(t,e){var n=this;return 1&t&&(n.addF=id(n.addF,e)),2&t&&(n.remF=id(n.remF,e)),4&t&&(n.modF=id(n.modF,e)),16&t&&(n.srcF=id(n.srcF,e)),n},rd.materialize=function(t){var e=this;return 1&(t=t||7)&&e.addF&&(e.add=od(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=od(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=od(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},rd.visit=function(t,e){var n,r,i=this,o=e;return 16&t?(Object(y.db)(i.source,i.srcF,o),i):(1&t&&Object(y.db)(i.add,i.addF,o),2&t&&Object(y.db)(i.rem,i.remF,o),4&t&&Object(y.db)(i.mod,i.modF,o),8&t&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||(r?Object(y.db)(n,ad(i,5),o):Object(y.db)(n,i.srcF,o))),i)};var sd=Object(y.w)(ud,nd);function ld(){return(ld=Uh(Nh.a.mark(function t(e,n,r){var i,o,a,u,s,l,c,f,h,p;return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=(i=this).logLevel(),!i._pulse){t.next=3;break}return t.abrupt("return",fd(i));case 3:if(!i._pending){t.next=6;break}return t.next=6,i._pending;case 6:if(!n){t.next=9;break}return t.next=9,qh(i,n);case 9:if(i._touched.length){t.next=12;break}return i.info("Dataflow invoked, but nothing to do."),t.abrupt("return",i);case 12:a=++i._clock,u=0,i._pulse=new nd(i,a,e),o>=y.c&&(c=Date.now(),i.debug("-- START PROPAGATION ("+a+") -----")),i._touched.forEach(function(t){i._enqueue(t,!0)}),i._touched=Fh(y.u),t.prev=17;case 18:if(!(i._heap.size()>0)){t.next=33;break}if((s=i._heap.pop()).rank===s.qrank){t.next=23;break}return i._enqueue(s,!0),t.abrupt("continue",18);case 23:if(!(l=s.run(i._getPulse(s,e))).then){t.next=28;break}return t.next=27,l;case 27:l=t.sent;case 28:o>=y.a&&i.debug(s.id,l===ed?"STOP":l,s),l!==ed&&(i._pulse=l,s._targets&&s._targets.forEach(function(t){return i._enqueue(t)})),++u,t.next=18;break;case 33:t.next=38;break;case 35:t.prev=35,t.t0=t.catch(17),f=t.t0;case 38:if(i._pulses={},i._pulse=null,o>=y.c&&(c=Date.now()-c,i.info("> Pulse "+a+": "+u+" operators; "+c+"ms")),f&&(i._postrun=[],i.error(f)),!i._postrun.length){t.next=52;break}h=i._postrun.sort(function(t,e){return e.priority-t.priority}),i._postrun=[],p=0;case 46:if(!(p<h.length)){t.next=52;break}return t.next=49,qh(i,h[p].callback);case 49:++p,t.next=46;break;case 52:if(!r){t.next=55;break}return t.next=55,qh(i,r);case 55:return t.abrupt("return",i);case 56:case"end":return t.stop()}},t,this,[[17,35]])}))).apply(this,arguments)}function cd(){return(cd=Uh(Nh.a.mark(function t(e,n,r){var i,o=this;return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._running){t.next=5;break}return t.next=3,this._running;case 3:t.next=0;break;case 5:return i=function(){return o._running=null},(this._running=this.evaluate(e,n,r)).then(i,i),t.abrupt("return",this._running);case 8:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function fd(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}sd.fork=function(t){var e=new nd(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,function(t){return e.add.push(t)}),t&e.REM&&this.visit(e.REM,function(t){return e.rem.push(t)}),t&e.MOD&&this.visit(e.MOD,function(t){return e.mod.push(t)})),e},sd.changed=function(t){return this.changes&t},sd.modified=function(t){var e=this,n=e.fields;return n&&e.changes&e.MOD?Object(y.y)(t)?t.some(function(t){return n[t]}):n[t]:0},sd.filter=function(){Object(y.m)("MultiPulse does not support filtering.")},sd.materialize=function(){Object(y.m)("MultiPulse does not support materialization.")},sd.visit=function(t,e){var n=this,r=n.pulses,i=r.length,o=0;if(t&n.SOURCE)for(;o<i;++o)r[o].visit(t,e);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(t,e);return n};var hd={skip:!1,force:!1};function pd(t){var e=[];return{size:function(){return e.length},peek:function(){return e[0]},push:function(n){return e.push(n),dd(e,0,e.length-1,t)},pop:function(){var n,r=e.pop();return e.length?(n=e[0],e[0]=r,function(t,e,n){var r,i=e,o=t.length,a=t[e],u=1+(e<<1);for(;u<o;)(r=u+1)<o&&n(t[u],t[r])>=0&&(u=r),t[e]=t[u],u=1+((e=u)<<1);t[e]=a,dd(t,i,e,n)}(e,0,t)):n=r,n}}}function dd(t,e,n,r){var i,o,a;for(i=t[n];n>e&&r(i,o=t[a=n-1>>1])<0;)t[n]=o,n=a;return t[n]=i}function vd(){this.logger(Object(y.I)()),this.logLevel(y.b),this._clock=0,this._rank=0;try{this._loader=Xp()}catch(t){}this._touched=Fh(y.u),this._pulses={},this._pulse=null,this._heap=pd(function(t,e){return t.qrank-e.qrank}),this._postrun=[]}var md=vd.prototype;function yd(t){return function(){return this._log[t].apply(this,arguments)}}function gd(t,e){ap.call(this,t,null,e)}md.stamp=function(){return this._clock},md.loader=function(t){return arguments.length?(this._loader=t,this):this._loader},md.cleanThreshold=1e4,md.add=function(t,e,n,r){var i,o=1;return t instanceof ap?i=t:t&&t.prototype instanceof ap?i=new t:Object(y.B)(t)?i=new ap(null,t):(o=0,i=new ap(t,e)),this.rank(i),o&&(r=n,n=e),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},md.connect=function(t,e){var n,r,i=t.rank;for(n=0,r=e.length;n<r;++n)if(i<e[n].rank)return void this.rerank(t)},md.rank=function(t){t.rank=++this._rank},md.rerank=function(t){for(var e,n,r,i=[t];i.length;)if(this.rank(e=i.pop()),n=e._targets)for(r=n.length;--r>=0;)i.push(e=n[r]),e===t&&Object(y.m)("Cycle detected in dataflow graph.")},md.pulse=function(t,e,n){this.touch(t,n||hd);var r=new nd(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._pulses[t.id]=e.pulse(r,i),this},md.touch=function(t,e){var n=e||hd;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this},md.update=function(t,e,n){var r=n||hd;return(t.set(e)||r.force)&&this.touch(t,r),this},md.changeset=tp,md.ingest=function(t,e,n){return this.pulse(t,this.changeset().insert(Zp(e,n)))},md.parse=Zp,md.preload=function(t,e,n){return $p.apply(this,arguments)},md.request=function(t,e){return Yp.apply(this,arguments)},md.events=function(t,e,n,r){for(var i,o=this,a=fp(n,r),u=function(t){t.dataflow=o;try{a.receive(t)}catch(e){o.error(e)}finally{o.run()}},s=0,l=(i="string"===typeof t&&"undefined"!==typeof document?document.querySelectorAll(t):Object(y.h)(t)).length;s<l;++s)i[s].addEventListener(e,u);return a},md.on=function(t,e,n,r,i){return(t instanceof ap?td:Qp)(this,t,e,n,r,i),this},md.evaluate=function(t,e,n){return ld.apply(this,arguments)},md.run=function(t,e,n){return this._pulse?fd(this):(this.evaluate(t,e,n),this)},md.runAsync=function(t,e,n){return cd.apply(this,arguments)},md.runAfter=function(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(r){this.error(r)}},md._enqueue=function(t,e){var n=!this._pulses[t.id];n&&(this._pulses[t.id]=this._pulse),(n||e)&&(t.qrank=t.rank,this._heap.push(t))},md._getPulse=function(t,e){var n,r=t.source,i=this._clock;return r&&Object(y.y)(r)?new ud(this,i,n=r.map(function(t){return t.pulse}),e):(n=this._pulses[t.id],r&&((r=r.pulse)&&r!==ed?r.stamp===i&&n.target!==t?n=r:n.source=r.source:n.source=[]),n)},md.logger=function(t){return arguments.length?(this._log=t,this):this._log},md.error=yd("error"),md.warn=yd("warn"),md.info=yd("info"),md.debug=yd("debug"),md.logLevel=yd("level");var bd=Object(y.w)(gd,ap);bd.run=function(t){var e,n=this;return t.stamp<=this.stamp?t.StopPropagation:(this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,this.stamp=t.stamp,e.then?e=e.then(function(t){return n.pulse=t}):e!==t.StopPropagation&&(this.pulse=e),e)},bd.evaluate=function(t){var e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},bd.transform=function(){};var _d={};function xd(t){var e=function(t){return t=t&&t.toLowerCase(),_d.hasOwnProperty(t)?_d[t]:null}(t);return e&&e.Definition||null}function wd(t){return t&&t.length?1===t.length?t[0]:(e=t,function(t){for(var n=e.length,r=1,i=String(e[0](t));r<n;++r)i+="|"+e[r](t);return i}):function(){return""};var e}function kd(t,e,n){return n||t+(e?"_"+e:"")}var Ed={values:Ad({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:Ad({name:"count",set:"cell.num"}),__count__:Ad({name:"count",set:"this.missing + this.valid"}),missing:Ad({name:"missing",set:"this.missing"}),valid:Ad({name:"valid",set:"this.valid"}),sum:Ad({name:"sum",init:"this.sum = 0;",add:"this.sum += +v;",rem:"this.sum -= v;",set:"this.sum"}),mean:Ad({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.valid ? this.mean : undefined"}),average:Ad({name:"average",set:"this.valid ? this.mean : undefined",req:["mean"],idx:1}),variance:Ad({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : undefined",req:["mean"],idx:1}),variancep:Ad({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : undefined",req:["variance"],idx:2}),stdev:Ad({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : undefined",req:["variance"],idx:2}),stdevp:Ad({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : undefined",req:["variance"],idx:2}),stderr:Ad({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : undefined",req:["variance"],idx:2}),distinct:Ad({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:Ad({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:Ad({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:Ad({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:Ad({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:Ad({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:Ad({name:"argmin",init:"this.argmin = undefined;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = undefined;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:Ad({name:"argmax",init:"this.argmax = undefined;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = undefined;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:Ad({name:"min",init:"this.min = undefined;",add:"if (v < this.min || this.min === undefined) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:Ad({name:"max",init:"this.max = undefined;",add:"if (v > this.max || this.max === undefined) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Sd=Object.keys(Ed);function Od(t,e){return Ed[t](e)}function Ad(t){return function(e){var n=Object(y.n)({init:"",add:"",rem:"",idx:0},t);return n.out=e||t.name,n}}function Md(t,e){return t.idx-e.idx}function Cd(t,e){var n=e||y.v,r=function(t,e){var n,r=t.reduce(function t(n,r){function i(e){n[e]||t(n,n[e]=Ed[e]())}return r.req&&r.req.forEach(i),e&&r.str&&r.str.forEach(i),n},t.reduce(function(t,e){return t[e.name]=e,t},{})),i=[];for(n in r)i.push(r[n]);return i.sort(Md)}(t,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",o="this.cell = cell; this.init();",a="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",u="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return r.forEach(function(t){i+=t.init,a+=t.add,u+=t.rem}),t.slice().sort(Md).forEach(function(t){s+="t['"+t.out+"']="+t.set+";"}),s+="return t;",(o=Function("cell",o)).prototype.init=Function(i),o.prototype.add=Function("v","t",a),o.prototype.rem=Function("v","t",u),o.prototype.set=Function("t",s),o.prototype.get=n,o.fields=t.map(function(t){return t.out}),o}var Td=function(t,e){var n,r=[],i=t.length,o=-1;if(null==e)for(;++o<i;)isNaN(n=jd(t[o]))||r.push(n);else for(;++o<i;)isNaN(n=jd(e(t[o],o,t)))||r.push(n);return r};function jd(t){return null===t?NaN:+t}var Dd=Math.random;var Pd=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var zd=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Pd(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(Pd);zd.right,zd.left;function Rd(t,e){var n,r=0,i=0,o=0;if(void 0===e){var a=!0,u=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;null!=f&&(f=+f)>=f&&(o+=(n=f-i)*(f-(i+=n/++r)))}}catch(b){u=!0,s=b}finally{try{a||null==c.return||c.return()}finally{if(u)throw s}}}else{var h=-1,p=!0,d=!1,v=void 0;try{for(var m,y=t[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var g=m.value;null!=(g=e(g,++h,t))&&(g=+g)>=g&&(o+=(n=g-i)*(g-(i+=n/++r)))}}catch(b){d=!0,v=b}finally{try{p||null==y.return||y.return()}finally{if(d)throw v}}}if(r>1)return o/(r-1)}var Id=Array.prototype;Id.slice,Id.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Fd=function(t){return null===t?NaN:+t};function Ld(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fd;if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}var Nd=function(t,e){var n=Td(t,e);return[Ld(n.sort(Pd),.25),Ld(n,.5),Ld(n,.75)]},Bd=function(t,e){var n,r,i=NaN,o={mean:function(t){return arguments.length?(n=t||0,i=NaN,o):n},stdev:function(t){return arguments.length?(r=null==t?1:t,i=NaN,o):r},sample:function(){var t,e,o=0,a=0;if(i===i)return o=i,i=NaN,o;do{t=(o=2*Dd()-1)*o+(a=2*Dd()-1)*a}while(0===t||t>1);return e=Math.sqrt(-2*Math.log(t)/t),i=n+a*e*r,n+o*e*r},pdf:function(t){var e=Math.exp(Math.pow(t-n,2)/(-2*Math.pow(r,2)));return 1/(r*Math.sqrt(2*Math.PI))*e},cdf:function(t){var e,i=(t-n)/r,o=Math.abs(i);if(o>37)e=0;else{var a=Math.exp(-o*o/2);o<7.07106781186547?(e=a*((((((.0352624965998911*o+.700383064443688)*o+6.37396220353165)*o+33.912866078383)*o+112.079291497871)*o+221.213596169931)*o+220.206867912376),e/=((((((.0883883476483184*o+1.75566716318264)*o+16.064177579207)*o+86.7807322029461)*o+296.564248779674)*o+637.333633378831)*o+793.826512519948)*o+440.413735824752):e=a/(o+1/(o+2/(o+3/(o+4/(o+.65)))))/2.506628274631}return i>0?1-e:e},icdf:function(t){if(t<=0||t>=1)return NaN;var e=2*t-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),o=2/(Math.PI*i)+Math.log(1-Math.pow(e,2))/2,a=Math.log(1-e*e)/i,u=(e>0?1:-1)*Math.sqrt(Math.sqrt(o*o-a)-o);return n+r*Math.SQRT2*u}};return o.mean(t).stdev(e)};function Ud(t){this._key=t?Object(y.s)(t):Xh,this.reset()}var qd=Ud.prototype;function Vd(t){gd.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}qd.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},qd.add=function(t){this._add.push(t)},qd.rem=function(t){this._rem.push(t)},qd.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,n,r=this._add,i=this._rem,o=this._key,a=r.length,u=i.length,s=Array(a-u),l={};for(t=0;t<u;++t)l[o(i[t])]=1;for(t=0,e=0;t<a;++t)l[o(n=r[t])]?l[o(n)]=0:s[e++]=n;return this._rem=[],this._add=s},qd.distinct=function(t){for(var e,n=this.values(),r=n.length,i={},o=0;--r>=0;)e=t(n[r])+"",i.hasOwnProperty(e)||(i[e]=1,++o);return o},qd.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=Object(y.p)(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},qd.argmin=function(t){return this.extent(t)[0]||{}},qd.argmax=function(t){return this.extent(t)[1]||{}},qd.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):void 0},qd.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):void 0},qd.quartile=function(t){return this._get===t&&this._q||(this._q=Nd(this.values(),t),this._get=t),this._q},qd.q1=function(t){return this.quartile(t)[0]},qd.q2=function(t){return this.quartile(t)[1]},qd.q3=function(t){return this.quartile(t)[2]},qd.ci=function(t){return this._get===t&&this._ci||(this._ci=function(t,e,n,r){if(!t.length)return[void 0,void 0];var i,o,a,u,s=Td(t,r),l=s.length,c=e;for(a=0,u=Array(c);a<c;++a){for(i=0,o=0;o<l;++o)i+=s[~~(Dd()*l)];u[a]=i/l}return[Ld(u.sort(Pd),n/2),Ld(u,1-n/2)]}(this.values(),1e3,.05,t),this._get=t),this._ci},qd.ci0=function(t){return this.ci(t)[0]},qd.ci1=function(t){return this.ci(t)[1]},Vd.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Sd},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Wd=Object(y.w)(Vd,gd);Wd.transform=function(t,e){var n,r=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=t.modified())||e.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(this.value=this.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),i.modifies(this._outputs),r._drop=!1!==t.drop,t.cross&&r._dims.length>1&&(r._drop=!1,this.cross()),r.changes(i)},Wd.cross=function(){var t=this,e=t.value,n=t._dnames,r=n.map(function(){return{}}),i=n.length;function o(t){var e,o,a,u;for(e in t)for(a=t[e].tuple,o=0;o<i;++o)r[o][u=a[n[o]]]=u}o(t._prev),o(e),function o(a,u,s){var l,c,f=n[s],h=r[s++];for(l in h)u[f]=h[l],c=a?a+"|"+l:l,s<i?o(c,u,s):e[c]||t.cell(c,u)}("",{},0)},Wd.init=function(t){var e=this._inputs=[],n=this._outputs=[],r={};function i(t){for(var n,i=Object(y.h)(Object(y.f)(t)),o=0,a=i.length;o<a;++o)r[n=i[o]]||(r[n]=1,e.push(n))}this._dims=Object(y.h)(t.groupby),this._dnames=this._dims.map(function(t){var e=Object(y.g)(t);return i(t),n.push(e),e}),this.cellkey=t.key?t.key:wd(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var o,a,u,s,l,c,f=t.fields||[null],h=t.ops||["count"],p=t.as||[],d=f.length,v={};for(d!==h.length&&Object(y.m)("Unmatched number of fields and aggregate ops."),c=0;c<d;++c)o=f[c],a=h[c],null==o&&"count"!==a&&Object(y.m)("Null aggregate field specified."),l=kd(a,s=Object(y.g)(o),p[c]),n.push(l),"count"!==a?((u=v[s])||(i(o),(u=v[s]=[]).field=o,this._measures.push(u)),"count"!==a&&(this._countOnly=!1),u.push(Od(a,l))):this._counts.push(l);return this._measures=this._measures.map(function(t){return Cd(t,t.field)}),{}},Wd.cellkey=wd(),Wd.cell=function(t,e){var n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},Wd.newcell=function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,o=i.length;for(n.agg=Array(o),r=0;r<o;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new Ud),n},Wd.newtuple=function(t,e){var n,r,i=this._dnames,o=this._dims,a={};for(n=0,r=o.length;n<r;++n)a[i[n]]=o[n](t);return e?Jh(e.tuple,a):Yh(a)},Wd.add=function(t){var e,n,r,i=this.cellkey(t),o=this.cell(i,t);if(o.num+=1,!this._countOnly)for(o.store&&o.data.add(t),n=0,r=(e=o.agg).length;n<r;++n)e[n].add(e[n].get(t),t)},Wd.rem=function(t){var e,n,r,i=this.cellkey(t),o=this.cell(i,t);if(o.num-=1,!this._countOnly)for(o.store&&o.data.rem(t),n=0,r=(e=o.agg).length;n<r;++n)e[n].rem(e[n].get(t),t)},Wd.celltuple=function(t){var e,n,r,i=t.tuple,o=this._counts;for(t.store&&t.data.values(),n=0,r=o.length;n<r;++n)i[o[n]]=t.num;if(!this._countOnly)for(n=0,r=(e=t.agg).length;n<r;++n)e[n].set(i);return i},Wd.changes=function(t){var e,n,r,i,o=this._adds,a=this._mods,u=this._prev,s=this._drop,l=t.add,c=t.rem,f=t.mod;if(u)for(n in u)e=u[n],s&&!e.num||c.push(e.tuple);for(r=0,i=this._alen;r<i;++r)l.push(this.celltuple(o[r])),o[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(e=a[r]).num&&s?c:f).push(this.celltuple(e)),a[r]=null;return this._alen=this._mlen=0,this._prev=null,t};function Hd(t){gd.call(this,null,t)}Hd.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Gd=Object(y.w)(Hd,gd);Gd.transform=function(t,e){var n,r=this._bins(t),i=r.start,o=r.step,a=t.as||["bin0","bin1"],u=a[0],s=a[1];return n=t.modified()?(e=e.reflow(!0)).SOURCE:e.modified(Object(y.f)(t.field))?e.ADD_MOD:e.ADD,e.visit(n,function(t){var e=r(t);t[u]=e,t[s]=null==e?null:i+o*(1+(e-i)/o)}),e.modifies(a)},Gd._bins=function(t){if(this.value&&!t.modified())return this.value;var e,n,r=t.field,i=function(t){var e,n,r,i,o,a,u,s,l=t.maxbins||20,c=t.base||10,f=Math.log(c),h=t.divide||[5,2],p=t.extent[0],d=t.extent[1],v=d-p||Math.abs(p)||1;if(t.step)e=t.step;else if(t.steps){for(o=v/l,a=0,u=t.steps.length;a<u&&t.steps[a]<o;++a);e=t.steps[Math.max(0,a-1)]}else{for(n=Math.ceil(Math.log(l)/f),r=t.minstep||0,e=Math.max(r,Math.pow(c,Math.round(Math.log(v)/f)-n));Math.ceil(v/e)>l;)e*=c;for(a=0,u=h.length;a<u;++a)(o=e/h[a])>=r&&v/o<=l&&(e=o)}return i=(o=Math.log(e))>=0?0:1+~~(-o/f),s=Math.pow(c,-i-1),(t.nice||void 0===t.nice)&&(p=p<(o=Math.floor(p/e+s)*e)?o-e:o,d=Math.ceil(d/e)*e),{start:p,stop:d===p?p+e:d,step:e}}(t),o=i.start,a=i.stop,u=i.step;null!=(e=t.anchor)&&(n=e-(o+u*Math.floor((e-o)/u)),o+=n,a+=n);var s=function(t){var e=r(t);return null==e?null:(e=Math.max(o,Math.min(+e,a-u)),o+u*Math.floor(1e-14+(e-o)/u))};return s.start=o,s.stop=a,s.step=u,this.value=Object(y.e)(s,Object(y.f)(r),t.name||"bin_"+Object(y.g)(r))};var Xd=function(t,e,n){var r=t,i=e||[],o=n||[],a={},u=0;return{add:function(t){o.push(t)},remove:function(t){a[r(t)]=++u},size:function(){return i.length},data:function(t,e){return u&&(i=i.filter(function(t){return!a[r(t)]}),a={},u=0),e&&t&&i.sort(t),o.length&&(i=t?Object(y.J)(t,i,o.sort(t)):i.concat(o),o=[]),i}}};function Zd(t){gd.call(this,[],t)}function Yd(t){ap.call(this,null,$d,t)}function $d(t){return this.value&&!t.modified()?this.value:Object(y.j)(t.fields,t.orders)}function Kd(t){gd.call(this,null,t)}Zd.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(y.w)(Zd,gd).transform=function(t,e){var n=e.fork(e.ALL),r=Xd(Xh,this.value,n.materialize(n.ADD).add),i=t.sort,o=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(i,o),e.source&&e.source.root&&(this.value.root=e.source.root),n},Object(y.w)(Yd,ap),Kd.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Jd=Object(y.w)(Kd,gd);function Qd(t){gd.call(this,null,t)}Jd.transform=function(t,e){function n(e){return function(n){for(var r,i=function(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}return t.match(n)}(u(n),t.case,o)||[],s=0,l=i.length;s<l;++s)a.test(r=i[s])||e(r)}}var r=this._parameterCheck(t,e),i=this._counts,o=this._match,a=this._stop,u=t.field,s=t.as||["text","count"],l=n(function(t){i[t]=1+(i[t]||0)}),c=n(function(t){i[t]-=1});return r?e.visit(e.SOURCE,l):(e.visit(e.ADD,l),e.visit(e.REM,c)),this._finish(e,s)},Jd._parameterCheck=function(t,e){var n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},Jd._finish=function(t,e){var n,r,i,o=this._counts,a=this._tuples||(this._tuples={}),u=e[0],s=e[1],l=t.fork(t.NO_SOURCE|t.NO_FIELDS);for(n in o)r=a[n],i=o[n]||0,!r&&i?(a[n]=r=Yh({}),r[u]=n,r[s]=i,l.add.push(r)):0===i?(r&&l.rem.push(r),o[n]=null,a[n]=null):r[s]!==i&&(r[s]=i,l.mod.push(r));return l.modifies(e)},Qd.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(y.w)(Qd,gd).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=this.value,i=t.as||["a","b"],o=i[0],a=i[1];return!r||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter")?(r&&(n.rem=r),r=e.materialize(e.SOURCE).source,n.add=this.value=function(t,e,n,r){for(var i,o,a=[],u={},s=t.length,l=0;l<s;++l)for(u[e]=o=t[l],i=0;i<s;++i)u[n]=t[i],r(u)&&(a.push(Yh(u)),(u={})[e]=o);return a}(r,o,a,t.filter||y.bb)):n.mod=r,n.source=this.value,n.modifies(i)};var tv={kde:function(t,e){var n=Bd(),r={},i=0;return r.data=function(n){return arguments.length?(t=n,i=n?n.length:0,r.bandwidth(e)):t},r.bandwidth=function(n){return arguments.length?(!(e=n)&&t&&(e=function(t){var e=t.length,n=Nd(t),r=(n[2]-n[0])/1.34;return 1.06*Math.min(Math.sqrt(Rd(t)),r)*Math.pow(e,-.2)}(t)),r):e},r.sample=function(){return t[~~(Dd()*i)]+e*n.sample()},r.pdf=function(r){for(var o=0,a=0;a<i;++a)o+=n.pdf((r-t[a])/e);return o/e/i},r.cdf=function(r){for(var o=0,a=0;a<i;++a)o+=n.cdf((r-t[a])/e);return o/i},r.icdf=function(){throw Error("KDE icdf not supported.")},r.data(t)},mixture:function(t,e){var n,r={},i=0;return r.weights=function(t){return arguments.length?(n=function(t){var e,n=[],r=0;for(e=0;e<i;++e)r+=n[e]=null==t[e]?1:+t[e];for(e=0;e<i;++e)n[e]/=r;return n}(e=t||[]),r):e},r.distributions=function(n){return arguments.length?(n?(i=n.length,t=n):(i=0,t=[]),r.weights(e)):t},r.sample=function(){for(var e=Dd(),r=t[i-1],o=n[0],a=0;a<i-1;o+=n[++a])if(e<o){r=t[a];break}return r.sample()},r.pdf=function(e){for(var r=0,o=0;o<i;++o)r+=n[o]*t[o].pdf(e);return r},r.cdf=function(e){for(var r=0,o=0;o<i;++o)r+=n[o]*t[o].cdf(e);return r},r.icdf=function(){throw Error("Mixture icdf not supported.")},r.distributions(t).weights(e)},normal:Bd,uniform:function(t,e){null==e&&(e=null==t?1:t,t=0);var n,r,i,o={};return o.min=function(t){return arguments.length?(i=r-(n=t||0),o):n},o.max=function(t){return arguments.length?(i=(r=t||0)-n,o):r},o.sample=function(){return n+i*Dd()},o.pdf=function(t){return t>=n&&t<=r?1/i:0},o.cdf=function(t){return t<n?0:t>r?1:(t-n)/i},o.icdf=function(t){return t>=0&&t<=1?n+t*i:NaN},o.min(t).max(e)}},ev="distributions",nv="function",rv="field";var iv=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},ov=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return iv(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var av=ov(iv);av.right,av.left;var uv=function(t,e){var n,r;if(void 0===e){var i=!0,o=!1,a=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;null!=l&&l>=l&&(void 0===n?n=r=l:(n>l&&(n=l),r<l&&(r=l)))}}catch(y){o=!0,a=y}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}else{var c=-1,f=!0,h=!1,p=void 0;try{for(var d,v=t[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var m=d.value;null!=(m=e(m,++c,t))&&m>=m&&(void 0===n?n=r=m:(n>m&&(n=m),r<m&&(r=m)))}}catch(y){h=!0,p=y}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}return[n,r]};var sv=Array.prototype,lv=(sv.slice,sv.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var cv=function(t){return null===t?NaN:+t};function fv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cv;if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function hv(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:iv;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,u=Math.log(o),s=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*s*(o-s)/o)*(a-o/2<0?-1:1);hv(t,e,Math.max(n,Math.floor(e-a*s/o+l)),Math.min(r,Math.floor(e+(o-a)*s/o+l)),i)}var c=t[e],f=n,h=r;for(pv(t,n,e),i(t[r],c)>0&&pv(t,n,r);f<h;){for(pv(t,f,h),++f,--h;i(t[f],c)<0;)++f;for(;i(t[h],c)>0;)--h}0===i(t[n],c)?pv(t,n,h):pv(t,++h,r),h<=e&&(n=h+1),e<=h&&(r=h-1)}return t}function pv(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}var dv=Nh.a.mark(vv);function vv(t,e){var n,r,i,o,a,u,s,l,c,f,h,p,d;return Nh.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(void 0!==e){v.next=30;break}n=!0,r=!1,i=void 0,v.prev=4,o=t[Symbol.iterator]();case 6:if(n=(a=o.next()).done){v.next=14;break}if(!(null!=(u=a.value)&&(u=+u)>=u)){v.next=11;break}return v.next=11,u;case 11:n=!0,v.next=6;break;case 14:v.next=20;break;case 16:v.prev=16,v.t0=v.catch(4),r=!0,i=v.t0;case 20:v.prev=20,v.prev=21,n||null==o.return||o.return();case 23:if(v.prev=23,!r){v.next=26;break}throw i;case 26:return v.finish(23);case 27:return v.finish(20);case 28:v.next=58;break;case 30:s=-1,l=!0,c=!1,f=void 0,v.prev=34,h=t[Symbol.iterator]();case 36:if(l=(p=h.next()).done){v.next=44;break}if(d=p.value,!(null!=(d=e(d,++s,t))&&(d=+d)>=d)){v.next=41;break}return v.next=41,d;case 41:l=!0,v.next=36;break;case 44:v.next=50;break;case 46:v.prev=46,v.t1=v.catch(34),c=!0,f=v.t1;case 50:v.prev=50,v.prev=51,l||null==h.return||h.return();case 53:if(v.prev=53,!c){v.next=56;break}throw f;case 56:return v.finish(53);case 57:return v.finish(50);case 58:case"end":return v.stop()}},dv,null,[[4,16,20,28],[21,,23,27],[34,46,50,58],[51,,53,57]])}function mv(t,e){var n;if(void 0===e){var r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;null!=s&&s>=s&&(void 0===n||n>s)&&(n=s)}}catch(m){i=!0,o=m}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}else{var l=-1,c=!0,f=!1,h=void 0;try{for(var p,d=t[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value;null!=(v=e(v,++l,t))&&v>=v&&(void 0===n||n>v)&&(n=v)}}catch(m){f=!0,h=m}finally{try{c||null==d.return||d.return()}finally{if(f)throw h}}}return n}function yv(t){gd.call(this,null,t)}var gv=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],bv={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:gv},{name:"weights",type:"number",array:!0}]};function _v(t){ap.call(this,null,xv,t),this.modified(!0)}function xv(t){var e=t.expr;return this.value&&!t.modified("expr")?this.value:Object(y.e)(function(n){return e(n,t)},Object(y.f)(e),Object(y.g)(e))}function wv(t){gd.call(this,[void 0,void 0],t)}function kv(t,e){ap.call(this,t),this.parent=e}yv.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:gv.concat(bv)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(y.w)(yv,gd).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=function t(e,n){var r=e[nv];tv.hasOwnProperty(r)||Object(y.m)("Unknown distribution function: "+r);var i=tv[r]();for(var o in e)o===rv?i.data((e.from||n()).map(e[o])):o===ev?i[o](e[o].map(function(e){return t(e,n)})):typeof i[o]===nv&&i[o](e[o]);return i}(t.distribution,function(t){return function(){return t.materialize(t.SOURCE).source}}(e)),i=t.method||"pdf";"pdf"!==i&&"cdf"!==i&&Object(y.m)("Invalid density method: "+i),t.extent||r.data||Object(y.m)("Missing density extent parameter."),i=r[i];var o=t.as||["value","density"],a=t.extent||uv(r.data()),u=(a[1]-a[0])/(t.steps||100),s=lv(a[0],a[1]+u/2,u).map(function(t){var e={};return e[o[0]]=t,e[o[1]]=i(t),Yh(e)});this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n},Object(y.w)(_v,ap),wv.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(y.w)(wv,gd).transform=function(t,e){var n,r=this.value,i=t.field,o=r[0],a=r[1];((n=e.changed()||e.modified(i.fields)||t.modified("field"))||null==o)&&(o=1/0,a=-1/0),e.visit(n?e.SOURCE:e.ADD,function(t){var e=i(t);null!=e&&((e=+e)<o&&(o=e),e>a&&(a=e))}),isFinite(o)&&isFinite(a)||(o=a=void 0),this.value=[o,a]};var Ev=Object(y.w)(kv,ap);function Sv(t){gd.call(this,{},t),this._keys=Object(y.r)();var e=this._targets=[];e.active=0,e.forEach=function(t){for(var n=0,r=e.active;n<r;++n)t(e[n],n,e)}}Ev.connect=function(t){return this.targets().add(t),t.source=this},Ev.add=function(t){this.value.add.push(t)},Ev.rem=function(t){this.value.rem.push(t)},Ev.mod=function(t){this.value.mod.push(t)},Ev.init=function(t){this.value.init(t,t.NO_SOURCE)},Ev.evaluate=function(){return this.value};var Ov=Object(y.w)(Sv,gd);function Av(t){ap.call(this,null,Mv,t)}function Mv(t){return this.value&&!t.modified()?this.value:Object(y.y)(t.name)?Object(y.h)(t.name).map(function(t){return Object(y.s)(t)}):Object(y.s)(t.name,t.as)}function Cv(t){gd.call(this,Object(y.r)(),t)}function Tv(t,e){return t?t.map(function(t,n){return e[n]||Object(y.g)(t)}):null}function jv(t){gd.call(this,[],t)}function Dv(t){gd.call(this,[],t)}function Pv(t){gd.call(this,null,t)}function zv(t){gd.call(this,[],t)}Ov.activate=function(t){this._targets[this._targets.active++]=t},Ov.subflow=function(t,e,n,r){var i,o,a=this.value,u=a.hasOwnProperty(t)&&a[t];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(o=r||(o=this._group[t])&&o.tuple,u=(i=n.dataflow).add(new kv(n.fork(n.NO_SOURCE),this)).connect(e(i,t,o)),a[t]=u,this.activate(u)),u},Ov.transform=function(t,e){var n=e.dataflow,r=this,i=t.key,o=t.subflow,a=this._keys,u=t.modified("key");function s(t){return r.subflow(t,o,e)}return this._group=t.group||{},this._targets.active=0,e.visit(e.REM,function(t){var e=Xh(t),n=a.get(e);void 0!==n&&(a.delete(e),s(n).rem(t))}),e.visit(e.ADD,function(t){var e=i(t);a.set(Xh(t),e),s(e).add(t)}),u||e.modified(i.fields)?e.visit(e.MOD,function(t){var e=Xh(t),n=a.get(e),r=i(t);n===r?s(r).mod(t):(a.set(e,r),s(n).rem(t),s(r).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,function(t){s(a.get(Xh(t))).mod(t)}),u&&e.visit(e.REFLOW,function(t){var e=Xh(t),n=a.get(e),r=i(t);n!==r&&(a.set(e,r),s(n).rem(t),s(r).add(t))}),a.empty>n.cleanThreshold&&n.runAfter(a.clean),e},Object(y.w)(Av,ap),Cv.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(y.w)(Cv,gd).transform=function(t,e){var n=e.dataflow,r=this.value,i=e.fork(),o=i.add,a=i.rem,u=i.mod,s=t.expr,l=!0;function c(e){var n=Xh(e),i=s(e,t),c=r.get(n);i&&c?(r.delete(n),o.push(e)):i||c?l&&i&&!c&&u.push(e):(r.set(n,1),a.push(e))}return e.visit(e.REM,function(t){var e=Xh(t);r.has(e)?r.delete(e):a.push(t)}),e.visit(e.ADD,function(e){s(e,t)?o.push(e):r.set(Xh(e),1)}),e.visit(e.MOD,c),t.modified()&&(l=!1,e.visit(e.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i},jv.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]},Object(y.w)(jv,gd).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=Tv(r,t.as||[]),o=i.length;return n.rem=this.value,e.visit(e.SOURCE,function(t){for(var e,a,u,s=r.map(function(e){return e(t)}),l=s.reduce(function(t,e){return Math.max(t,e.length)},0),c=0;c<l;++c){for(a=$h(t),e=0;e<o;++e)a[i[e]]=null==(u=s[e][c])?null:u;n.add.push(a)}}),this.value=n.source=n.add,n.modifies(i)},Dv.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(y.w)(Dv,gd).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=r.map(y.g),o=t.as||["key","value"],a=o[0],u=o[1],s=r.length;return n.rem=this.value,e.visit(e.SOURCE,function(t){for(var e,o=0;o<s;++o)(e=$h(t))[a]=i[o],e[u]=r[o](t),n.add.push(e)}),this.value=n.source=n.add,n.modifies(o)},Pv.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(y.w)(Pv,gd).transform=function(t,e){var n=t.expr,r=t.as,i=t.modified(),o=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(o,function(e){e[r]=n(e,t)})},Object(y.w)(zv,gd).transform=function(t,e){var n,r,i,o=this.value,a=e.fork(e.ALL),u=t.size-o.length,s=t.generator;if(u>0){for(n=[];--u>=0;)n.push(i=Yh(s(t))),o.push(i);a.add=a.add.length?a.materialize(a.ADD).add.concat(n):n}else r=o.slice(0,-u),a.rem=a.rem.length?a.materialize(a.REM).rem.concat(r):r,o=o.slice(-u);return a.source=this.value=o,a};var Rv={value:"value",median:function(t,e){if((t=Float64Array.from(vv(t,e))).length){var n=t.length,r=n>>1;return hv(t,r-1,0),0===(1&n)&&hv(t,r,r),fv(t,.5)}},mean:function(t,e){var n=0,r=0;if(void 0===e){var i=!0,o=!1,a=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;null!=l&&(l=+l)>=l&&(++n,r+=l)}}catch(y){o=!0,a=y}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}else{var c=-1,f=!0,h=!1,p=void 0;try{for(var d,v=t[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var m=d.value;null!=(m=e(m,++c,t))&&(m=+m)>=m&&(++n,r+=m)}}catch(y){h=!0,p=y}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}if(n)return r/n},min:mv,max:function(t,e){var n;if(void 0===e){var r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;null!=s&&s>=s&&(void 0===n||n<s)&&(n=s)}}catch(m){i=!0,o=m}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}else{var l=-1,c=!0,f=!1,h=void 0;try{for(var p,d=t[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value;null!=(v=e(v,++l,t))&&v>=v&&(void 0===n||n<v)&&(n=v)}}catch(m){f=!0,h=m}finally{try{c||null==d.return||d.return()}finally{if(f)throw h}}}return n}},Iv=[];function Fv(t){gd.call(this,[],t)}function Lv(t){Vd.call(this,t)}Fv.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(y.w)(Fv,gd).transform=function(t,e){var n,r,i,o,a,u,s,l,c,f,h=e.fork(e.ALL),p=function(t){var e,n=t.method||Rv.value;if(null!=Rv[n])return n===Rv.value?(e=void 0!==t.value?t.value:0,function(){return e}):Rv[n];Object(y.m)("Unrecognized imputation method: "+n)}(t),d=function(t){var e=t.field;return function(t){return t?e(t):NaN}}(t),v=Object(y.g)(t.field),m=Object(y.g)(t.key),g=(t.groupby||[]).map(y.g),b=function(t,e,n,r){var i,o,a,u,s,l,c,f,h=function(t){return t(f)},p=[],d=r?r.slice():[],v={},m={};for(d.forEach(function(t,e){v[t]=e+1}),u=0,c=t.length;u<c;++u)f=t[u],l=n(f),s=v[l]||(v[l]=d.push(l)),o=(i=e?e.map(h):Iv)+"",(a=m[o])||(a=m[o]=[],p.push(a),a.values=i),a[s-1]=f;return p.domain=d,p}(e.source,t.groupby,t.key,t.keyvals),_=[],x=this.value,w=b.domain.length;for(a=0,l=b.length;a<l;++a)for(i=(n=b[a]).values,r=NaN,s=0;s<w;++s)if(null==n[s]){for(o=b.domain[s],f={_impute:!0},u=0,c=i.length;u<c;++u)f[g[u]]=i[u];f[m]=o,f[v]=isNaN(r)?r=p(n,d):r,_.push(Yh(f))}return _.length&&(h.add=h.materialize(h.ADD).add.concat(_)),x.length&&(h.rem=h.materialize(h.REM).rem.concat(x)),this.value=_,h},Lv.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Sd},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var Nv=Object(y.w)(Lv,Vd);function Bv(t){ap.call(this,null,Uv,t)}function Uv(t){return this.value&&!t.modified()?this.value:Object(y.G)(t.fields,t.flat)}function qv(t){gd.call(this,[],t)}function Vv(t,e,n){n.forEach(Yh);var r=e.fork(e.NO_FIELDS&e.NO_SOURCE);return r.rem=t.value,t.value=r.add=r.source=n,r}function Wv(t){gd.call(this,{},t)}function Hv(t){ap.call(this,null,Gv,t)}function Gv(t){if(this.value&&!t.modified())return this.value;var e,n,r,i=1/0,o=-1/0,a=t.extents;for(e=0,n=a.length;e<n;++e)(r=a[e])[0]<i&&(i=r[0]),r[1]>o&&(o=r[1]);return[i,o]}function Xv(t){ap.call(this,null,Zv,t)}function Zv(t){return this.value&&!t.modified()?this.value:t.values.reduce(function(t,e){return t.concat(e)},[])}function Yv(t){gd.call(this,null,t)}function $v(t){Vd.call(this,t)}Nv.transform=function(t,e){var n,r=this,i=t.modified();return r.value&&(i||e.modified(r._inputs))?(n=r.value=i?r.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(n=r.value=r.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),r.changes(),e.visit(e.SOURCE,function(t){Object(y.n)(t,n[r.cellkey(t)].tuple)}),e.reflow(i).modifies(this._outputs)},Nv.changes=function(){var t,e,n=this._adds,r=this._mods;for(t=0,e=this._alen;t<e;++t)this.celltuple(n[t]),n[t]=null;for(t=0,e=this._mlen;t<e;++t)this.celltuple(r[t]),r[t]=null;this._alen=this._mlen=0},Object(y.w)(Bv,ap),Object(y.w)(qv,gd).transform=function(t,e){var n=this,r=e.dataflow;return t.values?Vv(this,e,r.parse(t.values,t.format)):r.request(t.url,t.format).then(function(t){return Vv(n,e,t.data||[])})},Wv.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(y.w)(Wv,gd).transform=function(t,e){var n,r,i=e,o=t.as,a=t.fields,u=t.index,s=t.values,l=null==t.default?null:t.default,c=t.modified(),f=c?e.SOURCE:e.ADD,h=a.length;return s?(r=s.length,h>1&&!o&&Object(y.m)('Multi-field lookup requires explicit "as" parameter.'),o&&o.length!==h*r&&Object(y.m)('The "as" parameter has too few output field names.'),o=o||s.map(y.g),n=function(t){for(var e,n,i=0,c=0;i<h;++i)if(null==(n=u.get(a[i](t))))for(e=0;e<r;++e,++c)t[o[c]]=l;else for(e=0;e<r;++e,++c)t[o[c]]=s[e](n)}):(o||Object(y.m)("Missing output field names."),n=function(t){for(var e,n=0;n<h;++n)e=u.get(a[n](t)),t[o[n]]=null==e?l:e}),c?i=e.reflow(!0):f|=a.some(function(t){return e.modified(t.fields)})?e.MOD:0,e.visit(f,n),i.modifies(o)},Object(y.w)(Hv,ap),Object(y.w)(Xv,ap),Object(y.w)(Yv,gd),Yv.prototype.transform=function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)},$v.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Sd,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var Kv=Object(y.w)($v,Vd);function Jv(t){Sv.call(this,t)}function Qv(t){gd.call(this,null,t)}function tm(t){gd.call(this,null,t)}function em(t){gd.call(this,null,t)}function nm(t){gd.call(this,[],t),this.count=0}function rm(t){gd.call(this,null,t)}function im(t){gd.call(this,null,t),this.modified(!0)}function om(t){gd.call(this,Object(y.r)(),t)}function am(t){gd.call(this,null,t)}Kv._transform=Kv.transform,Kv.transform=function(t,e){return this._transform(function(t,e){var n=t.field,r=t.value,i=("count"===t.op?"__count__":t.op)||"sum",o=Object(y.f)(n).concat(Object(y.f)(r)),a=function(t,e,n){var r={},i=[];return n.visit(n.SOURCE,function(e){var n=t(e);r[n]||(r[n]=1,i.push(n))}),i.sort(function(t,e){return(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0)}),e?i.slice(0,e):i}(n,t.limit||0,e);return{key:t.key,groupby:t.groupby,ops:a.map(function(){return i}),fields:a.map(function(t){return function(t,e,n,r){return Object(y.e)(function(r){return e(r)===t?n(r):NaN},r,t+"")}(t,n,r,o)}),as:a.map(function(t){return t+""}),modified:t.modified.bind(t)}}(t,e),e)},Object(y.w)(Jv,Sv).transform=function(t,e){var n=this,r=t.subflow,i=t.field;return(t.modified("field")||i&&e.modified(Object(y.f)(i)))&&Object(y.m)("PreFacet does not support field modification."),this._targets.active=0,e.visit(e.MOD,function(t){var o=n.subflow(Xh(t),r,e,t);i?i(t).forEach(function(t){o.mod(t)}):o.mod(t)}),e.visit(e.ADD,function(t){var o=n.subflow(Xh(t),r,e,t);i?i(t).forEach(function(t){o.add(Yh(t))}):o.add(t)}),e.visit(e.REM,function(t){var o=n.subflow(Xh(t),r,e,t);i?i(t).forEach(function(t){o.rem(t)}):o.rem(t)}),e},Qv.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(y.w)(Qv,gd).transform=function(t,e){var n,r,i=t.fields,o=Tv(t.fields,t.as||[]),a=i?function(t,e){return function(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e[r[i]]=n[i](t);return e}(t,e,i,o)}:Kh;return this.value?r=this.value:(e=e.addAll(),r=this.value={}),n=e.fork(e.NO_SOURCE),e.visit(e.REM,function(t){var e=Xh(t);n.rem.push(r[e]),r[e]=null}),e.visit(e.ADD,function(t){var e=a(t,Yh({}));r[Xh(t)]=e,n.add.push(e)}),e.visit(e.MOD,function(t){n.mod.push(a(t,r[Xh(t)]))}),n},Object(y.w)(tm,gd).transform=function(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},Object(y.w)(em,gd).transform=function(t,e){var n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,function(t){var e=Xh(t);n.rem.push(r[e]),r[e]=null}),e.visit(e.ADD,function(t){var e=$h(t);r[Xh(t)]=e,n.add.push(e)}),e.visit(e.MOD,function(t){n.mod.push(Kh(t,r[Xh(t)]))})),n},nm.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(y.w)(nm,gd).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.modified("size"),i=t.size,o=this.value,a=this.count,u=0,s=o.reduce(function(t,e){return t[Xh(e)]=1,t},{});function l(t){var e,r;o.length<i?o.push(t):(r=~~((a+1)*Dd()))<o.length&&r>=u&&(e=o[r],s[Xh(e)]&&n.rem.push(e),o[r]=t),++a}if(e.rem.length&&(e.visit(e.REM,function(t){var e=Xh(t);s[e]&&(s[e]=-1,n.rem.push(t)),--a}),o=o.filter(function(t){return-1!==s[Xh(t)]})),(e.rem.length||r)&&o.length<i&&e.source&&(u=a=o.length,e.visit(e.SOURCE,function(t){s[Xh(t)]||l(t)}),u=-1),r&&o.length>i){for(var c=0,f=o.length-i;c<f;++c)s[Xh(o[c])]=-1,n.rem.push(o[c]);o=o.slice(f)}return e.mod.length&&e.visit(e.MOD,function(t){s[Xh(t)]&&n.mod.push(t)}),e.add.length&&e.visit(e.ADD,l),(e.add.length||u<0)&&(n.add=o.filter(function(t){return!s[Xh(t)]})),this.count=a,this.value=n.source=o,n},rm.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(y.w)(rm,gd).transform=function(t,e){if(!this.value||t.modified()){var n=e.materialize().fork(e.MOD),r=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=lv(t.start,t.stop,t.step||1).map(function(t){var e={};return e[r]=t,Yh(e)}),n.add=e.add.concat(this.value),n}},Object(y.w)(im,gd).transform=function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},Object(y.w)(om,gd).transform=function(t,e){var n=e.dataflow,r=t.field,i=this.value,o=!0;function a(t){i.set(r(t),t)}return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,a)):e.changed()?(e.visit(e.REM,function(t){i.delete(r(t))}),e.visit(e.ADD,a)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()},Object(y.w)(am,gd).transform=function(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(t.sort):e.source).map(t.field))};var um={row_number:function(){return{next:function(t){return t.index+1}}},rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){var t=um.rank(),e=t.next;return{init:t.init,next:function(t){return(e(t)-1)/(t.data.length-1)}}},cume_dist:function(){var t;return{init:function(){t=0},next:function(e){var n=e.index,r=e.data,i=e.compare;if(t<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;t=n}return(1+t)/r.length}}},ntile:function(t,e){(e=+e)>0||Object(y.m)("ntile num must be greater than zero.");var n=um.cume_dist(),r=n.next;return{init:n.init,next:function(t){return Math.ceil(e*r(t))}}},lag:function(t,e){return e=+e||1,{next:function(n){var r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:function(n){var r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:function(e){return t(e.data[e.i0])}}},last_value:function(t){return{next:function(e){return t(e.data[e.i1-1])}}},nth_value:function(t,e){return(e=+e)>0||Object(y.m)("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}}},sm=Object.keys(um);function lm(t){var e=Object(y.h)(t.ops),n=Object(y.h)(t.fields),r=Object(y.h)(t.params),i=Object(y.h)(t.as),o=this.outputs=[],a=this.windows=[],u={},s={},l=!0,c=[],f=[];function h(t){Object(y.h)(Object(y.f)(t)).forEach(function(t){u[t]=1})}h(t.sort),e.forEach(function(t,e){var u=n[e],p=Object(y.g)(u),d=kd(t,p,i[e]);if(h(u),o.push(d),um.hasOwnProperty(t))a.push(function(t,e,n,r){var i=um[t](e,n);return{init:i.init||y.eb,update:function(t,e){e[r]=i.next(t)}}}(t,n[e],r[e],d));else{if(null==u&&"count"!==t&&Object(y.m)("Null aggregate field specified."),"count"===t)return void c.push(d);l=!1;var v=s[p];v||((v=s[p]=[]).field=u,f.push(v)),v.push(Od(t,d))}}),(c.length||f.length)&&(this.cell=function(t,e,n){t=t.map(function(t){return Cd(t,t.field)});var r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new t[a](r);if(r.store)var u=r.data=new Ud;return r.add=function(t){if(r.num+=1,!n){u&&u.add(t);for(var e=0;e<i;++e)o[e].add(o[e].get(t),t)}},r.rem=function(t){if(r.num-=1,!n){u&&u.rem(t);for(var e=0;e<i;++e)o[e].rem(o[e].get(t),t)}},r.set=function(t){var i,a;for(u&&u.values(),i=0,a=e.length;i<a;++i)t[e[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(t)},r.init=function(){r.num=0,u&&u.reset();for(var t=0;t<i;++t)o[t].init()},r}(f,c,l)),this.inputs=Object.keys(u)}var cm=lm.prototype;function fm(t){gd.call(this,{},t),this._mlen=0,this._mods=[]}cm.init=function(){this.windows.forEach(function(t){t.init()}),this.cell&&this.cell.init()},cm.update=function(t,e){var n,r=this.cell,i=this.windows,o=t.data,a=i&&i.length;if(r){for(n=t.p0;n<t.i0;++n)r.rem(o[n]);for(n=t.p1;n<t.i1;++n)r.add(o[n]);r.set(e)}for(n=0;n<a;++n)i[n].update(t,e)},fm.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:sm.concat(Sd)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var hm=Object(y.w)(fm,gd);function pm(t,e,n){var r=n.sort,i=r&&!n.ignorePeers,o=n.frame||[null,0],a=t.data(r),u=a.length,s=0,l=i?ov(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||Object(y.k)(-1)};for(e.init();s<u;++s)dm(c,o,s,u),i&&vm(c,l),e.update(c,a[s])}function dm(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function vm(t,e){var n=t.i0,r=t.i1-1,i=t.compare,o=t.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(t.i0=e.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(t.i1=e.right(o,o[r]))}hm.transform=function(t,e){var n,r,i=this,o=i.state,a=t.modified();this.stamp=e.stamp,o&&!a||(o=i.state=new lm(t));var u=wd(t.groupby);function s(t){return i.group(u(t))}for(a||e.modified(o.inputs)?(i.value={},e.visit(e.SOURCE,function(t){s(t).add(t)})):(e.visit(e.REM,function(t){s(t).remove(t)}),e.visit(e.ADD,function(t){s(t).add(t)})),n=0,r=i._mlen;n<r;++n)pm(i._mods[n],o,t);return i._mlen=0,i._mods=[],e.reflow(a).modifies(o.outputs)},hm.group=function(t){var e=this.value[t];return e||((e=this.value[t]=Xd(Xh)).stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e};var mm="top",ym="left",gm="right",bm="bottom",_m="top-left",xm="top-right",wm="bottom-left",km="bottom-right",Em="start",Sm="middle",Om="end",Am="x",Mm="y",Cm="group",Tm="axis",jm="title",Dm="frame",Pm="scope",zm="legend",Rm="row-header",Im="row-footer",Fm="row-title",Lm="column-header",Nm="column-footer",Bm="column-title",Um="padding",qm="symbol",Vm="fit",Wm="fit-x",Hm="fit-y",Gm="pad",Xm="none",Zm="all",Ym="each",$m="flush",Km="column",Jm="row";function Qm(t){this.clear(),t&&this.union(t)}var ty=Qm.prototype;ty.clone=function(){return new Qm(this)},ty.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},ty.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},ty.equals=function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},ty.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},ty.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},ty.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},ty.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},ty.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},ty.rotate=function(t,e,n){var r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},ty.rotatedPoints=function(t,e,n){var r=this.x1,i=this.y1,o=this.x2,a=this.y2,u=Math.cos(t),s=Math.sin(t),l=e-e*u+n*s,c=n-e*s-n*u;return[u*r-s*i+l,s*r+u*i+c,u*r-s*a+l,s*r+u*a+c,u*o-s*i+l,s*o+u*i+c,u*o-s*a+l,s*o+u*a+c]},ty.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},ty.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},ty.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},ty.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},ty.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},ty.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},ty.width=function(){return this.x2-this.x1},ty.height=function(){return this.y2-this.y1};var ey=0;function ny(t){this.mark=t,this.bounds=this.bounds||new Qm}function ry(t){ny.call(this,t),this.items=this.items||[]}function iy(t,e){if("undefined"!==typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}function oy(){return"undefined"!==typeof Image?Image:null}function ay(t){this._pending=0,this._loader=t||Xp()}Object(y.w)(ry,ny);var uy=ay.prototype;function sy(t){t._pending+=1}function ly(t){t._pending-=1}uy.pending=function(){return this._pending},uy.sanitizeURL=function(t){var e=this;return sy(e),e._loader.sanitize(t,{context:"href"}).then(function(t){return ly(e),t}).catch(function(){return ly(e),null})},uy.loadImage=function(t){var e=this,n=oy();return sy(e),e._loader.sanitize(t,{context:"image"}).then(function(t){var r=t.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){ly(e),i.loaded=!0},i.onerror=function(){ly(e),i.loaded=!1},i.src=r,i}).catch(function(t){return ly(e),{loaded:!1,width:0,height:0,src:t&&t.url||""}})},uy.ready=function(){var t=this;return new Promise(function(e){!function n(r){t.pending()?setTimeout(function(){n(!0)},10):e(r)}(!1)})};var cy=n(22),fy={basis:{curve:cy.c},"basis-closed":{curve:cy.d},"basis-open":{curve:cy.e},bundle:{curve:cy.f,tension:"beta",value:.85},cardinal:{curve:cy.g,tension:"tension",value:0},"cardinal-open":{curve:cy.i,tension:"tension",value:0},"cardinal-closed":{curve:cy.h,tension:"tension",value:0},"catmull-rom":{curve:cy.j,tension:"alpha",value:.5},"catmull-rom-closed":{curve:cy.k,tension:"alpha",value:.5},"catmull-rom-open":{curve:cy.l,tension:"alpha",value:.5},linear:{curve:cy.m},"linear-closed":{curve:cy.n},monotone:{horizontal:cy.p,vertical:cy.o},natural:{curve:cy.q},step:{curve:cy.r},"step-after":{curve:cy.s},"step-before":{curve:cy.t}};function hy(t,e,n){var r=fy.hasOwnProperty(t)&&fy[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var py={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},dy=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],vy=function(t){var e,n,r,i,o,a,u,s,l,c,f,h=[];for(s=0,c=(e=t.slice().replace(dy[0],"###$1").split(dy[1]).slice(1)).length;s<c;++s){for(r=(n=e[s]).slice(1).trim().replace(dy[2],"$1###$2").split(dy[3]),i=[a=n.charAt(0)],l=0,f=r.length;l<f;++l)(o=+r[l])===o&&i.push(o);if(u=py[a.toLowerCase()],i.length-1>u)for(l=1,f=i.length;l<f;l+=u)h.push([a].concat(i.slice(l,l+u)));else h.push(i)}return h},my=Math.PI/180,yy=Math.PI/2,gy=2*Math.PI,by=Math.sqrt(3)/2,_y={},xy={},wy=[].join;function ky(t){var e=wy.call(t);if(xy[e])return xy[e];var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=l*a,f=-s*u,h=s*a,p=l*u,d=Math.cos(i),v=Math.sin(i),m=Math.cos(o),y=Math.sin(o),g=.5*(o-i),b=Math.sin(.5*g),_=8/3*b*b/Math.sin(g),x=n+d-_*v,w=r+v+_*d,k=n+m,E=r+y,S=k+_*y,O=E-_*m;return xy[e]=[c*x+f*w,h*x+p*w,c*S+f*O,h*S+p*O,c*k+f*E,h*k+p*E]}var Ey=["l",0,0,0,0,0,0,0];function Sy(t,e){var n=Ey[0]=t[0];if("a"===n||"A"===n)Ey[1]=e*t[1],Ey[2]=e*t[2],Ey[3]=t[3],Ey[4]=t[4],Ey[5]=t[5],Ey[6]=e*t[6],Ey[7]=e*t[7];else for(var r=1,i=t.length;r<i;++r)Ey[r]=e*t[r];return Ey}var Oy=function(t,e,n,r,i){var o,a,u,s,l,c=null,f=0,h=0,p=0,d=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),t.beginPath&&t.beginPath();for(var v=0,m=e.length;v<m;++v){switch(o=e[v],1!==i&&(o=Sy(o,i)),o[0]){case"l":f+=o[1],h+=o[2],t.lineTo(f+n,h+r);break;case"L":f=o[1],h=o[2],t.lineTo(f+n,h+r);break;case"h":f+=o[1],t.lineTo(f+n,h+r);break;case"H":f=o[1],t.lineTo(f+n,h+r);break;case"v":h+=o[1],t.lineTo(f+n,h+r);break;case"V":h=o[1],t.lineTo(f+n,h+r);break;case"m":f+=o[1],h+=o[2],t.moveTo(f+n,h+r);break;case"M":f=o[1],h=o[2],t.moveTo(f+n,h+r);break;case"c":a=f+o[5],u=h+o[6],p=f+o[3],d=h+o[4],t.bezierCurveTo(f+o[1]+n,h+o[2]+r,p+n,d+r,a+n,u+r),f=a,h=u;break;case"C":f=o[5],h=o[6],p=o[3],d=o[4],t.bezierCurveTo(o[1]+n,o[2]+r,p+n,d+r,f+n,h+r);break;case"s":a=f+o[3],u=h+o[4],p=2*f-p,d=2*h-d,t.bezierCurveTo(p+n,d+r,f+o[1]+n,h+o[2]+r,a+n,u+r),p=f+o[1],d=h+o[2],f=a,h=u;break;case"S":a=o[3],u=o[4],p=2*f-p,d=2*h-d,t.bezierCurveTo(p+n,d+r,o[1]+n,o[2]+r,a+n,u+r),f=a,h=u,p=o[1],d=o[2];break;case"q":a=f+o[3],u=h+o[4],p=f+o[1],d=h+o[2],t.quadraticCurveTo(p+n,d+r,a+n,u+r),f=a,h=u;break;case"Q":a=o[3],u=o[4],t.quadraticCurveTo(o[1]+n,o[2]+r,a+n,u+r),f=a,h=u,p=o[1],d=o[2];break;case"t":a=f+o[1],u=h+o[2],null===c[0].match(/[QqTt]/)?(p=f,d=h):"t"===c[0]?(p=2*f-s,d=2*h-l):"q"===c[0]&&(p=2*f-p,d=2*h-d),s=p,l=d,t.quadraticCurveTo(p+n,d+r,a+n,u+r),h=u,p=(f=a)+o[1],d=h+o[2];break;case"T":a=o[1],u=o[2],p=2*f-p,d=2*h-d,t.quadraticCurveTo(p+n,d+r,a+n,u+r),f=a,h=u;break;case"a":Ay(t,f+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+f+n,o[7]+h+r]),f+=o[6],h+=o[7];break;case"A":Ay(t,f+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),f=o[6],h=o[7];break;case"z":case"Z":t.closePath()}c=o}};function Ay(t,e,n,r){for(var i=function(t,e,n,r,i,o,a,u,s){var l=wy.call(arguments);if(_y[l])return _y[l];var c=a*my,f=Math.sin(c),h=Math.cos(c),p=h*(u-t)*.5+f*(s-e)*.5,d=h*(s-e)*.5-f*(u-t)*.5,v=p*p/((n=Math.abs(n))*n)+d*d/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var m=h/n,y=f/n,g=-f/r,b=h/r,_=m*u+y*s,x=g*u+b*s,w=m*t+y*e,k=g*t+b*e,E=1/((w-_)*(w-_)+(k-x)*(k-x))-.25;E<0&&(E=0);var S=Math.sqrt(E);o==i&&(S=-S);var O=.5*(_+w)-S*(k-x),A=.5*(x+k)+S*(w-_),M=Math.atan2(x-A,_-O),C=Math.atan2(k-A,w-O)-M;C<0&&1===o?C+=gy:C>0&&0===o&&(C-=gy);for(var T=Math.ceil(Math.abs(C/(yy+.001))),j=[],D=0;D<T;++D){var P=M+D*C/T,z=M+(D+1)*C/T;j[D]=[O,A,P,z,n,r,f,h]}return _y[l]=j}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),o=0;o<i.length;++o){var a=ky(i[o]);t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}var My={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,gy)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,o=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-o),t.lineTo(i,-o),t.lineTo(0,-n),t.lineTo(-i,-o),t.lineTo(-r,-o),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=by*n,i=r-.5773502691896257*n,o=n/4;t.moveTo(0,-r-i),t.lineTo(-o,r-i),t.lineTo(o,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=by*n,i=r-.5773502691896257*n;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=by*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=by*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=by*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=by*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function Cy(t){return My.hasOwnProperty(t)?My[t]:function(t){if(!Ty.hasOwnProperty(t)){var e=vy(t);Ty[t]={draw:function(t,n){Oy(t,e,0,0,Math.sqrt(n)/2)}}}return Ty[t]}(t)}var Ty={};var jy=n(29);function Dy(t){return t.x}function Py(t){return t.y}function zy(t){return t.width}function Ry(t){return t.height}function Iy(t){return function(){return t}}function Fy(t){return t.x||0}function Ly(t){return t.y||0}function Ny(t){return t.cornerRadius||0}function By(t){return!(!1===t.defined)}var Uy=Object(cy.a)().startAngle(function(t){return t.startAngle||0}).endAngle(function(t){return t.endAngle||0}).padAngle(function(t){return t.padAngle||0}).innerRadius(function(t){return t.innerRadius||0}).outerRadius(function(t){return t.outerRadius||0}).cornerRadius(Ny),qy=Object(cy.b)().x(Fy).y1(Ly).y0(function(t){return(t.y||0)+(t.height||0)}).defined(By),Vy=Object(cy.b)().y(Ly).x1(Fy).x0(function(t){return(t.x||0)+(t.width||0)}).defined(By),Wy=Object(cy.u)().x(Fy).y(Ly).defined(By),Hy=function(){var t=Dy,e=Py,n=zy,r=Ry,i=Iy(0),o=null;function a(a,u,s){var l,c=null!=u?u:+t.call(this,a),f=null!=s?s:+e.call(this,a),h=+n.call(this,a),p=+r.call(this,a),d=+i.call(this,a);if(o||(o=l=Object(jy.a)()),d<=0)o.rect(c,f,h,p);else{var v=c+h,m=f+p;o.moveTo(c+d,f),o.lineTo(v-d,f),o.quadraticCurveTo(v,f,v,f+d),o.lineTo(v,m-d),o.quadraticCurveTo(v,m,v-d,m),o.lineTo(c+d,m),o.quadraticCurveTo(c,m,c,m-d),o.lineTo(c,f+d),o.quadraticCurveTo(c,f,c+d,f),o.closePath()}if(l)return o=null,l+""||null}return a.x=function(e){return arguments.length?(t="function"===typeof e?e:Iy(+e),a):t},a.y=function(t){return arguments.length?(e="function"===typeof t?t:Iy(+t),a):e},a.width=function(t){return arguments.length?(n="function"===typeof t?t:Iy(+t),a):n},a.height=function(t){return arguments.length?(r="function"===typeof t?t:Iy(+t),a):r},a.cornerRadius=function(t){return arguments.length?(i="function"===typeof t?t:Iy(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}().x(Fy).y(Ly).width(function(t){return t.width||0}).height(function(t){return t.height||0}).cornerRadius(Ny),Gy=Object(cy.v)().type(function(t){return Cy(t.shape||"circle")}).size(function(t){return null==t.size?64:t.size}),Xy=function(){var t,e,n,r,i,o,a,u,s=null;function l(t,e,n){var r=n/2;if(i){var l=a-e,c=t-o;if(l||c){var f=Math.sqrt(l*l+c*c),h=(l/=f)*u,p=(c/=f)*u,d=Math.atan2(c,l);s.moveTo(o-h,a-p),s.lineTo(t-l*r,e-c*r),s.arc(t,e,r,d-Math.PI,d),s.lineTo(o+h,a+p),s.arc(o,a,u,d,d+Math.PI)}else s.arc(t,e,r,0,gy);s.closePath()}else i=1;o=t,a=e,u=r}function c(o){var a,u,c,f=o.length,h=!1;for(null==s&&(s=c=Object(jy.a)()),a=0;a<=f;++a)!(a<f&&r(u=o[a],a,o))===h&&(h=!h)&&(i=0),h&&l(+t(u,a,o),+e(u,a,o),+n(u,a,o));if(c)return s=null,c+""||null}return c.x=function(e){return arguments.length?(t=e,c):t},c.y=function(t){return arguments.length?(e=t,c):e},c.size=function(t){return arguments.length?(n=t,c):n},c.defined=function(t){return arguments.length?(r=t,c):r},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}().x(Fy).y(Ly).defined(By).size(function(t){return t.size||1});function Zy(t,e,n,r){return Hy.context(t)(e,n,r)}var Yy,$y=function(t,e){return e.stroke&&0!==e.opacity&&0!==e.strokeOpacity&&t.expand(null!=e.strokeWidth?+e.strokeWidth:1),t},Ky=gy-1e-8;function Jy(t){return Yy=t,Jy}function Qy(){}function tg(t,e){Yy.add(t,e)}Jy.beginPath=Qy,Jy.closePath=Qy,Jy.moveTo=tg,Jy.lineTo=tg,Jy.rect=function(t,e,n,r){tg(t,e),tg(t+n,e+r)},Jy.quadraticCurveTo=function(t,e,n,r){tg(t,e),tg(n,r)},Jy.bezierCurveTo=function(t,e,n,r,i,o){tg(t,e),tg(n,r),tg(i,o)},Jy.arc=function(t,e,n,r,i,o){if(Math.abs(i-r)>Ky)return tg(t-n,e-n),void tg(t+n,e+n);var a,u,s,l,c=1/0,f=-1/0,h=1/0,p=-1/0;function d(t){s=n*Math.cos(t),l=n*Math.sin(t),s<c&&(c=s),s>f&&(f=s),l<h&&(h=l),l>p&&(p=l)}if(d(r),d(i),i!==r)if((r%=gy)<0&&(r+=gy),(i%=gy)<0&&(i+=gy),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=gy,a=r-r%yy,u=0;u<4&&a>i;++u,a-=yy)d(a);else for(a=r-r%yy+yy,u=0;u<4&&a<i;++u,a+=yy)d(a);tg(t+c,e+h),tg(t+f,e+p)};var eg=(eg=iy(1,1))?eg.getContext("2d"):null,ng=new Qm;function rg(t){return function(e,n){if(!eg)return!0;t(eg,e),ng.clear().union(e.bounds).intersect(n).round();for(var r=ng.x1,i=ng.y1,o=ng.x2,a=ng.y2,u=i;u<=a;++u)for(var s=r;s<=o;++s)if(eg.isPointInPath(s,u))return!0;return!1}}function ig(t,e){return e.contains(t.x||0,t.y||0)}function og(t,e){var n=t.x||0,r=t.y||0,i=t.width||0,o=t.height||0;return e.intersects(ng.set(n,r,n+i,r+o))}function ag(t,e,n,r,i){var o,a,u,s,l=t.x1,c=t.y1,f=t.x2,h=t.y2,p=r-e,d=i-n,v=0,m=1;for(s=0;s<4;++s){if(0===s&&(o=-p,a=-(l-e)),1===s&&(o=p,a=f-e),2===s&&(o=-d,a=-(c-n)),3===s&&(o=d,a=h-n),Math.abs(o)<1e-10&&a<0)return!1;if(u=a/o,o<0){if(u>m)return!1;u>v&&(v=u)}else if(o>0){if(u<v)return!1;u<m&&(m=u)}}return!0}var ug=function(t,e,n){return n.id?function(t,e,n){for(var r=n.width(),i=n.height(),o=n.x1+e.x1*r,a=n.y1+e.y1*i,u=n.x1+e.x2*r,s=n.y1+e.y2*i,l=e.stops,c=0,f=l.length,h=t.createLinearGradient(o,a,u,s);c<f;++c)h.addColorStop(l[c].offset,l[c].color);return h}(t,n,e.bounds):n},sg=function(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=ug(t,e,e.fill),!0)},lg=[],cg=function(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&((n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=ug(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||lg),t.lineDashOffset=e.strokeDashOffset||0),!0))};function fg(t,e){return t.zindex-e.zindex||t.index-e.index}function hg(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,o=[];for(n=0,r=i.length;n<r;++n)(e=i[n]).index=n,e.zindex&&o.push(e);return t.zdirty=!1,t.zitems=o.sort(fg)}function pg(t,e){var n,r,i=t.items;if(i&&i.length){var o=hg(t);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=o}for(n=0,r=i.length;n<r;++n)e(i[n])}}function dg(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var o=hg(t);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===o)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function vg(t){return function(e,n,r){pg(n,function(n){r&&!r.intersects(n.bounds)||mg(t,e,n,n)})}}function mg(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(n.fill&&sg(e,n,i)&&e.fill(),n.stroke&&cg(e,n,i)&&e.stroke()))}function yg(t){return t=t||y.bb,function(e,n,r,i,o,a){return r*=e.pixelRatio,i*=e.pixelRatio,dg(n,function(n){var u=n.bounds;if((!u||u.contains(o,a))&&u)return t(e,n,r,i,o,a)?n:void 0})}}function gg(t,e){return function(n,r,i,o){var a,u,s=Array.isArray(r)?r[0]:r,l=null==e?s.fill:e,c=s.stroke&&n.isPointInStroke;return c&&(a=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=u?u:"butt"),!t(n,r)&&(l&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o))}}function bg(t){return yg(gg(t))}function _g(t,e){return"translate("+t+","+e+")"}function xg(t){return"rotate("+t+")"}function wg(t){return _g(t.x||0,t.y||0)}var kg=function(t,e,n){function r(t,n){var r=n.x||0,i=n.y||0,o=n.angle||0;t.translate(r,i),o&&t.rotate(o*=my),t.beginPath(),e(t,n),o&&t.rotate(-o),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",function(t){return _g(t.x||0,t.y||0)+(t.angle?" "+xg(t.angle):"")}(n)),t("d",e(null,n))},bound:function(t,n){var r=n.x||0,i=n.y||0;return e(Jy(t),n),$y(t,n).translate(r,i),n.angle&&t.rotate(n.angle*my,r,i),t},draw:vg(r),pick:bg(r),isect:n||rg(r)}},Eg=kg("arc",function(t,e){return Uy.context(t)(e)});var Sg=function(t,e,n){function r(t,n){t.beginPath(),e(t,n)}var i,o=gg(r);return{type:t,tag:"path",nested:!0,attr:function(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))},bound:function(t,n){var r=n.items;return 0===r.length?t:(e(Jy(t),r),$y(t,r[0]))},draw:(i=r,function(t,e,n){!e.items.length||n&&!n.intersects(e.bounds)||mg(i,t,e.items[0],e.items)}),pick:function(t,e,n,r,i,a){var u=e.items,s=e.bounds;return!u||!u.length||s&&!s.contains(i,a)?null:(n*=t.pixelRatio,r*=t.pixelRatio,o(t,u,n,r)?u[0]:null)},isect:ig,tip:n}},Og=Sg("area",function(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?Vy:qy).curve(hy(r,n.orient,n.tension)).context(t)(e)},function(t,e){for(var n,r,i="horizontal"===t[0].orient?e[1]:e[0],o="horizontal"===t[0].orient?"y":"x",a=t.length,u=1/0;--a>=0;)!1!==t[a].defined&&(r=Math.abs(t[a][o]-i))<u&&(u=r,n=t[a]);return n}),Ag=1;var Mg=function(t,e,n){var r=e.clip,i=t._defs,o=e.clip_id||(e.clip_id="clip"+Ag++),a=i.clipping[o]||(i.clipping[o]={id:o});return Object(y.B)(r)?a.path=r(null):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"},Cg=.5;function Tg(t,e){var n=e.stroke?Cg:0;t.beginPath(),Zy(t,e,n,n)}var jg=gg(Tg);var Dg={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",wg(e))},bound:function(t,e){if(!e.clip&&e.items)for(var n=e.items,r=0,i=n.length;r<i;++r)t.union(n[r].bounds);return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),$y(t,e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){var r=this;pg(e,function(e){var i,o=e.x||0,a=e.y||0,u=e.width||0,s=e.height||0;t.save(),t.translate(o,a),(e.stroke||e.fill)&&(i=null==e.opacity?1:e.opacity)>0&&(Tg(t,e),e.fill&&sg(t,e,i)&&t.fill(),e.stroke&&cg(t,e,i)&&t.stroke()),e.clip&&(t.beginPath(),t.rect(0,0,u,s),t.clip()),n&&n.translate(-o,-a),pg(e,function(e){r.draw(t,e,n)}),n&&n.translate(o,a),t.restore()})},pick:function(t,e,n,r,i,o){if(e.bounds&&!e.bounds.contains(i,o)||!e.items)return null;var a=this,u=n*t.pixelRatio,s=r*t.pixelRatio;return dg(e,function(l){var c,f,h,p;if(!(p=l.bounds)||p.contains(i,o))return f=l.x||0,h=l.y||0,t.save(),t.translate(f,h),f=i-f,h=o-h,!(c=dg(l,function(t){return function(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}(t,f,h)?a.pick(t,n,r,f,h):null}))&&!1!==e.interactive&&(l.fill||l.stroke)&&jg(t,l,u,s)&&(c=l),t.restore(),c||null})},isect:og,background:function(t,e){var n=e.stroke?Cg:0;t("class","background"),t("d",Zy(null,e,n,n))},foreground:function(t,e,n){t("clip-path",e.clip?Mg(n,e,e):null)}};function Pg(t,e){var n=t.image;return n&&n.url===t.url||(n={loaded:!1,width:0,height:0},e.loadImage(t.url).then(function(e){t.image=e,t.image.url=t.url})),n}function zg(t,e){return"center"===t?e/2:"right"===t?e:0}function Rg(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var Ig={type:"image",tag:"image",nested:!1,attr:function(t,e,n){var r=Pg(e,n),i=e.x||0,o=e.y||0,a=(null!=e.width?e.width:r.width)||0,u=(null!=e.height?e.height:r.height)||0,s=!1===e.aspect?"none":"xMidYMid";i-=zg(e.align,a),o-=Rg(e.baseline,u),t("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),t("transform",_g(i,o)),t("width",a),t("height",u),t("preserveAspectRatio",s)},bound:function(t,e){var n=e.image,r=e.x||0,i=e.y||0,o=(null!=e.width?e.width:n&&n.width)||0,a=(null!=e.height?e.height:n&&n.height)||0;return r-=zg(e.align,o),i-=Rg(e.baseline,a),t.set(r,i,r+o,i+a)},draw:function(t,e,n){var r=this;pg(e,function(e){if(!n||n.intersects(e.bounds)){var i,o,a,u,s=Pg(e,r),l=e.x||0,c=e.y||0,f=(null!=e.width?e.width:s.width)||0,h=(null!=e.height?e.height:s.height)||0;l-=zg(e.align,f),c-=Rg(e.baseline,h),!1!==e.aspect&&(o=s.width/s.height,a=e.width/e.height,o===o&&a===a&&o!==a&&(a<o?(c+=(h-(u=f/o))/2,h=u):(l+=(f-(u=h*o))/2,f=u))),s.loaded&&(t.globalAlpha=null!=(i=e.opacity)?i:1,t.drawImage(s,l,c,f,h))}})},pick:yg(),isect:y.bb,get:Pg,xOffset:zg,yOffset:Rg},Fg=Sg("line",function(t,e){var n=e[0],r=n.interpolate||"linear";return Wy.curve(hy(r,n.orient,n.tension)).context(t)(e)},function(t,e){for(var n,r,i=Math.pow(t[0].strokeWidth||1,2),o=t.length;--o>=0;)if(!1!==t[o].defined&&(n=t[o].x-e[0])*n+(r=t[o].y-e[1])*r<i)return t[o];return null});function Lg(t,e){var n=e.path;if(null==n)return!0;var r=e.pathCache;r&&r.path===n||((e.pathCache=r=vy(n)).path=n),Oy(t,r,e.x,e.y)}var Ng={type:"path",tag:"path",nested:!1,attr:function(t,e){t("transform",wg(e)),t("d",e.path)},bound:function(t,e){return Lg(Jy(t),e)?t.set(0,0,0,0):$y(t,e)},draw:vg(Lg),pick:bg(Lg),isect:rg(Lg)};function Bg(t,e){t.beginPath(),Zy(t,e)}var Ug={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",Zy(null,e))},bound:function(t,e){var n,r;return $y(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)},draw:vg(Bg),pick:bg(Bg),isect:og};function qg(t,e,n){var r,i,o,a;return!(!e.stroke||!cg(t,e,n))&&(r=e.x||0,i=e.y||0,o=null!=e.x2?e.x2:r,a=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(o,a),!0)}var Vg,Wg={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",wg(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,r;return $y(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)},draw:function(t,e,n){pg(e,function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&qg(t,e,r)&&t.stroke()}})},pick:yg(function(t,e,n,r){return!!t.isPointInStroke&&qg(t,e,1)&&t.isPointInStroke(n,r)}),isect:function(t,e){var n=t.x||0,r=t.y||0;return ag(e,n,r,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r)}},Hg=kg("shape",function(t,e){return(e.mark.shape||e.shape).context(t)(e)}),Gg=kg("symbol",function(t,e){return Gy.context(t)(e)},ig),Xg={height:Jg,measureWidth:$g,estimateWidth:Zg,width:Zg,canvas:Qg};function Zg(t){return Vg=Jg(t),Yg(tb(t))}function Yg(t){return~~(.8*t.length*Vg)}function $g(t){return Jg(t)<=0?0:(eg.font=nb(t),Kg(tb(t)))}function Kg(t){return eg.measureText(t).width}function Jg(t){return null!=t.fontSize?t.fontSize:11}function Qg(t){Xg.width=t&&eg?$g:Zg}function tb(t){var e=t.text;return null==e?"":t.limit>0?function(t){var e,n=+t.limit,r=t.text+"";Xg.width===$g?(eg.font=nb(t),e=Kg):(Vg=Jg(t),e=Yg);if(e(r)<n)return r;var i,o=t.ellipsis||"\u2026",a="rtl"===t.dir,u=0,s=r.length;if(n-=e(o),a){for(;u<s;)i=u+s>>>1,e(r.slice(i))>n?u=i+1:s=i;return o+r.slice(u)}for(;u<s;)i=1+(u+s>>>1),e(r.slice(0,i))<n?u=i:s=i-1;return r.slice(0,u)+o}(t):e+""}function eb(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function nb(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Jg(t)+"px "+eb(t,e)}function rb(t){var e=t.baseline,n=Jg(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:0)}Qg(!0);var ib={left:"start",center:"middle",right:"end"},ob=new Qm;function ab(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-yy,n+=i*Math.cos(e),r+=i*Math.sin(e)),ob.x1=n,ob.y1=r,ob}function ub(t,e,n){var r,i=Xg.height(e),o=e.align,a=ab(e),u=a.x1,s=a.y1,l=e.dx||0,c=(e.dy||0)+rb(e)-Math.round(.8*i);if(r=Xg.width(e),"center"===o?l-=r/2:"right"===o&&(l-=r),t.set(l+=u,c+=s,l+r,c+i),e.angle&&!n)t.rotate(e.angle*my,u,s);else if(2===n)return t.rotatedPoints(e.angle*my,u,s);return t}var sb={arc:Eg,area:Og,group:Dg,image:Ig,line:Fg,path:Ng,rect:Ug,rule:Wg,shape:Hg,symbol:Gg,text:{type:"text",tag:"text",nested:!1,attr:function(t,e){var n,r=e.dx||0,i=(e.dy||0)+rb(e),o=ab(e),a=o.x1,u=o.y1,s=e.angle||0;t("text-anchor",ib[e.align]||"start"),s?(n=_g(a,u)+" "+xg(s),(r||i)&&(n+=" "+_g(r,i))):n=_g(a+r,u+i),t("transform",n)},bound:ub,draw:function(t,e,n){pg(e,function(e){var r,i,o,a,u;n&&!n.intersects(e.bounds)||(u=tb(e))&&(0===(r=null==e.opacity?1:e.opacity)||e.fontSize<=0||(t.font=nb(e),t.textAlign=e.align||"left",o=(i=ab(e)).x1,a=i.y1,e.angle&&(t.save(),t.translate(o,a),t.rotate(e.angle*my),o=a=0),o+=e.dx||0,a+=(e.dy||0)+rb(e),e.fill&&sg(t,e,r)&&t.fillText(u,o,a),e.stroke&&cg(t,e,r)&&t.strokeText(u,o,a),e.angle&&t.restore()))})},pick:yg(function(t,e,n,r,i,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var a=ab(e),u=a.x1,s=a.y1,l=ub(ob,e,1),c=-e.angle*my,f=Math.cos(c),h=Math.sin(c),p=f*i-h*o+(u-f*u+h*s),d=h*i+f*o+(s-h*u-f*s);return l.contains(p,d)}),isect:function(t,e){var n=ub(ob,t,2);return ag(e,n[0],n[1],n[2],n[3])||ag(e,n[0],n[1],n[4],n[5])||ag(e,n[4],n[5],n[6],n[7])||ag(e,n[2],n[3],n[6],n[7])}},trail:Sg("trail",function(t,e){return Xy.context(t)(e)},function(t,e){for(var n,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(n=t[i].x-e[0])*n+(r=t[i].y-e[1])*r<(n=t[i].size||1)*n)return t[i];return null})},lb=function(t,e,n){var r=sb[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new Qm),t,n)},cb={mark:null},fb=function(t,e,n){var r,i,o,a,u=sb[t.marktype],s=u.bound,l=t.items,c=l&&l.length;if(u.nested)return c?o=l[0]:(cb.mark=t,o=cb),a=lb(o,s,n),e=e&&e.union(a)||a;if(e=e||t.bounds&&t.bounds.clear()||new Qm,c)for(r=0,i=l.length;r<i;++r)e.union(lb(l[r],s,n));return t.bounds=e},hb=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function pb(t){return function t(e){var n,r,i,o=e.marktype,a=e.items;if(a)for(r=0,i=a.length;r<i;++r)n=o?"mark":"group",a[r][n]=e,a[r].zindex&&(a[r][n].zdirty=!0),"group"===(o||n)&&t(a[r]);o&&fb(e);return e}("string"===typeof t?JSON.parse(t):t)}function db(t){arguments.length?this.root=pb(t):(this.root=mb({marktype:"group",name:"root",role:"frame"}),this.root.items=[new ry(this.root)])}var vb=db.prototype;function mb(t,e){return{bounds:new Qm,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0}}function yb(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function gb(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function bb(t,e,n,r){var i,o=t.childNodes[e];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=yb(t.ownerDocument,n,r),t.insertBefore(o,i)),o}function _b(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function xb(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}vb.toJSON=function(t){return function(t,e){return JSON.stringify(t,hb,e)}(this.root,t||0)},vb.mark=function(t,e,n){var r=mb(t,e=e||this.root.items[0]);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var wb=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]};function kb(t,e){this._active=null,this._handlers={},this._loader=t||Xp(),this._tooltip=e||Eb}function Eb(t,e,n,r){t.element().setAttribute("title",r||"")}var Sb=kb.prototype;function Ob(t){this._el=null,this._bgcolor=null,this._loader=new ay(t)}Sb.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},Sb.element=function(){return this._el},Sb.canvas=function(){return this._el&&this._el.firstChild},Sb.origin=function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},Sb.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},Sb.on=function(){},Sb.off=function(){},Sb._handlerIndex=function(t,e,n){for(var r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},Sb.handlers=function(t){var e,n=this._handlers,r=[];if(t)r.push.apply(r,n[this.eventName(t)]);else for(e in n)r.push.apply(r,n[e]);return r},Sb.eventName=function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)},Sb.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then(function(e){var n=new MouseEvent(t.type,t),r=yb(null,"a");for(var i in e)r.setAttribute(i,e[i]);r.dispatchEvent(n)}).catch(function(){})},Sb.handleTooltip=function(t,e,n){if(e&&null!=e.tooltip){e=function(t,e,n,r){var i,o,a=t&&t.mark;if(a&&(i=sb[a.marktype]).tip){for((o=wb(e,n))[0]-=r[0],o[1]-=r[1];t=t.mark.group;)o[0]-=t.x||0,o[1]-=t.y||0;t=i.tip(a.items,o)}return t}(e,t,this.canvas(),this._origin);var r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},Sb.getItemBoundingClientRect=function(t){if(e=this.canvas()){for(var e,n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,o=i.x1+r[0]+n.left,a=i.y1+r[1]+n.top,u=i.width(),s=i.height();t.mark&&(t=t.mark.group);)o+=t.x||0,a+=t.y||0;return{x:o,y:a,width:u,height:s,left:o,top:a,right:o+u,bottom:a+s}}};var Ab=Ob.prototype;Ab.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},Ab.element=function(){return this._el},Ab.canvas=function(){return this._el&&this._el.firstChild},Ab.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},Ab.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},Ab.dirty=function(){},Ab.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},Ab._render=function(){},Ab.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then(function(){return e}):Promise.resolve(e)},Ab._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(t){t&&i(),n._ready=null})}return r},Ab.sanitizeURL=function(t){return this._load("sanitizeURL",t)},Ab.loadImage=function(t){return this._load("loadImage",t)};var Mb="mouseout";function Cb(t,e){kb.call(this,t,e),this._down=null,this._touch=null,this._first=!0}var Tb=Object(y.w)(Cb,kb);function jb(t,e,n){return function(r){var i=this._active,o=this.pickEvent(r);o===i?this.fire(t,r):(i&&i.exit||this.fire(n,r),this._active=o,this.fire(e,r),this.fire(t,r))}}function Db(t){return function(e){this.fire(t,e),this._active=null}}Tb.initialize=function(t,e,n){var r=this._canvas=t&&gb(t,"canvas");if(r){var i=this;this.events.forEach(function(t){r.addEventListener(t,function(e){Tb[t]?Tb[t].call(i,e):i.fire(t,e)})})}return kb.prototype.initialize.call(this,t,e,n)},Tb.canvas=function(){return this._canvas},Tb.context=function(){return this._canvas.getContext("2d")},Tb.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],Tb.DOMMouseScroll=function(t){this.fire("mousewheel",t)},Tb.mousemove=jb("mousemove","mouseover","mouseout"),Tb.dragover=jb("dragover","dragenter","dragleave"),Tb.mouseout=Db("mouseout"),Tb.dragleave=Db("dragleave"),Tb.mousedown=function(t){this._down=this._active,this.fire("mousedown",t)},Tb.click=function(t){this._down===this._active&&(this.fire("click",t),this._down=null)},Tb.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)},Tb.touchmove=function(t){this.fire("touchmove",t,!0)},Tb.touchend=function(t){this.fire("touchend",t,!0),this._touch=null},Tb.fire=function(t,e,n){var r,i,o=n?this._touch:this._active,a=this._handlers[t];if(e.vegaType=t,"click"===t&&o&&o.href?this.handleHref(e,o,o.href):"mousemove"!==t&&t!==Mb||this.handleTooltip(e,o,t!==Mb),a)for(r=0,i=a.length;r<i;++r)a[r].handler.call(this._obj,e,o)},Tb.on=function(t,e){var n=this.eventName(t),r=this._handlers;return this._handlerIndex(r[n],t,e)<0&&(r[n]||(r[n]=[])).push({type:t,handler:e}),this},Tb.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},Tb.pickEvent=function(t){var e=wb(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},Tb.pick=function(t,e,n,r,i){var o=this.context();return sb[t.marktype].pick.call(this,o,t,e,n,r,i)};var Pb="undefined"!==typeof window&&window.devicePixelRatio||1;function zb(t){Ob.call(this,t),this._redraw=!1,this._dirty=new Qm}var Rb=Object(y.w)(zb,Ob),Ib=Ob.prototype,Fb=new Qm;function Lb(t,e){kb.call(this,t,e);var n=this;n._hrefHandler=Bb(n,function(t,e){e&&e.href&&n.handleHref(t,e,e.href)}),n._tooltipHandler=Bb(n,function(t,e){n.handleTooltip(t,e,t.type!==Mb)})}Rb.initialize=function(t,e,n,r,i,o){return this._options=o,this._canvas=iy(1,1,o&&o.type),t&&(_b(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Ib.initialize.call(this,t,e,n,r,i)},Rb.resize=function(t,e,n,r){return Ib.resize.call(this,t,e,n,r),function(t,e,n,r,i,o){var a,u="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,s=t.getContext("2d"),l=u?Pb:i;for(a in t.width=e*l,t.height=n*l,o)s[a]=o[a];u&&1!==l&&(t.style.width=e+"px",t.style.height=n+"px"),s.pixelRatio=l,s.setTransform(l,0,0,l,l*r[0],l*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},Rb.canvas=function(){return this._canvas},Rb.context=function(){return this._canvas?this._canvas.getContext("2d"):null},Rb.dirty=function(t){var e=function(t,e){if(null==e)return t;for(var n=Fb.clear().union(t);null!=e;e=e.mark.group)n.translate(e.x||0,e.y||0);return n}(t.bounds,t.mark.group);this._dirty.union(e)},Rb._render=function(t){var e=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty;return e.save(),this._redraw||o.empty()?(this._redraw=!1,o=null):o=function(t,e,n){return e.expand(1).round(),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}(e,o,n),this.clear(-n[0],-n[1],r,i),this.draw(e,t,o),e.restore(),this._dirty.clear(),this},Rb.draw=function(t,e,n){var r=sb[e.marktype];e.clip&&function(t,e){var n=e.clip;if(t.save(),t.beginPath(),Object(y.B)(n))n(t);else{var r=e.group;t.rect(0,0,r.width||0,r.height||0)}t.clip()}(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},Rb.clear=function(t,e,n,r){var i=this.context();i.clearRect(t,e,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,n,r))};var Nb=Object(y.w)(Lb,kb);function Bb(t,e){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,e.call(t._obj,n,r)}}function Ub(t,e,n){var r,i,o="<"+t;if(e)for(r in e)null!=(i=e[r])&&(o+=" "+r+'="'+i+'"');return n&&(o+=" "+n),o+">"}function qb(t){return"</"+t+">"}Nb.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener(Mb,this._tooltipHandler)),this._svg=r=t&&gb(t,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener(Mb,this._tooltipHandler)),kb.prototype.initialize.call(this,t,e,n)},Nb.canvas=function(){return this._svg},Nb.on=function(t,e){var n=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[n],t,e)<0){var i={type:t,handler:e,listener:Bb(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},Nb.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var Vb={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Wb={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Hb=Object.keys(Wb),Gb=Vb.xmlns;function Xb(t){Ob.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var Zb=Object(y.w)(Xb,Ob),Yb=Ob.prototype;function $b(t,e,n){var r,i,o;for((t=bb(t,n,"linearGradient",Gb)).setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2),r=0,i=e.stops.length;r<i;++r)(o=bb(t,r,"stop",Gb)).setAttribute("offset",e.stops[r].offset),o.setAttribute("stop-color",e.stops[r].color);_b(t,r)}function Kb(t,e,n){var r;(t=bb(t,n,"clipPath",Gb)).setAttribute("id",e.id),e.path?(r=bb(t,0,"path",Gb)).setAttribute("d",e.path):((r=bb(t,0,"rect",Gb)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height))}function Jb(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function Qb(t,e,n,r,i){var o,a=t._svg;if(!a&&(a=yb(o=e.ownerDocument,r,Gb),t._svg=a,t.mark&&(a.__data__=t,a.__values__={fill:"default"},"g"===r))){var u=yb(o,"path",Gb);u.setAttribute("class","background"),a.appendChild(u),u.__data__=t;var s=yb(o,"g",Gb);a.appendChild(s),s.__data__=t}return(a.ownerSVGElement!==i||function(t){var e=t.mark||t.group;return e&&e.items.length>1}(t)&&a.previousSibling!==n)&&e.insertBefore(a,n?n.nextSibling:e.firstChild),a}Zb.initialize=function(t,e,n,r){return t&&(this._svg=bb(t,0,"svg",Gb),this._svg.setAttribute("class","marks"),_b(t,1),this._root=bb(this._svg,0,"g",Gb),_b(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Yb.initialize.call(this,t,e,n,r)},Zb.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),Yb.background.apply(this,arguments)},Zb.resize=function(t,e,n,r){return Yb.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},Zb.canvas=function(){return this._svg},Zb.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in Vb)t[e]=Vb[e];var n=this._bgcolor?Ub("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+qb("rect"):"";return Ub("svg",t)+n+this._svg.innerHTML+qb("svg")},Zb._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),_b(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Zb.updateDefs=function(){var t,e=this._svg,n=this._defs,r=n.el,i=0;for(t in n.gradient)r||(n.el=r=bb(e,0,"defs",Gb)),$b(r,n.gradient[t],i++);for(t in n.clipping)r||(n.el=r=bb(e,0,"defs",Gb)),Kb(r,n.clipping[t],i++);r&&(0===i?(e.removeChild(r),n.el=null):_b(r,i))},Zb._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},Zb.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},Zb.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},Zb._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e,n,r,i,o,a,u,s=++this._dirtyID;for(o=0,a=t.length;o<a;++o)(n=(e=t[o]).mark).marktype!==r&&(r=n.marktype,i=sb[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,Jb(e,s),n.items.forEach(function(t){t.dirty=s})),n.zdirty||(e.exit?(i.nested&&n.items.length?(u=n.items[0])._svg&&this._update(i,u._svg,u):e._svg&&(u=e._svg.parentNode)&&u.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e)._update!==s&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,Jb(e,s)),e._update=s));return!this._dirtyAll},Zb.draw=function(t,e,n){if(!this.isDirty(e))return e._svg;var r,i=this,o=this._svg,a=sb[e.marktype],u=!1===e.interactive?"none":null,s="g"===a.tag,l=null,c=0;function f(t){var e=i.isDirty(t),n=Qb(t,r,l,a.tag,o);e&&(i._update(a,n,t),s&&function(t,e,n){e=e.lastChild;var r,i=0;pg(n,function(n){r=t.draw(e,n,r),++i}),_b(e,1+i)}(i,n,t)),l=n,++c}return(r=Qb(e,t,n,"g",o)).setAttribute("class",xb(e)),s||r.style.setProperty("pointer-events",u),e.clip?r.setAttribute("clip-path",Mg(i,e,e.group)):r.removeAttribute("clip-path"),a.nested?e.items.length&&f(e.items[0]):pg(e,f),_b(r,c),r};var t_=null,e_=null,n_={group:function(t,e,n){e_=e.__values__,t_=e.childNodes[1],t.foreground(i_,n,this),t_=e.childNodes[0],t.background(i_,n,this);var r=!1===n.mark.interactive?"none":null;r!==e_.events&&(t_.style.setProperty("pointer-events",r),e_.events=r)},text:function(t,e,n){var r;(r=tb(n))!==e_.text&&(e.textContent=r,e_.text=r),r_(e,"font-family",eb(n)),r_(e,"font-size",Jg(n)+"px"),r_(e,"font-style",n.fontStyle),r_(e,"font-variant",n.fontVariant),r_(e,"font-weight",n.fontWeight)}};function r_(t,e,n){n!==e_[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),e_[e]=n)}function i_(t,e,n){e!==e_[t]&&(null!=e?n?t_.setAttributeNS(n,t,e):t_.setAttribute(t,e):n?t_.removeAttributeNS(n,t):t_.removeAttribute(t),e_[t]=e)}function o_(){var t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function a_(t){Ob.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}Zb._update=function(t,e,n){t_=e,e_=e.__values__,t.attr(i_,n,this);var r=n_[t.type];r&&r.call(this,t,e,n),this.style(t_,n)},Zb.style=function(t,e){var n,r,i,o,a;if(null!=e)for(n=0,r=Hb.length;n<r;++n)a=e[i=Hb[n]],"font"===i&&(a=eb(e)),a!==e_[i]&&(o=Wb[i],null==a?"fill"===o?t.style.setProperty(o,"none"):t.style.removeProperty(o):(a.id&&(this._defs.gradient[a.id]=a,a="url("+o_()+"#"+a.id+")"),t.style.setProperty(o,a+"")),e_[i]=a)};var u_,s_=Object(y.w)(a_,Ob),l_=Ob.prototype;function c_(t,e,n,r){u_[r||t]=e}function f_(t,e,n,r){if(null==t)return"";var i,o,a,u,s,l="";for("bgrect"===n&&!1===e.interactive&&(l+="pointer-events: none; "),"text"===n&&(l+="font-family: "+eb(t)+"; ",l+="font-size: "+Jg(t)+"px; ",t.fontStyle&&(l+="font-style: "+t.fontStyle+"; "),t.fontVariant&&(l+="font-variant: "+t.fontVariant+"; "),t.fontWeight&&(l+="font-weight: "+t.fontWeight+"; ")),i=0,o=Hb.length;i<o;++i)a=Hb[i],u=Wb[a],null==(s=t[a])?"fill"===u&&(l+="fill: none; "):"transparent"!==s||"fill"!==u&&"stroke"!==u?(s.id&&(r.gradient[s.id]=s,s="url(#"+s.id+")"),l+=u+": "+s+"; "):l+=u+": none; ";return l?'style="'+l.trim()+'"':null}s_.resize=function(t,e,n,r){l_.resize.call(this,t,e,n,r);var i=this._origin,o=this._text,a={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in Vb)a[u]=Vb[u];o.head=Ub("svg",a);var s=this._bgcolor;return"transparent"!==s&&"none"!==s||(s=null),o.bg=s?Ub("rect",{width:this._width,height:this._height,style:"fill: "+s+";"})+qb("rect"):"",o.root=Ub("g",{transform:"translate("+i+")"}),o.foot=qb("g")+qb("svg"),this},s_.background=function(){var t=l_.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},s_.svg=function(){var t=this._text;return t.head+t.bg+t.defs+t.root+t.body+t.foot},s_._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},s_.buildDefs=function(){var t,e,n,r,i=this._defs,o="";for(e in i.gradient){for(r=(n=i.gradient[e]).stops,o+=Ub("linearGradient",{id:e,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),t=0;t<r.length;++t)o+=Ub("stop",{offset:r[t].offset,"stop-color":r[t].color})+qb("stop");o+=qb("linearGradient")}for(e in i.clipping)n=i.clipping[e],o+=Ub("clipPath",{id:e}),n.path?o+=Ub("path",{d:n.path})+qb("path"):o+=Ub("rect",{x:0,y:0,width:n.width,height:n.height})+qb("rect"),o+=qb("clipPath");return o.length>0?Ub("defs")+o+qb("defs"):""},s_.attributes=function(t,e){return u_={},t(c_,e,this),u_},s_.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then(function(t){t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t})}return null},s_.mark=function(t){var e,n=this,r=sb[t.marktype],i=r.tag,o=this._defs,a="";function u(u){var s=n.href(u);s&&(a+=Ub("a",s)),e="g"!==i?f_(u,t,i,o):null,a+=Ub(i,n.attributes(r.attr,u),e),"text"===i?a+=tb(u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===i&&(a+=Ub("path",n.attributes(r.background,u),f_(u,t,"bgrect",o))+qb("path"),a+=Ub("g",n.attributes(r.foreground,u))+n.markGroup(u)+qb("g")),a+=qb(i),s&&(a+=qb("a"))}return"g"!==i&&!1===t.interactive&&(e='style="pointer-events: none;"'),a+=Ub("g",{class:xb(t),"clip-path":t.clip?Mg(n,t,t.group):null},e),r.nested?t.items&&t.items.length&&u(t.items[0]):pg(t,u),a+qb("g")},s_.markGroup=function(t){var e=this,n="";return pg(t,function(t){n+=e.mark(t)}),n};var h_={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},p_={};function d_(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(p_[t]=e,this):p_[t]}function v_(t,e,n,r){if(function(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}(t,e,n)){var i=t.items,o=t.marktype,a=i.length,u=0;if("group"===o)for(;u<a;++u)m_(i[u],e,n,r);else for(var s=sb[o].isect;u<a;++u){var l=i[u];y_(l,e,s)&&r.push(l)}}return r}function m_(t,e,n,r){n&&n(t.mark)&&y_(t,e,sb.group.isect)&&r.push(t);var i=t.items,o=i&&i.length;if(o){var a=t.x||0,u=t.y||0;e.translate(-a,-u);for(var s=0;s<o;++s)v_(i[s],e,n,r);e.translate(a,u)}return r}function y_(t,e,n){var r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}p_.canvas=p_.png={renderer:zb,headless:zb,handler:Cb},p_.svg={renderer:Xb,headless:a_,handler:Lb},p_.none={};var g_=new Qm;function b_(t){gd.call(this,null,t)}function __(t,e,n){return e(t.bounds.clear(),t,n)}Object(y.w)(b_,gd).transform=function(t,e){var n,r=e.dataflow,i=t.mark,o=i.marktype,a=sb[o],u=a.bound,s=i.bounds;return a.nested?(i.items.length&&r.dirty(i.items[0]),s=__(i,u),i.items.forEach(function(t){t.bounds.clear().union(s)})):o===Cm||t.modified()?(e.visit(e.MOD,function(t){r.dirty(t)}),s.clear(),i.items.forEach(function(t){s.union(__(t,u))}),i.role===zm&&e.reflow()):(n=e.changed(e.REM),e.visit(e.ADD,function(t){s.union(__(t,u))}),e.visit(e.MOD,function(t){n=n||s.alignsWith(t.bounds),r.dirty(t),s.union(__(t,u))}),n&&(s.clear(),i.items.forEach(function(t){s.union(t.bounds)}))),function(t){var e=t.clip;if(Object(y.B)(e))e(Jy(g_.clear()));else{if(!e)return;g_.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(g_)}(i),e.modifies("bounds")};var x_=":vega_identifier:";function w_(t){gd.call(this,0,t)}function k_(t){gd.call(this,null,t)}function E_(t){gd.call(this,null,t)}w_.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(y.w)(w_,gd).transform=function(t,e){var n=function(t){var e=t._signals[x_];e||(t._signals[x_]=e=t.add(0));return e}(e.dataflow),r=n.value,i=t.as;return e.visit(e.ADD,function(t){t[i]||(t[i]=++r)}),n.set(this.value=r),e},Object(y.w)(k_,gd).transform=function(t,e){var n=this.value;n||((n=e.dataflow.scenegraph().mark(t.markdef,function(t){var e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}(t),t.index)).group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this,n.clip=t.clip,n.interactive=t.interactive,this.value=n);var r=n.marktype===Cm?ry:ny;return e.visit(e.ADD,function(t){r.call(t,n)}),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e};var S_=Object(y.w)(E_,gd),O_={parity:function(t){return t.filter(function(t,e){return e%2?t.opacity=0:1})},greedy:function(t,e){var n;return t.filter(function(t,r){return r&&A_(n.bounds,t.bounds,e)?t.opacity=0:(n=t,1)})}};function A_(t,e,n){return n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2)}function M_(t,e){for(var n,r=1,i=t.length,o=t[0].bounds;r<i;o=n,++r)if(A_(o,n=t[r].bounds,e))return!0}function C_(t){var e=t.bounds;return e.width()>1&&e.height()>1}function T_(t){return t.forEach(function(t){return t.opacity=1}),t}function j_(t,e){return t.reflow(e.modified()).modifies("opacity")}function D_(t){gd.call(this,null,t)}S_.transform=function(t,e){var n,r,i,o=O_[t.method]||O_.parity,a=e.materialize(e.SOURCE).source,u=t.separation||0;if(a&&a.length){if(!t.method)return t.modified("method")&&(T_(a),e=j_(e,t)),e;if(t.sort&&(a=a.slice().sort(t.sort)),n=T_(a=a.filter(C_)),e=j_(e,t),n.length>=3&&M_(n,u)){do{n=o(n,u)}while(n.length>=3&&M_(n,u));n.length<3&&!Object(y.Q)(a).opacity&&(n.length>1&&(Object(y.Q)(n).opacity=0),Object(y.Q)(a).opacity=1)}return t.boundScale&&t.boundTolerance>=0&&(r=function(t,e,n){var r=t.range(),i=new Qm;return e===mm||e===bm?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),function(t){return i.encloses(t.bounds)}}(t.boundScale,t.boundOrient,+t.boundTolerance),a.forEach(function(t){r(t)||(t.opacity=0)})),i=n[0].mark.bounds.clear(),a.forEach(function(t){t.opacity&&i.union(t.bounds)}),e}},Object(y.w)(D_,gd).transform=function(t,e){var n=e.dataflow;if(e.visit(e.ALL,function(t){n.dirty(t)}),e.fields&&e.fields.zindex){var r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}};var P_=new Qm;function z_(t,e,n){return t[e]===n?0:(t[e]=n,1)}var R_=.5;function I_(t){var e=t.items[0].datum.orient;return e===ym||e===gm}function F_(t,e,n,r){var i,o,a=e.items[0],u=a.datum,s=u.orient,l=function(t){var e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}(u),c=a.range,f=a.offset,h=a.position,p=a.minExtent,d=a.maxExtent,v=u.title&&a.items[l[2]].items[0],m=a.titlePadding,y=a.bounds,g=0,b=0;switch(P_.clear().union(y),y.clear(),(i=l[0])>-1&&y.union(a.items[i].bounds),(i=l[1])>-1&&y.union(a.items[i].bounds),s){case mm:g=h||0,b=-f,o=Math.max(p,Math.min(d,-y.y1)),v&&(o=L_(v,o,m,0,-1,y)),y.add(0,-o).add(c,0);break;case ym:g=-f,b=h||0,o=Math.max(p,Math.min(d,-y.x1)),v&&(o=L_(v,o,m,1,-1,y)),y.add(-o,0).add(0,c);break;case gm:g=n+f,b=h||0,o=Math.max(p,Math.min(d,y.x2)),v&&(o=L_(v,o,m,1,1,y)),y.add(0,0).add(o,c);break;case bm:g=h||0,b=r+f,o=Math.max(p,Math.min(d,y.y2)),v&&(o=L_(v,o,m,0,1,y)),y.add(0,0).add(c,o);break;default:g=a.x,b=a.y}return $y(y.translate(g,b),a),z_(a,"x",g+R_)|z_(a,"y",b+R_)&&(a.bounds=P_,t.dirty(a),a.bounds=y,t.dirty(a)),a.mark.bounds.clear().union(y)}function L_(t,e,n,r,i,o){var a=t.bounds,u=0,s=0;return t.auto?(e+=n,r?u=(t.x||0)-(t.x=i*e):s=(t.y||0)-(t.y=i*e),a.translate(-u,-s),t.mark.bounds.set(a.x1,a.y1,a.x2,a.y2),r?(o.add(0,a.y1).add(0,a.y2),e+=a.width()):(o.add(a.x1,0).add(a.x2,0),e+=a.height())):o.union(a),e}function N_(t){return(new Qm).set(0,0,t.width||0,t.height||0)}function B_(t){var e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function U_(t,e,n){var r=Object(y.D)(t)?t[e]:t;return null!=r?r:void 0!==n?n:0}function q_(t){return t<0?Math.ceil(-t):0}function V_(t,e,n){var r,i,o,a,u,s,l,c,f,h,p,d=!n.nodirty,v=n.bounds===$m?N_:B_,m=P_.set(0,0,0,0),y=U_(n.align,Km),g=U_(n.align,Jm),b=U_(n.padding,Km),_=U_(n.padding,Jm),x=n.columns||e.length,w=x<0?1:Math.ceil(e.length/x),k=e.length,E=Array(k),S=Array(x),O=0,A=Array(k),M=Array(w),C=0,T=Array(k),j=Array(k),D=Array(k);for(i=0;i<x;++i)S[i]=0;for(i=0;i<w;++i)M[i]=0;for(i=0;i<k;++i)s=e[i],u=D[i]=v(s),s.x=s.x||0,T[i]=0,s.y=s.y||0,j[i]=0,o=i%x,a=~~(i/x),O=Math.max(O,l=Math.ceil(u.x2)),C=Math.max(C,c=Math.ceil(u.y2)),S[o]=Math.max(S[o],l),M[a]=Math.max(M[a],c),E[i]=b+q_(u.x1),A[i]=_+q_(u.y1),d&&t.dirty(e[i]);for(i=0;i<k;++i)i%x===0&&(E[i]=0),i<x&&(A[i]=0);if(y===Ym)for(o=1;o<x;++o){for(p=0,i=o;i<k;i+=x)p<E[i]&&(p=E[i]);for(i=o;i<k;i+=x)E[i]=p+S[o-1]}else if(y===Zm){for(p=0,i=0;i<k;++i)i%x&&p<E[i]&&(p=E[i]);for(i=0;i<k;++i)i%x&&(E[i]=p+O)}else for(y=!1,o=1;o<x;++o)for(i=o;i<k;i+=x)E[i]+=S[o-1];if(g===Ym)for(a=1;a<w;++a){for(p=0,r=(i=a*x)+x;i<r;++i)p<A[i]&&(p=A[i]);for(i=a*x;i<r;++i)A[i]=p+M[a-1]}else if(g===Zm){for(p=0,i=x;i<k;++i)p<A[i]&&(p=A[i]);for(i=x;i<k;++i)A[i]=p+C}else for(g=!1,a=1;a<w;++a)for(r=(i=a*x)+x;i<r;++i)A[i]+=M[a-1];for(f=0,i=0;i<k;++i)f=E[i]+(i%x?f:0),T[i]+=f-e[i].x;for(o=0;o<x;++o)for(h=0,i=o;i<k;i+=x)h+=A[i],j[i]+=h-e[i].y;if(y&&U_(n.center,Km)&&w>1)for(i=0;i<k;++i)(f=(u=y===Zm?O:S[i%x])-D[i].x2-e[i].x-T[i])>0&&(T[i]+=f/2);if(g&&U_(n.center,Jm)&&1!==x)for(i=0;i<k;++i)(h=(u=g===Zm?C:M[~~(i/x)])-D[i].y2-e[i].y-j[i])>0&&(j[i]+=h/2);for(i=0;i<k;++i)m.union(D[i].translate(T[i],j[i]));switch(f=U_(n.anchor,Am),h=U_(n.anchor,Mm),U_(n.anchor,Km)){case Om:f-=m.width();break;case Sm:f-=m.width()/2}switch(U_(n.anchor,Jm)){case Om:h-=m.height();break;case Sm:h-=m.height()/2}for(f=Math.round(f),h=Math.round(h),m.clear(),i=0;i<k;++i)e[i].mark.bounds.clear();for(i=0;i<k;++i)(s=e[i]).x+=T[i]+=f,s.y+=j[i]+=h,m.union(s.mark.bounds.union(s.bounds.translate(T[i],j[i]))),d&&t.dirty(s);return m}function W_(t,e,n){var r,i,o,a,u,s,l,c=function(t){for(var e,n,r,i,o,a,u,s=t.items,l=s.length,c=0,f={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};c<l;++c)if(u=(a=s[c]).items,a.marktype===Cm)switch(a.role){case Tm:case zm:break;case Rm:(e=f.rowheaders).push.apply(e,Object(m.a)(u));break;case Im:(n=f.rowfooters).push.apply(n,Object(m.a)(u));break;case Lm:(r=f.colheaders).push.apply(r,Object(m.a)(u));break;case Nm:(i=f.colfooters).push.apply(i,Object(m.a)(u));break;case Fm:f.rowtitle=u[0];break;case Bm:f.coltitle=u[0];break;default:(o=f.marks).push.apply(o,Object(m.a)(u))}return f}(e),f=c.marks,h=n.bounds===$m?H_:G_,p=n.offset,d=n.columns||f.length,v=d<0?1:Math.ceil(f.length/d),y=v*d,g=V_(t,f,n);c.rowheaders&&(s=U_(n.headerBand,Jm,null),r=Y_(t,c.rowheaders,f,d,v,-U_(p,"rowHeader"),X_,0,h,"x1",0,d,1,s)),c.colheaders&&(s=U_(n.headerBand,Km,null),i=Y_(t,c.colheaders,f,d,d,-U_(p,"columnHeader"),X_,1,h,"y1",0,1,d,s)),c.rowfooters&&(s=U_(n.footerBand,Jm,null),o=Y_(t,c.rowfooters,f,d,v,U_(p,"rowFooter"),Z_,0,h,"x2",d-1,d,1,s)),c.colfooters&&(s=U_(n.footerBand,Km,null),a=Y_(t,c.colfooters,f,d,d,U_(p,"columnFooter"),Z_,1,h,"y2",y-d,1,d,s)),c.rowtitle&&(u=U_(n.titleAnchor,Jm),l=U_(p,"rowTitle"),l=u===Om?o+l:r-l,s=U_(n.titleBand,Jm,.5),$_(t,c.rowtitle,l,0,g,s)),c.coltitle&&(u=U_(n.titleAnchor,Km),l=U_(p,"columnTitle"),l=u===Om?a+l:i-l,s=U_(n.titleBand,Km,.5),$_(t,c.coltitle,l,1,g,s))}function H_(t,e){return"x1"===e?t.x||0:"y1"===e?t.y||0:"x2"===e?(t.x||0)+(t.width||0):"y2"===e?(t.y||0)+(t.height||0):void 0}function G_(t,e){return t.bounds[e]}function X_(t,e){return Math.floor(Math.min(t,e))}function Z_(t,e){return Math.ceil(Math.max(t,e))}function Y_(t,e,n,r,i,o,a,u,s,l,c,f,h,p){var d,v,m,y,g,b,_,x,w,k=n.length,E=0,S=0;if(!k)return E;for(d=c;d<k;d+=f)n[d]&&(E=a(E,s(n[d],l)));if(!e.length)return E;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),E+=o,v=0,y=e.length;v<y;++v)t.dirty(e[v]),e[v].mark.bounds.clear();for(d=c,v=0,y=e.length;v<y;++v,d+=f){for(g=(b=e[v]).mark.bounds,m=d;m>=0&&null==(_=n[m]);m-=h);u?(x=null==p?_.x:Math.round(_.bounds.x1+p*_.bounds.width()),w=E):(x=E,w=null==p?_.y:Math.round(_.bounds.y1+p*_.bounds.height())),g.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,t.dirty(b),S=a(S,g[l])}return S}function $_(t,e,n,r,i,o){if(e){t.dirty(e);var a=n,u=n;r?a=Math.round(i.x1+o*i.width()):u=Math.round(i.y1+o*i.height()),e.bounds.translate(a-(e.x||0),u-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=a,e.y=u,t.dirty(e)}}function K_(t,e,n,r,i,o,a){var u=function(t,e){var n=t[e]||{};return function(e,r){return null!=n[e]?n[e]:null!=t[e]?t[e]:r}}(n,e),s=function(t,e){var n=-1/0;return t.forEach(function(t){null!=t.offset&&(n=Math.max(n,t.offset))}),n>-1/0?n:e}(t,u("offset",0)),l=u("anchor",Em),c=l===Om?1:l===Sm?.5:0,f={align:Ym,bounds:u("bounds",$m),columns:"vertical"===u("direction")?1:t.length,padding:u("margin",8),center:u("center"),nodirty:!0};switch(e){case ym:f.anchor={x:Math.floor(r.x1)-s,column:Om,y:c*(a||r.height()+2*r.y1),row:l};break;case gm:f.anchor={x:Math.ceil(r.x2)+s,y:c*(a||r.height()+2*r.y1),row:l};break;case mm:f.anchor={y:Math.floor(i.y1)-s,row:Om,x:c*(o||i.width()+2*i.x1),column:l};break;case bm:f.anchor={y:Math.ceil(i.y2)+s,x:c*(o||i.width()+2*i.x1),column:l};break;case _m:f.anchor={x:s,y:s};break;case xm:f.anchor={x:o-s,y:s,column:Om};break;case wm:f.anchor={x:s,y:a-s,row:Om};break;case km:f.anchor={x:o-s,y:a-s,column:Om,row:Om}}return f}function J_(t,e){var n,r,i=e.items[0],o=i.datum,a=i.orient,u=i.bounds,s=i.x,l=i.y;return i._bounds?i._bounds.clear().union(u):i._bounds=u.clone(),u.clear(),function(t,e,n){var r=e.padding,i=r-n.x,o=r-n.y;if(e.datum.title){var a=e.items[1].items[0],u=a.anchor,s=e.titlePadding||0,l=r-a.x,c=r-a.y;switch(a.orient){case ym:i+=Math.ceil(a.bounds.width())+s;break;case gm:case bm:break;default:o+=a.fontSize+s}switch((i||o)&&tx(t,n,i,o),a.orient){case ym:c+=Q_(e,n,a,u,0,1);break;case gm:l+=Q_(e,n,a,Om,1,0)+s,c+=Q_(e,n,a,u,0,1);break;case bm:l+=Q_(e,n,a,u,1,0),c+=Q_(e,n,a,Om,0,0,1)+s;break;default:l+=Q_(e,n,a,u,1,0)}(l||c)&&tx(t,a,l,c),(l=Math.round(a.bounds.x1-r))<0&&(tx(t,n,-l,0),tx(t,a,-l,0))}else(i||o)&&tx(t,n,i,o)}(t,i,i.items[0].items[0]),u=function(t,e){return t.items.forEach(function(t){return e.union(t.bounds)}),e.x1=t.padding,e.y1=t.padding,e}(i,u),n=2*i.padding,r=2*i.padding,u.empty()||(n=Math.ceil(u.width()+n),r=Math.ceil(u.height()+r)),o.type===qm&&function(t){var e=t.reduce(function(t,e){return t[e.column]=Math.max(e.bounds.x2-e.x,t[e.column]||0),t},{});t.forEach(function(t){t.width=e[t.column],t.height=t.bounds.y2-t.y})}(i.items[0].items[0].items[0].items),a!==Xm&&(i.x=s=0,i.y=l=0),i.width=n,i.height=r,$y(u.set(s,l,s+n,l+r),i),i.mark.bounds.clear().union(u),i}function Q_(t,e,n,r,i,o,a){var u="symbol"!==t.datum.type,s=n.datum.vgrad,l=(!u||!o&&s||a?e:e.items[0]).bounds[i?"x2":"y2"]-t.padding,c=s&&o?l:0,f=s&&o?0:l;return Math.round(r===Em?c:r===Om?f:.5*l)}function tx(t,e,n,r){e.x+=n,e.y+=r,e.bounds.translate(n,r),e.mark.bounds.translate(n,r),t.dirty(e)}function ex(t){gd.call(this,null,t)}Object(y.w)(ex,gd).transform=function(t,e){var n=e.dataflow;return t.mark.items.forEach(function(e){t.layout&&W_(n,e,t.layout),function(t,e,n){var r,i,o,a,u,s=e.items,l=Math.max(0,e.width||0),c=Math.max(0,e.height||0),f=(new Qm).set(0,0,l,c),h=f.clone(),p=f.clone(),d=[];for(a=0,u=s.length;a<u;++a)switch((i=s[a]).role){case Tm:(I_(i)?h:p).union(F_(t,i,l,c));break;case jm:r=i;break;case zm:d.push(J_(t,i));break;case Dm:case Pm:case Rm:case Im:case Fm:case Lm:case Nm:case Bm:h.union(i.bounds),p.union(i.bounds);break;default:f.union(i.bounds)}if(d.length){var v={};for(var m in d.forEach(function(t){(o=t.orient||gm)!==Xm&&(v[o]||(v[o]=[])).push(t)}),v){var y=v[m];V_(t,y,K_(y,m,n.legends,h,p,l,c))}d.forEach(function(e){var r=e.bounds;if(r.equals(e._bounds)||(e.bounds=e._bounds,t.dirty(e),e.bounds=r,t.dirty(e)),n.autosize&&n.autosize.type===Vm)switch(e.orient){case ym:case gm:f.add(r.x1,0).add(r.x2,0);break;case mm:case bm:f.add(0,r.y1).add(0,r.y2)}else f.union(r)})}f.union(h).union(p),r&&f.union(function(t,e,n,r,i){var o,a=e.items[0],u=a.frame,s=a.orient,l=a.anchor,c=a.offset,f=a.bounds,h=0,p=s===ym||s===gm?r:n,d=0,v=0;switch(u!==Cm?s===ym?(h=i.y2,p=i.y1):s===gm?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):s===ym&&(h=r,p=0),o=l===Em?h:l===Om?p:(h+p)/2,P_.clear().union(f),s){case mm:d=o,v=i.y1-c;break;case ym:d=i.x1-c,v=o;break;case gm:d=i.x2+c,v=o;break;case bm:d=o,v=i.y2+c;break;default:d=a.x,v=a.y}return f.translate(d-(a.x||0),v-(a.y||0)),z_(a,"x",d)|z_(a,"y",v)&&(a.bounds=P_,t.dirty(a),a.bounds=f,t.dirty(a)),e.bounds.clear().union(f)}(t,r,l,c,f));!function(t,e,n,r){var i=r.autosize||{},o=i.type,a=t._width,u=t._height,s=t.padding();if(t._autosize<1||!o)return;var l=Math.max(0,e.width||0),c=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,e.height||0),p=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.y2-h));i.contains===Um&&(a-=s.left+s.right,u-=s.top+s.bottom);o===Xm?(c=0,p=0,l=a,h=u):o===Vm?(l=Math.max(0,a-c-f),h=Math.max(0,u-p-d)):o===Wm?(l=Math.max(0,a-c-f),u=h+p+d):o===Hm?(a=l+c+f,h=Math.max(0,u-p-d)):o===Gm&&(a=l+c+f,u=h+p+d);t._resizeView(a,u,l,h,[c,p],i.resize)}(t,e,f,n)}(n,e,t)}),t.modified()&&e.reflow(),e};var nx=function(t,e,n){var r=t-e+2*n;return t?r>0?r:1:0},rx="identity",ix="linear",ox="log",ax="pow",ux="sqrt",sx="symlog",lx="time",cx="utc",fx="sequential",hx="diverging",px="quantile",dx="quantize",vx="threshold",mx="ordinal",yx="point",gx="band",bx="bin-ordinal";function _x(t){return t===px}function xx(t){return function(t){return t&&t.startsWith(fx)}(t)||function(t){return t&&t.startsWith(hx)}(t)}function wx(t){return t===ox||t.endsWith("-log")}function kx(t){switch(t){case ix:case ox:case ax:case ux:case sx:case lx:case cx:case fx:return!0}return!1}function Ex(t){return t===bx||t===mx||t===gx||t===yx}function Sx(t){return t===bx||t===px||t===dx||t===vx}var Ox=n(11),Ax={millisecond:Ox.c,second:Ox.g,minute:Ox.d,hour:Ox.b,day:Ox.a,week:Ox.j,month:Ox.f,year:Ox.k},Mx={millisecond:Ox.n,second:Ox.r,minute:Ox.o,hour:Ox.m,day:Ox.l,week:Ox.u,month:Ox.q,year:Ox.v};var Cx=function(t){return function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}},Tx=function(t){return function(e){var n,r,i,o,a=t.range(),u=e[0],s=e[1],l=-1;for(s<u&&(r=u,u=s,s=r),i=0,o=a.length;i<o;++i)a[i]>=u&&a[i]<=s&&(l<0&&(l=i),n=i);if(!(l<0))return u=t.invertExtent(a[l]),s=t.invertExtent(a[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}},jx=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Dx=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return jx(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var Px=Dx(jx),zx=Px.right,Rx=(Px.left,zx);var Ix=Array.prototype,Fx=(Ix.slice,Ix.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}),Lx=Math.sqrt(50),Nx=Math.sqrt(10),Bx=Math.sqrt(2),Ux=function(t,e,n){var r,i,o,a,u=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=qx(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o};function qx(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Lx?10:o>=Nx?5:o>=Bx?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Lx?10:o>=Nx?5:o>=Bx?2:1)}function Vx(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Lx?i*=10:o>=Nx?i*=5:o>=Bx&&(i*=2),e<t?-i:i}var Wx=function(t){return null===t?NaN:+t};function Hx(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wx;if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function Gx(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Xx(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Zx=Symbol("implicit");function Yx(){var t=new Map,e=[],n=[],r=Zx;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==Zx)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;var r=!0,o=!1,a=void 0;try{for(var u,s=n[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var l=u.value,c=l+"";t.has(c)||t.set(c,e.push(l))}}catch(f){o=!0,a=f}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Yx(e,n).unknown(r)},Gx.apply(i,arguments),i}var $x=n(16),Kx=function(t){return function(){return t}},Jx=function(t){return+t},Qx=[0,1];function tw(t){return t}function ew(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Kx(isNaN(e)?NaN:.5)}function nw(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function rw(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=ew(i,r),o=n(a,o)):(r=ew(r,i),o=n(o,a)),function(t){return o(r(t))}}function iw(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=ew(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Rx(t,e,1,r)-1;return o[n](i[n](e))}}function ow(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function aw(){var t,e,n,r,i,o,a=Qx,u=Qx,s=$x.interpolate,l=tw;function c(){return r=Math.min(a.length,u.length)>2?iw:rw,i=o=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),u,s)))(t(l(e)))}return f.invert=function(n){return l(e((o||(o=r(u,a.map(t),$x.interpolateNumber)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,Jx),l===tw||(l=nw(a)),c()):a.slice()},f.range=function(t){return arguments.length?(u=Array.from(t),c()):u.slice()},f.rangeRound=function(t){return u=Array.from(t),s=$x.interpolateRound,c()},f.clamp=function(t){return arguments.length?(l=t?nw(a):tw,f):l!==tw},f.interpolate=function(t){return arguments.length?(s=t,c()):s},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,c()}}function uw(t,e){return aw()(t,e)}var sw=n(20),lw=function(t,e,n,r){var i,o=Vx(t,e,n);switch((r=Object(sw.c)(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Object(sw.e)(o,a))||(r.precision=i),Object(sw.b)(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Object(sw.f)(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Object(sw.d)(o))||(r.precision=i-2*("%"===r.type))}return Object(sw.a)(r)};function cw(t){var e=t.domain;return t.ticks=function(t){var n=e();return Ux(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return lw(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,u=i[o],s=i[a];return s<u&&(r=u,u=s,s=r,r=o,o=a,a=r),(r=qx(u,s,n))>0?r=qx(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=qx(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,n)),r>0?(i[o]=Math.floor(u/r)*r,i[a]=Math.ceil(s/r)*r,e(i)):r<0&&(i[o]=Math.ceil(u*r)/r,i[a]=Math.floor(s*r)/r,e(i)),t},t}var fw=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function hw(t){return Math.log(t)}function pw(t){return Math.exp(t)}function dw(t){return-Math.log(-t)}function vw(t){return-Math.exp(-t)}function mw(t){return isFinite(t)?+("1e"+t):t<0?0:t}function yw(t){return function(e){return-t(-e)}}function gw(t){var e,n,r=t(hw,pw),i=r.domain,o=10;function a(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(o),n=function(t){return 10===t?mw:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(o),i()[0]<0?(e=yw(e),n=yw(n),t(dw,vw)):t(hw,pw),r}return r.base=function(t){return arguments.length?(o=+t,a()):o},r.domain=function(t){return arguments.length?(i(t),a()):i()},r.ticks=function(t){var r,a=i(),u=a[0],s=a[a.length-1];(r=s<u)&&(h=u,u=s,s=h);var l,c,f,h=e(u),p=e(s),d=null==t?10:+t,v=[];if(!(o%1)&&p-h<d){if(h=Math.round(h)-1,p=Math.round(p)+1,u>0){for(;h<p;++h)for(c=1,l=n(h);c<o;++c)if(!((f=l*c)<u)){if(f>s)break;v.push(f)}}else for(;h<p;++h)for(c=o-1,l=n(h);c>=1;--c)if(!((f=l*c)<u)){if(f>s)break;v.push(f)}}else v=Ux(h,p,Math.min(p-h,d)).map(n);return r?v.reverse():v},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!==typeof i&&(i=Object(sw.a)(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=a?i(t):""}},r.nice=function(){return i(fw(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function bw(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function _w(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function xw(t){var e=1,n=t(bw(e),_w(e));return n.constant=function(n){return arguments.length?t(bw(e=+n),_w(e)):e},cw(n)}function ww(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function kw(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Ew(t){return t<0?-t*t:t*t}function Sw(t){var e=t(tw,tw),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(tw,tw):.5===n?t(kw,Ew):t(ww(n),ww(1/n)):n},cw(e)}function Ow(){var t=Sw(aw());return t.copy=function(){return ow(t,Ow()).exponent(t.exponent())},Gx.apply(t,arguments),t}var Aw=1e3,Mw=60*Aw,Cw=60*Mw,Tw=24*Cw,jw=7*Tw,Dw=30*Tw,Pw=365*Tw;function zw(t){return new Date(t)}function Rw(t){return t instanceof Date?+t:+new Date(+t)}function Iw(t,e,n,r,i,o,a,u,s){var l=uw(tw,tw),c=l.invert,f=l.domain,h=s(".%L"),p=s(":%S"),d=s("%I:%M"),v=s("%I %p"),m=s("%a %d"),y=s("%b %d"),g=s("%B"),b=s("%Y"),_=[[a,1,Aw],[a,5,5*Aw],[a,15,15*Aw],[a,30,30*Aw],[o,1,Mw],[o,5,5*Mw],[o,15,15*Mw],[o,30,30*Mw],[i,1,Cw],[i,3,3*Cw],[i,6,6*Cw],[i,12,12*Cw],[r,1,Tw],[r,2,2*Tw],[n,1,jw],[e,1,Dw],[e,3,3*Dw],[t,1,Pw]];function x(u){return(a(u)<u?h:o(u)<u?p:i(u)<u?d:r(u)<u?v:e(u)<u?n(u)<u?m:y:t(u)<u?g:b)(u)}function w(e,n,r,i){if(null==e&&(e=10),"number"===typeof e){var o=Math.abs(r-n)/e,a=Dx(function(t){return t[2]}).right(_,o);a===_.length?(i=Vx(n/Pw,r/Pw,e),e=t):a?(i=(a=_[o/_[a-1][2]<_[a][2]/o?a-1:a])[1],e=a[0]):(i=Math.max(Vx(n,r,e),1),e=u)}return null==i?e:e.every(i)}return l.invert=function(t){return new Date(c(t))},l.domain=function(t){return arguments.length?f(Array.from(t,Rw)):f().map(zw)},l.ticks=function(t,e){var n,r=f(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=w(t,i,o,e))?n.range(i,o+1):[],a?n.reverse():n},l.tickFormat=function(t,e){return null==e?x:s(e)},l.nice=function(t,e){var n=f();return(t=w(t,n[0],n[n.length-1],e))?f(fw(n,t)):l},l.copy=function(){return ow(l,Iw(t,e,n,r,i,o,a,u,s))},l}function Fw(){var t,e,n,r,i,o=0,a=1,u=tw,s=!1;function l(e){return isNaN(e=+e)?i:u(0===n?.5:(e=(r(e)-t)*n,s?Math.max(0,Math.min(1,e)):e))}return l.domain=function(i){var u,s;return arguments.length?(u=i,s=Object(Mc.a)(u,2),o=s[0],a=s[1],t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),l):[o,a]},l.clamp=function(t){return arguments.length?(s=!!t,l):s},l.interpolator=function(t){return arguments.length?(u=t,l):u},l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),l}}function Lw(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Nw(){var t=cw(Fw()(tw));return t.copy=function(){return Lw(t,Nw())},Xx.apply(t,arguments)}function Bw(){var t=Sw(Fw());return t.copy=function(){return Lw(t,Bw()).exponent(t.exponent())},Xx.apply(t,arguments)}function Uw(){var t,e,n,r,i,o,a,u=0,s=.5,l=1,c=tw,f=!1;function h(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(t<e?r:i),c(f?Math.max(0,Math.min(1,t)):t))}return h.domain=function(a){var c,f;return arguments.length?(c=a,f=Object(Mc.a)(c,3),u=f[0],s=f[1],l=f[2],t=o(u=+u),e=o(s=+s),n=o(l=+l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h):[u,s,l]},h.clamp=function(t){return arguments.length?(f=!!t,h):f},h.interpolator=function(t){return arguments.length?(c=t,h):c},h.unknown=function(t){return arguments.length?(a=t,h):a},function(a){return o=a,t=a(u),e=a(s),n=a(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h}}function qw(){var t=Sw(Uw());return t.copy=function(){return Lw(t,qw()).exponent(t.exponent())},Xx.apply(t,arguments)}function Vw(){var t,e,n=Yx().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,u=0,s=0,l=.5;function c(){var n=r().length,c=o[1]<o[0],f=o[c-0],h=o[1-c],p=nx(n,u,s);t=(h-f)/(p||1),a&&(t=Math.floor(t)),f+=(h-f-t*(n-u))*l,e=t*(1-u),a&&(f=Math.round(f),e=Math.round(e));var d=Fx(n).map(function(e){return f+t*e});return i(c?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),c()):r()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],c()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,c()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,c()):a},n.padding=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),u=s,c()):u},n.paddingInner=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},n.paddingOuter=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),c()):s},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c()):l},n.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var n,a,u,s=+t[0],l=+t[1],c=o[1]<o[0],f=c?i().reverse():i(),h=f.length-1;if(s===s&&l===l&&(l<s&&(u=s,s=l,l=u),!(l<f[0]||s>o[1-c])))return n=Math.max(0,zx(f,s)-1),a=s===l?n:zx(f,l)-1,s-f[n]>e+1e-10&&++n,c&&(u=n,n=h-a,a=h-u),n>a?void 0:r().slice(n,a+1)}},n.invert=function(t){var e=n.invertRange([t,t]);return e?e[0]:e},n.copy=function(){return Vw().domain(r()).range(o).round(a).paddingInner(u).paddingOuter(s).align(l)},c()}var Ww=Array.prototype.map;var Hw,Gw=Array.prototype.slice;function Xw(t,e){return arguments.length>1?(Zw[t]=function(t,e){return function(){var n=e();return n.invertRange||(n.invertRange=n.invert?Cx(n):n.invertExtent?Tx(n):void 0),n.type=t,n}}(t,e),this):Zw.hasOwnProperty(t)?Zw[t]:void 0}var Zw=(Hw={},Object(Mt.a)(Hw,rx,function t(e){var n;function r(t){return isNaN(t=+t)?n:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,Jx),r):e.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,Jx):[0,1],cw(r)}),Object(Mt.a)(Hw,ix,function t(){var e=uw(tw,tw);return e.copy=function(){return ow(e,t())},Gx.apply(e,arguments),cw(e)}),Object(Mt.a)(Hw,ox,function t(){var e=gw(aw()).domain([1,10]);return e.copy=function(){return ow(e,t()).base(e.base())},Gx.apply(e,arguments),e}),Object(Mt.a)(Hw,ax,Ow),Object(Mt.a)(Hw,ux,function(){return Ow.apply(null,arguments).exponent(.5)}),Object(Mt.a)(Hw,sx,function t(){var e=xw(aw());return e.copy=function(){return ow(e,t()).constant(e.constant())},Gx.apply(e,arguments)}),Object(Mt.a)(Hw,lx,function(){return Gx.apply(Iw(Ox.k,Ox.f,Ox.j,Ox.a,Ox.b,Ox.d,Ox.g,Ox.c,Gp.a).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),Object(Mt.a)(Hw,cx,function(){return Gx.apply(Iw(Ox.v,Ox.q,Ox.u,Ox.l,Ox.m,Ox.o,Ox.r,Ox.n,Gp.c).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),Object(Mt.a)(Hw,fx,Nw),Object(Mt.a)(Hw,fx+"-"+ix,Nw),Object(Mt.a)(Hw,fx+"-"+ox,function t(){var e=gw(Fw()).domain([1,10]);return e.copy=function(){return Lw(e,t()).base(e.base())},Xx.apply(e,arguments)}),Object(Mt.a)(Hw,fx+"-"+ax,Bw),Object(Mt.a)(Hw,fx+"-"+ux,function(){return Bw.apply(null,arguments).exponent(.5)}),Object(Mt.a)(Hw,fx+"-"+sx,function t(){var e=xw(Fw());return e.copy=function(){return Lw(e,t()).constant(e.constant())},Xx.apply(e,arguments)}),Object(Mt.a)(Hw,hx+"-"+ix,function t(){var e=cw(Uw()(tw));return e.copy=function(){return Lw(e,t())},Xx.apply(e,arguments)}),Object(Mt.a)(Hw,hx+"-"+ox,function t(){var e=gw(Uw()).domain([.1,1,10]);return e.copy=function(){return Lw(e,t()).base(e.base())},Xx.apply(e,arguments)}),Object(Mt.a)(Hw,hx+"-"+ax,qw),Object(Mt.a)(Hw,hx+"-"+ux,function(){return qw.apply(null,arguments).exponent(.5)}),Object(Mt.a)(Hw,hx+"-"+sx,function t(){var e=xw(Uw());return e.copy=function(){return Lw(e,t()).constant(e.constant())},Xx.apply(e,arguments)}),Object(Mt.a)(Hw,px,function t(){var e,n=[],r=[],i=[];function o(){var t=0,e=Math.max(1,r.length);for(i=new Array(e-1);++t<e;)i[t-1]=Hx(n,t/e);return a}function a(t){return isNaN(t=+t)?e:r[Rx(i,t)]}return a.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},a.domain=function(t){if(!arguments.length)return n.slice();n=[];var e=!0,r=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(e=(a=u.next()).done);e=!0){var s=a.value;null==s||isNaN(s=+s)||n.push(s)}}catch(l){r=!0,i=l}finally{try{e||null==u.return||u.return()}finally{if(r)throw i}}return n.sort(jx),o()},a.range=function(t){return arguments.length?(r=Array.from(t),o()):r.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return i.slice()},a.copy=function(){return t().domain(n).range(r).unknown(e)},Gx.apply(a,arguments)}),Object(Mt.a)(Hw,dx,function t(){var e,n=0,r=1,i=1,o=[.5],a=[0,1];function u(t){return t<=t?a[Rx(o,t,0,i)]:e}function s(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*r-(t-i)*n)/(i+1);return u}return u.domain=function(t){var e,i;return arguments.length?(e=t,i=Object(Mc.a)(e,2),n=i[0],r=i[1],n=+n,r=+r,s()):[n,r]},u.range=function(t){return arguments.length?(i=(a=Array.from(t)).length-1,s()):a.slice()},u.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=i?[o[i-1],r]:[o[e-1],o[e]]},u.unknown=function(t){return arguments.length?(e=t,u):u},u.thresholds=function(){return o.slice()},u.copy=function(){return t().domain([n,r]).range(a).unknown(e)},Gx.apply(cw(u),arguments)}),Object(Mt.a)(Hw,vx,function t(){var e,n=[.5],r=[0,1],i=1;function o(t){return t<=t?r[Rx(n,t,0,i)]:e}return o.domain=function(t){return arguments.length?(n=Array.from(t),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},o.unknown=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t().domain(n).range(r).unknown(e)},Gx.apply(o,arguments)}),Object(Mt.a)(Hw,bx,function t(){var e=[],n=[];function r(t){return null==t||t!==t?void 0:n[(Rx(e,t)-1)%n.length]}return r.domain=function(t){return arguments.length?(e=function(t){return Ww.call(t,function(t){return+t})}(t),r):e.slice()},r.range=function(t){return arguments.length?(n=Gw.call(t),r):n.slice()},r.tickFormat=function(t,n){return lw(e[0],Object(y.Q)(e),null==t?10:t,n)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r}),Object(Mt.a)(Hw,mx,Yx),Object(Mt.a)(Hw,gx,Vw),Object(Mt.a)(Hw,yx,function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return t(n())},e}(Vw().paddingInner(1))}),Hw);for(var Yw in Zw)Xw(Yw,Zw[Yw]);var $w=["clamp","base","constant","exponent"];function Kw(t,e,n){return $x.piecewise(Qw(e||"rgb",n),t)}function Jw(t,e,n){var r,i,o,a=n-e;return a&&isFinite(a)?(r=(i=t.type).indexOf("-"),i=r<0?i:i.slice(r+1),o=Xw(i)().domain([e,n]).range([0,1]),$w.forEach(function(e){return t[e]?o[e](t[e]()):0}),o):Object(y.k)(.5)}function Qw(t,e){var n=$x[function(t){return"interpolate"+t.toLowerCase().split("-").map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("")}(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function tk(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function ek(t,e){for(var n in t)rk(n,e(t[n]))}var nk={};function rk(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(nk[t]=e,this):nk[t]}function ik(t,e,n){var r;return Object(y.C)(e)&&null!=n&&(e=Math.min(e,~~(Object(y.S)(t.domain())/n)||1)),Object(y.D)(e)&&(r=e.step,e=e.interval),Object(y.F)(e)&&(e=function(t,e){var n=e===cx?Mx:Ax;return n.hasOwnProperty(t)&&n[t]}(e,t.type)||Object(y.m)("Only time and utc scales accept interval strings."),r&&(e=e.every(r))),e}function ok(t,e,n){var r=t.range(),i=Math.floor(r[0]),o=Math.ceil(Object(y.Q)(r));if(i>o&&(r=o,o=i,i=r),e=e.filter(function(e){return e=t(e),i<=e&&e<=o}),n>0&&e.length>1){for(var a=[e[0],Object(y.Q)(e)];e.length>n&&e.length>=3;)e=e.filter(function(t,e){return!(e%2)});e.length<3&&(e=a)}return e}function ak(t,e){return t.bins?ok(t,function(t,e){var n=t.length,r=~~(n/(e||n));return r<2?t.slice():t.filter(function(t,e){return!(e%r)})}(t.bins,e)):t.ticks?t.ticks(e):t.domain()}function uk(t,e,n,r){var i,o,a=t.tickFormat?t.tickFormat(e,n):n&&r===lx?Object(Gp.a)(n):n?Object(sw.a)(n):String;if(wx(t.type)){var u=function(t){var e=Object(sw.c)(t||",");if(null==e.precision){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1}return n=Object(sw.a)(e),r=Object(sw.a)(".1f")(1)[1],function(t){var e,i,o=n(t),a=o.indexOf(r);if(a<0)return o;for(e=function(t,e){var n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if((n=t.charCodeAt(r))>=48&&n<=57)return r+1}(o,a),i=e<o.length?o.slice(e):"";--e>a;)if("0"!==o[e]){++e;break}return o.slice(0,e)+i}}return Object(sw.a)(e);var n,r}(n);a=t.bins?u:(i=a,o=u,function(t){return i(t)?o(t):""})}return a}function sk(t){gd.call(this,null,t)}function lk(t){gd.call(this,null,t)}function ck(){return Yh({})}function fk(t){return t.exit}function hk(t){gd.call(this,null,t)}ek({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},tk),ek({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},function(t){return Kw(tk(t))}),Object(y.w)(sk,gd).transform=function(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,i=t.scale,o=ik(i,null==t.count?t.values?t.values.length:10:t.count,t.minstep),a=t.format||uk(i,o,t.formatSpecifier,t.formatType),u=t.values?ok(i,t.values,o):ak(i,o);return r&&(n.rem=r),r=u.map(function(t,e){return Yh({index:e/(u.length-1||1),value:t,label:a(t)})}),t.extra&&r.length&&r.push(Yh({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},Object(y.w)(lk,gd).transform=function(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||ck,o=t.key||Xh,a=this.value;return Object(y.y)(r.encode)&&(r.encode=null),a&&(t.modified("key")||e.modified(o))&&Object(y.m)("DataJoin does not support modified key function or fields."),a||(e=e.addAll(),this.value=a=Object(y.r)().test(fk),a.lookup=function(t){return a.get(o(t))}),e.visit(e.ADD,function(t){var e=o(t),n=a.get(e);n?n.exit?(a.empty--,r.add.push(n)):r.mod.push(n):(a.set(e,n=i(t)),r.add.push(n)),n.datum=t,n.exit=!1}),e.visit(e.MOD,function(t){var e=o(t),n=a.get(e);n&&(n.datum=t,r.mod.push(n))}),e.visit(e.REM,function(t){var e=o(t),n=a.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++a.empty)}),e.changed(e.ADD_MOD)&&r.modifies("datum"),t.clean&&a.empty>n.cleanThreshold&&n.runAfter(a.clean),r},Object(y.w)(hk,gd).transform=function(t,e){var n=e.fork(e.ADD_REM),r=t.encoders,i=e.encode;if(Object(y.y)(i)){if(!n.changed()&&!i.every(function(t){return r[t]}))return e.StopPropagation;i=i[0],n.encode=null}var o="enter"===i,a=r.update||y.q,u=r.enter||y.q,s=r.exit||y.q,l=(i&&!o?r[i]:a)||y.q;if(e.changed(e.ADD)&&(e.visit(e.ADD,function(e){u(e,t),a(e,t),l!==y.q&&l!==a&&l(e,t)}),n.modifies(u.output),n.modifies(a.output),l!==y.q&&l!==a&&n.modifies(l.output)),e.changed(e.REM)&&s!==y.q&&(e.visit(e.REM,function(e){s(e,t)}),n.modifies(s.output)),o||l!==y.q){var c=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(c,function(e){var r=u(e,t);(l(e,t)||r)&&n.mod.push(e)}),n.mod.length&&n.modifies(u.output)):e.visit(c,function(e){l(e,t)&&n.mod.push(e)}),n.mod.length&&n.modifies(l.output)}return n.changed()?n:e.StopPropagation};var pk,dk,vk="symbol",mk="discrete",yk=(pk={},Object(Mt.a)(pk,px,"quantiles"),Object(Mt.a)(pk,dx,"thresholds"),Object(Mt.a)(pk,vx,"domain"),pk),gk=(dk={},Object(Mt.a)(dk,px,"quantiles"),Object(Mt.a)(dk,dx,"domain"),dk);function bk(t,e){return t.bins?function(t){var e=t.slice(0,-1);return e.max=Object(y.Q)(t),e}(t.bins):yk[t.type]?function(t){var e=[-1/0].concat(t);return e.max=1/0,e}(t[yk[t.type]]()):ak(t,e)}function _k(t,e,n,r,i){var o=gk[t.type]&&i!==lx?function(t,e){var n,r=t[gk[t.type]](),i=r.length,o=i>1?r[1]-r[0]:r[0];for(n=1;n<i;++n)o=Math.min(o,r[n]-r[n-1]);return lw(0,o,30,e)}(t,r):uk(t,e,r,i);return n===vk&&function(t){return yk[t.type]||t.bins}(t)?function(t){return function(e,n,r){var i=r[n+1]||r.max||1/0,o=xk(e,t),a=xk(i,t);return o&&a?o+"\u2013"+a:a?"< "+a:"\u2265 "+o}}(o):n===mk?function(t){return function(e,n){return n?t(e):null}}(o):function(t){return function(e){return t(e)}}(o)}function xk(t,e){return isFinite(t)?e(t):null}function wk(t){gd.call(this,[],t)}Object(y.w)(wk,gd).transform=function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n,r,i,o,a=e.fork(e.NO_SOURCE|e.NO_FIELDS),u=this.value,s=t.type||vk,l=t.scale,c=ik(l,null==t.count?5:t.count,t.minstep),f=t.format||_k(l,c,s,t.formatSpecifier,t.formatType),h=t.values||bk(l,c);return u&&(a.rem=u),s===vk?(Object(y.B)(i=t.size)?(t.values||0!==l(h[0])||(h=h.slice(1)),o=h.reduce(function(e,n){return Math.max(e,i(n,t))},0)):i=Object(y.k)(o=i||8),u=h.map(function(e,n){return Yh({index:n,label:f(e,n,h),value:e,offset:o,size:i(e,t)})})):"gradient"===s?(n=l.domain(),r=Jw(l,n[0],Object(y.Q)(n)),h.length<3&&!t.values&&n[0]!==Object(y.Q)(n)&&(h=[n[0],Object(y.Q)(n)]),u=h.map(function(t,e){return Yh({index:e,label:f(t,e,h),value:t,perc:r(t)})})):(i=h.length-1,r=function(t){var e=t.domain(),n=e.length-1,r=+e[0],i=+Object(y.Q)(e),o=i-r;if(t.type===vx){var a=n?o/n:.1;o=(i+=a)-(r-=a)}return function(t){return(t-r)/o}}(l),u=h.map(function(t,e){return Yh({index:e,label:f(t,e,h),value:t,perc:e?r(t):0,perc2:e===i?1:r(h[e+1])})})),a.source=u,a.add=u,this.value=u,a};var kk=Object(y.r)({line:Ck,"line-radial":function(t,e,n,r){return Ck(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},arc:Tk,"arc-radial":function(t,e,n,r){return Tk(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},curve:jk,"curve-radial":function(t,e,n,r){return jk(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(t,e,n,r){return"M"+t+","+e+"V"+r+"H"+n},"orthogonal-vertical":function(t,e,n,r){return"M"+t+","+e+"H"+n+"V"+r},"orthogonal-radial":function(t,e,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(n),u=Math.sin(n),s=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*i+","+e*o+"A"+e+","+e+" 0 0,"+(s?1:0)+" "+e*a+","+e*u+"L"+r*a+","+r*u},"diagonal-horizontal":function(t,e,n,r){var i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(t,e,n,r){var i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(t,e,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(n),u=Math.sin(n),s=(e+r)/2;return"M"+e*i+","+e*o+"C"+s*i+","+s*o+" "+s*a+","+s*u+" "+r*a+","+r*u}});function Ek(t){return t.source.x}function Sk(t){return t.source.y}function Ok(t){return t.target.x}function Ak(t){return t.target.y}function Mk(t){gd.call(this,{},t)}function Ck(t,e,n,r){return"M"+t+","+e+"L"+n+","+r}function Tk(t,e,n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o)/2;return"M"+t+","+e+"A"+a+","+a+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r}function jk(t,e,n,r){var i=n-t,o=r-e,a=.2*(i+o),u=.2*(o-i);return"M"+t+","+e+"C"+(t+a)+","+(e+u)+" "+(n+u)+","+(r-a)+" "+n+","+r}Mk.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(y.w)(Mk,gd).transform=function(t,e){var n=t.sourceX||Ek,r=t.sourceY||Sk,i=t.targetX||Ok,o=t.targetY||Ak,a=t.as||"path",u=t.orient||"vertical",s=t.shape||"line",l=kk.get(s+"-"+u)||kk.get(s);return l||Object(y.m)("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,function(t){t[a]=l(n(t),r(t),i(t),o(t))}),e.reflow(t.modified()).modifies(a)};var Dk=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var Pk=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Dk(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(Dk);Pk.right,Pk.left;var zk=Array.prototype,Rk=(zk.slice,zk.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);function Ik(t){gd.call(this,null,t)}Ik.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(y.w)(Ik,gd).transform=function(t,e){var n,r,i,o=t.as||["startAngle","endAngle"],a=o[0],u=o[1],s=t.field||y.K,l=t.startAngle||0,c=null!=t.endAngle?t.endAngle:2*Math.PI,f=e.source,h=f.map(s),p=h.length,d=l,v=(c-l)/function(t,e){var n=0;if(void 0===e){var r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;(s=+s)&&(n+=s)}}catch(m){i=!0,o=m}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}else{var l=-1,c=!0,f=!1,h=void 0;try{for(var p,d=t[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var v=p.value;(v=+e(v,++l,t))&&(n+=v)}}catch(m){f=!0,h=m}finally{try{c||null==d.return||d.return()}finally{if(f)throw h}}}return n}(h),m=Rk(p);for(t.sort&&m.sort(function(t,e){return h[t]-h[e]}),n=0;n<p;++n)i=h[m[n]],(r=f[m[n]])[a]=d,r[u]=d+=i*v;return this.value=h,e.reflow(t.modified()).modifies(o)};var Fk=5;function Lk(t){return kx(t)&&t!==fx}var Nk=Object(y.Y)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Bk(t){gd.call(this,null,t),this.modified(!0)}function Uk(t,e,n){wx(t)&&(Math.abs(e.reduce(function(t,e){return t+(e<0?-1:e>0?1:0)},0))!==e.length&&n.warn("Log scale domain includes zero: "+Object(y.U)(e)));return e}function qk(t,e,n){return Object(y.B)(t)&&(e||n)?function(t,e){var n=e[0],r=Object(y.Q)(e)-n;return function(e){return t(n+e*r)}}(t,Vk(e||[0,1],n)):t}function Vk(t,e){return e?t.slice().reverse():t}function Wk(t){gd.call(this,null,t)}Object(y.w)(Bk,gd).transform=function(t,e){var n=e.dataflow,r=this.value,i=function(t){var e,n=t.type,r="";if(n===fx)return fx+"-"+ix;(function(t){var e=t.type;return kx(e)&&e!==lx&&e!==cx&&(t.scheme||t.range&&t.range.length&&t.range.every(y.F))})(t)&&(e=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(null!=t.domainMid):0,r=2===e?fx+"-":3===e?hx+"-":"");return(r+n||ix).toLowerCase()}(t);for(i in r&&i===r.type||(this.value=r=Xw(i)()),t)if(!Nk[i]){if("padding"===i&&Lk(r.type))continue;Object(y.B)(r[i])?r[i](t[i]):n.warn("Unsupported scale property: "+i)}return function(t,e,n){var r=e.round||!1,i=e.range;if(null!=e.rangeStep)i=function(t,e,n){t!==gx&&t!==yx&&Object(y.m)("Only band and point scales support rangeStep.");var r=(null!=e.paddingOuter?e.paddingOuter:e.padding)||0,i=t===yx?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0;return[0,e.rangeStep*nx(n,i,r)]}(t.type,e,n);else if(e.scheme){if(i=function(t,e,n){var r,i,o=e.schemeExtent;Object(y.y)(e.scheme)?i=Kw(e.scheme,e.interpolate,e.interpolateGamma):(r=e.scheme.toLowerCase(),(i=rk(r))||Object(y.m)("Unrecognized scheme name: "+e.scheme));return n=t===vx?n+1:t===bx?n-1:t===px||t===dx?+e.schemeCount||Fk:n,xx(t)?qk(i,o,e.reverse):Object(y.B)(i)?function(t,e){for(var n=new Array(e),r=e+1,i=0;i<e;)n[i]=t(++i/r);return n}(qk(i,o),n):t===mx?i:i.slice(0,n)}(t.type,e,n),Object(y.B)(i))return t.interpolator(i)}else if(i&&xx(t.type))return t.interpolator(Kw(Vk(i,e.reverse),e.interpolate,e.interpolateGamma));i&&e.interpolate&&t.interpolate?t.interpolate(Qw(e.interpolate,e.interpolateGamma)):Object(y.B)(t.round)?t.round(r):Object(y.B)(t.rangeRound)&&t.interpolate(r?$x.interpolateRound:$x.interpolate);i&&t.range(Vk(i,e.reverse))}(r,t,function(t,e,n){var r=e.bins;if(r&&!Object(y.y)(r)){var i=(null==r.start||null==r.stop)&&t.domain(),o=null==r.start?i[0]:r.start,a=null==r.stop?Object(y.Q)(i):r.stop,u=r.step;u||Object(y.m)("Scale bins parameter missing step property."),r=Rk(o,a+u,u)}r?t.bins=r:t.bins&&delete t.bins;t.type===bx&&(r?e.domain||e.domainRaw||(t.domain(r),n=r.length):t.bins=t.domain());return n}(r,t,function(t,e,n){var r=function(t,e,n){return e?(t.domain(Uk(t.type,e,n)),e.length):-1}(t,e.domainRaw,n);if(r>-1)return r;var i,o,a=e.domain,u=t.type,s=e.zero||void 0===e.zero&&function(t){var e=t.type;return!t.bins&&(e===ix||e===ax||e===ux)}(t);if(!a)return 0;Lk(u)&&e.padding&&a[0]!==Object(y.Q)(a)&&(a=function(t,e,n,r,i,o){var a=Math.abs(Object(y.Q)(n)-n[0]),u=a/(a-2*r),s=t===ox?Object(y.gb)(e,null,u):t===ux?Object(y.hb)(e,null,u,.5):t===ax?Object(y.hb)(e,null,u,i||1):t===sx?Object(y.ib)(e,null,u,o||1):Object(y.fb)(e,null,u);return(e=e.slice())[0]=s[0],e[e.length-1]=s[1],e}(u,a,e.range,e.padding,e.exponent,e.constant));(s||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(a=a.slice()).length-1||1,s&&(a[0]>0&&(a[0]=0),a[i]<0&&(a[i]=0)),null!=e.domainMin&&(a[0]=e.domainMin),null!=e.domainMax&&(a[i]=e.domainMax),null!=e.domainMid&&(((o=e.domainMid)<a[0]||o>a[i])&&n.warn("Scale domainMid exceeds domain min or max.",o),a.splice(i,0,o)));t.domain(Uk(u,a,n)),u===mx&&t.unknown(e.domainImplicit?Zx:void 0);e.nice&&t.nice&&t.nice(!0!==e.nice&&ik(t,e.nice)||null);return a.length}(r,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)},Object(y.w)(Wk,gd).transform=function(t,e){var n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(t.sort),this.modified(n),e};var Hk=["y0","y1"];function Gk(t){gd.call(this,null,t)}function Xk(t,e,n,r,i){for(var o,a=(e-t.sum)/2,u=t.length,s=0;s<u;++s)(o=t[s])[r]=a,o[i]=a+=Math.abs(n(o))}function Zk(t,e,n,r,i){for(var o,a=1/t.sum,u=0,s=t.length,l=0,c=0;l<s;++l)(o=t[l])[r]=u,o[i]=u=a*(c+=Math.abs(n(o)))}function Yk(t,e,n,r,i){for(var o,a,u=0,s=0,l=t.length,c=0;c<l;++c)(o=+n(a=t[c]))<0?(a[r]=s,a[i]=s+=o):(a[r]=u,a[i]=u+=o)}Gk.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:Hk}]},Object(y.w)(Gk,gd).transform=function(t,e){var n,r,i,o,a=t.as||Hk,u=a[0],s=a[1],l=t.field||y.K,c="center"===t.offset?Xk:"normalize"===t.offset?Zk:Yk;for(n=function(t,e,n,r){var i,o,a,u,s,l,c,f,h,p=[],d=function(t){return t(s)};if(null==e)p.push(t.slice());else for(i={},o=0,a=t.length;o<a;++o)s=t[o],l=e.map(d),(c=i[l])||(i[l]=c=[],p.push(c)),c.push(s);for(l=0,h=0,u=p.length;l<u;++l){for(c=p[l],o=0,f=0,a=c.length;o<a;++o)f+=Math.abs(r(c[o]));c.sum=f,f>h&&(h=f),n&&c.sort(n)}return p.max=h,p}(e.source,t.groupby,t.sort,l),r=0,i=n.length,o=n.max;r<i;++r)c(n[r],o,l,u,s);return e.reflow(t.modified()).modifies(a)};var $k=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var Kk=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return $k(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}($k);Kk.right,Kk.left;var Jk=function(t,e){var n,r;if(void 0===e){var i=!0,o=!1,a=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;null!=l&&l>=l&&(void 0===n?n=r=l:(n>l&&(n=l),r<l&&(r=l)))}}catch(y){o=!0,a=y}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}else{var c=-1,f=!0,h=!1,p=void 0;try{for(var d,v=t[Symbol.iterator]();!(f=(d=v.next()).done);f=!0){var m=d.value;null!=(m=e(m,++c,t))&&m>=m&&(void 0===n?n=r=m:(n>m&&(n=m),r<m&&(r=m)))}}catch(y){h=!0,p=y}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}return[n,r]};var Qk=Array.prototype;Qk.slice,Qk.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var tE=n(62),eE=["size","smooth"],nE=["x","y","weight","size","cellSize","bandwidth"];function rE(t){gd.call(this,null,t)}rE.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]},Object(y.w)(rE,gd).transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i,o,a=e.fork(e.NO_SOURCE|e.NO_FIELDS),u=t.count||10;return t.values?(n=Object(tE.b)(),r=eE,i=t.values):(n=Object(tE.a)(),r=nE,i=e.materialize(e.SOURCE).source),n.thresholds(t.thresholds||(t.nice?u:(o=u,function(t){for(var e=Jk(t),n=e[0],r=e[1]-n,i=[],a=1;a<=o;++a)i.push(n+r*a/(o+1));return i}))),r.forEach(function(e){null!=t[e]&&n[e](t[e])}),this.value&&(a.rem=this.value),i=i&&i.length?n(i).map(Yh):[],this.value=a.source=a.add=i,a};var iE="Feature",oE="FeatureCollection";function aE(t){gd.call(this,null,t)}aE.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(y.w)(aE,gd).transform=function(t,e){var n,r=this._features,i=this._points,o=t.fields,a=o&&o[0],u=o&&o[1],s=t.geojson,l=e.ADD;n=t.modified()||e.changed(e.REM)||e.modified(Object(y.f)(s))||a&&e.modified(Object(y.f)(a))||u&&e.modified(Object(y.f)(u)),this.value&&!n||(l=e.SOURCE,this._features=r=[],this._points=i=[]),s&&e.visit(l,function(t){r.push(s(t))}),a&&u&&(e.visit(l,function(t){var e=a(t),n=u(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&i.push([e,n])}),r=r.concat({type:iE,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:oE,features:r}};var uE=n(23),sE=Object(uE.r)(),lE=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function cE(t,e){if(!t||"string"!==typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(hE[t]=function(t,e){return function n(){var r=e();return r.type=t,r.path=Object(uE.r)().projection(r),r.copy=r.copy||function(){var t=n();return lE.forEach(function(e){r.hasOwnProperty(e)&&t[e](r[e]())}),t.path.pointRadius(r.path.pointRadius()),t},r}}(t,e),this):hE.hasOwnProperty(t)?hE[t]:null}function fE(t){return t&&t.path||sE}var hE={albers:uE.a,albersusa:uE.b,azimuthalequalarea:uE.d,azimuthalequidistant:uE.e,conicconformal:uE.h,conicequalarea:uE.i,conicequidistant:uE.j,equirectangular:uE.k,gnomonic:uE.l,identity:uE.n,mercator:uE.o,naturalEarth1:uE.p,orthographic:uE.q,stereographic:uE.s,transversemercator:uE.t};for(var pE in hE)cE(pE,hE[pE]);function dE(t){gd.call(this,null,t)}function vE(t){gd.call(this,null,t)}function mE(t){gd.call(this,null,t)}function yE(t){gd.call(this,[],t),this.generator=Object(uE.m)()}function gE(t){gd.call(this,null,t),this.modified(!0)}function bE(t,e,n){Object(y.B)(t[e])&&t[e](n)}dE.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(y.w)(dE,gd).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||y.v,o=t.as||"path",a=n.SOURCE;!r||t.modified()?(this.value=r=fE(t.projection),n.materialize().reflow()):a=i===y.v||e.modified(i.fields)?n.ADD_MOD:n.ADD;var u=function(t,e){var n=t.pointRadius();t.context(null),null!=e&&t.pointRadius(e);return n}(r,t.pointRadius);return n.visit(a,function(t){t[o]=r(i(t))}),r.pointRadius(u),n.modifies(o)},vE.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(y.w)(vE,gd).transform=function(t,e){var n,r=t.projection,i=t.fields[0],o=t.fields[1],a=t.as||["x","y"],u=a[0],s=a[1];function l(t){var e=r([i(t),o(t)]);e?(t[u]=e[0],t[s]=e[1]):(t[u]=void 0,t[s]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,l):(n=e.modified(i.fields)||e.modified(o.fields),e.visit(n?e.ADD_MOD:e.ADD,l)),e.modifies(a)},mE.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(y.w)(mE,gd).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||Object(y.s)("datum"),o=t.as||"shape",a=n.ADD_MOD;return r&&!t.modified()||(this.value=r=function(t,e,n){var r=null==n?function(n){return t(e(n))}:function(r){var i=t.pointRadius(),o=t.pointRadius(n)(e(r));return t.pointRadius(i),o};return r.context=function(e){return t.context(e),r},r}(fE(t.projection),i,t.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,function(t){t[o]=r}),n.modifies(o)},yE.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(y.w)(yE,gd).transform=function(t,e){var n,r=this.value,i=this.generator;if(!r.length||t.modified())for(var o in t)Object(y.B)(i[o])&&i[o](t[o]);return n=i(),r.length?e.mod.push(Jh(r[0],n)):e.add.push(Yh(n)),r[0]=n,e},Object(y.w)(gE,gd).transform=function(t,e){var n=this.value;return!n||t.modified("type")?(this.value=n=function(t){var e=cE((t||"mercator").toLowerCase());e||Object(y.m)("Unrecognized projection type: "+t);return e()}(t.type),lE.forEach(function(e){null!=t[e]&&bE(n,e,t[e])})):lE.forEach(function(e){t.modified(e)&&bE(n,e,t[e])}),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&function(t,e){var n=function(t){return 1===(t=Object(y.h)(t)).length?t[0]:{type:oE,features:t.reduce(function(t,e){return t.concat(function(t){return t.type===oE?t.features:Object(y.h)(t).map(function(t){return t.type===iE?t:{type:iE,geometry:t}})}(e))},[])}}(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)};var _E=n(38),xE=function(t){return function(){return t}},wE=function(){return 1e-6*(Math.random()-.5)};function kE(t){return t.x+t.vx}function EE(t){return t.y+t.vy}function SE(t){return t.index}function OE(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var AE=n(30),ME=n(31);function CE(t){return t.x}function TE(t){return t.y}var jE=10,DE=Math.PI*(3-Math.sqrt(5)),PE=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,u=new Map,s=Object(ME.d)(c),l=Object(AE.dispatch)("tick","end");function c(){f(),l.call("tick",e),n<r&&(s.stop(),l.call("end",e))}function f(r){var s,l,c=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,u.forEach(function(t){t(n)}),s=0;s<c;++s)null==(l=t[s]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return e}function h(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=jE*Math.sqrt(n),o=n*DE;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),h(),e={tick:f,restart:function(){return s.restart(c),e},stop:function(){return s.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),u.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?u.delete(t):u.set(t,p(n)),e):u.get(t)},find:function(e,n,r){var i,o,a,u,s,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=e-(u=t[l]).x)*i+(o=n-u.y)*o)<r&&(s=u,r=a);return s},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}},zE={center:function(t,e){var n;function r(){var r,i,o=n.length,a=0,u=0;for(r=0;r<o;++r)a+=(i=n[r]).x,u+=i.y;for(a=a/o-t,u=u/o-e,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=u}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},collide:function(t){var e,n,r=1,i=1;function o(){for(var t,o,u,s,l,c,f,h=e.length,p=0;p<i;++p)for(o=Object(_E.a)(e,kE,EE).visitAfter(a),t=0;t<h;++t)u=e[t],c=n[u.index],f=c*c,s=u.x+u.vx,l=u.y+u.vy,o.visit(d);function d(t,e,n,i,o){var a=t.data,h=t.r,p=c+h;if(!a)return e>s+p||i<s-p||n>l+p||o<l-p;if(a.index>u.index){var d=s-a.x-a.vx,v=l-a.y-a.vy,m=d*d+v*v;m<p*p&&(0===d&&(m+=(d=wE())*d),0===v&&(m+=(v=wE())*v),m=(p-(m=Math.sqrt(m)))/m*r,u.vx+=(d*=m)*(p=(h*=h)/(f+h)),u.vy+=(v*=m)*p,a.vx-=d*(p=1-p),a.vy-=v*p)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=xE(null==t?1:+t)),o.initialize=function(t){e=t,u()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"===typeof e?e:xE(+e),u(),o):t},o},nbody:function(){var t,e,n,r,i=xE(-30),o=1,a=1/0,u=.81;function s(r){var i,o=t.length,a=Object(_E.a)(t,CE,TE).visitAfter(c);for(n=r,i=0;i<o;++i)e=t[i],a.visit(f)}function l(){if(t){var e,n,o=t.length;for(r=new Array(o),e=0;e<o;++e)n=t[e],r[n.index]=+i(n,e,t)}}function c(t){var e,n,i,o,a,u=0,s=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(u+=e.value,s+=n,i+=n*e.x,o+=n*e.y);t.x=i/s,t.y=o/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{u+=r[e.data.index]}while(e=e.next)}t.value=u}function f(t,i,s,l){if(!t.value)return!0;var c=t.x-e.x,f=t.y-e.y,h=l-i,p=c*c+f*f;if(h*h/u<p)return p<a&&(0===c&&(p+=(c=wE())*c),0===f&&(p+=(f=wE())*f),p<o&&(p=Math.sqrt(o*p)),e.vx+=c*t.value*n/p,e.vy+=f*t.value*n/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===c&&(p+=(c=wE())*c),0===f&&(p+=(f=wE())*f),p<o&&(p=Math.sqrt(o*p)));do{t.data!==e&&(h=r[t.data.index]*n/p,e.vx+=c*h,e.vy+=f*h)}while(t=t.next)}}return s.initialize=function(e){t=e,l()},s.strength=function(t){return arguments.length?(i="function"===typeof t?t:xE(+t),l(),s):i},s.distanceMin=function(t){return arguments.length?(o=t*t,s):Math.sqrt(o)},s.distanceMax=function(t){return arguments.length?(a=t*t,s):Math.sqrt(a)},s.theta=function(t){return arguments.length?(u=t*t,s):Math.sqrt(u)},s},link:function(t){var e,n,r,i,o,a=SE,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},s=xE(30),l=1;function c(r){for(var i=0,a=t.length;i<l;++i)for(var u,s,c,f,h,p,d,v=0;v<a;++v)s=(u=t[v]).source,f=(c=u.target).x+c.vx-s.x-s.vx||wE(),h=c.y+c.vy-s.y-s.vy||wE(),f*=p=((p=Math.sqrt(f*f+h*h))-n[v])/p*r*e[v],h*=p,c.vx-=f*(d=o[v]),c.vy-=h*d,s.vx+=f*(d=1-d),s.vy+=h*d}function f(){if(r){var u,s,l=r.length,c=t.length,f=new Map(r.map(function(t,e){return[a(t,e,r),t]}));for(u=0,i=new Array(l);u<c;++u)(s=t[u]).index=u,"object"!==typeof s.source&&(s.source=OE(f,s.source)),"object"!==typeof s.target&&(s.target=OE(f,s.target)),i[s.source.index]=(i[s.source.index]||0)+1,i[s.target.index]=(i[s.target.index]||0)+1;for(u=0,o=new Array(c);u<c;++u)s=t[u],o[u]=i[s.source.index]/(i[s.source.index]+i[s.target.index]);e=new Array(c),h(),n=new Array(c),p()}}function h(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+s(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){r=t,f()},c.links=function(e){return arguments.length?(t=e,f(),c):t},c.id=function(t){return arguments.length?(a=t,c):a},c.iterations=function(t){return arguments.length?(l=+t,c):l},c.strength=function(t){return arguments.length?(u="function"===typeof t?t:xE(+t),h(),c):u},c.distance=function(t){return arguments.length?(s="function"===typeof t?t:xE(+t),p(),c):s},c},x:function(t){var e,n,r,i=xE(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=xE(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:xE(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"===typeof e?e:xE(+e),a(),o):t},o},y:function(t){var e,n,r,i=xE(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=xE(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:xE(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"===typeof e?e:xE(+e),a(),o):t},o}},RE="forces",IE=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],FE=["static","iterations"],LE=["x","y","vx","vy"];function NE(t){gd.call(this,null,t)}NE.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:LE}]};var BE=Object(y.w)(NE,gd);function UE(t,e,n,r){var i,o,a,u,s=Object(y.h)(e.forces);for(i=0,o=IE.length;i<o;++i)(a=IE[i])!==RE&&e.modified(a)&&t[a](e[a]);for(i=0,o=s.length;i<o;++i)u=RE+i,(a=n||e.modified(RE,i)?VE(s[i]):r&&qE(s[i],r)?t.force(u):null)&&t.force(u,a);for(o=t.numForces||0;i<o;++i)t.force(RE+i,null);return t.numForces=s.length,t}function qE(t,e){var n,r;for(n in t)if(Object(y.B)(r=t[n])&&e.modified(Object(y.f)(r)))return 1;return 0}function VE(t){var e,n;for(n in zE.hasOwnProperty(t.force)||Object(y.m)("Unrecognized force: "+t.force),e=zE[t.force](),t)Object(y.B)(e[n])&&WE(e[n],t[n],t);return e}function WE(t,e,n){t(Object(y.B)(e)?function(t){return e(t,n)}:e)}BE.transform=function(t,e){var n,r,i=this.value,o=e.changed(e.ADD_REM),a=t.modified(IE),u=t.iterations||300;if(i?(o&&(e.modifies("index"),i.nodes(e.source)),(a||e.changed(e.MOD))&&UE(i,t,0,e)):(this.value=i=function(t,e){var n=PE(t),r=!1,i=n.stop,o=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,o()},n.stop=function(){return r=!0,i()},UE(n,e,!0).on("end",function(){r=!0})}(e.source,t),i.on("tick",(n=e.dataflow,r=this,function(){n.touch(r).run()})),t.static||(o=!0,i.tick()),e.modifies("index")),a||o||t.modified(FE)||e.changed()&&t.restart)if(i.alpha(Math.max(i.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/u)),t.static)for(i.stop();--u>=0;)i.tick();else if(i.stopped()&&i.restart(),!o)return e.StopPropagation;return this.finish(t,e)},BE.finish=function(t,e){for(var n,r=e.dataflow,i=this._argops,o=0,a=i.length;o<a;++o)if((n=i[o]).name===RE&&"link"===n.op._argval.force)for(var u,s=n.op._argops,l=0,c=s.length;l<c;++l)if("links"===s[l].name&&(u=s[l].op.source)){r.pulse(u,r.changeset().reflow());break}return e.reflow(t.modified()).modifies(LE)};var HE=function(t,e,n){var r={};return t.each(function(t){var i=t.data;n(i)&&(r[e(i)]=t)}),t.lookup=r,t},GE=n(26);function XE(t){gd.call(this,null,t)}function ZE(t){return t.values}function YE(){var t,e=[];return t={entries:function(t){return function t(n,r){if(++r>e.length)return n;var i,o=[];for(i in n)o.push({key:i,values:t(n[i],r)});return o}(function t(n,r){if(r>=e.length)return n;for(var i,o,a,u=-1,s=n.length,l=e[r++],c={},f={};++u<s;)(a=c[i=l(o=n[u])+""])?a.push(o):c[i]=[o];for(i in c)f[i]=t(c[i],r);return f}(t,0),0)},key:function(n){return e.push(n),t}}}function $E(t){gd.call(this,null,t)}function KE(t,e){return t.parent===e.parent?1:2}XE.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},Object(y.w)(XE,gd).transform=function(t,e){e.source||Object(y.m)("Nest transform requires an upstream data source.");var n=t.generate,r=t.modified(),i=e.clone(),o=this.value;return(!o||r||e.changed())&&(o&&o.each(function(t){t.children&&Gh(t.data)&&i.rem.push(t.data)}),this.value=o=Object(GE.b)({values:Object(y.h)(t.keys).reduce(function(t,e){return t.key(e),t},YE()).entries(i.source)},ZE),n&&o.each(function(t){t.children&&(t=Yh(t.data),i.add.push(t),i.source.push(t))}),HE(o,Xh,Xh)),i.source.root=o,i},Object(y.w)($E,gd).transform=function(t,e){e.source&&e.source.root||Object(y.m)(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(t.method),r=this.fields,i=e.source.root,o=t.as||r;t.field&&i.sum(t.field),t.sort&&i.sort(t.sort),function(t,e,n){for(var r,i=0,o=e.length;i<o;++i)(r=e[i])in n&&t[r](n[r])}(n,this.params,t),n.separation&&n.separation(!1!==t.separation?KE:y.K);try{this.value=n(i)}catch(a){Object(y.m)(a)}return i.each(function(t){!function(t,e,n){for(var r=t.data,i=0,o=e.length-1;i<o;++i)r[n[i]]=t[e[i]];r[n[o]]=t.children?t.children.length:0}(t,r,o)}),e.reflow(t.modified()).modifies(o).modifies("leaf")};var JE=["x","y","r","depth","children"];function QE(t){$E.call(this,t)}QE.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:JE.length,default:JE}]};var tS=Object(y.w)(QE,$E);tS.layout=GE.c,tS.params=["size","padding"],tS.fields=JE;var eS=["x0","y0","x1","y1","depth","children"];function nS(t){$E.call(this,t)}nS.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:eS.length,default:eS}]};var rS=Object(y.w)(nS,$E);function iS(t){gd.call(this,null,t)}rS.layout=GE.d,rS.params=["size","round","padding"],rS.fields=eS,iS.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(y.w)(iS,gd).transform=function(t,e){e.source||Object(y.m)("Stratify transform requires an upstream data source.");var n=this.value,r=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),o=!this.value||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?HE(Object(GE.e)().id(t.key).parentId(t.parentKey)(i.source),t.key,y.bb):HE(Object(GE.e)()([{}]),t.key,t.key)),i.source.root=this.value=n,i};var oS={tidy:GE.f,cluster:GE.a},aS=["x","y","depth","children"];function uS(t){$E.call(this,t)}uS.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:aS.length,default:aS}]};var sS=Object(y.w)(uS,$E);function lS(t){gd.call(this,[],t)}sS.layout=function(t){var e=t||"tidy";if(oS.hasOwnProperty(e))return oS[e]();Object(y.m)("Unrecognized Tree layout method: "+e)},sS.params=["size","nodeSize"],sS.fields=aS,lS.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(y.w)(lS,gd).transform=function(t,e){var n=this.value,r=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),o={};return r||Object(y.m)("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=n,e.visit(e.SOURCE,function(t){o[Xh(t)]=1}),r.each(function(t){var e=t.data,n=t.parent&&t.parent.data;n&&o[Xh(e)]&&o[Xh(n)]&&i.add.push(Yh({source:n,target:e}))}),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,function(t){o[Xh(t)]=1}),n.forEach(function(t){(o[Xh(t.source)]||o[Xh(t.target)])&&i.mod.push(t)})),i};var cS={binary:GE.h,dice:GE.i,slice:GE.k,slicedice:GE.l,squarify:GE.m,resquarify:GE.j},fS=["x0","y0","x1","y1","depth","children"];function hS(t){$E.call(this,t)}hS.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fS.length,default:fS}]};var pS=Object(y.w)(hS,$E);pS.layout=function(){var t=Object(GE.g)();return t.ratio=function(e){var n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=function(e){cS.hasOwnProperty(e)?t.tile(cS[e]):Object(y.m)("Unrecognized Treemap layout method: "+e)},t},pS.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],pS.fields=fS;var dS=n(78);function vS(t){gd.call(this,null,t)}vS.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var mS=Object(y.w)(vS,gd),yS=[[-1e5,-1e5],[1e5,1e5]];mS.transform=function(t,e){var n,r,i,o,a=t.as||"path",u=e.source;for(n=Object(dS.a)().x(t.x).y(t.y),t.size?n.size(t.size):n.extent(t.extent||yS),this.value=n=n(u),r=n.polygons(),i=0,o=u.length;i<o;++i)u[i][a]=r[i]?"M"+r[i].join("L")+"Z":null;return e.reflow(t.modified()).modifies(a)};var gS=Math.PI/180,bS=64,_S=2048,xS=function(){var t,e,n,r,i,o,a,u=[256,256],s=SS,l=[],c=Math.random,f={};function h(t,e,n){for(var r,i,o,a,l,f=e.x,h=e.y,p=Math.sqrt(u[0]*u[0]+u[1]*u[1]),d=s(u),v=c()<.5?1:-1,m=-v;(r=d(m+=v))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=p));)if(e.x=f+i,e.y=h+o,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>u[0]||e.y+e.y1>u[1])&&(!n||!kS(e,t,u[0]))&&(!n||(l=n,(a=e).x+a.x1>l[0].x&&a.x+a.x0<l[1].x&&a.y+a.y1>l[0].y&&a.y+a.y0<l[1].y))){for(var y,g=e.sprite,b=e.width>>5,_=u[0]>>5,x=e.x-(b<<4),w=127&x,k=32-w,E=e.y1-e.y0,S=(e.y+e.y0)*_+(x>>5),O=0;O<E;O++){y=0;for(var A=0;A<=b;A++)t[S+A]|=y<<k|(A<b?(y=g[O*b+A])>>>w:0);S+=_}return e.sprite=null,!0}return!1}return f.layout=function(){for(var s=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(bS<<5)/e,t.height=_S/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(iy()),f=function(t){var e=[],n=-1;for(;++n<t;)e[n]=0;return e}((u[0]>>5)*u[1]),p=null,d=l.length,v=-1,m=[],y=l.map(function(u){return{text:t(u),font:e(u),style:r(u),weight:i(u),rotate:o(u),size:~~n(u),padding:a(u),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:u}}).sort(function(t,e){return e.size-t.size});++v<d;){var g=y[v];g.x=u[0]*(c()+.5)>>1,g.y=u[1]*(c()+.5)>>1,wS(s,g,y,v),g.hasText&&h(f,g,p)&&(m.push(g),p?ES(p,g):p=[{x:g.x+g.x0,y:g.y+g.y0},{x:g.x+g.x1,y:g.y+g.y1}],g.x-=u[0]>>1,g.y-=u[1]>>1)}return m},f.words=function(t){return arguments.length?(l=t,f):l},f.size=function(t){return arguments.length?(u=[+t[0],+t[1]],f):u},f.font=function(t){return arguments.length?(e=OS(t),f):e},f.fontStyle=function(t){return arguments.length?(r=OS(t),f):r},f.fontWeight=function(t){return arguments.length?(i=OS(t),f):i},f.rotate=function(t){return arguments.length?(o=OS(t),f):o},f.text=function(e){return arguments.length?(t=OS(e),f):t},f.spiral=function(t){return arguments.length?(s=AS[t]||t,f):s},f.fontSize=function(t){return arguments.length?(n=OS(t),f):n},f.padding=function(t){return arguments.length?(a=OS(t),f):a},f.random=function(t){return arguments.length?(c=t,f):c},f};function wS(t,e,n,r){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,(bS<<5)/o,_S/o);var a,u,s,l,c,f=0,h=0,p=0,d=n.length;for(--r;++r<d;){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font,a=i.measureText(e.text+"m").width*o,s=e.size<<1,e.rotate){var v=Math.sin(e.rotate*gS),m=Math.cos(e.rotate*gS),y=a*m,g=a*v,b=s*m,_=s*v;a=Math.max(Math.abs(y+_),Math.abs(y-_))+31>>5<<5,s=~~Math.max(Math.abs(g+b),Math.abs(g-b))}else a=a+31>>5<<5;if(s>p&&(p=s),f+a>=bS<<5&&(f=0,h+=p,p=0),h+s>=_S)break;i.translate((f+(a>>1))/o,(h+(s>>1))/o),e.rotate&&i.rotate(e.rotate*gS),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=a,e.height=s,e.xoff=f,e.yoff=h,e.x1=a>>1,e.y1=s>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,f+=a}for(var x=i.getImageData(0,0,(bS<<5)/o,_S/o).data,w=[];--r>=0;)if((e=n[r]).hasText){for(u=(a=e.width)>>5,s=e.y1-e.y0,l=0;l<s*u;l++)w[l]=0;if(null==(f=e.xoff))return;h=e.yoff;var k=0,E=-1;for(c=0;c<s;c++){for(l=0;l<a;l++){var S=u*c+(l>>5),O=x[(h+c)*(bS<<5)+(f+l)<<2]?1<<31-l%32:0;w[S]|=O,k|=O}k?E=c:(e.y0++,s--,c--,h++)}e.y1=e.y0+E,e.sprite=w.slice(0,(e.y1-e.y0)*u)}}}function kS(t,e,n){n>>=5;for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),u=127&a,s=32-u,l=t.y1-t.y0,c=(t.y+t.y0)*n+(a>>5),f=0;f<l;f++){r=0;for(var h=0;h<=o;h++)if((r<<s|(h<o?(r=i[f*o+h])>>>u:0))&e[c+h])return!0;c+=n}return!1}function ES(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function SS(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function OS(t){return"function"===typeof t?t:function(){return t}}var AS={archimedean:SS,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}},MS=["x","y","font","fontSize","fontStyle","fontWeight","angle"],CS=["text","font","rotate","fontSize","fontStyle","fontWeight"];function TS(t){gd.call(this,xS(),t)}function jS(t){return new Uint32Array(t)}function DS(t,e,n){var r=(e<257?function(t){return new Uint8Array(t)}:e<65537?function(t){return new Uint16Array(t)}:jS)(t);return n&&r.set(n),r}TS.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:MS}]},Object(y.w)(TS,gd).transform=function(t,e){!t.size||t.size[0]&&t.size[1]||Object(y.m)("Wordcloud size dimensions must be non-zero.");var n=t.modified();if(n||e.changed(e.ADD_REM)||CS.some(function(n){var r=t[n];return Object(y.B)(r)&&e.modified(r.fields)})){var r,i=e.materialize(e.SOURCE).source,o=this.value,a=t.as||MS,u=t.fontSize||14;if(Object(y.B)(u)?r=t.fontSizeRange:u=Object(y.k)(u),r){var s=u,l=Xw("sqrt")().domain(function(t,e){for(var n,r=1/0,i=-1/0,o=0,a=e.length;o<a;++o)(n=t(e[o]))<r&&(r=n),n>i&&(i=n);return[r,i]}(s,i)).range(r);u=function(t){return l(s(t))}}i.forEach(function(t){t[a[0]]=NaN,t[a[1]]=NaN,t[a[3]]=0});for(var c,f,h=o.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(u).random(Dd).layout(),p=o.size(),d=p[0]>>1,v=p[1]>>1,m=0,g=h.length;m<g;++m)(f=(c=h[m]).datum)[a[0]]=c.x+d,f[a[1]]=c.y+v,f[a[2]]=c.font,f[a[3]]=c.size,f[a[4]]=c.style,f[a[5]]=c.weight,f[a[6]]=c.rotate;return e.reflow(n).modifies(a)}};var PS=function(t,e,n){var r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,e){var n,i=this.bisect(this.range,t.value),o=t.index,a=i[0],u=i[1],s=o.length;for(n=0;n<a;++n)e[o[n]]|=r;for(n=u;n<s;++n)e[o[n]]|=r;return this}}},zS=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var RS=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return zS(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(zS),IS=RS.right,FS=RS.left;var LS=Array.prototype;LS.slice,LS.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var NS=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r};function BS(){var t=jS(0),e=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];var a,u,s,l,c,f=n,h=i.length,p=Array(h),d=jS(h);for(s=0;s<h;++s)p[s]=r(i[s]),d[s]=s;if(c=d,(l=p).sort.call(c,function(t,e){var n=l[t],r=l[e];return n<r?-1:n>r?1:0}),p=NS(l,c),f)a=e,u=t,e=Array(f+h),t=jS(f+h),function(t,e,n,r,i,o,a,u,s){var l,c=0,f=0;for(l=0;c<r&&f<a;++l)e[c]<i[f]?(u[l]=e[c],s[l]=n[c++]):(u[l]=i[f],s[l]=o[f++]+t);for(;c<r;++c,++l)u[l]=e[c],s[l]=n[c];for(;f<a;++f,++l)u[l]=i[f],s[l]=o[f]+t}(o,a,u,f,p,d,h,e,t);else{if(o>0)for(s=0;s<h;++s)d[s]+=o;e=p,t=d}return n=f+h,{index:d,value:p}},remove:function(r,i){var o,a,u,s=n;for(a=0;!i[t[a]]&&a<s;++a);for(u=a;a<s;++a)i[o=t[a]]||(t[u]=o,e[u]=e[a],++u);n=s-r},bisect:function(t,r){var i;return r?i=r.length:(r=e,i=n),[FS(r,t[0],0,i),IS(r,t[1],0,i)]},reindex:function(e){for(var r=0,i=n;r<i;++r)t[r]=e[t[r]]},index:function(){return t},size:function(){return n}}}function US(t){gd.call(this,function(){var t=8,e=[],n=jS(0),r=DS(0,t),i=DS(0,t);return{data:function(){return e},seen:function(){return t=n,r=e.length,n=t.length>=r?t:((i=i||new t.constructor(r)).set(t),i);var t,r,i},add:function(t){for(var n,r=0,i=e.length,o=t.length;r<o;++r)(n=t[r])._index=i++,e.push(n)},remove:function(t,n){var o,a,u,s=e.length,l=Array(s-t),c=e;for(a=0;!n[a]&&a<s;++a)l[a]=e[a],c[a]=a;for(u=a;a<s;++a)o=e[a],n[a]?c[a]=-1:(c[a]=u,r[u]=r[a],i[u]=i[a],l[u]=o,o._index=u++),r[a]=0;return e=l,c},size:function(){return e.length},curr:function(){return r},prev:function(){return i},reset:function(t){i[t]=r[t]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(t,e){r[t]|=e},clear:function(t,e){r[t]&=~e},resize:function(e,n){(e>r.length||n>t)&&(t=Math.max(n,t),r=DS(e,t,r),i=DS(e,t))}}}(),t),this._indices=null,this._dims=null}US.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var qS=Object(y.w)(US,gd);function VS(t){gd.call(this,null,t)}qS.transform=function(t,e){return this._dims?t.modified("fields")||t.fields.some(function(t){return e.modified(t.fields)})?this.reinit(t,e):this.eval(t,e):this.init(t,e)},qS.init=function(t,e){for(var n,r,i=t.fields,o=t.query,a=this._indices={},u=this._dims=[],s=o.length,l=0;l<s;++l)r=a[n=i[l].fname]||(a[n]=BS()),u.push(PS(r,l,o[l]));return this.eval(t,e)},qS.reinit=function(t,e){var n,r,i,o,a,u,s,l,c,f=e.materialize().fork(),h=t.fields,p=t.query,d=this._indices,v=this._dims,m=this.value,y=m.curr(),g=m.prev(),b=m.all(),_=f.rem=f.add,x=f.mod,w=p.length,k={};if(g.set(y),e.rem.length&&(a=this.remove(t,e,f)),e.add.length&&m.add(e.add),e.mod.length)for(u={},s=0,l=(o=e.mod).length;s<l;++s)u[o[s]._index]=1;for(s=0;s<w;++s)c=h[s],(!v[s]||t.modified("fields",s)||e.modified(c.fields))&&((n=k[i=c.fname])||(d[i]=r=BS(),k[i]=n=r.insert(c,e.source,0)),v[s]=PS(r,s,p[s]).onAdd(n,y));for(s=0,l=m.data().length;s<l;++s)a[s]||(g[s]!==y[s]?_.push(s):u[s]&&y[s]!==b&&x.push(s));return m.mask=(1<<w)-1,f},qS.eval=function(t,e){var n=e.materialize().fork(),r=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},qS.insert=function(t,e,n){var r,i,o,a=e.add,u=this.value,s=this._dims,l=this._indices,c=t.fields,f={},h=n.add,p=u.size(),d=p+a.length,v=s.length;u.resize(d,v),u.add(a);var m=u.curr(),y=u.prev(),g=u.all();for(r=0;r<v;++r)o=f[i=c[r].fname]||(f[i]=l[i].insert(c[r],a,p)),s[r].onAdd(o,m);for(;p<d;++p)y[p]=g,m[p]!==g&&h.push(p)},qS.modify=function(t,e){var n,r,i,o=e.mod,a=this.value,u=a.curr(),s=a.all(),l=t.mod;for(n=0,r=l.length;n<r;++n)u[i=l[n]._index]!==s&&o.push(i)},qS.remove=function(t,e,n){var r,i,o,a,u=this._indices,s=this.value,l=s.curr(),c=s.prev(),f=s.all(),h={},p=n.rem,d=e.rem;for(r=0,i=d.length;r<i;++r)h[o=d[r]._index]=1,c[o]=a=l[o],l[o]=f,a!==f&&p.push(o);for(o in u)u[o].remove(i,h);return this.reindex(e,i,h),h},qS.reindex=function(t,e,n){var r=this._indices,i=this.value;t.runAfter(function(){var t=i.remove(e,n);for(var o in r)r[o].reindex(t)})},qS.update=function(t,e,n){var r,i,o=this._dims,a=t.query,u=e.stamp,s=o.length,l=0;for(n.filters=0,i=0;i<s;++i)t.modified("query",i)&&(r=i,++l);if(1===l)l=o[r].one,this.incrementOne(o[r],a[r],n.add,n.rem);else for(i=0,l=0;i<s;++i)t.modified("query",i)&&(l|=o[i].one,this.incrementAll(o[i],a[i],u,n.add),n.rem=n.add);return l},qS.incrementAll=function(t,e,n,r){var i,o,a,u=this.value,s=u.seen(),l=u.curr(),c=u.prev(),f=t.index(),h=t.bisect(t.range),p=t.bisect(e),d=p[0],v=p[1],m=h[0],y=h[1],g=t.one;if(d<m)for(i=d,o=Math.min(m,v);i<o;++i)s[a=f[i]]!==n&&(c[a]=l[a],s[a]=n,r.push(a)),l[a]^=g;else if(d>m)for(i=m,o=Math.min(d,y);i<o;++i)s[a=f[i]]!==n&&(c[a]=l[a],s[a]=n,r.push(a)),l[a]^=g;if(v>y)for(i=Math.max(d,y),o=v;i<o;++i)s[a=f[i]]!==n&&(c[a]=l[a],s[a]=n,r.push(a)),l[a]^=g;else if(v<y)for(i=Math.max(m,v),o=y;i<o;++i)s[a=f[i]]!==n&&(c[a]=l[a],s[a]=n,r.push(a)),l[a]^=g;t.range=e.slice()},qS.incrementOne=function(t,e,n,r){var i,o,a,u=this.value.curr(),s=t.index(),l=t.bisect(t.range),c=t.bisect(e),f=c[0],h=c[1],p=l[0],d=l[1],v=t.one;if(f<p)for(i=f,o=Math.min(p,h);i<o;++i)u[a=s[i]]^=v,n.push(a);else if(f>p)for(i=p,o=Math.min(f,d);i<o;++i)u[a=s[i]]^=v,r.push(a);if(h>d)for(i=Math.max(f,d),o=h;i<o;++i)u[a=s[i]]^=v,n.push(a);else if(h<d)for(i=Math.max(p,h),o=d;i<o;++i)u[a=s[i]]^=v,r.push(a);t.range=e.slice()},VS.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(y.w)(VS,gd).transform=function(t,e){var n=~(t.ignore||0),r=t.filter,i=r.mask;if(0===(i&n))return e.StopPropagation;var o=e.fork(e.ALL),a=r.data(),u=r.curr(),s=r.prev(),l=function(t){return u[t]&n?null:a[t]};return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,function(t){var e=u[t]&n;return!e&&e^s[t]&n?a[t]:null}),o.filter(o.REM,function(t){var e=u[t]&n;return e&&!(e^e^s[t]&n)?a[t]:null})):(o.filter(o.ADD,l),o.filter(o.REM,function(t){return(u[t]&n)===i?a[t]:null})),o.filter(o.SOURCE,function(t){return l(t._index)})};n(148);var WS=function(t){var e=t._signals.cursor;e||(t._signals.cursor=e=t.add({user:"default",item:null})),t.on(t.events("view","mousemove"),e,function(t,n){var r=e.value,i=r?Object(y.F)(r)?r:r.user:"default",o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}}),t.add(null,function(t){var e,n=t.cursor,r=this.value;return Object(y.F)(n)||(r=n.item,n=n.user),e=n&&"default"!==n?n:r||n,"undefined"!==typeof document&&document.body&&(document.body.style.cursor=e),r},{cursor:e})};function HS(t,e){var n=t._runtime.data;return n.hasOwnProperty(e)||Object(y.m)("Unrecognized data set: "+e),n[e]}function GS(t,e){Qh(e)||Object(y.m)("Second argument to changes must be a changeset.");var n=HS(this,t);return n.modified=!0,this.pulse(n.input,e)}function XS(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function ZS(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function YS(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function $S(t){var e=YS(t),n=XS(t),r=ZS(t);t._renderer.background(t._background),t._renderer.resize(n,r,e),t._handler.origin(e),t._resizeListeners.forEach(function(e){try{e(n,r)}catch(i){t.error(i)}})}var KS=function(t,e,n){var r,i,o,a=t._renderer,u=a&&a.canvas();return u&&(o=YS(t),i=e.changedTouches?e.changedTouches[0]:e,(r=wb(i,u))[0]-=o[0],r[1]-=o[1]),e.dataflow=t,e.item=n,e.vega=function(t,e,n){var r=e?"group"===e.mark.marktype?e:e.mark.group:null;function i(t){var n,i=r;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(t){if(!t)return n;Object(y.F)(t)&&(t=i(t));for(var e=n.slice();t;)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:Object(y.k)(t),item:Object(y.k)(e||{}),group:i,xy:o,x:function(t){return o(t)[0]},y:function(t){return o(t)[1]}}}(t,n,r),e};var JS="view",QS="timer",tO="window",eO={trap:!1};function nO(t){return t.item}function rO(t){var e=t.item.mark.source;return e.source||e}function iO(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}var oO=function(t,e,n){var r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r},aO=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var uO=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return aO(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(aO);uO.right,uO.left;var sO=Array.prototype,lO=(sO.slice,sO.map,Math.sqrt(50)),cO=Math.sqrt(10),fO=Math.sqrt(2);function hO(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=lO?i*=10:o>=cO?i*=5:o>=fO&&(i*=2),e<t?-i:i}var pO="vega-bind",dO="vega-bind-name",vO="vega-bind-radio",mO="vega-option-",yO=function(t,e,n){if(e){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(e){e!==t.signal(r.signal)&&t.runAsync(null,function(){i.source=!0,t.signal(r.signal,e)})}},r.debounce&&(i.update=Object(y.l)(r.debounce,i.update))),function(t,e,n,r){var i=oO("div",{class:pO});i.appendChild(oO("span",{class:dO},n.name||n.signal)),e.appendChild(i);var o=gO;switch(n.input){case"checkbox":o=bO;break;case"select":o=_O;break;case"radio":o=xO;break;case"range":o=wO}o(t,i,n,r)}(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,function(){i.source?i.source=!1:i.set(t.signal(r.signal))}),i.active=!0),i}};function gO(t,e,n,r){var i=oO("input");for(var o in n)"signal"!==o&&"element"!==o&&i.setAttribute("input"===o?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",function(){t.update(i.value)}),t.elements=[i],t.set=function(t){i.value=t}}function bO(t,e,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var o=oO("input",i);e.appendChild(o),o.addEventListener("change",function(){t.update(o.checked)}),t.elements=[o],t.set=function(t){o.checked=!!t||null}}function _O(t,e,n,r){var i=oO("select",{name:n.signal});n.options.forEach(function(t){var e={value:t};kO(t,r)&&(e.selected=!0),i.appendChild(oO("option",e,t+""))}),e.appendChild(i),i.addEventListener("change",function(){t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=function(t){for(var e=0,r=n.options.length;e<r;++e)if(kO(n.options[e],t))return void(i.selectedIndex=e)}}function xO(t,e,n,r){var i=oO("span",{class:vO});e.appendChild(i),t.elements=n.options.map(function(e){var o=mO+n.signal+"-"+e,a={id:o,type:"radio",name:n.signal,value:e};kO(e,r)&&(a.checked=!0);var u=oO("input",a);return u.addEventListener("change",function(){t.update(e)}),i.appendChild(u),i.appendChild(oO("label",{for:o},e+"")),u}),t.set=function(e){for(var n=t.elements,r=0,i=n.length;r<i;++r)kO(n[r].value,e)&&(n[r].checked=!0)}}function wO(t,e,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var i=n.min||Math.min(0,+r)||0,o=n.max||Math.max(100,+r)||100,a=n.step||hO(i,o,100),u=oO("input",{type:"range",name:n.signal,min:i,max:o,step:a});u.value=r;var s=oO("label",{},+r);function l(){s.textContent=u.value,t.update(+u.value)}e.appendChild(u),e.appendChild(s),u.addEventListener("input",l),u.addEventListener("change",l),t.elements=[u],t.set=function(t){u.value=t,s.textContent=t}}function kO(t,e){return t===e||t+""===e+""}var EO=function(t,e,n,r,i,o){return(e=e||new r(t.loader())).initialize(n,XS(t),ZS(t),YS(t),i,o).background(t._background)},SO=function(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null};function OO(t,e){if("string"===typeof e){if("undefined"===typeof document)return t.error("DOM document instance not found."),null;if(!(e=document.querySelector(e)))return t.error("Signal bind element not found: "+e),null}if(e)try{e.innerHTML=""}catch(n){e=null,t.error(n)}return e}var AO=function(t,e,n,r){return MO.apply(this,arguments)};function MO(){return(MO=Uh(Nh.a.mark(function t(e,n,r,i){var o,a;return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=d_(n),(a=o&&o.headless)||Object(y.m)("Unrecognized renderer type: "+n),t.next=4,e.runAsync();case 4:return t.abrupt("return",EO(e,null,null,a,r,i).renderAsync(e._scenegraph.root));case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}function CO(){return(CO=Uh(Nh.a.mark(function t(e,n){var r;return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e!==h_.Canvas&&e!==h_.SVG&&e!==h_.PNG&&Object(y.m)("Unrecognized image type: "+e),t.next=3,AO(this,e,n);case 3:return r=t.sent,t.abrupt("return",e===h_.SVG?TO(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png"));case 5:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function TO(t,e){var n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}function jO(){return(jO=Uh(Nh.a.mark(function t(e,n){var r;return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,AO(this,h_.Canvas,e,n);case 2:return r=t.sent,t.abrupt("return",r.canvas());case 4:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function DO(){return(DO=Uh(Nh.a.mark(function t(e){var n;return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,AO(this,h_.SVG,e);case 2:return n=t.sent,t.abrupt("return",n.svg());case 4:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var PO="intersect",zO="union",RO="E",IO="R",FO="R-E",LO="R-LE",NO="R-RE",BO="index:unit";function UO(t,e){for(var n,r,i=e.fields,o=e.values,a=i.length,u=0;u<a;++u)if((r=i[u]).getter=y.s.getter||Object(y.s)(r.field),n=r.getter(t),Object(y.A)(n)&&(n=Object(y.X)(n)),Object(y.A)(o[u])&&(o[u]=Object(y.X)(o[u])),Object(y.A)(o[u][0])&&(o[u]=o[u].map(y.X)),r.type===RO){if(Object(y.y)(o[u])?o[u].indexOf(n)<0:n!==o[u])return!1}else if(r.type===IO){if(!Object(y.x)(n,o[u]))return!1}else if(r.type===NO){if(!Object(y.x)(n,o[u],!0,!1))return!1}else if(r.type===FO){if(!Object(y.x)(n,o[u],!1,!1))return!1}else if(r.type===LO&&!Object(y.x)(n,o[u],!1,!0))return!1;return!0}var qO={E_union:function(t,e){if(!t.length)return e;for(var n=0,r=e.length;n<r;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(function(t){return e.indexOf(t)>=0}):e},R_union:function(t,e){var n=Object(y.X)(e[0]),r=Object(y.X)(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<r&&(t[1]=r),t):[n,r]},R_intersect:function(t,e){var n=Object(y.X)(e[0]),r=Object(y.X)(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?r<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>r&&(t[1]=r),t):[n,r]}},VO=":",WO="@";function HO(t,e,n,r){e[0].type!==ha&&Object(y.m)("First argument to selection functions must be a string literal.");var i=e[0].value,o=e.length>=2&&Object(y.Q)(e).value,a=WO+"unit",u=VO+i;o!==PO||r.hasOwnProperty(a)||(r[a]=n.getData(i).indataRef(n,"unit")),r.hasOwnProperty(u)||(r[u]=n.getData(i).tuplesRef())}var GO=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var XO=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return GO(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}(GO);XO.right,XO.left;var ZO=Array.prototype,YO=(ZO.slice,ZO.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var $O=n(14);function KO(t){var e=this.context.data[t];return e?e.values.value:[]}var JO={};function QO(t,e,n){var r=t+":"+n,i=JO[r];return i&&i[0]===e||(JO[r]=i=[e,e(n)]),i[1]}function tA(t,e){return QO("timeFormat",Gp.a,e)(t)}var eA=new Date(2e3,0,1);function nA(t,e,n){return eA.setMonth(t),eA.setDate(e),tA(eA,n)}function rA(t,e){var n;return Object(y.B)(t)?t:Object(y.F)(t)?(n=e.scales[t])&&n.value:void 0}function iA(t,e){return function(n,r,i){if(n){var o=rA(n,(i||this).context);return o&&o.path[t](r)}return e(r)}}var oA=iA("area",uE.c),aA=iA("bounds",uE.f),uA=iA("centroid",uE.g);function sA(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}function lA(t,e){return t===e||t!==t&&e!==e||!(!Object(y.y)(t)||!Object(y.y)(e)||t.length!==e.length)&&function(t,e){for(var n=0,r=t.length;n<r;++n)if(!lA(t[n],e[n]))return!1;return!0}(t,e)}function cA(t){return function(e){for(var n in t)if(!lA(e[n],t[n]))return!1;return!0}}var fA={};function hA(t){return t.data}function pA(t,e){var n=KO.call(e,t);return n.root&&n.root.lookup||fA}var dA="undefined"!==typeof window&&window||null;var vA=":",mA="@",yA="%";function gA(t,e,n,r){e[0].type!==ha&&Object(y.m)("First argument to data functions must be a string literal.");var i=e[0].value,o=vA+i;r.hasOwnProperty(o)||(r[o]=n.getData(i).tuplesRef())}function bA(t,e,n,r){if(e[0].type===ha)_A(n,r,e[0].value);else if(e[0].type===da)for(t in n.scales)_A(n,r,t)}function _A(t,e,n){var r=yA+n;if(!e.hasOwnProperty(r))try{e[r]=t.scaleRef(n)}catch(i){}}var xA={random:function(){return Dd()},isArray:y.y,isBoolean:y.z,isDate:y.A,isNumber:y.C,isObject:y.D,isRegExp:y.E,isString:y.F,isTuple:Gh,toBoolean:y.V,toDate:y.W,toNumber:y.X,toString:y.Z,flush:y.t,lerp:y.H,merge:function(){var t=[].slice.call(arguments);return t.unshift({}),y.n.apply(null,t)},pad:y.L,peek:y.Q,span:y.S,inrange:y.x,truncate:y.ab,rgb:$O.f,lab:$O.e,hcl:$O.c,hsl:$O.d,sequence:YO,format:function(t,e){return QO("format",sw.a,e)(t)},utcFormat:function(t,e){return QO("utcFormat",Gp.c,e)(t)},utcParse:function(t,e){return QO("utcParse",Gp.d,e)(t)},timeFormat:tA,timeParse:function(t,e){return QO("timeParse",Gp.b,e)(t)},monthFormat:function(t){return nA(t,1,"%B")},monthAbbrevFormat:function(t){return nA(t,1,"%b")},dayFormat:function(t){return nA(0,2+t,"%A")},dayAbbrevFormat:function(t){return nA(0,2+t,"%a")},quarter:y.R,utcquarter:y.cb,warn:function(){return sA(this.context.dataflow,"warn",arguments)},info:function(){return sA(this.context.dataflow,"info",arguments)},debug:function(){return sA(this.context.dataflow,"debug",arguments)},extent:y.o,inScope:function(t){var e=this.context.group,n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n},intersect:function(t,e,n){if(!t)return[];var r=Object(Mc.a)(t,2),i=r[0],o=r[1],a=(new Qm).set(i[0],i[1],o[0],o[1]);return function(t,e,n){var r=[],i=(new Qm).union(e),o=t.marktype;return o?v_(t,i,n,r):"group"===o?m_(t,i,n,r):Object(y.m)("Intersect scene must be mark node or group item.")}(n||this.context.dataflow.scenegraph().root,a,function(t){var e=null;if(t){var n=Object(y.h)(t.marktype),r=Object(y.h)(t.markname);e=function(t){return(!n.length||n.some(function(e){return t.marktype===e}))&&(!r.length||r.some(function(e){return t.name===e}))}}return e}(e))},clampRange:y.i,pinchDistance:function(t){var e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(t){var e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)},screen:function(){return dA?dA.screen:{}},containerSize:function(){var t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]},windowSize:function(){return dA?[dA.innerWidth,dA.innerHeight]:[void 0,void 0]},bandspace:function(t,e,n){return nx(t||0,e||0,n||0)},setdata:function(t,e){var n=this.context.dataflow,r=this.context.data[t].input;return n.pulse(r,n.changeset().remove(y.bb).insert(e)),1},pathShape:function(t){var e=null;return function(n){return n?Oy(n,e=e||vy(t)):t}},panLinear:y.M,panLog:y.N,panPow:y.O,panSymlog:y.P,zoomLinear:y.fb,zoomLog:y.gb,zoomPow:y.hb,zoomSymlog:y.ib,encode:function(t,e,n){if(t){var r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,e))}return void 0!==n?n:t},modify:function(t,e,n,r,i,o){var a,u,s=this.context.dataflow,l=this.context.data[t],c=l.input,f=l.changes,h=s.stamp();if(!1===s._trigger||!(c.value.length||e||r))return 0;if((!f||f.stamp<h)&&(l.changes=f=s.changeset(),f.stamp=h,s.runAfter(function(){l.modified=!0,s.pulse(c,f).run()},!0,1)),n&&(a=!0===n?y.bb:Object(y.y)(n)||Gh(n)?n:cA(n),f.remove(a)),e&&f.insert(e),r&&(a=cA(r),c.value.some(a)?f.remove(a):f.insert(r)),i)for(u in o)f.modify(i,u,o[u]);return 1}},wA=["view","item","group","xy","x","y"],kA="event.vega.",EA="this.",SA={};function OA(t,e,n){return 1===arguments.length?xA[t]:(xA[t]=e,n&&(SA[t]=n),MA&&(MA.functions[t]=EA+t),this)}OA("bandwidth",function(t,e){var n=rA(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0},bA),OA("copy",function(t,e){var n=rA(t,(e||this).context);return n?n.copy():void 0},bA),OA("domain",function(t,e){var n=rA(t,(e||this).context);return n?n.domain():[]},bA),OA("range",function(t,e){var n=rA(t,(e||this).context);return n&&n.range?n.range():[]},bA),OA("invert",function(t,e,n){var r=rA(t,(n||this).context);return r?Object(y.y)(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0},bA),OA("scale",function(t,e,n){var r=rA(t,(n||this).context);return r&&void 0!==e?r(e):void 0},bA),OA("gradient",function(t,e,n,r,i){t=rA(t,(i||this).context);var o=function(t,e){var n,r=[];return n={id:"gradient_"+ey++,x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}}(e,n),a=t.domain(),u=a[0],s=Object(y.Q)(a),l=y.v;return s-u?l=Jw(t,u,s):t=(t.interpolator?Xw("sequential")().interpolator(t.interpolator()):Xw("linear")().interpolate(t.interpolate()).range(t.range())).domain([u=0,s=1]),t.ticks&&(u!==(a=t.ticks(+r||15))[0]&&a.unshift(u),s!==Object(y.Q)(a)&&a.push(s)),a.forEach(function(e){return o.stop(l(e),t(e))}),o},bA),OA("geoArea",oA,bA),OA("geoBounds",aA,bA),OA("geoCentroid",uA,bA),OA("geoShape",function(t,e,n){var r=rA(t,(n||this).context);return function(t){return r?r.path.context(t)(e):""}},bA),OA("indata",function(t,e,n){var r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i},function(t,e,n,r){e[0].type!==ha&&Object(y.m)("First argument to indata must be a string literal."),e[1].type!==ha&&Object(y.m)("Second argument to indata must be a string literal.");var i=e[0].value,o=e[1].value,a=mA+o;r.hasOwnProperty(a)||(r[a]=n.getData(i).indataRef(n,o))}),OA("data",KO,gA),OA("treePath",function(t,e,n){var r=pA(t,this),i=r[e],o=r[n];return i&&o?i.path(o).map(hA):void 0},gA),OA("treeAncestors",function(t,e){var n=pA(t,this)[e];return n?n.ancestors().map(hA):void 0},gA),OA("vlSelectionTest",function(t,e,n){for(var r,i,o,a,u,s=this.context.data[t],l=s?s.values.value:[],c=s?s[BO]&&s[BO].value:void 0,f=n===PO,h=l.length,p=0;p<h;++p)if(r=l[p],c&&f){if(-1===(o=(i=i||{})[a=r.unit]||0))continue;if(u=UO(e,r),i[a]=u?-1:++o,u&&1===c.size)return!0;if(!u&&o===c.get(a).count)return!1}else if(f^(u=UO(e,r)))return u;return h&&f},HO),OA("vlSelectionResolve",function(t,e){for(var n,r,i,o,a,u,s,l,c,f,h,p=this.context.data[t],d=p?p.values.value:[],v={},m={},g=d.length,b=0;b<g;++b)for(o=(n=d[b]).unit,r=n.fields,i=n.values,f=0,h=r.length;f<h;++f)a=r[f],s=(u=v[a.field]||(v[a.field]={}))[o]||(u[o]=[]),m[a.field]=l=a.type.charAt(0),c=qO[l+"_union"],u[o]=c(s,Object(y.h)(i[f]));return e=e||zO,Object.keys(v).forEach(function(t){v[t]=Object.keys(v[t]).map(function(e){return v[t][e]}).reduce(function(n,r){return void 0===n?r:qO[m[t]+"_"+e](n,r)})}),v},HO);var AA={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(t){return"_["+Object(y.U)("$"+t)+"]"},functions:function(t){var e=$u(t);for(var n in wA.forEach(function(t){return e[t]=kA+t}),xA)e[n]=EA+n;return e},constants:Yu,visitors:SA},MA=function(t){var e=(t=t||{}).whitelist?Object(y.Y)(t.whitelist):{},n=t.blacklist?Object(y.Y)(t.blacklist):{},r=t.constants||Yu,i=(t.functions||$u)(f),o=t.globalvar,a=t.fieldvar,u={},s={},l=0,c=Object(y.B)(o)?o:function(t){return o+'["'+t+'"]'};function f(t){if(Object(y.F)(t))return t;var e=h[t.type];return null==e&&Object(y.m)("Unsupported type: "+t.type),e(t)}var h={Literal:function(t){return t.raw},Identifier:function(t){var i=t.name;return l>0?i:n.hasOwnProperty(i)?Object(y.m)("Illegal identifier: "+i):r.hasOwnProperty(i)?r[i]:e.hasOwnProperty(i)?i:(u[i]=1,c(i))},MemberExpression:function(t){var e=!t.computed,n=f(t.object);e&&(l+=1);var r=f(t.property);return n===a&&(s[function(t){var e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}(r)]=1),e&&(l-=1),n+(e?"."+r:"["+r+"]")},CallExpression:function(t){"Identifier"!==t.callee.type&&Object(y.m)("Illegal callee type: "+t.callee.type);var e=t.callee.name,n=t.arguments,r=i.hasOwnProperty(e)&&i[e];return r||Object(y.m)("Unrecognized function: "+e),Object(y.B)(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(t){return"["+t.elements.map(f).join(",")+"]"},BinaryExpression:function(t){return"("+f(t.left)+t.operator+f(t.right)+")"},UnaryExpression:function(t){return"("+t.operator+f(t.argument)+")"},ConditionalExpression:function(t){return"("+f(t.test)+"?"+f(t.consequent)+":"+f(t.alternate)+")"},LogicalExpression:function(t){return"("+f(t.left)+t.operator+f(t.right)+")"},ObjectExpression:function(t){return"{"+t.properties.map(f).join(",")+"}"},Property:function(t){l+=1;var e=f(t.key);return l-=1,e+":"+f(t.value)}};function p(t){var e={code:f(t),globals:Object.keys(u),fields:Object.keys(s)};return u={},s={},e}return p.functions=i,p.constants=r,p}(AA);function CA(t,e,n){";"!==e[e.length-1]&&(e="return("+e+");");var r=Function.apply(null,t.concat(e));return n&&n.functions?r.bind(n.functions):r}function TA(t,e){return CA(["event"],t,e)}function jA(t,e){return CA(["item","_"],t,e)}function DA(t,e,n){var r,i;for(r in n=n||{},t)i=t[r],n[r]=Object(y.y)(i)?i.map(function(t){return PA(t,e,n)}):PA(i,e,n);return n}function PA(t,e,n){if(!t||!Object(y.D)(t))return t;for(var r,i=0,o=zA.length;i<o;++i)if(r=zA[i],t.hasOwnProperty(r.key))return r.parse(t,e,n);return t}var zA=[{key:"$ref",parse:function(t,e){return e.get(t.$ref)||Object(y.m)("Operator not defined: "+t.$ref)}},{key:"$key",parse:function(t,e){var n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=Object(y.G)(t.$key,t.$flat))}},{key:"$expr",parse:function(t,e,n){t.$params&&DA(t.$params,e,n);var r="e:"+t.$expr+"_"+t.$name;return e.fn[r]||(e.fn[r]=Object(y.e)(function(t,e){return CA(["datum","_"],t,e)}(t.$expr,e),t.$fields,t.$name))}},{key:"$field",parse:function(t,e){if(!t.$field)return null;var n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Object(y.s)(t.$field,t.$name))}},{key:"$encode",parse:function(t,e){var n,r,i=t.$encode,o={};for(n in i)r=i[n],o[n]=Object(y.e)(jA(r.$expr,e),r.$fields),o[n].output=r.$output;return o}},{key:"$compare",parse:function(t,e){var n="c:"+t.$compare+"_"+t.$order,r=Object(y.h)(t.$compare).map(function(t){return t&&t.$tupleid?Xh:t});return e.fn[n]||(e.fn[n]=Object(y.j)(r,t.$order))}},{key:"$context",parse:function(t,e){return e}},{key:"$subflow",parse:function(t,e){var n=t.$subflow;return function(t,r,i){var o=LA(n,e.fork()),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(i),a}}},{key:"$tupleid",parse:function(){return Xh}}];function RA(t){return(t+"").toLowerCase()}var IA=function(t,e){"operator"!==RA(t.type)&&t.type?e.transform(t,t.type):e.operator(t,t.update?function(t,e){return CA(["_"],t,e)}(t.update,e):null)};var FA=function(t,e){var n=Object(y.D)(n=t.source)?n.$ref:n,r=e.get(n),i=null,o=t.update,a=void 0;r||Object(y.m)("Source not defined: "+t.source),i=t.target&&t.target.$expr?TA(t.target.$expr,e):e.get(t.target),o&&o.$expr&&(o.$params&&(a=DA(o.$params,e)),o=function(t,e){return CA(["_","event"],t,e)}(o.$expr,e)),e.update(t,r,i,o,a)},LA=function(t,e){var n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),n.forEach(function(t){IA(t,e)}),n.forEach(function(t){!function(t,e){if(t.params){var n=e.get(t.id);n||Object(y.m)("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(DA(t.params,e),t.react,t.initonly))}}(t,e)}),(t.streams||[]).forEach(function(t){!function(t,e){var n,r=null!=t.filter?TA(t.filter,e):void 0,i=null!=t.stream?e.get(t.stream):void 0;t.source?i=e.events(t.source,t.type,r):t.merge&&(i=(n=t.merge.map(e.get.bind(e)))[0].merge.apply(n[0],n.slice(1))),t.between&&(n=t.between.map(e.get.bind(e)),i=i.between(n[0],n[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&Object(y.m)("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)}(t,e)}),(t.updates||[]).forEach(function(t){FA(t,e)}),e.resolve()},NA={skip:!0};function BA(t,e,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function UA(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.functions=t.functions,this.events=t.events,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}BA.prototype=UA.prototype={fork:function(){var t=new UA(this);return(this.subcontext||(this.subcontext=[])).push(t),t},get:function(t){return this.nodes[t]},set:function(t,e){return this.nodes[t]=e},add:function(t,e){var n,r=this,i=r.dataflow;if(r.set(t.id,e),"collect"===RA(t.type)&&(n=t.value)&&(n.$ingest?i.ingest(e,n.$ingest,n.$format):n.$request?i.preload(e,n.$request,n.$format):i.pulse(e,i.changeset().insert(n))),t.root&&(r.root=e),t.parent){var o=r.get(t.parent.$ref);o?(i.connect(o,[e]),e.targets().add(o)):(r.unresolved=r.unresolved||[]).push(function(){o=r.get(t.parent.$ref),i.connect(o,[e]),e.targets().add(o)})}if(t.signal&&(r.signals[t.signal]=e),t.scale&&(r.scales[t.scale]=e),t.data)for(var a in t.data)n=r.data[a]||(r.data[a]={}),t.data[a].forEach(function(t){n[t]=e})},resolve:function(){return(this.unresolved||[]).forEach(function(t){t()}),delete this.unresolved,this},operator:function(t,e){this.add(t,this.dataflow.add(t.value,e))},transform:function(t,e){this.add(t,this.dataflow.add(this.transforms[RA(e)]))},stream:function(t,e){this.set(t.id,e)},update:function(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},getState:function(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach(function(n){var i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)})}if(t.data){var i=n.data={};Object.keys(e.data).forEach(function(n){var r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)})}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map(function(e){return e.getState(t)})),n},setState:function(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach(function(t){n.update(e.signals[t],i[t],NA)}),Object.keys(r||{}).forEach(function(t){n.pulse(e.data[t].input,n.changeset().remove(y.bb).insert(r[t]))}),(t.subcontext||[]).forEach(function(t,n){var r=e.subcontext[n];r&&r.setState(t)})}};var qA=function(t,e,n){return LA(e,function(t,e,n){return new BA(t,e,n)}(t,_d,n||xA))};var VA="width",WA="height",HA="padding",GA={skip:!0};function XA(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===HA?r.left+r.right:0)}function ZA(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===HA?r.top+r.bottom:0)}function YA(t,e){return e.modified&&Object(y.y)(e.input.value)&&t.indexOf("_:vega:_")}function $A(t,e){return!("parent"===t||e instanceof _d.proxy)}var KA=function(t,e,n,r){var i=t.element();i&&i.setAttribute("title",function(t){return null==t?"":Object(y.y)(t)?JA(t):Object(y.D)(t)&&!Object(y.A)(t)?(e=t,Object.keys(e).map(function(t){var n=e[t];return t+": "+(Object(y.y)(n)?JA(n):QA(n))}).join("\n")):t+"";var e}(r))};function JA(t){return"["+t.map(QA).join(", ")+"]"}function QA(t){return Object(y.y)(t)?"[\u2026]":Object(y.D)(t)&&!Object(y.A)(t)?"{\u2026}":t}function tM(t,e){e=e||{},vd.call(this),e.loader&&this.loader(e.loader),e.logger&&this.logger(e.logger),null!=e.logLevel&&this.logLevel(e.logLevel),this._el=null,this._elBind=null,this._renderType=e.renderer||h_.Canvas,this._scenegraph=new db;var n=this._scenegraph.root;this._renderer=null,this._tooltip=e.tooltip||KA,this._redraw=!0,this._handler=(new Cb).scene(n),this._preventDefault=!1,this._timers=[],this._eventListeners=[],this._resizeListeners=[];var r=qA(this,t,e.functions);this._runtime=r,this._signals=r.signals,this._bind=(t.bindings||[]).map(function(t){return{state:null,param:Object(y.n)({},t)}}),r.root&&r.root.set(n),n.source=r.data.root.input,this.pulse(r.data.root.input,this.changeset().insert(n.items)),this._background=e.background||r.background||null,this._eventConfig=function(t){var e=(t=Object(y.n)({},t)).defaults;return e&&(Object(y.y)(e.prevent)&&(e.prevent=Object(y.Y)(e.prevent)),Object(y.y)(e.allow)&&(e.allow=Object(y.Y)(e.allow))),t}(r.eventConfig),this._width=this.width(),this._height=this.height(),this._viewWidth=XA(this,this._width),this._viewHeight=ZA(this,this._height),this._origin=[0,0],this._resize=0,this._autosize=1,function(t){var e=t._signals,n=e[VA],r=e[WA],i=e[HA];function o(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,function(e){t._width=e.size,t._viewWidth=XA(t,e.size),o()},{size:n}),t._resizeHeight=t.add(null,function(e){t._height=e.size,t._viewHeight=ZA(t,e.size),o()},{size:r});var a=t.add(null,o,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}(this),WS(this),e.hover&&this.hover(),e.container&&this.initialize(e.container,e.bind)}var eM=Object(y.w)(tM,vd);function nM(t,e){return t._signals.hasOwnProperty(e)?t._signals[e]:Object(y.m)("Unrecognized signal name: "+Object(y.U)(e))}function rM(t,e){var n=(t._targets||[]).filter(function(t){var n=t._update;return n&&n.handler===e});return n.length?n[0]:null}function iM(t,e,n,r){var i=rM(n,r);return i||((i=SO(this,function(){r(e,n.value)})).handler=r,t.on(n,null,i)),t}function oM(t,e,n){var r=rM(e,n);return r&&e._targets.remove(r),t}eM.evaluate=function(){var t=Uh(Nh.a.mark(function t(e,n,r){return Nh.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vd.prototype.evaluate.call(this,e,n);case 2:if(!this._redraw&&!this._resize){t.next=14;break}if(t.prev=3,!this._renderer){t.next=8;break}return this._resize&&(this._resize=0,$S(this)),t.next=8,this._renderer.renderAsync(this._scenegraph.root);case 8:this._redraw=!1,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),this.error(t.t0);case 14:return r&&qh(this,r),t.abrupt("return",this);case 16:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e,n,r){return t.apply(this,arguments)}}(),eM.dirty=function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},eM.container=function(){return this._el},eM.scenegraph=function(){return this._scenegraph},eM.origin=function(){return this._origin.slice()},eM.signal=function(t,e,n){var r=nM(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},eM.background=function(t){return arguments.length?(this._background=t,this._resize=1,this):this._background},eM.width=function(t){return arguments.length?this.signal("width",t):this.signal("width")},eM.height=function(t){return arguments.length?this.signal("height",t):this.signal("height")},eM.padding=function(t){return arguments.length?this.signal("padding",t):this.signal("padding")},eM.autosize=function(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},eM.renderer=function(t){return arguments.length?(d_(t)||Object(y.m)("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},eM.tooltip=function(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},eM.loader=function(t){return arguments.length?(t!==this._loader&&(vd.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},eM.resize=function(){return this._autosize=1,this.touch(nM(this,"autosize"))},eM._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},eM._resizeView=function(t,e,n,r,i,o){this.runAfter(function(a){var u=0;a._autosize=0,a.width()!==n&&(u=1,a.signal(VA,n,GA),a._resizeWidth.skip(!0)),a.height()!==r&&(u=1,a.signal(WA,r,GA),a._resizeHeight.skip(!0)),a._viewWidth!==t&&(a._resize=1,a._viewWidth=t),a._viewHeight!==e&&(a._resize=1,a._viewHeight=e),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),u&&a.run("enter"),o&&a.runAfter(function(t){return t.resize()})},!1,1)},eM.addEventListener=function(t,e,n){var r=e;return n&&!1===n.trap||((r=SO(this,e)).raw=e),this._handler.on(t,r),this},eM.removeEventListener=function(t,e){for(var n,r,i=this._handler.handlers(t),o=i.length;--o>=0;)if(r=i[o].type,n=i[o].handler,t===r&&(e===n||e===n.raw)){this._handler.off(r,n);break}return this},eM.addResizeListener=function(t){var e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},eM.removeResizeListener=function(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},eM.addSignalListener=function(t,e){return iM(this,t,nM(this,t),e)},eM.removeSignalListener=function(t,e){return oM(this,nM(this,t),e)},eM.addDataListener=function(t,e){return iM(this,t,HS(this,t).values,e)},eM.removeDataListener=function(t,e){return oM(this,HS(this,t).values,e)},eM.preventDefault=function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},eM.timer=function(t,e){this._timers.push(Object(ME.a)(function(e){t({timestamp:Date.now(),elapsed:e})},e))},eM.events=function(t,e,n){var r,i=this,o=new cp(n),a=function(n,r){i.runAsync(null,function(){t===JS&&function(t,e){var n=t._eventConfig.defaults,r=n&&n.prevent,i=n&&n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[e]:i?!i[e]:t.preventDefault()))}(i,e)&&n.preventDefault(),o.receive(KS(i,n,r))})};if(t===QS)i.timer(a,e);else if(t===JS)i.addEventListener(e,a,eO);else if(t===tO?"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&(r=document.querySelectorAll(t)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(e,a);i._eventListeners.push({type:e,sources:r,handler:a})}else i.warn("Can not resolve event source: "+t);return o},eM.finalize=function(){var t,e,n,r=this._tooltip,i=this._timers,o=this._eventListeners;for(t=i.length;--t>=0;)i[t].stop();for(t=o.length;--t>=0;)for(e=(n=o[t]).sources.length;--e>=0;)n.sources[e].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},eM.hover=function(t,e){return e=[e||"update",(t=[t||"hover"])[0]],this.on(this.events("view","mouseover",nO),rO,iO(t)),this.on(this.events("view","mouseout",nO),rO,iO(e)),this},eM.data=function(t){return HS(this,t).values.value},eM.change=GS,eM.insert=function(t,e){return GS.call(this,t,tp().insert(e))},eM.remove=function(t,e){return GS.call(this,t,tp().remove(e))},eM.scale=function(t){var e=this._runtime.scales;return e.hasOwnProperty(t)||Object(y.m)("Unrecognized scale or projection: "+t),e[t].value},eM.initialize=function(t,e){var n,r,i=this,o=i._renderType,a=d_(o);return t=i._el=t?OO(i,t):null,a||i.error("Unrecognized renderer type: "+o),n=a.handler||Cb,r=t?a.renderer:a.headless,i._renderer=r?EO(i,i._renderer,t,r):null,i._handler=function(t,e,n,r){var i=new r(t.loader(),SO(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,YS(t),t);return e&&e.handlers().forEach(function(t){i.on(t.type,t.handler)}),i}(i,i._handler,t,n),i._redraw=!0,t&&(e=e?i._elBind=OO(i,e):t.appendChild(oO("div",{class:"vega-bindings"})),i._bind.forEach(function(t){t.param.element&&(t.element=OO(i,t.param.element))}),i._bind.forEach(function(t){yO(i,t.element||e,t)})),i},eM.toImageURL=function(t,e){return CO.apply(this,arguments)},eM.toCanvas=function(t,e){return jO.apply(this,arguments)},eM.toSVG=function(t){return DO.apply(this,arguments)},eM.getState=function(t){return this._runtime.getState(t||{data:YA,signals:$A,recurse:!0})},eM.setState=function(t){return this.runAsync(null,function(e){e._trigger=!1,e._runtime.setState(t)},function(t){t._trigger=!0}),this};var aM=function(t,e){return t=t||e.autosize,Object(y.D)(t)?t:{type:t||"pad"}},uM=function(t,e){return t=t||e.padding,Object(y.D)(t)?{top:sM(t.top),bottom:sM(t.bottom),left:sM(t.left),right:sM(t.right)}:{top:n=sM(t),bottom:n,left:n,right:n};var n};function sM(t){return+t||0}var lM=["value","update","init","react","bind"];function cM(t,e){Object(y.m)(t+' for "outer" push: '+Object(y.U)(e))}var fM=function(t,e){var n=t.name;if("outer"===t.push)e.signals[n]||cM("No prior signal definition",n),lM.forEach(function(e){void 0!==t[e]&&cM("Invalid property ",e)});else{var r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}},hM=function(t,e,n){var r,i,o={};try{t=Object(y.F)(t)?t:Object(y.U)(t)+"",r=Zu(t)}catch(a){Object(y.m)("Expression parse error: "+t)}return r.visit(function(t){if(t.type===ya){var n=t.callee.name,r=AA.visitors[n];r&&r(n,t.arguments,e,o)}}),(i=MA(r)).globals.forEach(function(t){var n="$"+t;!o.hasOwnProperty(n)&&e.getSignal(t)&&(o[n]=e.signalRef(t))}),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:o}};function pM(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function dM(t,e,n,r){return new pM(t,e,n,r)}function vM(t,e){return dM("operator",t,e)}function mM(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}var yM={$tupleid:1,toString:function(){return":_tupleid_:"}};function gM(t,e){return e?{$field:t,$name:e}:{$field:t}}var bM=gM("key");function _M(t,e){return{$compare:t,$order:e}}var xM="descending";function wM(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}var kM="scope",EM="view";function SM(t){return t&&t.signal}function OM(t){if(SM(t))return!0;if(Object(y.D)(t))for(var e in t)if(OM(t[e]))return!0;return!1}function AM(t,e){return null!=t?t:e}function MM(t){return t&&t.signal||t}var CM="timer";function TM(t,e){return(t.merge?jM:t.stream?DM:t.type?PM:Object(y.m)("Invalid stream specification: "+Object(y.U)(t)))(t,e)}function jM(t,e){var n=zM({merge:t.merge.map(function(t){return TM(t,e)})},t,e);return e.addStream(n).id}function DM(t,e){var n=zM({stream:TM(t.stream,e)},t,e);return e.addStream(n).id}function PM(t,e){var n,r,i;return t.type===CM?(n=e.event(CM,t.throttle),t={between:t.between,filter:t.filter}):n=e.event((i=t.source)===kM?EM:i||EM,t.type),r=zM({stream:n},t,e),1===Object.keys(r).length?n:e.addStream(r).id}function zM(t,e,n){var r=e.between;return r&&(2!==r.length&&Object(y.m)('Stream "between" parameter must have 2 entries: '+Object(y.U)(e)),t.between=[TM(r[0],n),TM(r[1],n)]),r=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(function(t,e,n){var r="event.item";return r+(t&&"*"!==t?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}(e.marktype,e.markname,e.markrole)),e.source===kM&&r.push("inScope(event.item)"),r.length&&(t.filter=hM("("+r.join(")&&(")+")").$expr),null!=(r=e.throttle)&&(t.throttle=+r),null!=(r=e.debounce)&&(t.debounce=+r),e.consume&&(t.consume=!0),t}var RM=function(t,e,n){var r=t.events,i=t.update,o=t.encode,a=[],u={target:n};r||Object(y.m)("Signal update missing events specification."),Object(y.F)(r)&&(r=xs(r,e.isSubscope()?kM:EM)),r=Object(y.h)(r).filter(function(t){return t.signal||t.scale?(a.push(t),0):1}),a.length>1&&(a=[IM(a)]),r.length&&a.push(r.length>1?{merge:r}:r[0]),null!=o&&(i&&Object(y.m)("Signal encode and update are mutually exclusive."),i="encode(item(),"+Object(y.U)(o)+")"),u.update=Object(y.F)(i)?hM(i,e,"var datum=event.item&&event.item.datum;"):null!=i.expr?hM(i.expr,e,"var datum=event.item&&event.item.datum;"):null!=i.value?i.value:null!=i.signal?{$expr:"_.value",$params:{value:e.signalRef(i.signal)}}:Object(y.m)("Invalid signal update specification."),t.force&&(u.options={force:!0}),a.forEach(function(t){e.addUpdate(Object(y.n)(function(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):TM(t,e)}}(t,e),u))})};function IM(t){return{signal:"["+t.map(function(t){return t.scale?'scale("'+t.scale+'")':t.signal})+"]"}}function FM(t){return function(e,n,r){return dM(t,n,e||void 0,r)}}var LM=FM("aggregate"),NM=FM("axisticks"),BM=FM("bound"),UM=FM("collect"),qM=FM("compare"),VM=FM("datajoin"),WM=FM("encode"),HM=FM("expression"),GM=(FM("extent"),FM("facet")),XM=FM("field"),ZM=FM("key"),YM=FM("legendentries"),$M=FM("load"),KM=FM("mark"),JM=FM("multiextent"),QM=FM("multivalues"),tC=FM("overlap"),eC=FM("params"),nC=FM("prefacet"),rC=FM("projection"),iC=FM("proxy"),oC=FM("relay"),aC=FM("render"),uC=FM("scale"),sC=FM("sieve"),lC=FM("sortitems"),cC=FM("viewlayout"),fC=FM("values"),hC=0;function pC(t,e){var n=t.type||"linear";(function(t){switch(t){case rx:case ix:case ox:case ax:case ux:case sx:case lx:case cx:case fx:case px:case dx:case vx:case mx:case yx:case gx:case bx:return!0}return!1})(n)||Object(y.m)("Unrecognized scale type: "+Object(y.U)(n)),e.addScale(t.name,{type:n,domain:void 0})}function dC(t,e){var n,r,i=e.getScale(t.name).params;for(n in i.domain=gC(t.domain,t,e),null!=t.range&&(i.range=function t(e,n,r){var i=e.range,o=n.config.range;if(i.signal)return n.signalRef(i.signal);if(Object(y.F)(i)){if(o&&o.hasOwnProperty(i))return e=Object(y.n)({},e,{range:o[i]}),t(e,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=Ex(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(y.m)("Unrecognized scale range value: "+Object(y.U)(i))}else{if(i.scheme)return r.scheme=Object(y.y)(i.scheme)?mC(i.scheme,n):vC(i.scheme,n),i.extent&&(r.schemeExtent=mC(i.extent,n)),void(i.count&&(r.schemeCount=vC(i.count,n)));if(i.step)return void(r.rangeStep=vC(i.step,n));if(Ex(e.type)&&!Object(y.y)(i))return gC(i,e,n);Object(y.y)(i)||Object(y.m)("Unsupported range type: "+Object(y.U)(i))}return i.map(function(t){return(Object(y.y)(t)?mC:vC)(t,n)})}(t,e,i)),null!=t.interpolate&&function(t,e){e.interpolate=vC(t.type||t),null!=t.gamma&&(e.interpolateGamma=vC(t.gamma))}(t.interpolate,i),null!=t.nice&&(i.nice=(r=t.nice,Object(y.D)(r)?{interval:vC(r.interval),step:vC(r.step)}:vC(r))),null!=t.bins&&(i.bins=function(t,e){return t.signal||Object(y.y)(t)?mC(t,e):e.objectProperty(t)}(t.bins,e)),t)i.hasOwnProperty(n)||"name"===n||(i[n]=vC(t[n],e))}function vC(t,e){return Object(y.D)(t)?t.signal?e.signalRef(t.signal):Object(y.m)("Unsupported object: "+Object(y.U)(t)):t}function mC(t,e){return t.signal?e.signalRef(t.signal):t.map(function(t){return vC(t,e)})}function yC(t){Object(y.m)("Can not find data set: "+Object(y.U)(t))}function gC(t,e,n){if(t)return t.signal?n.signalRef(t.signal):(Object(y.y)(t)?function(t,e,n){return t.map(function(t){return vC(t,n)})}:t.fields?function(t,e,n){var r=t.data,i=t.fields.reduce(function(t,e){return e=Object(y.F)(e)?{data:r,field:e}:Object(y.y)(e)||e.signal?function(t,e){var n="_:vega:_"+hC++,r=UM({});if(Object(y.y)(t))r.value={$ingest:t};else if(t.signal){var i="setdata("+Object(y.U)(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,sC({})]),{data:n,field:"data"}}(e,n):e,t.push(e),t},[]);return(Ex(e.type)?function(t,e,n){var r,i,o,a;return r=n.map(function(t){var n=e.getData(t.data);return n||yC(t.data),n.countsRef(e,t.field)}),i=e.add(LM({groupby:bM,ops:["sum"],fields:[e.fieldRef("count")],as:["count"],pulse:r})),o=e.add(UM({pulse:mM(i)})),a=e.add(fC({field:bM,sort:e.sortRef(bC(t.sort,!0)),pulse:mM(o)})),mM(a)}:_x(e.type)?function(t,e,n){var r=n.map(function(t){var n=e.getData(t.data);return n||yC(t.data),n.domainRef(e,t.field)});return mM(e.add(QM({values:r})))}:function(t,e,n){var r=n.map(function(t){var n=e.getData(t.data);return n||yC(t.data),n.extentRef(e,t.field)});return mM(e.add(JM({extents:r})))})(t,n,i)}:function(t,e,n){var r=n.getData(t.data);r||yC(t.data);return Ex(e.type)?r.valuesRef(n,t.field,bC(t.sort,!1)):_x(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)})(t,e,n);null==e.domainMin&&null==e.domainMax||Object(y.m)("No scale domain defined for domainMin/domainMax to override.")}function bC(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field?Object(y.m)("Multiple domain scales can not sort by field."):e&&t.op&&"count"!==t.op&&Object(y.m)("Multiple domain scales support op count only."):Object(y.m)("No field provided for sort aggregate op: "+t.op):Object(y.D)(t)?t.field="key":t={field:"key"}),t}function _C(t,e,n){return Object(y.y)(t)?t.map(function(t){return _C(t,e,n)}):Object(y.D)(t)?t.signal?n.signalRef(t.signal):"fit"===e?t:Object(y.m)("Unsupported parameter object: "+Object(y.U)(t)):t}var xC="vertical",wC="start",kC="end",EC="value",SC="guide-label",OC="group-title",AC="symbol",MC="gradient",CC="discrete",TC=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],jC={name:1,interactive:1},DC={value:0},PC={value:1},zC=Object(y.Y)(["rule"]),RC=Object(y.Y)(["group","image","rect"]),IC=function(t,e){var n="";return zC[e]?n:(t.x2&&(t.x?(RC[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(RC[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)},FC=function(t,e,n,r){var i=hM(t,e);return i.$fields.forEach(function(t){r[t]=1}),Object(y.n)(n,i.$params),i.$expr},LC=function(t,e,n,r){return function t(e,n,r,i){var o,a,u;if(e.signal)o="datum",u=FC(e.signal,n,r,i);else if(e.group||e.parent){for(a=Math.max(1,e.level||1),o="item";a-- >0;)o+=".mark.group";e.parent?(u=e.parent,o+=".datum"):u=e.group}else e.datum?(o="datum",u=e.datum):Object(y.m)("Invalid field reference: "+Object(y.U)(e));e.signal||(Object(y.F)(u)?(i[u]=1,u=Object(y.T)(u).map(y.U).join("][")):u=t(u,n,r,i));return o+"["+u+"]"}(Object(y.D)(t)?t:{datum:t},e,n,r)};var NC=function(t,e,n,r,i){var o,a,u,s=BC(t.scale,n,r,i);return null!=t.range?(a=s+".range()",e=0===(o=+t.range)?a+"[0]":"($="+a+","+(1===o?"$[$.length-1]":"$[0]+"+o+"*($[$.length-1]-$[0])")+")"):(void 0!==e&&(e=s+"("+e+")"),t.band&&(u=function(t,e){if(!Object(y.F)(t))return-1;var n=e.scaleType(t);return"band"===n||"point"===n?1:0}(t.scale,n))&&(o=(a=s+".bandwidth")+"()"+(1===(o=+t.band)?"":"*"+o),u<0&&(o="("+a+"?"+o+":0)"),e=(e?e+"+":"")+o,t.extra&&(e="(datum.extra?"+s+"(datum.extra.value):"+e+")")),null==e&&(e="0")),e};function BC(t,e,n,r){var i;if(Object(y.F)(t))i=yA+t,n.hasOwnProperty(i)||(n[i]=e.scaleRef(t)),i=Object(y.U)(i);else{for(i in e.scales)n[yA+i]=e.scaleRef(i);i=Object(y.U)(yA)+"+"+(t.signal?"("+FC(t.signal,e,n,r)+")":LC(t,e,n,r))}return"_["+i+"]"}var UC=function(t,e,n,r){return Object(y.D)(t)?"("+qC(null,t,e,n,r)+")":t},qC=function(t,e,n,r,i){if(null!=e.gradient)return function(t,e,n,r){return"this.gradient("+BC(t.gradient,e,n,r)+","+Object(y.U)(t.start)+","+Object(y.U)(t.stop)+","+Object(y.U)(t.count)+")"}(e,n,r,i);var o=e.signal?FC(e.signal,n,r,i):e.color?function(t,e,n,r){function i(t,i,o,a){return"this."+t+"("+[qC(null,i,e,n,r),qC(null,o,e,n,r),qC(null,a,e,n,r)].join(",")+").toString()"}return t.c?i("hcl",t.h,t.c,t.l):t.h||t.s?i("hsl",t.h,t.s,t.l):t.l||t.a?i("lab",t.l,t.a,t.b):t.r||t.g||t.b?i("rgb",t.r,t.g,t.b):null}(e.color,n,r,i):null!=e.field?LC(e.field,n,r,i):void 0!==e.value?Object(y.U)(e.value):void 0;return null!=e.scale&&(o=NC(e,o,n,r,i)),void 0===o&&(o=null),null!=e.exponent&&(o="Math.pow("+o+","+UC(e.exponent,n,r,i)+")"),null!=e.mult&&(o+="*"+UC(e.mult,n,r,i)),null!=e.offset&&(o+="+"+UC(e.offset,n,r,i)),e.round&&(o="Math.round("+o+")"),o},VC=function(t,e,n){return t+"["+Object(y.U)(e)+"]="+n+";"},WC=function(t,e,n,r,i){var o="";return e.forEach(function(e){var a=qC(t,e,n,r,i);o+=e.test?FC(e.test,n,r,i)+"?"+a+":":a}),":"===Object(y.Q)(o)&&(o+="null"),VC("o",t,o)};function HC(t,e,n,r){var i,o,a,u={},s="var o=item,datum=o.datum,$;";for(i in t)o=t[i],Object(y.y)(o)?s+=WC(i,o,r,n,u):(a=qC(i,o,r,n,u),s+=VC("o",i,a));return s+=IC(t,e),{$expr:s+="return 1;",$fields:Object.keys(u),$output:Object.keys(t)}}var GC="mark",XC="frame",ZC="title";function YC(t){return Object(y.D)(t)?Object(y.n)({},t):{value:t}}function $C(t,e,n,r){return null!=n?(Object(y.D)(n)&&!Object(y.y)(n)?t.update[e]=n:t[r||"enter"][e]={value:n},1):0}function KC(t,e,n){for(var r in e)$C(t,r,e[r]);for(var i in n)$C(t,i,n[i],"update")}function JC(t,e,n){for(var r in e)n&&n.hasOwnProperty(r)||(t[r]=Object(y.n)(t[r]||{},e[r]));return t}function QC(t,e,n,r,i,o){var a,u;for(u in(o=o||{}).encoders={$encode:a={}},t=function(t,e,n,r,i){var o,a,u={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null);for(o in a=n===XC?i.group:n===GC?Object(y.n)({},i.mark,i[e]):null)eT(o,t)||("fill"===o||"stroke"===o)&&(eT("fill",t)||eT("stroke",t))||(u[o]=tT(a[o]));return Object(y.h)(r).forEach(function(e){var n=i.style&&i.style[e];for(var r in n)eT(r,t)||(u[r]=tT(n[r]))}),(t=Object(y.n)({},t)).enter=Object(y.n)(u,t.enter),t}(t,e,n,r,i.config))a[u]=HC(t[u],e,o,i);return o}function tT(t){return t&&t.signal?{signal:t.signal}:{value:t}}function eT(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}var nT=function(t,e,n,r,i,o,a){return{type:t,name:a?a.name:void 0,role:e,style:a&&a.style||n,key:r,from:i,interactive:!(!a||!a.interactive),encode:JC(o,a,jC)}};function rT(t,e){var n=function(n){return AM(t[n],e[n])};return n.isVertical=function(n){return xC===AM(t.direction,e.direction||(n?e.symbolDirection:e.gradientDirection))},n.gradientLength=function(){return AM(t.gradientLength,e.gradientLength||e.gradientWidth)},n.gradientThickness=function(){return AM(t.gradientThickness,e.gradientThickness||e.gradientHeight)},n.entryColumns=function(){return AM(t.columns,AM(e.columns,+n.isVertical(!0)))},n}function iT(t,e){var n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function oT(t,e,n){return'item.anchor === "'.concat(wC,'" ? ').concat(t,' : item.anchor === "').concat(kC,'" ? ').concat(e," : ").concat(n)}var aT=oT(Object(y.U)("left"),Object(y.U)("right"),Object(y.U)("center")),uT="group",sT="text",lT=function(t,e,n,r){var i,o,a,u,s,l,c=rT(t,n),f=c.isVertical(),h=c.gradientThickness(),p=c.gradientLength();return f?(a=[0,1],u=[0,0],s=h,l=p):(a=[0,0],u=[1,0],s=p,l=h),KC(i={enter:o={opacity:DC,x:DC,y:DC,width:YC(s),height:YC(l)},update:Object(y.n)({},o,{opacity:PC,fill:{gradient:e,start:a,stop:u}}),exit:{opacity:DC}},{stroke:c("gradientStrokeColor"),strokeWidth:c("gradientStrokeWidth")},{opacity:c("gradientOpacity")}),nT("rect","legend-gradient",null,void 0,void 0,i,r)},cT=function(t,e,n,r,i){var o,a,u,s,l,c,f=rT(t,n),h=f.isVertical(),p=f.gradientThickness(),d=f.gradientLength(),v="";return h?(u="y",l="y2",s="x",c="width",v="1-"):(u="x",l="x2",s="y",c="height"),(a={opacity:DC,fill:{scale:e,field:EC}})[u]={signal:v+"datum.perc",mult:d},a[s]=DC,a[l]={signal:v+"datum.perc2",mult:d},a[c]=YC(p),KC(o={enter:a,update:Object(y.n)({},a,{opacity:PC}),exit:{opacity:DC}},{stroke:f("gradientStrokeColor"),strokeWidth:f("gradientStrokeWidth")},{opacity:f("gradientOpacity")}),nT("rect","legend-band",null,EC,i,o,r)},fT="datum.".concat("perc",'<=0?"').concat("left",'":datum.').concat("perc",'>=1?"').concat("right",'":"').concat("center",'"'),hT="datum.".concat("perc",'<=0?"').concat("bottom",'":datum.').concat("perc",'>=1?"').concat("top",'":"').concat("middle",'"'),pT=function(t,e,n,r){var i,o,a,u,s,l=rT(t,e),c=l.isVertical(),f=YC(l.gradientThickness()),h=l.gradientLength(),p=l("labelOverlap"),d=l("labelSeparation"),v="";return KC(i={enter:o={opacity:DC},update:a={opacity:PC,text:{field:"label"}},exit:{opacity:DC}},{fill:l("labelColor"),fillOpacity:l("labelOpacity"),font:l("labelFont"),fontSize:l("labelFontSize"),fontStyle:l("labelFontStyle"),fontWeight:l("labelFontWeight"),limit:AM(t.labelLimit,e.gradientLabelLimit)}),c?(o.align={value:"left"},o.baseline=a.baseline={signal:hT},u="y",s="x",v="1-"):(o.align=a.align={signal:fT},o.baseline={value:"top"},u="x",s="y"),o[u]=a[u]={signal:v+"datum.perc",mult:h},o[s]=a[s]=f,f.offset=AM(t.labelOffset,e.gradientLabelOffset)||0,t=nT(sT,"legend-label",SC,EC,r,i,n),p&&(t.overlap={separation:d,method:p,order:"datum.index"}),t},dT=function(t,e,n,r,i,o,a,u){return{type:uT,name:n,role:t,style:e,from:r,interactive:i||!1,encode:o,marks:a,layout:u}},vT=function(t,e,n,r,i){var o,a,u,s,l,c,f,h=rT(t,e),p=n.entries,d=!(!p||!p.interactive),v=p?p.name:void 0,m=h("clipHeight"),y=h("symbolOffset"),g={data:"value"},b={},_="".concat(i," ? datum.").concat("offset"," : datum.").concat("size"),x=m?YC(m):{field:"size"},w="datum.".concat("index"),k="max(1, ".concat(i,")");return x.mult=.5,b={enter:o={opacity:DC,x:{signal:_,mult:.5,offset:y},y:x},update:a={opacity:PC,x:o.x,y:o.y},exit:{opacity:DC}},t.fill||KC(b,{fill:e.symbolBaseFillColor,stroke:e.symbolBaseStrokeColor}),KC(b,{fill:h("symbolFillColor"),shape:h("symbolType"),size:h("symbolSize"),stroke:h("symbolStrokeColor"),strokeDash:h("symbolDash"),strokeDashOffset:h("symbolDashOffset"),strokeWidth:h("symbolStrokeWidth")},{opacity:h("symbolOpacity")}),TC.forEach(function(e){t[e]&&(a[e]=o[e]={scale:t[e],field:EC})}),s=nT("symbol","legend-symbol",null,EC,g,b,n.symbols),m&&(s.clip=!0),(u=YC(y)).offset=h("labelOffset"),KC(b={enter:o={opacity:DC,x:{signal:_,offset:u},y:x},update:a={opacity:PC,text:{field:"label"},x:o.x,y:o.y},exit:{opacity:DC}},{align:h("labelAlign"),baseline:h("labelBaseline"),fill:h("labelColor"),fillOpacity:h("labelOpacity"),font:h("labelFont"),fontSize:h("labelFontSize"),fontStyle:h("labelFontStyle"),fontWeight:h("labelFontWeight"),limit:h("labelLimit")}),l=nT(sT,"legend-label",SC,EC,g,b,n.labels),b={enter:{noBound:{value:!m},width:DC,height:m?YC(m):DC,opacity:DC},exit:{opacity:DC},update:a={opacity:PC,row:{signal:null},column:{signal:null}}},h.isVertical(!0)?(c="ceil(item.mark.items.length / ".concat(k,")"),a.row.signal="".concat(w,"%").concat(c),a.column.signal="floor(".concat(w," / ").concat(c,")"),f={field:["row",w]}):(a.row.signal="floor(".concat(w," / ").concat(k,")"),a.column.signal="".concat(w," % ").concat(k),f={field:w}),a.column.signal="".concat(i,"?").concat(a.column.signal,":").concat(w),(t=dT("scope",null,v,r={facet:{data:r,name:"value",groupby:"index"}},d,JC(b,p,jC),[s,l])).sort=f,t};var mT='item.orient === "left"',yT='item.orient === "right"',gT="(".concat(mT," || ").concat(yT,")"),bT="datum.vgrad && ".concat(gT),_T=oT('"top"','"bottom"','"middle"'),xT=oT('"right"','"left"','"center"'),wT="datum.vgrad && ".concat(yT," ? (").concat(xT,") : (").concat(gT," && !(datum.vgrad && ").concat(mT,')) ? "left" : ').concat(aT),kT="item._anchor || (".concat(gT,' ? "middle" : "start")'),ET="".concat(bT," ? (").concat(mT," ? -90 : 90) : 0"),ST="".concat(gT," ? (datum.vgrad ? (").concat(yT,' ? "bottom" : "top") : ').concat(_T,') : "top"'),OT=function(t,e){var n;return Object(y.D)(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+AT(t.path)+")":t.sphere&&(n="geoShape("+AT(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t};function AT(t){return Object(y.D)(t)&&t.signal?t.signal:Object(y.U)(t)}var MT=function(t){var e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")?t.type===uT?"scope":e||GC:e},CT=function(t){return{marktype:t.type,name:t.name||void 0,role:t.role||MT(t),zindex:+t.zindex||void 0}},TT=function(t,e){return t&&t.signal?e.signalRef(t.signal):!1!==t},jT=function(t,e){var n=xd(t.type);n||Object(y.m)("Unrecognized transform type: "+Object(y.U)(t.type));var r=dM(n.type.toLowerCase(),null,DT(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r};function DT(t,e,n){var r,i,o,a={};for(i=0,o=t.params.length;i<o;++i)a[(r=t.params[i]).name]=PT(r,e,n);return a}function PT(t,e,n){var r=t.type,i=e[t.name];return"index"===r?function(t,e,n){Object(y.F)(e.from)||Object(y.m)('Lookup "from" parameter must be a string literal.');return n.getData(e.from).lookupRef(n,e.key)}(0,e,n):void 0!==i?"param"===r?function(t,e,n){var r=e[t.name];return t.array?(Object(y.y)(r)||Object(y.m)("Expected an array of sub-parameters. Instead: "+Object(y.U)(r)),r.map(function(e){return RT(t,e,n)})):RT(t,r,n)}(t,e,n):"projection"===r?n.projectionRef(e[t.name]):t.array&&!SM(i)?i.map(function(e){return zT(t,e,n)}):zT(t,i,n):void(t.required&&Object(y.m)("Missing required "+Object(y.U)(e.type)+" parameter: "+Object(y.U)(t.name)))}function zT(t,e,n){var r=t.type;if(SM(e))return IT(r)?Object(y.m)("Expression references can not be signals."):FT(r)?n.fieldRef(e):LT(r)?n.compareRef(e):n.signalRef(e.signal);var i,o=t.expr||FT(r);return o&&((i=e)&&i.expr)?n.exprRef(e.expr,e.as):o&&function(t){return t&&t.field}(e)?gM(e.field,e.as):IT(r)?hM(e,n):function(t){return"data"===t}(r)?mM(n.getData(e).values):FT(r)?gM(e):LT(r)?n.compareRef(e):e}function RT(t,e,n){var r,i,o,a,u;for(a=0,u=t.params.length;a<u;++a){for(o in(i=t.params[a]).key)if(i.key[o]!==e[o]){i=null;break}if(i)break}return i||Object(y.m)("Unsupported parameter: "+Object(y.U)(e)),r=Object(y.n)(DT(i,e,n),i.key),mM(n.add(eC(r)))}function IT(t){return"expr"===t}function FT(t){return"field"===t}function LT(t){return"compare"===t}function NT(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:mM(e.getData(t.data).output)}function BT(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}BT.fromEntries=function(t,e){var n=e.length,r=1,i=e[0],o=e[n-1],a=e[n-2],u=null;for(i&&"load"===i.type&&(i=e[1]),t.add(e[0]);r<n;++r)e[r].params.pulse=mM(e[r-1]),t.add(e[r]),"aggregate"===e[r].type&&(u=e[r]);return new BT(t,i,a,o,u)};var UT=BT.prototype;function qT(t){return Object(y.F)(t)?t:null}function VT(t,e,n){var r,i=wM(n.op,n.field);if(e.ops){for(var o=0,a=e.as.length;o<a;++o)if(e.as[o]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function WT(t,e,n,r,i,o,a){var u,s,l=e[n]||(e[n]={}),c=function(t){return Object(y.D)(t)?(t.order===xM?"-":"+")+wM(t.op,t.field):""}(o),f=qT(i);if(null!=f&&(t=e.scope,u=l[f+=c?"|"+c:""]),!u){var h=o?{field:bM,pulse:e.countsRef(t,i,o)}:{field:t.fieldRef(i),pulse:mM(e.output)};c&&(h.sort=t.sortRef(o)),s=t.add(dM(r,void 0,h)),a&&(e.index[i]=s),u=mM(s),null!=f&&(l[f]=u)}return u}UT.countsRef=function(t,e,n){var r,i,o,a=this.counts||(this.counts={}),u=qT(e);return null!=u&&(t=this.scope,r=a[u]),r?n&&n.field&&VT(t,r.agg.params,n):(o={groupby:t.fieldRef(e,"key"),pulse:mM(this.output)},n&&n.field&&VT(t,o,n),i=t.add(LM(o)),r=t.add(UM({pulse:mM(i)})),r={agg:i,ref:mM(r)},null!=u&&(a[u]=r)),r.ref},UT.tuplesRef=function(){return mM(this.values)},UT.extentRef=function(t,e){return WT(t,this,"extent","extent",e,!1)},UT.domainRef=function(t,e){return WT(t,this,"domain","values",e,!1)},UT.valuesRef=function(t,e,n){return WT(t,this,"vals","values",e,n||!0)},UT.lookupRef=function(t,e){return WT(t,this,"lookup","tupleindex",e,!1)},UT.indataRef=function(t,e){return WT(t,this,"indata","tupleindex",e,!0,!0)};var HT=function(t,e,n){var r,i,o=t.remove,a=t.insert,u=t.toggle,s=t.modify,l=t.values,c=e.add(vM());r="if("+t.trigger+',modify("'+n+'",'+[a,o,u,s,l].map(function(t){return null==t?"null":t}).join(",")+"),0)",i=hM(r,e),c.update=i.$expr,c.params=i.$params},GT=function(t,e){var n,r,i,o,a,u,s,l,c,f,h,p,d,v=MT(t),m=t.type===uT,g=t.from&&t.from.facet,b=t.layout||"scope"===v||v===XC,_=v===GC||b||g,x=t.overlap;i=function(t,e,n){var r,i,o,a,u;return t?(r=t.facet)&&(e||Object(y.m)("Only group marks can be faceted."),null!=r.field?a=u=NT(r,n):(t.data?u=mM(n.getData(t.data).aggregate):((o=jT(Object(y.n)({type:"aggregate",groupby:Object(y.h)(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),o.params.pulse=NT(r,n),a=u=mM(n.add(o))),i=n.keyRef(r.groupby,!0))):a=mM(n.add(UM(null,[{}]))),a||(a=NT(t,n)),{key:i,pulse:a,parent:u}}(t.from,m,e),c=mM(r=e.add(VM({key:i.key||(t.key?gM(t.key):void 0),pulse:i.pulse,clean:!m}))),r=o=e.add(UM({pulse:c})),r=e.add(KM({markdef:CT(t),interactive:TT(t.interactive,e),clip:OT(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:mM(r)})),f=mM(r),(r=e.add(WM(QC(t.encode,t.type,v,t.style,e,{pulse:f})))).params.parent=e.encode(),t.transform&&t.transform.forEach(function(t){var n=jT(t,e);(n.metadata.generates||n.metadata.changes)&&Object(y.m)("Mark transforms should not generate new data."),n.params.pulse=mM(r),e.add(r=n)}),t.sort&&(r=e.add(lC({sort:e.compareRef(t.sort,!0),pulse:mM(r)}))),h=mM(r),(g||b)&&(p=mM(b=e.add(cC({layout:e.objectProperty(t.layout),legends:e.legends,mark:f,pulse:h})))),d=mM(a=e.add(BM({mark:f,pulse:p||h}))),m&&(_&&((n=e.operators).pop(),b&&n.pop()),e.pushState(h,p||d,c),g?function(t,e,n){var r,i,o,a,u=t.from.facet,s=u.name,l=NT(u,e);u.name||Object(y.m)("Facet must have a name: "+Object(y.U)(u)),u.data||Object(y.m)("Facet must reference a data set: "+Object(y.U)(u)),u.field?a=e.add(nC({field:e.fieldRef(u.field),pulse:l})):u.groupby?a=e.add(GM({key:e.keyRef(u.groupby),group:mM(e.proxy(n.parent)),pulse:l})):Object(y.m)("Facet must specify groupby or field: "+Object(y.U)(u)),i=(r=e.fork()).add(UM()),o=r.add(sC({pulse:mM(i)})),r.addData(s,new BT(r,i,i,o)),r.addSignal("parent",null),a.params.subflow={$subflow:oj(t,r).toRuntime()}}(t,e,i):_?function(t,e,n){var r=e.add(nC({pulse:n.pulse})),i=e.fork();i.add(sC()),i.addSignal("parent",null),r.params.subflow={$subflow:oj(t,i).toRuntime()}}(t,e,i):oj(t,e),e.popState(),_&&(b&&n.push(b),n.push(a))),x&&(d=function(t,e,n){var r,i=t.method,o=t.bound,a=t.separation,u={separation:SM(a)?n.signalRef(a.signal):a,method:SM(i)?n.signalRef(i.signal):i,pulse:e};t.order&&(u.sort=n.compareRef({field:t.order}));o&&(r=o.tolerance,u.boundTolerance=SM(r)?n.signalRef(r.signal):+r,u.boundScale=n.scaleRef(o.scale),u.boundOrient=o.orient);return mM(n.add(tC(u)))}(x,d,e)),u=e.add(aC({pulse:d})),s=e.add(sC({pulse:mM(u)},void 0,e.parent())),null!=t.name&&(l=t.name,e.addData(l,new BT(e,o,u,s)),t.on&&t.on.forEach(function(t){(t.insert||t.remove||t.toggle)&&Object(y.m)("Marks only support modify triggers."),HT(t,e,l)}))};var XT=function(t,e){var n,r,i,o,a,u,s,l,c,f=e.config.legend,h=t.encode||{},p=h.legend||{},d=p.name||void 0,v=p.interactive,m=p.style,g=rT(t,f),b=TC.reduce(function(e,n){return e||t[n]},0);return b||Object(y.m)("Missing valid scale for legend."),a=function(t,e){var n=t.type||AC;t.type||1!==function(t){return TC.reduce(function(e,n){return e+(t[n]?1:0)},0)}(t)||!t.fill&&!t.stroke||(n=kx(e)?MC:Sx(e)?CC:AC);return n!==MC?n:Sx(e)?CC:MC}(t,e.scaleType(b)),u={title:null!=t.title,type:a,vgrad:"symbol"!==a&&g.isVertical()},s=mM(e.add(UM(null,[u]))),p=JC(function(t,e){var n={enter:{},update:{}};return KC(n,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:e.strokeWidth,strokeDash:e.strokeDash}),n}(g,f),p,jC),n={enter:{x:{value:0},y:{value:0}}},l=mM(e.add(YM(i={type:a,scale:e.scaleRef(b),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),a===MC?(o=[lT(t,b,f,h.gradient),pT(t,f,h.labels,l)],i.count=i.count||e.signalRef("max(2,2*floor((".concat(MM(g.gradientLength()),")/100))"))):a===CC?o=[cT(t,b,f,h.gradient,l),pT(t,f,h.labels,l)]:(r=function(t,e){var n=rT(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(t,f),o=[vT(t,f,h,l,MM(r.columns))],i.size=function(t,e,n){var r=MM(ZT("size",t,n)),i=MM(ZT("strokeWidth",t,n)),o=MM(function(t,e,n){return iT("fontSize",t)||function(t,e,n){var r=e.config.style[n];return r&&r[t]}("fontSize",e,n)}(n[1].encode,e,SC));return hM("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(o,")"),e)}(t,e,o[0].marks)),o=[dT("legend-entry",null,null,s,v,n,o,r)],u.title&&o.push(function(t,e,n,r){var i,o=rT(t,e);return KC(i={enter:{opacity:DC},update:{opacity:PC,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:DC}},{orient:o("titleOrient"),_anchor:o("titleAnchor"),anchor:{signal:kT},angle:{signal:ET},align:{signal:wT},baseline:{signal:ST},text:t.title,fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit")},{align:o("titleAlign"),baseline:o("titleBaseline")}),nT(sT,"legend-title","guide-title",null,r,i,n)}(t,f,h.title,s)),c=dT("legend",m,d,s,v,p,o),t.zindex&&(c.zindex=t.zindex),GT(c,e)};function ZT(t,e,n){return e[t]?'scale("'.concat(e[t],'",datum)'):iT(t,n[0].encode)}var YT='item.orient==="'.concat("left",'"?-90:item.orient==="').concat("right",'"?90:0'),$T='item.orient==="'.concat("bottom",'"?"').concat("top",'":"').concat("bottom",'"'),KT=function(t,e){t=Object(y.F)(t)?{text:t}:t;var n,r,i=e.config.title,o=Object(y.n)({},t.encode);return n=mM(e.add(UM(null,[{}]))),o.name=t.name,o.interactive=t.interactive,r=function(t,e,n,r){var i,o=rT(t,e),a={value:0},u=t.text;return KC(i={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}},{text:u,orient:o("orient"),anchor:o("anchor"),align:{signal:aT},angle:{signal:YT},baseline:{signal:$T},dx:o("dx"),dy:o("dy"),fill:o("color"),font:o("font"),fontSize:o("fontSize"),fontStyle:o("fontStyle"),fontWeight:o("fontWeight"),frame:o("frame"),limit:o("limit"),offset:o("offset")||0},{align:o("align"),angle:o("angle"),baseline:o("baseline")}),nT(sT,ZC,t.style||OC,null,r,i,n)}(t,i,o,n),t.zindex&&(r.zindex=t.zindex),GT(r,e)};function JT(t,e){var n=[];t.transform&&t.transform.forEach(function(t){n.push(jT(t,e))}),t.on&&t.on.forEach(function(n){HT(n,e,t.name)}),e.addDataPipeline(t.name,function(t,e,n){var r,i,o,a,u,s=[],l=null,c=!1,f=!1;t.values?OM(t.values)||OM(t.format)?(s.push(tj(e,t)),s.push(l=QT())):s.push(l=QT({$ingest:t.values,$format:t.format})):t.url?OM(t.url)||OM(t.format)?(s.push(tj(e,t)),s.push(l=QT())):s.push(l=QT({$request:t.url,$format:t.format})):t.source&&(l=r=Object(y.h)(t.source).map(function(t){return mM(e.getData(t).output)}),s.push(null));for(i=0,o=n.length;i<o;++i)a=n[i],u=a.metadata,l||u.source||s.push(l=QT()),s.push(a),u.generates&&(f=!0),u.modifies&&!f&&(c=!0),u.source?l=a:u.changes&&(l=null);r&&(o=r.length-1,s[0]=oC({derive:c,pulse:o?r:r[0]}),(c||o)&&s.splice(1,0,QT()));l||s.push(QT());return s.push(sC({})),s}(t,e,n))}function QT(t){var e=UM({},t);return e.metadata={source:!0},e}function tj(t,e){return $M({url:e.url?t.property(e.url):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}function ej(t,e){return{scale:t.scale,range:e}}var nj=function(t,e,n,r){var i,o,a,u,s,l,c,f,h,p=rT(t,e),d=t.orient,v=t.gridScale,m="left"===d||"top"===d?1:-1,g=function(t,e){if(1===e);else if(Object(y.D)(t)){for(var n=t=Object(y.n)({},t);null!=n.mult;){if(!Object(y.D)(n.mult))return n.mult*=e,t;n=n.mult=Object(y.n)({},n.mult)}n.mult=e}else t=e*(t||0);return t}(t.offset,m);return KC(i={enter:o={opacity:DC},update:u={opacity:PC},exit:a={opacity:DC}},{stroke:p("gridColor"),strokeDash:p("gridDash"),strokeDashOffset:p("gridDashOffset"),strokeOpacity:p("gridOpacity"),strokeWidth:p("gridWidth")}),s={scale:t.scale,field:EC,band:p("bandPosition"),round:p("tickRound"),extra:p("tickExtra"),offset:p("tickOffset")},"top"===d||"bottom"===d?(l="x",c="y",h="height"):(l="y",c="x",h="width"),f=c+"2",u[l]=o[l]=a[l]=s,v?(u[c]=o[c]={scale:v,range:0,mult:m,offset:g},u[f]=o[f]={scale:v,range:1,mult:m,offset:g}):(u[c]=o[c]={value:0,offset:g},u[f]=o[f]={signal:h,mult:m,offset:g}),nT("rule","axis-grid",null,EC,r,i,n)};function rj(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}var ij=function(t,e){var n,r,i,o,a,u,s=function(t,e){var n=e.config,r=t.orient,i="top"===r||"bottom"===r?n.axisX:n.axisY,o=n["axis"+r[0].toUpperCase()+r.slice(1)],a="band"===e.scaleType(t.scale)&&n.axisBand;return i||o||a?Object(y.n)({},n.axis,i,o,a):n.axis}(t,e),l=t.encode||{},c=l.axis||{},f=c.name||void 0,h=c.interactive,p=c.style,d=rT(t,s);return n={orient:t.orient,ticks:!!d("ticks"),labels:!!d("labels"),grid:!!d("grid"),domain:!!d("domain"),title:null!=t.title},r=mM(e.add(UM({},[n]))),c=JC({update:{offset:YC(d("offset")||0),position:YC(AM(t.position,0)),titlePadding:YC(d("titlePadding")),minExtent:YC(d("minExtent")),maxExtent:YC(d("maxExtent")),range:{signal:'abs(span(range("'.concat(t.scale,'")))')}}},l.axis,jC),i=mM(e.add(NM({scale:e.scaleRef(t.scale),extra:e.property(d("tickExtra")),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),u=[],n.grid&&u.push(nj(t,s,l.grid,i)),n.ticks&&(o=d("tickSize"),u.push(function(t,e,n,r,i){var o,a,u,s,l,c,f=rT(t,e),h=t.orient,p="left"===h||"top"===h?-1:1;return KC(o={enter:a={opacity:DC},update:s={opacity:PC},exit:u={opacity:DC}},{stroke:f("tickColor"),strokeDash:f("tickDash"),strokeDashOffset:f("tickDashOffset"),strokeOpacity:f("tickOpacity"),strokeWidth:f("tickWidth")}),(l=YC(i)).mult=p,c={scale:t.scale,field:EC,band:f("bandPosition"),round:f("tickRound"),extra:f("tickExtra"),offset:f("tickOffset")},"top"===h||"bottom"===h?(s.y=a.y=DC,s.y2=a.y2=l,s.x=a.x=u.x=c):(s.x=a.x=DC,s.x2=a.x2=l,s.y=a.y=u.y=c),nT("rule","axis-tick",null,EC,r,o,n)}(t,s,l.ticks,i,o))),n.labels&&(o=n.ticks?o:0,u.push(function(t,e,n,r,i){var o,a,u,s,l,c,f,h,p,d,v,m=rT(t,e),y=t.orient,g="left"===y||"top"===y?-1:1,b="top"===y||"bottom"===y,_=t.scale,x=MM(m("labelFlush")),w=MM(m("labelFlushOffset")),k=0===x||!!x,E=m("labelAlign"),S=m("labelBaseline");return(s=YC(i)).mult=g,s.offset=YC(m("labelPadding")||0),s.offset.mult=g,l={scale:_,field:EC,band:.5,offset:m("tickOffset")},b?(c=E||(k?rj(_,x,'"left"','"right"','"center"'):"center"),f=S||("top"===y?"bottom":"top"),h=!E):(c=E||("right"===y?"left":"right"),f=S||(k?rj(_,x,'"top"','"bottom"','"middle"'):"middle"),h=!S),h=h&&k&&w?rj(_,x,"-"+w,w,0):null,KC(a={enter:u={opacity:DC,x:b?l:s,y:b?s:l},update:{opacity:PC,text:{field:"label"},x:u.x,y:u.y},exit:{opacity:DC,x:u.x,y:u.y}},(o={},Object(Mt.a)(o,b?"dx":"dy",h),Object(Mt.a)(o,"align",c),Object(Mt.a)(o,"baseline",f),Object(Mt.a)(o,"angle",m("labelAngle")),Object(Mt.a)(o,"fill",m("labelColor")),Object(Mt.a)(o,"fillOpacity",m("labelOpacity")),Object(Mt.a)(o,"font",m("labelFont")),Object(Mt.a)(o,"fontSize",m("labelFontSize")),Object(Mt.a)(o,"fontWeight",m("labelFontWeight")),Object(Mt.a)(o,"fontStyle",m("labelFontStyle")),Object(Mt.a)(o,"limit",m("labelLimit")),o)),p=m("labelBound"),d=m("labelOverlap"),v=m("labelSeparation"),t=nT(sT,"axis-label",SC,EC,r,a,n),(d||p)&&(t.overlap={separation:v,method:d,order:"datum.index",bound:p?{scale:_,orient:y,tolerance:p}:null}),t}(t,s,l.labels,i,o))),n.domain&&u.push(function(t,e,n,r){var i,o,a,u,s,l,c=rT(t,e),f=t.orient;return KC(i={enter:o={opacity:DC},update:a={opacity:PC},exit:{opacity:DC}},{stroke:c("domainColor"),strokeDash:c("domainDash"),strokeDashOffset:c("domainDashOffset"),strokeWidth:c("domainWidth"),strokeOpacity:c("domainOpacity")}),"top"===f||"bottom"===f?(u="x",l="y"):(u="y",l="x"),s=u+"2",o[l]=DC,a[u]=o[u]=ej(t,0),a[s]=o[s]=ej(t,1),nT("rule","axis-domain",null,null,r,i,n)}(t,s,l.domain,r)),n.title&&u.push(function(t,e,n,r){var i,o,a,u,s=rT(t,e),l=t.orient,c="left"===l||"top"===l?-1:1,f="top"===l||"bottom"===l;return i={enter:o={opacity:DC,anchor:YC(s("titleAnchor")),align:{signal:aT}},update:a=Object(y.n)({},o,{opacity:PC,text:YC(t.title)}),exit:{opacity:DC}},u={signal:'lerp(range("'.concat(t.scale,'"), ').concat(oT(0,1,.5),")")},f?(a.x=u,o.angle={value:0},o.baseline={value:"top"===l?"bottom":"top"}):(a.y=u,o.angle={value:90*c},o.baseline={value:"bottom"}),KC(i,{angle:s("titleAngle"),baseline:s("titleBaseline"),fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit")},{align:s("titleAlign")}),!$C(i,"x",s("titleX"),"update")&&!f&&!eT("x",n)&&(i.enter.auto={value:!0}),!$C(i,"y",s("titleY"),"update")&&f&&!eT("y",n)&&(i.enter.auto={value:!0}),nT(sT,"axis-title","guide-title",null,r,i,n)}(t,s,l.title,r)),a=dT("axis",p,f,r,h,c,u),t.zindex&&(a.zindex=t.zindex),GT(a,e)},oj=function(t,e,n){var r=Object(y.h)(t.signals),i=Object(y.h)(t.scales);return n||r.forEach(function(t){fM(t,e)}),Object(y.h)(t.projections).forEach(function(t){!function(t,e){var n={};for(var r in t)"name"!==r&&(n[r]=_C(t[r],r,e));e.addProjection(t.name,n)}(t,e)}),i.forEach(function(t){pC(t,e)}),Object(y.h)(t.data).forEach(function(t){JT(t,e)}),i.forEach(function(t){dC(t,e)}),r.forEach(function(t){!function(t,e){var n=e.getSignal(t.name),r=t.update;t.init&&(r?Object(y.m)("Signals can not include both init and update expressions."):(r=t.init,n.initonly=!0)),r&&(r=hM(r,e),n.update=r.$expr,n.params=r.$params),t.on&&t.on.forEach(function(t){RM(t,e,n.id)})}(t,e)}),Object(y.h)(t.axes).forEach(function(t){ij(t,e)}),Object(y.h)(t.marks).forEach(function(t){GT(t,e)}),Object(y.h)(t.legends).forEach(function(t){XT(t,e)}),t.title&&KT(t.title,e),e.parseLambdas(),e},aj=Object(y.Y)(["width","height","padding","autosize"]);function uj(t){this.config=t,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function sj(t){this.config=t.config,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}var lj=uj.prototype=sj.prototype;function cj(t){return(Object(y.y)(t)?function(t){for(var e,n="[",r=0,i=t.length;r<i;++r)e=t[r],n+=(r>0?",":"")+(Object(y.D)(e)?e.signal||cj(e):Object(y.U)(e));return n+"]"}:function(t){var e,n,r="{",i=0;for(e in t)n=t[e],r+=(++i>1?",":"")+Object(y.U)(e)+":"+(Object(y.D)(n)?n.signal||cj(n):Object(y.U)(n));return r+"}"})(t)}lj.fork=function(){return new sj(this)},lj.isSubscope=function(){return this._subid>0},lj.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},lj.id=function(){return(this._subid?this._subid+":":0)+this._id++},lj.add=function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(function(e){e.$ref=t.id}),t.refs=null),t},lj.proxy=function(t){var e=t instanceof pM?mM(t):t;return this.add(iC({value:e}))},lj.addStream=function(t){return this.streams.push(t),t.id=this.id(),t},lj.addUpdate=function(t){return this.updates.push(t),t},lj.finish=function(){var t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(t,e,n){var r;t&&((r=t.data||(t.data={}))[e]||(r[e]=[])).push(n)}for(t in this.data)for(var r in n((e=this.data[t]).input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values"),e.index)n(e.index[r],t,"index:"+r);return this},lj.pushState=function(t,e,n){this._encode.push(mM(this.add(sC({pulse:t})))),this._parent.push(e),this._lookup.push(n?mM(this.proxy(n)):null),this._markpath.push(-1)},lj.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},lj.parent=function(){return Object(y.Q)(this._parent)},lj.encode=function(){return Object(y.Q)(this._encode)},lj.lookup=function(){return Object(y.Q)(this._lookup)},lj.markpath=function(){var t=this._markpath;return++t[t.length-1]},lj.fieldRef=function(t,e){if(Object(y.F)(t))return gM(t,e);t.signal||Object(y.m)("Unsupported field reference: "+Object(y.U)(t));var n,r=t.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},e&&(n.as=e),this.field[r]=i=mM(this.add(XM(n)))),i},lj.compareRef=function(t,e){function n(t){return SM(t)?(i=!0,r.signalRef(t.signal)):t}var r=this,i=!1,o=Object(y.h)(t.field).map(n),a=Object(y.h)(t.order).map(n);return e&&o.push(yM),i?mM(this.add(qM({fields:o,orders:a}))):_M(o,a)},lj.keyRef=function(t,e){var n=this.signals,r=!1;return t=Object(y.h)(t).map(function(t){return SM(t)?(r=!0,mM(n[t.signal])):t}),r?mM(this.add(ZM({fields:t,flat:e}))):function(t,e){var n={$key:t};return e&&(n.$flat=!0),n}(t,e)},lj.sortRef=function(t){if(!t)return t;var e=[wM(t.op,t.field),yM],n=t.order||"ascending";return n.signal?mM(this.add(qM({fields:e,orders:[n=this.signalRef(n.signal),n]}))):_M(e,[n,n])},lj.event=function(t,e){var n=t+":"+e;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},lj.addSignal=function(t,e){this.signals.hasOwnProperty(t)&&Object(y.m)("Duplicate signal name: "+Object(y.U)(t));var n=e instanceof pM?e:this.add(vM(e));return this.signals[t]=n},lj.getSignal=function(t){return this.signals[t]||Object(y.m)("Unrecognized signal name: "+Object(y.U)(t)),this.signals[t]},lj.signalRef=function(t){return this.signals[t]?mM(this.signals[t]):(this.lambdas.hasOwnProperty(t)||(this.lambdas[t]=this.add(vM(null))),mM(this.lambdas[t]))},lj.parseLambdas=function(){for(var t=Object.keys(this.lambdas),e=0,n=t.length;e<n;++e){var r=t[e],i=hM(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},lj.property=function(t){return t&&t.signal?this.signalRef(t.signal):t},lj.objectProperty=function(t){return t&&Object(y.D)(t)?this.signalRef(t.signal||cj(t)):t},lj.exprRef=function(t,e){var n={expr:hM(t,this)};return e&&(n.expr.$name=e),mM(this.add(HM(n)))},lj.addBinding=function(t,e){this.bindings||Object(y.m)("Nested signals do not support binding: "+Object(y.U)(t)),this.bindings.push(Object(y.n)({signal:t},e))},lj.addScaleProj=function(t,e){this.scales.hasOwnProperty(t)&&Object(y.m)("Duplicate scale or projection name: "+Object(y.U)(t)),this.scales[t]=this.add(e)},lj.addScale=function(t,e){this.addScaleProj(t,uC(e))},lj.addProjection=function(t,e){this.addScaleProj(t,rC(e))},lj.getScale=function(t){return this.scales[t]||Object(y.m)("Unrecognized scale name: "+Object(y.U)(t)),this.scales[t]},lj.projectionRef=lj.scaleRef=function(t){return mM(this.getScale(t))},lj.projectionType=lj.scaleType=function(t){return this.getScale(t).params.type},lj.addData=function(t,e){return this.data.hasOwnProperty(t)&&Object(y.m)("Duplicate data set name: "+Object(y.U)(t)),this.data[t]=e},lj.getData=function(t){return this.data[t]||Object(y.m)("Undefined data set name: "+Object(y.U)(t)),this.data[t]},lj.addDataPipeline=function(t,e){return this.data.hasOwnProperty(t)&&Object(y.m)("Duplicate data set name: "+Object(y.U)(t)),this.addData(t,BT.fromEntries(this,e))};var fj=function(t){return(t||[]).reduce(function(t,e){for(var n in e){var r="legend"===n?{layout:1}:"style"===n||null;hj(t,n,e[n],r)}return t},{padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:mj},area:{fill:mj},image:null,line:{stroke:mj,strokeWidth:vj},path:{stroke:mj},rect:{fill:mj},rule:{stroke:yj},shape:{stroke:mj},symbol:{fill:mj,size:64},text:{fill:yj,font:pj,fontSize:11},style:{"guide-label":{fill:yj,font:pj,fontSize:10},"guide-title":{fill:yj,font:pj,fontSize:11,fontWeight:"bold"},"group-title":{fill:yj,font:pj,fontSize:13,fontWeight:"bold"},point:{size:dj,strokeWidth:vj,shape:"circle"},circle:{size:dj,strokeWidth:vj},square:{size:dj,strokeWidth:vj,shape:"square"},cell:{fill:"transparent",stroke:bj}},title:{orient:"top",anchor:"middle",offset:4},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:gj,grid:!1,gridWidth:1,gridColor:bj,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:gj,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:bj,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:gj,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}})};function hj(t,e,n,r){var i,o;if(Object(y.D)(n)&&!Object(y.y)(n))for(i in o=Object(y.D)(t[e])?t[e]:t[e]={},n)r&&(!0===r||r[i])?hj(o,i,n[i]):o[i]=n[i];else t[e]=n}var pj="sans-serif",dj=30,vj=2,mj="#4c78a8",yj="#000",gj="#888",bj="#ddd";var _j=function(t,e){return Object(y.D)(t)||Object(y.m)("Input Vega specification must be an object."),function(t,e){var n,r,i,o,a,u=e.config;return e.background=t.background||u.background,e.eventConfig=u.events,a=mM(e.root=e.add(vM())),e.addSignal("width",t.width||0),e.addSignal("height",t.height||0),e.addSignal("padding",uM(t.padding,u)),e.addSignal("autosize",aM(t.autosize,u)),e.legends=e.objectProperty(u.legend&&u.legend.layout),Object(y.h)(t.signals).forEach(function(t){aj[t.name]||fM(t,e)}),r=e.add(UM()),i=JC({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t.encode),i=e.add(WM(QC(i,uT,XC,t.style,e,{pulse:mM(r)}))),o=e.add(cC({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:a,pulse:mM(i)})),e.operators.pop(),e.pushState(mM(i),mM(o),null),oj(t,e,!0),e.operators.push(o),n=e.add(BM({mark:a,pulse:mM(o)})),n=e.add(aC({pulse:mM(n)})),n=e.add(sC({pulse:mM(n)})),e.addData("root",new BT(e,r,r,n)),e}(t,new uj(fj([e,t.config]))).toRuntime()};Object(y.n)(_d,i,o,a,u,s,l,c,f,h);var xj=n(1),wj=n.n(xj);function kj(t){return null!==t&&void 0!==t}function Ej(t){return!!t&&"[object Function]"==={}.toString.call(t)}var Sj={background:wj.a.string,className:wj.a.string,data:wj.a.object,enableHover:wj.a.bool,height:wj.a.number,logLevel:wj.a.number,onNewView:wj.a.func,onParseError:wj.a.func,padding:wj.a.object,renderer:wj.a.string,spec:wj.a.object.isRequired,style:wj.a.object,tooltip:wj.a.func,width:wj.a.number},Oj=function(t){function e(){return t.apply(this,arguments)||this}(function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e})(e,t),e.isSamePadding=function(t,e){return kj(t)&&kj(e)?t.top===e.top&&t.left===e.left&&t.right===e.right&&t.bottom===e.bottom:t===e},e.isSameData=function(t,e){return t===e&&!Ej(t)},e.isSameSpec=function(t,e){return t===e||JSON.stringify(t)===JSON.stringify(e)},e.listenerName=function(t){return"onSignal"+function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(t)};var n=e.prototype;return n.componentDidMount=function(){var t=this.props.spec;this.createView(t)},n.componentDidUpdate=function(t){var n=this,r=this.props.spec;if(r!==t.spec)this.clearView(),this.createView(r);else if(this.view){var i=this.props,o=!1;["width","height","renderer","logLevel","background"].filter(function(e){return i[e]!==t[e]}).forEach(function(t){n.view[t](i[t]),o=!0}),e.isSamePadding(i.padding,t.padding)||(this.view.padding(i.padding||r.padding),o=!0),r.data&&i.data&&r.data.forEach(function(r){var a=t.data[r.name],u=i.data[r.name];e.isSameData(a,u)||(n.updateData(r.name,u),o=!0)}),i.enableHover!==t.enableHover&&(o=!0),o&&(i.enableHover&&this.view.hover(),this.view.run())}},n.componentWillUnmount=function(){this.clearView()},n.createView=function(t){var n=this;if(t){var r=this.props;try{var i=new tM(_j(t)).initialize(this.element);t.signals&&t.signals.forEach(function(t){i.addSignalListener(t.name,function(){var i=r[e.listenerName(t.name)];if(i){for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];i.apply(n,a)}})}),this.view=i,["logLevel","renderer","tooltip","background","width","height","padding"].filter(function(t){return kj(r[t])}).forEach(function(t){i[t](r[t])}),t.data&&r.data&&t.data.filter(function(t){return r.data[t.name]}).forEach(function(t){n.updateData(t.name,r.data[t.name])}),r.enableHover&&i.hover(),i.run(),r.onNewView(i)}catch(t){this.clearView(),r.onParseError(t)}}else this.clearView();return this},n.updateData=function(t,e){e&&(Ej(e)?e(this.view.data(t)):this.view.change(t,tp().remove(function(){return!0}).insert(e)))},n.clearView=function(){return this.view&&(this.view.finalize(),this.view=null),this},n.render=function(){var t=this,e=this.props,n=e.className,r=e.style;return d.a.createElement("div",{ref:function(e){t.element=e},className:n,style:r})},e}(d.a.Component);Oj.propTypes=Sj,Oj.defaultProps={background:void 0,className:"",data:{},enableHover:!0,height:void 0,logLevel:void 0,onNewView:function(){},onParseError:function(){},padding:void 0,renderer:"svg",style:void 0,tooltip:function(){},width:void 0};var Aj=Oj;var Mj=Aj;function Cj(){return(Cj=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)}var Tj=function(t){var e=Cj({},t),n=t.spec,r=t.data,i=Cj({},n);return r&&(i.data=r,delete e.data),e.spec=Ih(i).spec,d.a.createElement(Mj,e)};Tj.propTypes=Mj.propTypes;var jj=Tj;e.a=jj},function(t,e,n){"use strict";var r=n(4),i=n(5),o="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n",a="vg-tooltip-element",u={offsetX:10,offsetY:10,id:a,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};var s=n(0),l=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n};function c(t,e){return JSON.stringify(t,function(t){var e=[];return function(n,r){if("object"!==typeof r||null===r)return r;var i=e.indexOf(this)+1;return e.length=i,e.length>t?"[Object]":e.indexOf(r)>=0?"[Circular]":(e.push(r),r)}}(e))}var f=function(){function t(e){Object(r.a)(this,t),this.options=Object.assign({},u,e);var n=this.options.id;if(this.call=this.tooltip_handler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=function(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return o.toString().replace(a,t)}(n);var s=document.head;s.childNodes.length>0?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)}this.el=document.getElementById(n),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",n),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}return Object(i.a)(t,[{key:"tooltip_handler",value:function(t,e,n,r){if(null!=r&&""!==r){this.el.innerHTML=function(t,e,n){if(Object(s.y)(t))return"[".concat(t.map(function(t){return e(Object(s.F)(t)?t:c(t,n))}).join(", "),"]");if(Object(s.D)(t)){var r="",i=t,o=i.title,a=l(i,["title"]);o&&(r+="<h2>".concat(e(o),"</h2>"));var u=Object.keys(a);if(u.length>0){r+="<table>";for(var f=0,h=u;f<h.length;f++){var p=h[f],d=a[p];Object(s.D)(d)&&(d=c(d,n)),r+='<tr><td class="key">'.concat(e(p),':</td><td class="value">').concat(e(d),"</td></tr>")}r+="</table>"}return r||"{}"}return e(t)}(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));var i=function(t,e,n,r){var i=t.clientX+n;i+e.width>window.innerWidth&&(i=+t.clientX-n-e.width);var o=t.clientY+r;return o+e.height>window.innerHeight&&(o=+t.clientY-r-e.height),{x:i,y:o}}(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),o=i.x,a=i.y;this.el.setAttribute("style","top: ".concat(a,"px; left: ").concat(o,"px"))}else this.el.classList.remove("visible","".concat(this.options.theme,"-theme"))}}]),t}();n.d(e,"a",function(){return f})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(12),i=Array.prototype.slice,o=function(t,e){return t-e},a=function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r},u=function(t){return function(){return t}},s=function(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=l(t,e[r]))return n;return 0};function l(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,u=a-1;o<a;u=o++){var s=t[o],l=s[0],f=s[1],h=t[u],p=h[0],d=h[1];if(c(s,h,e))return 0;f>r!==d>r&&n<(p-l)*(r-f)/(d-f)+l&&(i=-i)}return i}function c(t,e,n){var r,i,o,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],o=n[r],a=e[r],i<=o&&o<=a||a<=o&&o<=i)}var f=function(){},h=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],p=function(){var t=1,e=1,n=r.j,l=v;function c(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(o);else{var i=Object(r.e)(t),a=i[0],u=i[1];e=Object(r.l)(a,u,e),e=Object(r.i)(Math.floor(a/e)*e,Math.floor(u/e)*e,e)}return e.map(function(e){return p(t,e)})}function p(n,r){var i=[],o=[];return function(n,r,i){var o,a,u,s,l,c,f=new Array,p=new Array;o=a=-1,s=n[0]>=r,h[s<<1].forEach(v);for(;++o<t-1;)u=s,s=n[o+1]>=r,h[u|s<<1].forEach(v);h[s<<0].forEach(v);for(;++a<e-1;){for(o=-1,s=n[a*t+t]>=r,l=n[a*t]>=r,h[s<<1|l<<2].forEach(v);++o<t-1;)u=s,s=n[a*t+t+o+1]>=r,c=l,l=n[a*t+o+1]>=r,h[u|s<<1|l<<2|c<<3].forEach(v);h[s|l<<3].forEach(v)}o=-1,l=n[a*t]>=r,h[l<<2].forEach(v);for(;++o<t-1;)c=l,l=n[a*t+o+1]>=r,h[l<<2|c<<3].forEach(v);function v(t){var e,n,r=[t[0][0]+o,t[0][1]+a],u=[t[1][0]+o,t[1][1]+a],s=d(r),l=d(u);(e=p[s])?(n=f[l])?(delete p[e.end],delete f[n.start],e===n?(e.ring.push(u),i(e.ring)):f[e.start]=p[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete p[e.end],e.ring.push(u),p[e.end=l]=e):(e=f[l])?(n=p[s])?(delete f[e.start],delete p[n.end],e===n?(e.ring.push(u),i(e.ring)):f[n.start]=p[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete f[e.start],e.ring.unshift(r),f[e.start=s]=e):f[s]=p[l]={start:s,end:l,ring:[r,u]}}h[l<<3].forEach(v)}(n,r,function(t){l(t,n,r),a(t)>0?i.push([t]):o.push(t)}),o.forEach(function(t){for(var e,n=0,r=i.length;n<r;++n)if(-1!==s((e=i[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:r,coordinates:i}}function d(e){return 2*e[0]+e[1]*(t+1)*4}function v(n,r,i){n.forEach(function(n){var o,a=n[0],u=n[1],s=0|a,l=0|u,c=r[l*t+s];a>0&&a<t&&s===a&&(o=r[l*t+s-1],n[0]=a+(i-o)/(c-o)-.5),u>0&&u<e&&l===u&&(o=r[(l-1)*t+s],n[1]=u+(i-o)/(c-o)-.5)})}return c.contour=p,c.size=function(n){if(!arguments.length)return[t,e];var r=Math.ceil(n[0]),i=Math.ceil(n[1]);if(!(r>0)||!(i>0))throw new Error("invalid size");return t=r,e=i,c},c.thresholds=function(t){return arguments.length?(n="function"===typeof t?t:Array.isArray(t)?u(i.call(t)):u(t),c):n},c.smooth=function(t){return arguments.length?(l=t?v:f,c):l===v},c};function d(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<i;++a)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=t.data[u+a*r]),u>=n&&(u>=o&&(s-=t.data[u-o+a*r]),e.data[u-n+a*r]=s/Math.min(u+1,r-1+o-u,o))}function v(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<r;++a)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=t.data[a+u*r]),u>=n&&(u>=o&&(s-=t.data[a+(u-o)*r]),e.data[a+(u-n)*r]=s/Math.min(u+1,i-1+o-u,o))}function m(t){return t[0]}function y(t){return t[1]}function g(){return 1}var b=function(){var t=m,e=y,n=g,o=960,a=500,s=20,l=2,c=3*s,f=o+2*c>>l,h=a+2*c>>l,b=u(20);function _(i){var o=new Float32Array(f*h),a=new Float32Array(f*h);i.forEach(function(r,i,a){var u=+t(r,i,a)+c>>l,s=+e(r,i,a)+c>>l,p=+n(r,i,a);u>=0&&u<f&&s>=0&&s<h&&(o[u+s*f]+=p)}),d({width:f,height:h,data:o},{width:f,height:h,data:a},s>>l),v({width:f,height:h,data:a},{width:f,height:h,data:o},s>>l),d({width:f,height:h,data:o},{width:f,height:h,data:a},s>>l),v({width:f,height:h,data:a},{width:f,height:h,data:o},s>>l),d({width:f,height:h,data:o},{width:f,height:h,data:a},s>>l),v({width:f,height:h,data:a},{width:f,height:h,data:o},s>>l);var u=b(o);if(!Array.isArray(u)){var m=Object(r.f)(o);u=Object(r.l)(0,m,u),(u=Object(r.i)(0,Math.floor(m/u)*u,u)).shift()}return p().thresholds(u).size([f,h])(o).map(x)}function x(t){return t.value*=Math.pow(2,-2*l),t.coordinates.forEach(w),t}function w(t){t.forEach(k)}function k(t){t.forEach(E)}function E(t){t[0]=t[0]*Math.pow(2,l)-c,t[1]=t[1]*Math.pow(2,l)-c}function S(){return f=o+2*(c=3*s)>>l,h=a+2*c>>l,_}return _.x=function(e){return arguments.length?(t="function"===typeof e?e:u(+e),_):t},_.y=function(t){return arguments.length?(e="function"===typeof t?t:u(+t),_):e},_.weight=function(t){return arguments.length?(n="function"===typeof t?t:u(+t),_):n},_.size=function(t){if(!arguments.length)return[o,a];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0)&&!(e>=0))throw new Error("invalid size");return o=e,a=n,S()},_.cellSize=function(t){if(!arguments.length)return 1<<l;if(!((t=+t)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(t)/Math.LN2),S()},_.thresholds=function(t){return arguments.length?(b="function"===typeof t?t:Array.isArray(t)?u(i.call(t)):u(t),_):b},_.bandwidth=function(t){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return s=Math.round((Math.sqrt(4*t*t+1)-1)/2),S()},_};n.d(e,"b",function(){return p}),n.d(e,"a",function(){return b})},function(t,e,n){var r=n(179),i=n(180),o=n(181),a=n(182),u=n(183);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=o,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(86);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(66),i=n(190),o=n(191),a="[object Null]",u="[object Undefined]",s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?u:a:s&&s in Object(t)?i(t):o(t)}},function(t,e,n){var r=n(36).Symbol;t.exports=r},function(t,e,n){var r=n(43)(Object,"create");t.exports=r},function(t,e,n){var r=n(203);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(116),i=n(117);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var u=-1,s=e.length;++u<s;){var l=e[u],c=o?o(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),a?i(n,l,c):r(n,l,c)}return n}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(227),i=n(87),o=n(228),a=n(229),u=n(230),s=n(65),l=n(114),c=l(r),f=l(i),h=l(o),p=l(a),d=l(u),v=s;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=v(new i)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){var r=n(136),i=n(103);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){t.exports=!0},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(99);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";e.__esModule=!0;var r=a(n(657)),i=a(n(667)),o="function"===typeof i.default&&"symbol"===typeof r.default?function(t){return typeof t}:function(t){return t&&"function"===typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"===typeof i.default&&"symbol"===o(r.default)?function(t){return"undefined"===typeof t?"undefined":o(t)}:function(t){return t&&"function"===typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":"undefined"===typeof t?"undefined":o(t)}},function(t,e,n){"use strict";var r=function(t){return function(){return t}};function i(t){return t[0]}function o(t){return t[1]}function a(){this._=null}function u(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function s(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function l(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function c(t){for(;t.L;)t=t.L;return t}a.prototype={constructor:a,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=c(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(s(this,n),n=(t=n).U),n.C=!1,r.C=!0,l(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(l(this,n),n=(t=n).U),n.C=!1,r.C=!0,s(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?c(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,s(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,l(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,s(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,l(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,s(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,l(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var f=a;function h(t,e,n,r){var i=[null,null],o=I.push(i)-1;return i.left=t,i.right=e,n&&d(i,t,e,n),r&&d(i,e,t,r),z[t.index].halfedges.push(o),z[e.index].halfedges.push(o),i}function p(t,e,n){var r=[e,n];return r.left=t,r}function d(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function v(t,e,n,r,i){var o,a=t[0],u=t[1],s=a[0],l=a[1],c=0,f=1,h=u[0]-s,p=u[1]-l;if(o=e-s,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>c&&(c=o)}if(o=r-s,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<f&&(f=o)}if(o=n-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<f&&(f=o)}else if(p>0){if(o>f)return;o>c&&(c=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>f)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<f&&(f=o)}return!(c>0||f<1)||(c>0&&(t[0]=[s+c*h,l+c*p]),f<1&&(t[1]=[s+f*h,l+f*p]),!0)}}}}}function m(t,e,n,r,i){var o=t[1];if(o)return!0;var a,u,s=t[0],l=t.left,c=t.right,f=l[0],h=l[1],p=c[0],d=c[1],v=(f+p)/2,m=(h+d)/2;if(d===h){if(v<e||v>=r)return;if(f>p){if(s){if(s[1]>=i)return}else s=[v,n];o=[v,i]}else{if(s){if(s[1]<n)return}else s=[v,i];o=[v,n]}}else if(u=m-(a=(f-p)/(d-h))*v,a<-1||a>1)if(f>p){if(s){if(s[1]>=i)return}else s=[(n-u)/a,n];o=[(i-u)/a,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/a,i];o=[(n-u)/a,n]}else if(h<d){if(s){if(s[0]>=r)return}else s=[e,a*e+u];o=[r,a*r+u]}else{if(s){if(s[0]<e)return}else s=[r,a*r+u];o=[e,a*e+u]}return t[0]=s,t[1]=o,!0}function y(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function g(t,e){return e[+(e.left!==t.site)]}function b(t,e){return e[+(e.left===t.site)]}var _,x=[];function w(){u(this),this.x=this.y=this.arc=this.site=this.cy=null}function k(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],u=i[1],s=r[0]-a,l=r[1]-u,c=o[0]-a,f=o[1]-u,h=2*(s*f-l*c);if(!(h>=-L)){var p=s*s+l*l,d=c*c+f*f,v=(f*p-l*d)/h,m=(s*d-c*p)/h,y=x.pop()||new w;y.arc=t,y.site=i,y.x=v+a,y.y=(y.cy=m+u)+Math.sqrt(v*v+m*m),t.circle=y;for(var g=null,b=R._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){g=b.P;break}b=b.L}else{if(!b.R){g=b;break}b=b.R}R.insert(g,y),g||(_=y)}}}}function E(t){var e=t.circle;e&&(e.P||(_=e.N),R.remove(e),x.push(e),u(e),t.circle=null)}var S=[];function O(){u(this),this.edge=this.site=this.circle=null}function A(t){var e=S.pop()||new O;return e.site=t,e}function M(t){E(t),P.remove(t),S.push(t),u(t)}function C(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,u=[t];M(t);for(var s=o;s.circle&&Math.abs(n-s.circle.x)<F&&Math.abs(r-s.circle.cy)<F;)o=s.P,u.unshift(s),M(s),s=o;u.unshift(s),E(s);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<F&&Math.abs(r-l.circle.cy)<F;)a=l.N,u.push(l),M(l),l=a;u.push(l),E(l);var c,f=u.length;for(c=1;c<f;++c)l=u[c],s=u[c-1],d(l.edge,s.site,l.site,i);s=u[0],(l=u[f-1]).edge=h(s.site,l.site,null,i),k(s),k(l)}function T(t){for(var e,n,r,i,o=t[0],a=t[1],u=P._;u;)if((r=j(u,a)-o)>F)u=u.L;else{if(!((i=o-D(u,a))>F)){r>-F?(e=u.P,n=u):i>-F?(e=u,n=u.N):e=n=u;break}if(!u.R){e=u;break}u=u.R}!function(t){z[t.index]={site:t,halfedges:[]}}(t);var s=A(t);if(P.insert(e,s),e||n){if(e===n)return E(e),n=A(e.site),P.insert(s,n),s.edge=n.edge=h(e.site,s.site),k(e),void k(n);if(n){E(e),E(n);var l=e.site,c=l[0],f=l[1],p=t[0]-c,v=t[1]-f,m=n.site,y=m[0]-c,g=m[1]-f,b=2*(p*g-v*y),_=p*p+v*v,x=y*y+g*g,w=[(g*_-v*x)/b+c,(p*x-y*_)/b+f];d(n.edge,l,m,w),s.edge=h(l,t,null,w),n.edge=h(t,m,null,w),k(e),k(n)}else s.edge=h(e.site,s.site)}}function j(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var u=(n=a.site)[0],s=n[1],l=s-e;if(!l)return u;var c=u-r,f=1/o-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-s+l/2+i-o/2)))/f+r:(r+u)/2}function D(t,e){var n=t.N;if(n)return j(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var P,z,R,I,F=1e-6,L=1e-12;function N(t,e){return e[1]-t[1]||e[0]-t[0]}function B(t,e){var n,r,i,o=t.sort(N).pop();for(I=[],z=new Array(t.length),P=new f,R=new f;;)if(i=_,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(T(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;C(i.arc)}if(function(){for(var t,e,n,r,i=0,o=z.length;i<o;++i)if((t=z[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),u=new Array(r);for(n=0;n<r;++n)a[n]=n,u[n]=y(t,I[e[n]]);for(a.sort(function(t,e){return u[e]-u[t]}),n=0;n<r;++n)u[n]=e[a[n]];for(n=0;n<r;++n)e[n]=u[n]}}(),e){var a=+e[0][0],u=+e[0][1],s=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=I.length;o--;)m(i=I[o],t,e,n,r)&&v(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>F||Math.abs(i[0][1]-i[1][1])>F)||delete I[o]}(a,u,s,l),function(t,e,n,r){var i,o,a,u,s,l,c,f,h,d,v,m,y=z.length,_=!0;for(i=0;i<y;++i)if(o=z[i]){for(a=o.site,u=(s=o.halfedges).length;u--;)I[s[u]]||s.splice(u,1);for(u=0,l=s.length;u<l;)v=(d=b(o,I[s[u]]))[0],m=d[1],f=(c=g(o,I[s[++u%l]]))[0],h=c[1],(Math.abs(v-f)>F||Math.abs(m-h)>F)&&(s.splice(u,0,I.push(p(a,d,Math.abs(v-t)<F&&r-m>F?[t,Math.abs(f-t)<F?h:r]:Math.abs(m-r)<F&&n-v>F?[Math.abs(h-r)<F?f:n,r]:Math.abs(v-n)<F&&m-e>F?[n,Math.abs(f-n)<F?h:e]:Math.abs(m-e)<F&&v-t>F?[Math.abs(h-e)<F?f:t,e]:null))-1),++l);l&&(_=!1)}if(_){var x,w,k,E=1/0;for(i=0,_=null;i<y;++i)(o=z[i])&&(k=(x=(a=o.site)[0]-t)*x+(w=a[1]-e)*w)<E&&(E=k,_=o);if(_){var S=[t,e],O=[t,r],A=[n,r],M=[n,e];_.halfedges.push(I.push(p(a=_.site,S,O))-1,I.push(p(a,O,A))-1,I.push(p(a,A,M))-1,I.push(p(a,M,S))-1)}}for(i=0;i<y;++i)(o=z[i])&&(o.halfedges.length||delete z[i])}(a,u,s,l)}this.edges=I,this.cells=z,P=R=I=z=null}B.prototype={constructor:B,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return g(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,u,s,l,c=n.site,f=-1,h=e[i[o-1]],p=h.left===c?h.right:h.left;++f<o;)a=p,p=(h=e[i[f]]).left===c?h.right:h.left,a&&p&&r<a.index&&r<p.index&&(s=a,l=p,((u=c)[0]-l[0])*(s[1]-u[1])-(u[0]-s[0])*(l[1]-u[1])<0)&&t.push([c.data,a.data,p.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,u=o.cells.length;!(i=o.cells[a]);)if(++a>=u)return null;var s=t-i.site[0],l=e-i.site[1],c=s*s+l*l;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=t-u[0],l=e-u[1],f=s*s+l*l;f<c&&(c=f,a=u.index)}})}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}};var U=function(){var t=i,e=o,n=null;function a(r){return new B(r.map(function(n,i){var o=[Math.round(t(n,i,r)/F)*F,Math.round(e(n,i,r)/F)*F];return o.index=i,o.data=n,o}),n)}return a.polygons=function(t){return a(t).polygons()},a.links=function(t){return a(t).links()},a.triangles=function(t){return a(t).triangles()},a.x=function(e){return arguments.length?(t="function"===typeof e?e:r(+e),a):t},a.y=function(t){return arguments.length?(e="function"===typeof t?t:r(+t),a):e},a.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],a):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},a.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],a):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},a};n.d(e,"a",function(){return U})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(9);function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){Object(r.a)(t,e,n[e])})}return t}},function(t,e,n){var r,i;!function(){var o={version:"3.5.17"},a=[].slice,u=function(t){return a.call(t)},s=this.document;function l(t){return t&&(t.ownerDocument||t.document||t).documentElement}function c(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(s)try{u(s.documentElement.childNodes)[0].nodeType}catch(Yu){u=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),s)try{s.createElement("DIV").style.setProperty("opacity",0,"")}catch($u){var f=this.Element.prototype,h=f.setAttribute,p=f.setAttributeNS,d=this.CSSStyleDeclaration.prototype,v=d.setProperty;f.setAttribute=function(t,e){h.call(this,t,e+"")},f.setAttributeNS=function(t,e,n){p.call(this,t,e,n+"")},d.setProperty=function(t,e,n){v.call(this,t,e+"",n)}}function m(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function y(t){return null===t?NaN:+t}function g(t){return!isNaN(t)}function b(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}o.ascending=m,o.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},o.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},o.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},o.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},o.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)g(n=+t[o])&&(r+=n);else for(;++o<i;)g(n=+e.call(t,t[o],o))&&(r+=n);return r},o.mean=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)g(n=y(t[o]))?r+=n:--a;else for(;++o<i;)g(n=y(e.call(t,t[o],o)))?r+=n:--a;if(a)return r/a},o.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},o.median=function(t,e){var n,r=[],i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)g(n=y(t[a]))&&r.push(n);else for(;++a<i;)g(n=y(e.call(t,t[a],a)))&&r.push(n);if(r.length)return o.quantile(r.sort(m),.5)},o.variance=function(t,e){var n,r,i=t.length,o=0,a=0,u=-1,s=0;if(1===arguments.length)for(;++u<i;)g(n=y(t[u]))&&(a+=(r=n-o)*(n-(o+=r/++s)));else for(;++u<i;)g(n=y(e.call(t,t[u],u)))&&(a+=(r=n-o)*(n-(o+=r/++s)));if(s>1)return a/(s-1)},o.deviation=function(){var t=o.variance.apply(this,arguments);return t?Math.sqrt(t):t};var _=b(m);function x(t){return t.length}o.bisectLeft=_.left,o.bisect=o.bisectRight=_.right,o.bisector=function(t){return b(1===t.length?function(e,n){return m(t(e),n)}:t)},o.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},o.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},o.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},o.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=o.min(t,x),r=new Array(n);++e<n;)for(var i,a=-1,u=r[e]=new Array(i);++a<i;)u[a]=t[a][e];return r},o.zip=function(){return o.transpose(arguments)},o.keys=function(t){var e=[];for(var n in t)e.push(n);return e},o.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},o.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},o.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var w=Math.abs;function k(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function E(){this._=Object.create(null)}o.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],o=function(t){var e=1;for(;t*e%1;)e*=10;return e}(w(n)),a=-1;if(t*=o,e*=o,(n*=o)<0)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},o.map=function(t,e){var n=new E;if(t instanceof E)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var S="__proto__",O="\0";function A(t){return(t+="")===S||t[0]===O?O+t:t}function M(t){return(t+="")[0]===O?t.slice(1):t}function C(t){return A(t)in this._}function T(t){return(t=A(t))in this._&&delete this._[t]}function j(){var t=[];for(var e in this._)t.push(M(e));return t}function D(){var t=0;for(var e in this._)++t;return t}function P(){for(var t in this._)return!1;return!0}function z(){this._=Object.create(null)}function R(t){return t}function I(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function F(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=L.length;n<r;++n){var i=L[n]+e;if(i in t)return i}}k(E,{has:C,get:function(t){return this._[A(t)]},set:function(t,e){return this._[A(t)]=e},remove:T,keys:j,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:M(e),value:this._[e]});return t},size:D,empty:P,forEach:function(t){for(var e in this._)t.call(this,M(e),this._[e])}}),o.nest=function(){var t,e,n={},r=[],i=[];function a(i,o,u){if(u>=r.length)return e?e.call(n,o):t?o.sort(t):o;for(var s,l,c,f,h=-1,p=o.length,d=r[u++],v=new E;++h<p;)(f=v.get(s=d(l=o[h])))?f.push(l):v.set(s,[l]);return i?(l=i(),c=function(t,e){l.set(t,a(i,e,u))}):(l={},c=function(t,e){l[t]=a(i,e,u)}),v.forEach(c),l}return n.map=function(t,e){return a(e,t,0)},n.entries=function(t){return function t(e,n){if(n>=r.length)return e;var o=[],a=i[n++];return e.forEach(function(e,r){o.push({key:e,values:t(r,n)})}),a?o.sort(function(t,e){return a(t.key,e.key)}):o}(a(o.map,t,0),0)},n.key=function(t){return r.push(t),n},n.sortKeys=function(t){return i[r.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return e=t,n},n},o.set=function(t){var e=new z;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},k(z,{has:C,add:function(t){return this._[A(t+="")]=!0,t},remove:T,values:j,size:D,empty:P,forEach:function(t){for(var e in this._)t.call(this,M(e))}}),o.behavior={},o.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=I(t,e,e[n]);return t};var L=["webkit","ms","moz","Moz","o","O"];function N(){}function B(){}function U(t){var e=[],n=new E;function r(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var o,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function q(){o.event.preventDefault()}function V(){for(var t,e=o.event;t=e.sourceEvent;)e=t;return e}function W(t){for(var e=new B,n=0,r=arguments.length;++n<r;)e[arguments[n]]=U(e);return e.of=function(n,r){return function(i){try{var a=i.sourceEvent=o.event;i.target=t,o.event=i,e[i.type].apply(n,r)}finally{o.event=a}}},e}o.dispatch=function(){for(var t=new B,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=U(t);return t},B.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},o.event=null,o.requote=function(t){return t.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,G={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function X(t){return G(t,K),t}var Z=function(t,e){return e.querySelector(t)},Y=function(t,e){return e.querySelectorAll(t)},$=function(t,e){var n=t.matches||t[F(t,"matchesSelector")];return($=function(t,e){return n.call(t,e)})(t,e)};"function"===typeof Sizzle&&(Z=function(t,e){return Sizzle(t,e)[0]||null},Y=Sizzle,$=Sizzle.matchesSelector),o.selection=function(){return o.select(s.documentElement)};var K=o.selection.prototype=[];function J(t){return"function"===typeof t?t:function(){return Z(t,this)}}function Q(t){return"function"===typeof t?t:function(){return Y(t,this)}}K.select=function(t){var e,n,r,i,o=[];t=J(t);for(var a=-1,u=this.length;++a<u;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var s=-1,l=r.length;++s<l;)(i=r[s])?(e.push(n=t.call(i,i.__data__,s,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return X(o)},K.selectAll=function(t){var e,n,r=[];t=Q(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,l=a.length;++s<l;)(n=a[s])&&(r.push(e=u(t.call(n,n.__data__,s,i))),e.parentNode=n);return X(r)};var tt="http://www.w3.org/1999/xhtml",et={svg:"http://www.w3.org/2000/svg",xhtml:tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nt(t,e){return t=o.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"===typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function rt(t){return t.trim().replace(/\s+/g," ")}function it(t){return new RegExp("(?:^|\\s+)"+o.requote(t)+"(?:\\s+|$)","g")}function ot(t){return(t+"").trim().split(/^|\s+/)}function at(t,e){var n=(t=ot(t).map(ut)).length;return"function"===typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function ut(t){var e=it(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",rt(i+" "+t))):n.setAttribute("class",rt(i.replace(e," ")))}}function st(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"===typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function lt(t,e){return null==e?function(){delete this[t]}:"function"===typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function ct(t){return"function"===typeof t?t:(t=o.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===tt&&e.documentElement.namespaceURI===tt?e.createElement(t):e.createElementNS(n,t)}}function ft(){var t=this.parentNode;t&&t.removeChild(this)}function ht(t){return{__data__:t}}function pt(t){return function(){return $(this,t)}}function dt(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,o=t[n],a=0,u=o.length;a<u;a++)(i=o[a])&&e(i,a,n);return t}function vt(t){return G(t,mt),t}o.ns={prefix:et,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),et.hasOwnProperty(n)?{space:et[n],local:t}:t}},K.attr=function(t,e){if(arguments.length<2){if("string"===typeof t){var n=this.node();return(t=o.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(nt(e,t[e]));return this}return this.each(nt(t,e))},K.classed=function(t,e){if(arguments.length<2){if("string"===typeof t){var n=this.node(),r=(t=ot(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!it(t[i]).test(e))return!1;return!0}for(e in t)this.each(at(e,t[e]));return this}return this.each(at(t,e))},K.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=""),t)this.each(st(n,t[n],e));return this}if(r<2){var i=this.node();return c(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(st(t,e,n))},K.property=function(t,e){if(arguments.length<2){if("string"===typeof t)return this.node()[t];for(e in t)this.each(lt(e,t[e]));return this}return this.each(lt(t,e))},K.text=function(t){return arguments.length?this.each("function"===typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},K.html=function(t){return arguments.length?this.each("function"===typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},K.append=function(t){return t=ct(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},K.insert=function(t,e){return t=ct(t),e=J(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},K.remove=function(){return this.each(ft)},K.data=function(t,e){var n,r,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++i<o;)(r=n[i])&&(t[i]=r.__data__);return t}function a(t,n){var r,i,o,a=t.length,c=n.length,f=Math.min(a,c),h=new Array(c),p=new Array(c),d=new Array(a);if(e){var v,m=new E,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(m.has(v=e.call(i,i.__data__,r))?d[r]=i:m.set(v,i),y[r]=v);for(r=-1;++r<c;)(i=m.get(v=e.call(n,o=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=o):p[r]=ht(o),m.set(v,!0);for(r=-1;++r<a;)r in y&&!0!==m.get(y[r])&&(d[r]=t[r])}else{for(r=-1;++r<f;)i=t[r],o=n[r],i?(i.__data__=o,h[r]=i):p[r]=ht(o);for(;r<c;++r)p[r]=ht(n[r]);for(;r<a;++r)d[r]=t[r]}p.update=h,p.parentNode=h.parentNode=d.parentNode=t.parentNode,u.push(p),s.push(h),l.push(d)}var u=vt([]),s=X([]),l=X([]);if("function"===typeof t)for(;++i<o;)a(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<o;)a(n=this[i],t);return s.enter=function(){return u},s.exit=function(){return l},s},K.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},K.filter=function(t){var e,n,r,i=[];"function"!==typeof t&&(t=pt(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var u=0,s=n.length;u<s;u++)(r=n[u])&&t.call(r,r.__data__,u,o)&&e.push(r)}return X(i)},K.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},K.sort=function(t){t=function(t){arguments.length||(t=m);return function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},K.each=function(t){return dt(this,function(e,n,r){t.call(e,e.__data__,n,r)})},K.call=function(t){var e=u(arguments);return t.apply(e[0]=this,e),this},K.empty=function(){return!this.node()},K.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},K.size=function(){var t=0;return dt(this,function(){++t}),t};var mt=[];function yt(t,e,n){var r="__on"+t,i=t.indexOf("."),a=bt;i>0&&(t=t.slice(0,i));var s=gt.get(t);function l(){var e=this[r];e&&(this.removeEventListener(t,e,e.$),delete this[r])}return s&&(t=s,a=_t),i?e?function(){var i=a(e,u(arguments));l.call(this),this.addEventListener(t,this[r]=i,i.$=n),i._=e}:l:e?N:function(){var e,n=new RegExp("^__on([^.]+)"+o.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}}o.selection.enter=vt,o.selection.enter.prototype=mt,mt.append=K.append,mt.empty=K.empty,mt.node=K.node,mt.call=K.call,mt.size=K.size,mt.select=function(t){for(var e,n,r,i,o,a=[],u=-1,s=this.length;++u<s;){r=(i=this[u]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(o=i[l])?(e.push(r[l]=n=t.call(i.parentNode,o.__data__,l,u)),n.__data__=o.__data__):e.push(null)}return X(a)},mt.insert=function(t,e){return arguments.length<2&&(e=function(t){var e,n;return function(r,i,o){var a,u=t[o].update,s=u.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=u[e])&&++e<s;);return a}}(this)),K.insert.call(this,t,e)},o.select=function(t){var e;return"string"===typeof t?(e=[Z(t,s)]).parentNode=s.documentElement:(e=[t]).parentNode=l(t),X([e])},o.selectAll=function(t){var e;return"string"===typeof t?(e=u(Y(t,s))).parentNode=s.documentElement:(e=u(t)).parentNode=null,X([e])},K.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=!1),t)this.each(yt(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(yt(t,e,n))};var gt=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function bt(t,e){return function(n){var r=o.event;o.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{o.event=r}}}function _t(t,e){var n=bt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}s&&gt.forEach(function(t){"on"+t in s&&gt.remove(t)});var xt,wt=0;function kt(t){var e=".dragsuppress-"+ ++wt,n="click"+e,r=o.select(c(t)).on("touchmove"+e,q).on("dragstart"+e,q).on("selectstart"+e,q);if(null==xt&&(xt=!("onselectstart"in t)&&F(t.style,"userSelect")),xt){var i=l(t).style,a=i[xt];i[xt]="none"}return function(t){if(r.on(e,null),xt&&(i[xt]=a),t){var o=function(){r.on(n,null)};r.on(n,function(){q(),o()},!0),setTimeout(o,0)}}}o.mouse=function(t){return St(t,V())};var Et=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function St(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(Et<0){var i=c(t);if(i.scrollX||i.scrollY){var a=(n=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Et=!(a.f||a.e),n.remove()}}return Et?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var u=t.getBoundingClientRect();return[e.clientX-u.left-t.clientLeft,e.clientY-u.top-t.clientTop]}function Ot(){return o.event.changedTouches[0].identifier}o.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=V().changedTouches),e)for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).identifier===n)return St(t,r)},o.behavior.drag=function(){var t=W(i,"drag","dragstart","dragend"),e=null,n=a(N,o.mouse,c,"mousemove","mouseup"),r=a(Ot,o.touch,R,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function a(n,r,i,a,u){return function(){var s,l=o.event.target.correspondingElement||o.event.target,c=this.parentNode,f=t.of(this,arguments),h=0,p=n(),d=".drag"+(null==p?"":"-"+p),v=o.select(i(l)).on(a+d,function(){var t,e,n=r(c,p);if(!n)return;t=n[0]-y[0],e=n[1]-y[1],h|=t|e,y=n,f({type:"drag",x:n[0]+s[0],y:n[1]+s[1],dx:t,dy:e})}).on(u+d,function(){if(!r(c,p))return;v.on(a+d,null).on(u+d,null),m(h),f({type:"dragend"})}),m=kt(l),y=r(c,p);s=e?[(s=e.apply(this,arguments)).x-y[0],s.y-y[1]]:[0,0],f({type:"dragstart"})}}return i.origin=function(t){return arguments.length?(e=t,i):e},o.rebind(i,t,"on")},o.touches=function(t,e){return arguments.length<2&&(e=V().touches),e?u(e).map(function(e){var n=St(t,e);return n.identifier=e.identifier,n}):[]};var At=1e-6,Mt=At*At,Ct=Math.PI,Tt=2*Ct,jt=Tt-At,Dt=Ct/2,Pt=Ct/180,zt=180/Ct;function Rt(t){return t>0?1:t<0?-1:0}function It(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Ft(t){return t>1?0:t<-1?Ct:Math.acos(t)}function Lt(t){return t>1?Dt:t<-1?-Dt:Math.asin(t)}function Nt(t){return((t=Math.exp(t))+1/t)/2}function Bt(t){return(t=Math.sin(t/2))*t}var Ut=Math.SQRT2;o.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],u=e[0],s=e[1],l=e[2],c=u-i,f=s-o,h=c*c+f*f;if(h<Mt)r=Math.log(l/a)/Ut,n=function(t){return[i+t*c,o+t*f,a*Math.exp(Ut*t*r)]};else{var p=Math.sqrt(h),d=(l*l-a*a+4*h)/(2*a*2*p),v=(l*l-a*a-4*h)/(2*l*2*p),m=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(v*v+1)-v);r=(y-m)/Ut,n=function(t){var e,n=t*r,u=Nt(m),s=a/(2*p)*(u*(e=Ut*n+m,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[i+s*c,o+s*f,a*u/Nt(Ut*n+m)]}}return n.duration=1e3*r,n},o.behavior.zoom=function(){var t,e,n,r,i,a,u,l,f,h={x:0,y:0,k:1},p=[960,500],d=Wt,v=250,m=0,y="mousedown.zoom",g="mousemove.zoom",b="mouseup.zoom",_="touchstart.zoom",x=W(w,"zoomstart","zoom","zoomend");function w(t){t.on(y,j).on(Vt+".zoom",P).on("dblclick.zoom",z).on(_,D)}function k(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function E(t){h.k=Math.max(d[0],Math.min(d[1],t))}function S(t,e){e=function(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function O(t,n,r,i){t.__chart__={x:h.x,y:h.y,k:h.k},E(Math.pow(2,i)),S(e=n,r),t=o.select(t),v>0&&(t=t.transition().duration(v)),t.call(w.event)}function A(){u&&u.domain(a.range().map(function(t){return(t-h.x)/h.k}).map(a.invert)),f&&f.domain(l.range().map(function(t){return(t-h.y)/h.k}).map(l.invert))}function M(t){m++||t({type:"zoomstart"})}function C(t){A(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function T(t){--m||(t({type:"zoomend"}),e=null)}function j(){var t=this,e=x.of(t,arguments),n=0,r=o.select(c(t)).on(g,function(){n=1,S(o.mouse(t),i),C(e)}).on(b,function(){r.on(g,null).on(b,null),a(n),T(e)}),i=k(o.mouse(t)),a=kt(t);gu.call(t),M(e)}function D(){var t,e=this,n=x.of(e,arguments),r={},a=0,u=".zoom-"+o.event.changedTouches[0].identifier,s="touchmove"+u,l="touchend"+u,c=[],f=o.select(e),p=kt(e);function d(){var n=o.touches(e);return t=h.k,n.forEach(function(t){t.identifier in r&&(r[t.identifier]=k(t))}),n}function v(){var t=o.event.target;o.select(t).on(s,m).on(l,g),c.push(t);for(var n=o.event.changedTouches,u=0,f=n.length;u<f;++u)r[n[u].identifier]=null;var p=d(),v=Date.now();if(1===p.length){if(v-i<500){var y=p[0];O(e,y,r[y.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),q()}i=v}else if(p.length>1){y=p[0];var b=p[1],_=y[0]-b[0],x=y[1]-b[1];a=_*_+x*x}}function m(){var u,s,l,c,f=o.touches(e);gu.call(e);for(var h=0,p=f.length;h<p;++h,c=null)if(l=f[h],c=r[l.identifier]){if(s)break;u=l,s=c}if(c){var d=(d=l[0]-u[0])*d+(d=l[1]-u[1])*d,v=a&&Math.sqrt(d/a);u=[(u[0]+l[0])/2,(u[1]+l[1])/2],s=[(s[0]+c[0])/2,(s[1]+c[1])/2],E(v*t)}i=null,S(u,s),C(n)}function g(){if(o.event.touches.length){for(var t=o.event.changedTouches,e=0,i=t.length;e<i;++e)delete r[t[e].identifier];for(var a in r)return void d()}o.selectAll(c).on(u,null),f.on(y,j).on(_,D),p(),T(n)}v(),M(n),f.on(y,null).on(_,v)}function P(){var i=x.of(this,arguments);r?clearTimeout(r):(gu.call(this),t=k(e=n||o.mouse(this)),M(i)),r=setTimeout(function(){r=null,T(i)},50),q(),E(Math.pow(2,.002*qt())*h.k),S(e,t),C(i)}function z(){var t=o.mouse(this),e=Math.log(h.k)/Math.LN2;O(this,t,k(t),o.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return Vt||(Vt="onwheel"in s?(qt=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in s?(qt=function(){return o.event.wheelDelta},"mousewheel"):(qt=function(){return-o.event.detail},"MozMousePixelScroll")),w.event=function(t){t.each(function(){var t=x.of(this,arguments),n=h;xu?o.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},M(t)}).tween("zoom:zoom",function(){var r=p[0],i=p[1],a=e?e[0]:r/2,u=e?e[1]:i/2,s=o.interpolateZoom([(a-h.x)/h.k,(u-h.y)/h.k,r/h.k],[(a-n.x)/n.k,(u-n.y)/n.k,r/n.k]);return function(e){var n=s(e),i=r/n[2];this.__chart__=h={x:a-n[0]*i,y:u-n[1]*i,k:i},C(t)}}).each("interrupt.zoom",function(){T(t)}).each("end.zoom",function(){T(t)}):(this.__chart__=h,M(t),C(t),T(t))})},w.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},A(),w):[h.x,h.y]},w.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},E(+t),A(),w):h.k},w.scaleExtent=function(t){return arguments.length?(d=null==t?Wt:[+t[0],+t[1]],w):d},w.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],w):n},w.size=function(t){return arguments.length?(p=t&&[+t[0],+t[1]],w):p},w.duration=function(t){return arguments.length?(v=+t,w):v},w.x=function(t){return arguments.length?(u=t,a=t.copy(),h={x:0,y:0,k:1},w):u},w.y=function(t){return arguments.length?(f=t,l=t.copy(),h={x:0,y:0,k:1},w):f},o.rebind(w,x,"on")};var qt,Vt,Wt=[0,1/0];function Ht(){}function Gt(t,e,n){return this instanceof Gt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Gt?new Gt(t.h,t.s,t.l):de(""+t,ve,Gt):new Gt(t,e,n)}o.color=Ht,Ht.prototype.toString=function(){return this.rgb()+""},o.hsl=Gt;var Xt=Gt.prototype=new Ht;function Zt(t,e,n){var r,i;function o(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new le(o(t+120),o(t),o(t-120))}function Yt(t,e,n){return this instanceof Yt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Yt?new Yt(t.h,t.c,t.l):oe(t instanceof Jt?t.l:(t=me((t=o.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Yt(t,e,n)}Xt.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Gt(this.h,this.s,this.l/t)},Xt.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Gt(this.h,this.s,t*this.l)},Xt.rgb=function(){return Zt(this.h,this.s,this.l)},o.hcl=Yt;var $t=Yt.prototype=new Ht;function Kt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Jt(n,Math.cos(t*=Pt)*e,Math.sin(t)*e)}function Jt(t,e,n){return this instanceof Jt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Jt?new Jt(t.l,t.a,t.b):t instanceof Yt?Kt(t.h,t.c,t.l):me((t=le(t)).r,t.g,t.b):new Jt(t,e,n)}$t.brighter=function(t){return new Yt(this.h,this.c,Math.min(100,this.l+Qt*(arguments.length?t:1)))},$t.darker=function(t){return new Yt(this.h,this.c,Math.max(0,this.l-Qt*(arguments.length?t:1)))},$t.rgb=function(){return Kt(this.h,this.c,this.l).rgb()},o.lab=Jt;var Qt=18,te=.95047,ee=1,ne=1.08883,re=Jt.prototype=new Ht;function ie(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return new le(se(3.2404542*(i=ae(i)*te)-1.5371385*(r=ae(r)*ee)-.4985314*(o=ae(o)*ne)),se(-.969266*i+1.8760108*r+.041556*o),se(.0556434*i-.2040259*r+1.0572252*o))}function oe(t,e,n){return t>0?new Yt(Math.atan2(n,e)*zt,Math.sqrt(e*e+n*n),t):new Yt(NaN,NaN,t)}function ae(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ue(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function se(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function le(t,e,n){return this instanceof le?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof le?new le(t.r,t.g,t.b):de(""+t,le,Zt):new le(t,e,n)}function ce(t){return new le(t>>16,t>>8&255,255&t)}function fe(t){return ce(t)+""}re.brighter=function(t){return new Jt(Math.min(100,this.l+Qt*(arguments.length?t:1)),this.a,this.b)},re.darker=function(t){return new Jt(Math.max(0,this.l-Qt*(arguments.length?t:1)),this.a,this.b)},re.rgb=function(){return ie(this.l,this.a,this.b)},o.rgb=le;var he=le.prototype=new Ht;function pe(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function de(t,e,n){var r,i,o,a=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(ge(i[0]),ge(i[1]),ge(i[2]))}return(o=be.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,u=240&o,u|=u>>4,s=15&o,s|=s<<4):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,s=255&o)),e(a,u,s))}function ve(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),u=a-o,s=(a+o)/2;return u?(i=s<.5?u/(a+o):u/(2-a-o),r=t==a?(e-n)/u+(e<n?6:0):e==a?(n-t)/u+2:(t-e)/u+4,r*=60):(r=NaN,i=s>0&&s<1?0:r),new Gt(r,i,s)}function me(t,e,n){var r=ue((.4124564*(t=ye(t))+.3575761*(e=ye(e))+.1804375*(n=ye(n)))/te),i=ue((.2126729*t+.7151522*e+.072175*n)/ee);return Jt(116*i-16,500*(r-i),200*(i-ue((.0193339*t+.119192*e+.9503041*n)/ne)))}function ye(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ge(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}he.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new le(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new le(i,i,i)},he.darker=function(t){return new le((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},he.hsl=function(){return ve(this.r,this.g,this.b)},he.toString=function(){return"#"+pe(this.r)+pe(this.g)+pe(this.b)};var be=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function _e(t){return"function"===typeof t?t:function(){return t}}function xe(t){return function(e,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=null),we(e,n,t,r)}}function we(t,e,n,r){var i={},a=o.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,c=null;function f(){var t,e=l.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||e>=200&&e<300||304===e){try{t=n.call(i,l)}catch(Yu){return void a.error.call(i,Yu)}a.load.call(i,t)}else a.error.call(i,l)}return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=f:l.onreadystatechange=function(){l.readyState>3&&f()},l.onprogress=function(t){var e=o.event;o.event=t;try{a.progress.call(i,l)}finally{o.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.responseType=function(t){return arguments.length?(c=t,i):c},i.response=function(t){return n=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(u(arguments)))}}),i.send=function(n,r,o){if(2===arguments.length&&"function"===typeof r&&(o=r,r=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var u in s)l.setRequestHeader(u,s[u]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=c&&(l.responseType=c),null!=o&&i.on("error",o).on("load",function(t){o(null,t)}),a.beforesend.call(i,l),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},o.rebind(i,a,"on"),null==r?i:i.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(r))}be.forEach(function(t,e){be.set(t,ce(e))}),o.functor=_e,o.xhr=xe(R),o.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=we(t,e,null==n?o:a(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?o:a(t)):n},i}function o(t){return i.parse(t.responseText)}function a(t){return function(e){return i.parse(e.responseText,t)}}function u(e){return e.map(s).join(t)}function s(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i})},i.parseRows=function(t,e){var n,i,o={},a={},u=[],s=t.length,l=0,c=0;function f(){if(l>=s)return a;if(i)return i=!1,o;var e=l;if(34===t.charCodeAt(e)){for(var n=e;n++<s;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return l=n+2,13===(u=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++l):10===u&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l<s;){var u,c=1;if(10===(u=t.charCodeAt(l++)))i=!0;else if(13===u)i=!0,10===t.charCodeAt(l)&&(++l,++c);else if(u!==r)continue;return t.slice(e,l-c)}return t.slice(e)}for(;(n=f())!==a;){for(var h=[];n!==o&&n!==a;)h.push(n),n=f();e&&null==(h=e(h,c++))||u.push(h)}return u},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new z,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(s).join(t)].concat(e.map(function(e){return r.map(function(t){return s(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(u).join("\n")},i},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("\t","text/tab-separated-values");var ke,Ee,Se,Oe,Ae=this[F(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Me(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i={c:t,t:n+e,n:null};return Ee?Ee.n=i:ke=i,Ee=i,Se||(Oe=clearTimeout(Oe),Se=1,Ae(Ce)),i}function Ce(){var t=Te(),e=je()-t;e>24?(isFinite(e)&&(clearTimeout(Oe),Oe=setTimeout(Ce,e)),Se=0):(Se=1,Ae(Ce))}function Te(){for(var t=Date.now(),e=ke;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function je(){for(var t,e=ke,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ke=e.n;return Ee=t,n}function De(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}o.timer=function(){Me.apply(this,arguments)},o.timer.flush=function(){Te(),je()},o.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Pe=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*w(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});function ze(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,a=r&&n?function(t,e){for(var i=t.length,o=[],a=0,u=r[0],s=0;i>0&&u>0&&(s+u+1>e&&(u=Math.max(1,e-s)),o.push(t.substring(i-=u,i+u)),!((s+=u+1)>e));)u=r[a=(a+1)%r.length];return o.reverse().join(n)}:R;return function(t){var n=Re.exec(t),r=n[1]||" ",u=n[2]||">",s=n[3]||"-",l=n[4]||"",c=n[5],f=+n[6],h=n[7],p=n[8],d=n[9],v=1,m="",y="",g=!1,b=!0;switch(p&&(p=+p.substring(1)),(c||"0"===r&&"="===u)&&(c=r="0",u="="),d){case"n":h=!0,d="g";break;case"%":v=100,y="%",d="f";break;case"p":v=100,y="%",d="r";break;case"b":case"o":case"x":case"X":"#"===l&&(m="0"+d.toLowerCase());case"c":b=!1;case"d":g=!0,p=0;break;case"s":v=-1,d="r"}"$"===l&&(m=i[0],y=i[1]),"r"!=d||p||(d="g"),null!=p&&("g"==d?p=Math.max(1,Math.min(21,p)):"e"!=d&&"f"!=d||(p=Math.max(0,Math.min(20,p)))),d=Ie.get(d)||Fe;var _=c&&h;return function(t){var n=y;if(g&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===s?"":s;if(v<0){var l=o.formatPrefix(t,p);t=l.scale(t),n=l.symbol+y}else t*=v;var x,w,k=(t=d(t,p)).lastIndexOf(".");if(k<0){var E=b?t.lastIndexOf("e"):-1;E<0?(x=t,w=""):(x=t.substring(0,E),w=t.substring(E))}else x=t.substring(0,k),w=e+t.substring(k+1);!c&&h&&(x=a(x,1/0));var S=m.length+x.length+w.length+(_?0:i.length),O=S<f?new Array(S=f-S+1).join(r):"";return _&&(x=a(O+x,O.length?f-w.length:1/0)),i+=m,t=x+w,("<"===u?i+t+O:">"===u?O+i+t:"^"===u?O.substring(0,S>>=1)+i+t+O.substring(S):i+(_?t:O+t))+n}}}o.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=o.round(t,De(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Pe[8+n/3]};var Re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ie=o.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=o.round(t,De(t,e))).toFixed(Math.max(0,Math.min(20,De(t*(1+1e-15),e))))}});function Fe(t){return t+""}var Le=o.time={},Ne=Date;function Be(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Be.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ue.setUTCDate.apply(this._,arguments)},setDay:function(){Ue.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ue.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ue.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ue.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ue.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ue.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ue.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ue.setTime.apply(this._,arguments)}};var Ue=Date.prototype;function qe(t,e,n){function r(e){var n=t(e),r=o(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Ne(n-1)),1),n}function o(t,n){return e(t=new Ne(+t),n),t}function a(t,r,o){var a=i(t),u=[];if(o>1)for(;a<r;)n(a)%o||u.push(new Date(+a)),e(a,1);else for(;a<r;)u.push(new Date(+a)),e(a,1);return u}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var u=t.utc=Ve(t);return u.floor=u,u.round=Ve(r),u.ceil=Ve(i),u.offset=Ve(o),u.range=function(t,e,n){try{Ne=Be;var r=new Be;return r._=t,a(r,e,n)}finally{Ne=Date}},t}function Ve(t){return function(e,n){try{Ne=Be;var r=new Be;return r._=e,t(r,n)._}finally{Ne=Date}}}function We(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,u=t.shortDays,s=t.months,l=t.shortMonths;function c(t){var e=t.length;function n(n){for(var r,i,o,a=[],u=-1,s=0;++u<e;)37===t.charCodeAt(u)&&(a.push(t.slice(s,u)),null!=(i=He[r=t.charAt(++u)])&&(r=t.charAt(++u)),(o=x[r])&&(r=o(n,null==i?"e"===r?" ":"0":i)),a.push(r),s=u+1);return a.push(t.slice(s,u)),a.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Ne!==Be,i=new(r?Be:Ne);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return t},n}function f(t,e,n,r){for(var i,o,a,u=0,s=e.length,l=n.length;u<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(u++))){if(a=e.charAt(u++),!(o=w[a in He?e.charAt(u++):a])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(t){var e=c(t);function n(t){try{var n=new(Ne=Be);return n._=t,e(n)}finally{Ne=Date}}return n.parse=function(t){try{Ne=Be;var n=e.parse(t);return n&&n._}finally{Ne=Date}},n.toString=e.toString,n},c.multi=c.utc.multi=pn;var h=o.map(),p=Ye(a),d=$e(a),v=Ye(u),m=$e(u),y=Ye(s),g=$e(s),b=Ye(l),_=$e(l);i.forEach(function(t,e){h.set(t.toLowerCase(),e)});var x={a:function(t){return u[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:c(e),d:function(t,e){return Ze(t.getDate(),e,2)},e:function(t,e){return Ze(t.getDate(),e,2)},H:function(t,e){return Ze(t.getHours(),e,2)},I:function(t,e){return Ze(t.getHours()%12||12,e,2)},j:function(t,e){return Ze(1+Le.dayOfYear(t),e,3)},L:function(t,e){return Ze(t.getMilliseconds(),e,3)},m:function(t,e){return Ze(t.getMonth()+1,e,2)},M:function(t,e){return Ze(t.getMinutes(),e,2)},p:function(t){return i[+(t.getHours()>=12)]},S:function(t,e){return Ze(t.getSeconds(),e,2)},U:function(t,e){return Ze(Le.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ze(Le.mondayOfYear(t),e,2)},x:c(n),X:c(r),y:function(t,e){return Ze(t.getFullYear()%100,e,2)},Y:function(t,e){return Ze(t.getFullYear()%1e4,e,4)},Z:fn,"%":function(){return"%"}},w={a:function(t,e,n){v.lastIndex=0;var r=v.exec(e.slice(n));return r?(t.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){p.lastIndex=0;var r=p.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){y.lastIndex=0;var r=y.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return f(t,x.c.toString(),e,n)},d:on,e:on,H:un,I:un,j:an,L:cn,m:rn,M:sn,p:function(t,e,n){var r=h.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:ln,U:Je,w:Ke,W:Qe,x:function(t,e,n){return f(t,x.x.toString(),e,n)},X:function(t,e,n){return f(t,x.X.toString(),e,n)},y:en,Y:tn,Z:nn,"%":hn};return c}Le.year=qe(function(t){return(t=Le.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Le.years=Le.year.range,Le.years.utc=Le.year.utc.range,Le.day=qe(function(t){var e=new Ne(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Le.days=Le.day.range,Le.days.utc=Le.day.utc.range,Le.dayOfYear=function(t){var e=Le.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Le[t]=qe(function(t){return(t=Le.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Le.year(t).getDay();return Math.floor((Le.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Le[t+"s"]=n.range,Le[t+"s"].utc=n.utc.range,Le[t+"OfYear"]=function(t){var n=Le.year(t).getDay();return Math.floor((Le.dayOfYear(t)+(n+e)%7)/7)}}),Le.week=Le.sunday,Le.weeks=Le.sunday.range,Le.weeks.utc=Le.sunday.utc.range,Le.weekOfYear=Le.sundayOfYear;var He={"-":"",_:" ",0:"0"},Ge=/^\s*\d+/,Xe=/^%/;function Ze(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Ye(t){return new RegExp("^(?:"+t.map(o.requote).join("|")+")","i")}function $e(t){for(var e=new E,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ke(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Je(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Qe(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function tn(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function en(t,e,n){Ge.lastIndex=0;var r,i=Ge.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function nn(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function rn(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function on(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function an(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function un(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function sn(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ln(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function cn(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function fn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=w(e)/60|0,i=w(e)%60;return n+Ze(r,"0",2)+Ze(i,"0",2)}function hn(t,e,n){Xe.lastIndex=0;var r=Xe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function pn(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}o.locale=function(t){return{numberFormat:ze(t),timeFormat:We(t)}};var dn=o.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vn(){}o.format=dn.numberFormat,o.geo={},vn.prototype={s:0,t:0,add:function(t){yn(t,this.t,mn),yn(mn.s,this.s,this),this.s?this.t+=mn.t:this.s=mn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var mn=new vn;function yn(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function gn(t,e){t&&_n.hasOwnProperty(t.type)&&_n[t.type](t,e)}o.geo.stream=function(t,e){t&&bn.hasOwnProperty(t.type)?bn[t.type](t,e):gn(t,e)};var bn={Feature:function(t,e){gn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)gn(n[r].geometry,e)}},_n={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){xn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)xn(n[r],e,0)},Polygon:function(t,e){wn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)wn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)gn(n[r],e)}};function xn(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function wn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)xn(t[n],e,1);e.polygonEnd()}o.geo.area=function(t){return kn=0,o.geo.stream(t,In),kn};var kn,En,Sn,On,An,Mn,Cn,Tn,jn,Dn,Pn,zn,Rn=new vn,In={sphere:function(){kn+=4*Ct},point:N,lineStart:N,lineEnd:N,polygonStart:function(){Rn.reset(),In.lineStart=Fn},polygonEnd:function(){var t=2*Rn;kn+=t<0?4*Ct+t:t,In.lineStart=In.lineEnd=In.point=N}};function Fn(){var t,e,n,r,i;function o(t,e){e=e*Pt/2+Ct/4;var o=(t*=Pt)-n,a=o>=0?1:-1,u=a*o,s=Math.cos(e),l=Math.sin(e),c=i*l,f=r*s+c*Math.cos(u),h=c*a*Math.sin(u);Rn.add(Math.atan2(h,f)),n=t,r=s,i=l}In.point=function(a,u){In.point=o,n=(t=a)*Pt,r=Math.cos(u=(e=u)*Pt/2+Ct/4),i=Math.sin(u)},In.lineEnd=function(){o(t,e)}}function Ln(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Nn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Bn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Un(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function qn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Vn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Wn(t){return[Math.atan2(t[1],t[0]),Lt(t[2])]}function Hn(t,e){return w(t[0]-e[0])<At&&w(t[1]-e[1])<At}o.geo.bounds=function(){var t,e,n,r,i,a,u,s,l,c,f,h={point:p,lineStart:v,lineEnd:m,polygonStart:function(){h.point=y,h.lineStart=g,h.lineEnd=b,l=0,In.polygonStart()},polygonEnd:function(){In.polygonEnd(),h.point=p,h.lineStart=v,h.lineEnd=m,Rn<0?(t=-(n=180),e=-(r=90)):l>At?r=90:l<-At&&(e=-90),f[0]=t,f[1]=n}};function p(i,o){c.push(f=[t=i,n=i]),o<e&&(e=o),o>r&&(r=o)}function d(o,a){var u=Ln([o*Pt,a*Pt]);if(s){var l=Bn(s,u),c=Bn([l[1],-l[0],0],l);Vn(c),c=Wn(c);var f=o-i,h=f>0?1:-1,d=c[0]*zt*h,v=w(f)>180;if(v^(h*i<d&&d<h*o))(m=c[1]*zt)>r&&(r=m);else if(v^(h*i<(d=(d+360)%360-180)&&d<h*o)){var m;(m=-c[1]*zt)<e&&(e=m)}else a<e&&(e=a),a>r&&(r=a);v?o<i?_(t,o)>_(t,n)&&(n=o):_(o,n)>_(t,n)&&(t=o):n>=t?(o<t&&(t=o),o>n&&(n=o)):o>i?_(t,o)>_(t,n)&&(n=o):_(o,n)>_(t,n)&&(t=o)}else p(o,a);s=u,i=o}function v(){h.point=d}function m(){f[0]=t,f[1]=n,h.point=p,s=null}function y(t,e){if(s){var n=t-i;l+=w(n)>180?n+(n>0?360:-360):n}else a=t,u=e;In.point(t,e),d(t,e)}function g(){In.lineStart()}function b(){y(a,u),In.lineEnd(),w(l)>At&&(t=-(n=180)),f[0]=t,f[1]=n,s=null}function _(t,e){return(e-=t)<0?e+360:e}function x(t,e){return t[0]-e[0]}function k(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(i){if(r=n=-(t=e=1/0),c=[],o.geo.stream(i,h),l=c.length){c.sort(x);for(var a=1,u=[v=c[0]];a<l;++a)k((p=c[a])[0],v)||k(p[1],v)?(_(v[0],p[1])>_(v[0],v[1])&&(v[1]=p[1]),_(p[0],v[1])>_(v[0],v[1])&&(v[0]=p[0])):u.push(v=p);for(var s,l,p,d=-1/0,v=(a=0,u[l=u.length-1]);a<=l;v=p,++a)p=u[a],(s=_(v[1],p[0]))>d&&(d=s,t=p[0],n=v[1])}return c=f=null,t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,r]]}}(),o.geo.centroid=function(t){En=Sn=On=An=Mn=Cn=Tn=jn=Dn=Pn=zn=0,o.geo.stream(t,Gn);var e=Dn,n=Pn,r=zn,i=e*e+n*n+r*r;return i<Mt&&(e=Cn,n=Tn,r=jn,Sn<At&&(e=On,n=An,r=Mn),(i=e*e+n*n+r*r)<Mt)?[NaN,NaN]:[Math.atan2(n,e)*zt,Lt(r/Math.sqrt(i))*zt]};var Gn={sphere:N,point:Xn,lineStart:Yn,lineEnd:$n,polygonStart:function(){Gn.lineStart=Kn},polygonEnd:function(){Gn.lineStart=Yn}};function Xn(t,e){t*=Pt;var n=Math.cos(e*=Pt);Zn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Zn(t,e,n){On+=(t-On)/++En,An+=(e-An)/En,Mn+=(n-Mn)/En}function Yn(){var t,e,n;function r(r,i){r*=Pt;var o=Math.cos(i*=Pt),a=o*Math.cos(r),u=o*Math.sin(r),s=Math.sin(i),l=Math.atan2(Math.sqrt((l=e*s-n*u)*l+(l=n*a-t*s)*l+(l=t*u-e*a)*l),t*a+e*u+n*s);Sn+=l,Cn+=l*(t+(t=a)),Tn+=l*(e+(e=u)),jn+=l*(n+(n=s)),Zn(t,e,n)}Gn.point=function(i,o){i*=Pt;var a=Math.cos(o*=Pt);t=a*Math.cos(i),e=a*Math.sin(i),n=Math.sin(o),Gn.point=r,Zn(t,e,n)}}function $n(){Gn.point=Xn}function Kn(){var t,e,n,r,i;function o(t,e){t*=Pt;var o=Math.cos(e*=Pt),a=o*Math.cos(t),u=o*Math.sin(t),s=Math.sin(e),l=r*s-i*u,c=i*a-n*s,f=n*u-r*a,h=Math.sqrt(l*l+c*c+f*f),p=n*a+r*u+i*s,d=h&&-Ft(p)/h,v=Math.atan2(h,p);Dn+=d*l,Pn+=d*c,zn+=d*f,Sn+=v,Cn+=v*(n+(n=a)),Tn+=v*(r+(r=u)),jn+=v*(i+(i=s)),Zn(n,r,i)}Gn.point=function(a,u){t=a,e=u,Gn.point=o,a*=Pt;var s=Math.cos(u*=Pt);n=s*Math.cos(a),r=s*Math.sin(a),i=Math.sin(u),Zn(n,r,i)},Gn.lineEnd=function(){o(t,e),Gn.lineEnd=$n,Gn.point=Xn}}function Jn(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Qn(){return!0}function tr(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Hn(n,r)){i.lineStart();for(var u=0;u<e;++u)i.point((n=t[u])[0],n[1]);i.lineEnd()}else{var s=new nr(n,t,null,!0),l=new nr(n,null,s,!1);s.o=l,o.push(s),a.push(l),s=new nr(r,t,null,!1),l=new nr(r,null,s,!0),s.o=l,o.push(s),a.push(l)}}}),a.sort(e),er(o),er(a),o.length){for(var u=0,s=n,l=a.length;u<l;++u)a[u].e=s=!s;for(var c,f,h=o[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(u=0,l=c.length;u<l;++u)i.point((f=c[u])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d)for(u=(c=p.p.z).length-1;u>=0;--u)i.point((f=c[u])[0],f[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,d=!d}while(!p.v);i.lineEnd()}}}function er(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function nr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function rr(t,e,n,r){return function(i,a){var u,s=e(a),l=i.invert(r[0],r[1]),c={point:f,lineStart:p,lineEnd:d,polygonStart:function(){c.point=_,c.lineStart=x,c.lineEnd=w,u=[],v=[]},polygonEnd:function(){c.point=f,c.lineStart=p,c.lineEnd=d,u=o.merge(u);var t=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Rn.reset();for(var u=0,s=e.length;u<s;++u){var l=e[u],c=l.length;if(c)for(var f=l[0],h=f[0],p=f[1]/2+Ct/4,d=Math.sin(p),v=Math.cos(p),m=1;;){m===c&&(m=0);var y=(t=l[m])[0],g=t[1]/2+Ct/4,b=Math.sin(g),_=Math.cos(g),x=y-h,w=x>=0?1:-1,k=w*x,E=k>Ct,S=d*b;if(Rn.add(Math.atan2(S*w*Math.sin(k),v*_+S*Math.cos(k))),o+=E?x+w*Tt:x,E^h>=n^y>=n){var O=Bn(Ln(f),Ln(t));Vn(O);var A=Bn(i,O);Vn(A);var M=(E^x>=0?-1:1)*Lt(A[2]);(r>M||r===M&&(O[0]||O[1]))&&(a+=E^x>=0?1:-1)}if(!m++)break;h=y,d=b,v=_,f=t}}return(o<-At||o<At&&Rn<-At)^1&a}(l,v);u.length?(b||(a.polygonStart(),b=!0),tr(u,ar,t,n,a)):t&&(b||(a.polygonStart(),b=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),u=v=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function f(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function h(t,e){var n=i(t,e);s.point(n[0],n[1])}function p(){c.point=h,s.lineStart()}function d(){c.point=f,s.lineEnd()}var v,m,y=or(),g=e(y),b=!1;function _(t,e){m.push([t,e]);var n=i(t,e);g.point(n[0],n[1])}function x(){g.lineStart(),m=[]}function w(){_(m[0][0],m[0][1]),g.lineEnd();var t,e=g.clean(),n=y.buffer(),r=n.length;if(m.pop(),v.push(m),m=null,r)if(1&e){var i,o=-1;if((r=(t=n[0]).length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),u.push(n.filter(ir))}return c}}function ir(t){return t.length>1}function or(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:N,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function ar(t,e){return((t=t.x)[0]<0?t[1]-Dt-At:Dt-t[1])-((e=e.x)[0]<0?e[1]-Dt-At:Dt-e[1])}var ur=rr(Qn,function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var u=o>0?Ct:-Ct,s=w(o-n);w(s-Ct)<At?(t.point(n,r=(r+a)/2>0?Dt:-Dt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),e=0):i!==u&&s>=Ct&&(w(n-i)<At&&(n-=i*At),w(o-u)<At&&(o-=u*At),r=function(t,e,n,r){var i,o,a=Math.sin(t-n);return w(a)>At?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=o,r=a),i=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*Dt,r.point(-Ct,i),r.point(0,i),r.point(Ct,i),r.point(Ct,0),r.point(Ct,-i),r.point(0,-i),r.point(-Ct,-i),r.point(-Ct,0),r.point(-Ct,i);else if(w(t[0]-e[0])>At){var o=t[0]<e[0]?Ct:-Ct;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Ct,-Ct/2]);function sr(t,e,n,r){return function(i){var o,a=i.a,u=i.b,s=a.x,l=a.y,c=0,f=1,h=u.x-s,p=u.y-l;if(o=t-s,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>c&&(c=o)}if(o=n-s,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<f&&(f=o)}if(o=e-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<f&&(f=o)}else if(p>0){if(o>f)return;o>c&&(c=o)}if(o=r-l,p||!(o<0)){if(o/=p,p<0){if(o>f)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<f&&(f=o)}return c>0&&(i.a={x:s+c*h,y:l+c*p}),f<1&&(i.b={x:s+f*h,y:l+f*p}),i}}}}}}var lr=1e9;function cr(t,e,n,r){return function(s){var l,c,f,h,p,d,v,m,y,g,b,_=s,x=or(),w=sr(t,e,n,r),k={point:O,lineStart:function(){k.point=A,c&&c.push(f=[]);g=!0,y=!1,v=m=NaN},lineEnd:function(){l&&(A(h,p),d&&y&&x.rejoin(),l.push(x.buffer()));k.point=O,y&&s.lineEnd()},polygonStart:function(){s=x,l=[],c=[],b=!0},polygonEnd:function(){s=_,l=o.merge(l);var e=function(t){for(var e=0,n=c.length,r=t[1],i=0;i<n;++i)for(var o,a=1,u=c[i],s=u.length,l=u[0];a<s;++a)o=u[a],l[1]<=r?o[1]>r&&It(l,o,t)>0&&++e:o[1]<=r&&It(l,o,t)<0&&--e,l=o;return 0!==e}([t,r]),n=b&&e,i=l.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),E(null,null,1,s),s.lineEnd()),i&&tr(l,a,e,E,s),s.polygonEnd()),l=c=f=null}};function E(o,a,s,l){var c=0,f=0;if(null==o||(c=i(o,s))!==(f=i(a,s))||u(o,a)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==f);else l.point(a[0],a[1])}function S(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function O(t,e){S(t,e)&&s.point(t,e)}function A(t,e){var n=S(t=Math.max(-lr,Math.min(lr,t)),e=Math.max(-lr,Math.min(lr,e)));if(c&&f.push([t,e]),g)h=t,p=e,d=n,g=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&y)s.point(t,e);else{var r={a:{x:v,y:m},b:{x:t,y:e}};w(r)?(y||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),b=!1):n&&(s.lineStart(),s.point(t,e),b=!1)}v=t,m=e,y=n}return k};function i(r,i){return w(r[0]-t)<At?i>0?0:3:w(r[0]-n)<At?i>0?2:1:w(r[1]-e)<At?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function fr(t){var e=0,n=Ct/3,r=Rr(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ct/180,n=t[1]*Ct/180):[e/Ct*180,n/Ct*180]},i}function hr(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),o=Math.sqrt(i)/r;function a(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}return a.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,Lt((i-(t*t+n*n)*r*r)/(2*r))]},a}o.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),(i=o(t)).valid=!0,i},extent:function(u){return arguments.length?(o=cr(t=+u[0][0],e=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(o.geo.conicEqualArea=function(){return fr(hr)}).raw=hr,o.geo.albers=function(){return o.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},o.geo.albersUsa=function(){var t,e,n,r,i=o.geo.albers(),a=o.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=o.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(e,n){t=[e,n]}};function l(i){var o=i[0],a=i[1];return t=null,e(o,a),t||(n(o,a),t)||r(o,a),t}return l.invert=function(t){var e=i.scale(),n=i.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&r>=-.425&&r<-.214?a:o>=.166&&o<.234&&r>=-.214&&r<-.115?u:i).invert(t)},l.stream=function(t){var e=i.stream(t),n=a.stream(t),r=u.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},l.precision=function(t){return arguments.length?(i.precision(t),a.precision(t),u.precision(t),l):i.precision()},l.scale=function(t){return arguments.length?(i.scale(t),a.scale(.35*t),u.scale(t),l.translate(i.translate())):i.scale()},l.translate=function(t){if(!arguments.length)return i.translate();var o=i.scale(),c=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[c-.455*o,f-.238*o],[c+.455*o,f+.238*o]]).stream(s).point,n=a.translate([c-.307*o,f+.201*o]).clipExtent([[c-.425*o+At,f+.12*o+At],[c-.214*o-At,f+.234*o-At]]).stream(s).point,r=u.translate([c-.205*o,f+.212*o]).clipExtent([[c-.214*o+At,f+.166*o+At],[c-.115*o-At,f+.234*o-At]]).stream(s).point,l},l.scale(1070)};var pr,dr,vr,mr,yr,gr,br={point:N,lineStart:N,lineEnd:N,polygonStart:function(){dr=0,br.lineStart=_r},polygonEnd:function(){br.lineStart=br.lineEnd=br.point=N,pr+=w(dr/2)}};function _r(){var t,e,n,r;function i(t,e){dr+=r*t-n*e,n=t,r=e}br.point=function(o,a){br.point=i,t=n=o,e=r=a},br.lineEnd=function(){i(t,e)}}var xr={point:function(t,e){t<vr&&(vr=t);t>yr&&(yr=t);e<mr&&(mr=e);e>gr&&(gr=e)},lineStart:N,lineEnd:N,polygonStart:N,polygonEnd:N};function wr(){var t=kr(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(e){return t=kr(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r),n.point=o}function o(t,n){e.push("L",t,",",n)}function a(){n.point=r}function u(){e.push("Z")}return n}function kr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Er,Sr={point:Or,lineStart:Ar,lineEnd:Mr,polygonStart:function(){Sr.lineStart=Cr},polygonEnd:function(){Sr.point=Or,Sr.lineStart=Ar,Sr.lineEnd=Mr}};function Or(t,e){On+=t,An+=e,++Mn}function Ar(){var t,e;function n(n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o);Cn+=a*(t+n)/2,Tn+=a*(e+r)/2,jn+=a,Or(t=n,e=r)}Sr.point=function(r,i){Sr.point=n,Or(t=r,e=i)}}function Mr(){Sr.point=Or}function Cr(){var t,e,n,r;function i(t,e){var i=t-n,o=e-r,a=Math.sqrt(i*i+o*o);Cn+=a*(n+t)/2,Tn+=a*(r+e)/2,jn+=a,Dn+=(a=r*t-n*e)*(n+t),Pn+=a*(r+e),zn+=3*a,Or(n=t,r=e)}Sr.point=function(o,a){Sr.point=i,Or(t=n=o,e=r=a)},Sr.lineEnd=function(){i(t,e)}}function Tr(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(t){return e=t,n},result:N};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,Tt)}function i(e,r){t.moveTo(e,r),n.point=o}function o(e,n){t.lineTo(e,n)}function a(){n.point=r}function u(){t.closePath()}return n}function jr(t){var e=.5,n=Math.cos(30*Pt),r=16;function i(e){return(r?function(e){var n,i,a,u,s,l,c,f,h,p,d,v,m={point:y,lineStart:g,lineEnd:_,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=g}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function g(){f=NaN,m.point=b,e.lineStart()}function b(n,i){var a=Ln([n,i]),u=t(n,i);o(f,h,c,p,d,v,f=u[0],h=u[1],c=n,p=a[0],d=a[1],v=a[2],r,e),e.point(f,h)}function _(){m.point=y,e.lineEnd()}function x(){g(),m.point=w,m.lineEnd=k}function w(t,e){b(n=t,e),i=f,a=h,u=p,s=d,l=v,m.point=b}function k(){o(f,h,c,p,d,v,i,a,n,u,s,l,r,e),m.lineEnd=_,_()}return m}:function(e){return Pr(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})})(e)}function o(r,i,a,u,s,l,c,f,h,p,d,v,m,y){var g=c-r,b=f-i,_=g*g+b*b;if(_>4*e&&m--){var x=u+p,k=s+d,E=l+v,S=Math.sqrt(x*x+k*k+E*E),O=Math.asin(E/=S),A=w(w(E)-1)<At||w(a-h)<At?(a+h)/2:Math.atan2(k,x),M=t(A,O),C=M[0],T=M[1],j=C-r,D=T-i,P=b*j-g*D;(P*P/_>e||w((g*j+b*D)/_-.5)>.3||u*p+s*d+l*v<n)&&(o(r,i,a,u,s,l,C,T,A,x/=S,k/=S,E,m,y),y.point(C,T),o(C,T,A,x,k,E,c,f,h,p,d,v,m,y))}}return i.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function Dr(t){this.stream=t}function Pr(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function zr(t){return Rr(function(){return t})()}function Rr(t){var e,n,r,i,a,u,s=jr(function(t,n){return[(t=e(t,n))[0]*l+i,a-t[1]*l]}),l=150,c=480,f=250,h=0,p=0,d=0,v=0,m=0,y=ur,g=R,b=null,_=null;function x(t){return[(t=r(t[0]*Pt,t[1]*Pt))[0]*l+i,a-t[1]*l]}function k(t){return(t=r.invert((t[0]-i)/l,(a-t[1])/l))&&[t[0]*zt,t[1]*zt]}function E(){r=Jn(n=Nr(d,v,m),e);var t=e(h,p);return i=c-t[0]*l,a=f+t[1]*l,S()}function S(){return u&&(u.valid=!1,u=null),x}return x.stream=function(t){return u&&(u.valid=!1),(u=Ir(y(n,s(g(t))))).valid=!0,u},x.clipAngle=function(t){return arguments.length?(y=null==t?(b=t,ur):function(t){var e=Math.cos(t),n=e>0,r=w(e)>At;return rr(i,function(t){var e,u,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,h){var p,d=[f,h],v=i(f,h),m=n?v?0:a(f,h):v?a(f+(f<0?Ct:-Ct),h):0;if(!e&&(l=s=v)&&t.lineStart(),v!==s&&(p=o(e,d),(Hn(e,p)||Hn(d,p))&&(d[0]+=At,d[1]+=At,v=i(d[0],d[1]))),v!==s)c=0,v?(t.lineStart(),p=o(d,e),t.point(p[0],p[1])):(p=o(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(r&&e&&n^v){var y;m&u||!(y=o(d,e,!0))||(c=0,n?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!v||e&&Hn(e,d)||t.point(d[0],d[1]),e=d,s=v,u=m},lineEnd:function(){s&&t.lineEnd(),e=null},clean:function(){return c|(l&&s)<<1}}},Vr(t,6*Pt),n?[0,-t]:[-Ct,t-Ct]);function i(t,n){return Math.cos(t)*Math.cos(n)>e}function o(t,n,r){var i=[1,0,0],o=Bn(Ln(t),Ln(n)),a=Nn(o,o),u=o[0],s=a-u*u;if(!s)return!r&&t;var l=e*a/s,c=-e*u/s,f=Bn(i,o),h=qn(i,l);Un(h,qn(o,c));var p=f,d=Nn(h,p),v=Nn(p,p),m=d*d-v*(Nn(h,h)-1);if(!(m<0)){var y=Math.sqrt(m),g=qn(p,(-d-y)/v);if(Un(g,h),g=Wn(g),!r)return g;var b,_=t[0],x=n[0],k=t[1],E=n[1];x<_&&(b=_,_=x,x=b);var S=x-_,O=w(S-Ct)<At;if(!O&&E<k&&(b=k,k=E,E=b),O||S<At?O?k+E>0^g[1]<(w(g[0]-_)<At?k:E):k<=g[1]&&g[1]<=E:S>Ct^(_<=g[0]&&g[0]<=x)){var A=qn(p,(-d+y)/v);return Un(A,h),[g,Wn(A)]}}}function a(e,r){var i=n?t:Ct-t,o=0;return e<-i?o|=1:e>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}}((b=+t)*Pt),S()):b},x.clipExtent=function(t){return arguments.length?(_=t,g=t?cr(t[0][0],t[0][1],t[1][0],t[1][1]):R,S()):_},x.scale=function(t){return arguments.length?(l=+t,E()):l},x.translate=function(t){return arguments.length?(c=+t[0],f=+t[1],E()):[c,f]},x.center=function(t){return arguments.length?(h=t[0]%360*Pt,p=t[1]%360*Pt,E()):[h*zt,p*zt]},x.rotate=function(t){return arguments.length?(d=t[0]%360*Pt,v=t[1]%360*Pt,m=t.length>2?t[2]%360*Pt:0,E()):[d*zt,v*zt,m*zt]},o.rebind(x,s,"precision"),function(){return e=t.apply(this,arguments),x.invert=e.invert&&k,E()}}function Ir(t){return Pr(t,function(e,n){t.point(e*Pt,n*Pt)})}function Fr(t,e){return[t,e]}function Lr(t,e){return[t>Ct?t-Tt:t<-Ct?t+Tt:t,e]}function Nr(t,e,n){return t?e||n?Jn(Ur(t),qr(e,n)):Ur(t):e||n?qr(e,n):Lr}function Br(t){return function(e,n){return[(e+=t)>Ct?e-Tt:e<-Ct?e+Tt:e,n]}}function Ur(t){var e=Br(t);return e.invert=Br(-t),e}function qr(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),o=Math.sin(e);function a(t,e){var a=Math.cos(e),u=Math.cos(t)*a,s=Math.sin(t)*a,l=Math.sin(e),c=l*n+u*r;return[Math.atan2(s*i-c*o,u*n-l*r),Lt(c*i+s*o)]}return a.invert=function(t,e){var a=Math.cos(e),u=Math.cos(t)*a,s=Math.sin(t)*a,l=Math.sin(e),c=l*i-s*o;return[Math.atan2(s*i+l*o,u*n+c*r),Lt(c*n-u*r)]},a}function Vr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,u){var s=a*e;null!=i?(i=Wr(n,i),o=Wr(n,o),(a>0?i<o:i>o)&&(i+=a*Tt)):(i=t+a*Tt,o=t-.5*s);for(var l,c=i;a>0?c>o:c<o;c-=s)u.point((l=Wn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function Wr(t,e){var n=Ln(e);n[0]-=t,Vn(n);var r=Ft(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-At)%(2*Math.PI)}function Hr(t,e,n){var r=o.range(t,e-At,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Gr(t,e,n){var r=o.range(t,e-At,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Xr(t){return t.source}function Zr(t){return t.target}o.geo.path=function(){var t,e,n,r,i,a=4.5;function u(t){return t&&("function"===typeof a&&r.pointRadius(+a.apply(this,arguments)),i&&i.valid||(i=n(r)),o.geo.stream(t,i)),r.result()}function s(){return i=null,u}return u.area=function(t){return pr=0,o.geo.stream(t,n(br)),pr},u.centroid=function(t){return On=An=Mn=Cn=Tn=jn=Dn=Pn=zn=0,o.geo.stream(t,n(Sr)),zn?[Dn/zn,Pn/zn]:jn?[Cn/jn,Tn/jn]:Mn?[On/Mn,An/Mn]:[NaN,NaN]},u.bounds=function(t){return yr=gr=-(vr=mr=1/0),o.geo.stream(t,n(xr)),[[vr,mr],[yr,gr]]},u.projection=function(e){return arguments.length?(n=(t=e)?e.stream||function(t){var e=jr(function(e,n){return t([e*zt,n*zt])});return function(t){return Ir(e(t))}}(e):R,s()):t},u.context=function(t){return arguments.length?(r=null==(e=t)?new wr:new Tr(t),"function"!==typeof a&&r.pointRadius(a),s()):e},u.pointRadius=function(t){return arguments.length?(a="function"===typeof t?t:(r.pointRadius(+t),+t),u):a},u.projection(o.geo.albersUsa()).context(null)},o.geo.transform=function(t){return{stream:function(e){var n=new Dr(e);for(var r in t)n[r]=t[r];return n}}},Dr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},o.geo.projection=zr,o.geo.projectionMutator=Rr,(o.geo.equirectangular=function(){return zr(Fr)}).raw=Fr.invert=Fr,o.geo.rotation=function(t){function e(e){return(e=t(e[0]*Pt,e[1]*Pt))[0]*=zt,e[1]*=zt,e}return t=Nr(t[0]%360*Pt,t[1]*Pt,t.length>2?t[2]*Pt:0),e.invert=function(e){return(e=t.invert(e[0]*Pt,e[1]*Pt))[0]*=zt,e[1]*=zt,e},e},Lr.invert=Fr,o.geo.circle=function(){var t,e,n=[0,0],r=6;function i(){var t="function"===typeof n?n.apply(this,arguments):n,r=Nr(-t[0]*Pt,-t[1]*Pt,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=r(t,e)),t[0]*=zt,t[1]*=zt}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(n=t,i):n},i.angle=function(n){return arguments.length?(e=Vr((t=+n)*Pt,r*Pt),i):t},i.precision=function(n){return arguments.length?(e=Vr(t*Pt,(r=+n)*Pt),i):r},i.angle(90)},o.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Pt,i=t[1]*Pt,o=e[1]*Pt,a=Math.sin(r),u=Math.cos(r),s=Math.sin(i),l=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=l*c-s*f*u)*n),s*c+l*f*u)},o.geo.graticule=function(){var t,e,n,r,i,a,u,s,l,c,f,h,p=10,d=p,v=90,m=360,y=2.5;function g(){return{type:"MultiLineString",coordinates:b()}}function b(){return o.range(Math.ceil(r/v)*v,n,v).map(f).concat(o.range(Math.ceil(s/m)*m,u,m).map(h)).concat(o.range(Math.ceil(e/p)*p,t,p).filter(function(t){return w(t%v)>At}).map(l)).concat(o.range(Math.ceil(a/d)*d,i,d).filter(function(t){return w(t%m)>At}).map(c))}return g.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},g.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(h(u).slice(1),f(n).reverse().slice(1),h(s).reverse().slice(1))]}},g.extent=function(t){return arguments.length?g.majorExtent(t).minorExtent(t):g.minorExtent()},g.majorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],u=+t[1][1],r>n&&(t=r,r=n,n=t),s>u&&(t=s,s=u,u=t),g.precision(y)):[[r,s],[n,u]]},g.minorExtent=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),g.precision(y)):[[e,a],[t,i]]},g.step=function(t){return arguments.length?g.majorStep(t).minorStep(t):g.minorStep()},g.majorStep=function(t){return arguments.length?(v=+t[0],m=+t[1],g):[v,m]},g.minorStep=function(t){return arguments.length?(p=+t[0],d=+t[1],g):[p,d]},g.precision=function(o){return arguments.length?(y=+o,l=Hr(a,i,90),c=Gr(e,t,y),f=Hr(s,u,90),h=Gr(r,n,y),g):y},g.majorExtent([[-180,-90+At],[180,90-At]]).minorExtent([[-180,-80-At],[180,80+At]])},o.geo.greatArc=function(){var t,e,n=Xr,r=Zr;function i(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),e||r.apply(this,arguments)]}}return i.distance=function(){return o.geo.distance(t||n.apply(this,arguments),e||r.apply(this,arguments))},i.source=function(e){return arguments.length?(n=e,t="function"===typeof e?null:e,i):n},i.target=function(t){return arguments.length?(r=t,e="function"===typeof t?null:t,i):r},i.precision=function(){return arguments.length?i:0},i},o.geo.interpolate=function(t,e){return function(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),u=Math.sin(r),s=i*Math.cos(t),l=i*Math.sin(t),c=a*Math.cos(n),f=a*Math.sin(n),h=2*Math.asin(Math.sqrt(Bt(r-e)+i*a*Bt(n-t))),p=1/Math.sin(h),d=h?function(t){var e=Math.sin(t*=h)*p,n=Math.sin(h-t)*p,r=n*s+e*c,i=n*l+e*f,a=n*o+e*u;return[Math.atan2(i,r)*zt,Math.atan2(a,Math.sqrt(r*r+i*i))*zt]}:function(){return[t*zt,e*zt]};return d.distance=h,d}(t[0]*Pt,t[1]*Pt,e[0]*Pt,e[1]*Pt)},o.geo.length=function(t){return Er=0,o.geo.stream(t,Yr),Er};var Yr={sphere:N,point:N,lineStart:function(){var t,e,n;function r(r,i){var o=Math.sin(i*=Pt),a=Math.cos(i),u=w((r*=Pt)-t),s=Math.cos(u);Er+=Math.atan2(Math.sqrt((u=a*Math.sin(u))*u+(u=n*o-e*a*s)*u),e*o+n*a*s),t=r,e=o,n=a}Yr.point=function(i,o){t=i*Pt,e=Math.sin(o*=Pt),n=Math.cos(o),Yr.point=r},Yr.lineEnd=function(){Yr.point=Yr.lineEnd=N}},lineEnd:N,polygonStart:N,polygonEnd:N};function $r(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}var Kr=$r(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(o.geo.azimuthalEqualArea=function(){return zr(Kr)}).raw=Kr;var Jr=$r(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},R);function Qr(t,e){var n=Math.cos(t),r=function(t){return Math.tan(Ct/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),o=n*Math.pow(r(t),i)/i;if(!i)return ni;function a(t,e){o>0?e<-Dt+At&&(e=-Dt+At):e>Dt-At&&(e=Dt-At);var n=o/Math.pow(r(e),i);return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}return a.invert=function(t,e){var n=o-e,r=Rt(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(o/r,1/i))-Dt]},a}function ti(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(w(r)<At)return Fr;function o(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}return o.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-Rt(r)*Math.sqrt(t*t+n*n)]},o}(o.geo.azimuthalEquidistant=function(){return zr(Jr)}).raw=Jr,(o.geo.conicConformal=function(){return fr(Qr)}).raw=Qr,(o.geo.conicEquidistant=function(){return fr(ti)}).raw=ti;var ei=$r(function(t){return 1/t},Math.atan);function ni(t,e){return[t,Math.log(Math.tan(Ct/4+e/2))]}function ri(t){var e,n=zr(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var u=Ct*r(),s=i();o([[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]])}}else e&&(a=null);return a},n.clipExtent(null)}(o.geo.gnomonic=function(){return zr(ei)}).raw=ei,ni.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Dt]},(o.geo.mercator=function(){return ri(ni)}).raw=ni;var ii=$r(function(){return 1},Math.asin);(o.geo.orthographic=function(){return zr(ii)}).raw=ii;var oi=$r(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function ai(t,e){return[Math.log(Math.tan(Ct/4+e/2)),-t]}function ui(t){return t[0]}function si(t){return t[1]}function li(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&It(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function ci(t,e){return t[0]-e[0]||t[1]-e[1]}(o.geo.stereographic=function(){return zr(oi)}).raw=oi,ai.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Dt]},(o.geo.transverseMercator=function(){var t=ri(ai),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=ai,o.geom={},o.geom.hull=function(t){var e=ui,n=si;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=_e(e),o=_e(n),a=t.length,u=[],s=[];for(r=0;r<a;r++)u.push([+i.call(this,t[r],r),+o.call(this,t[r],r),r]);for(u.sort(ci),r=0;r<a;r++)s.push([u[r][0],-u[r][1]]);var l=li(u),c=li(s),f=c[0]===l[0],h=c[c.length-1]===l[l.length-1],p=[];for(r=l.length-1;r>=0;--r)p.push(t[u[l[r]][2]]);for(r=+f;r<c.length-h;++r)p.push(t[u[c[r]][2]]);return p}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},o.geom.polygon=function(t){return G(t,fi),t};var fi=o.geom.polygon.prototype=[];function hi(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function pi(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,u=r[0]-o,s=t[1],l=n[1],c=e[1]-s,f=r[1]-l,h=(u*(s-l)-f*(i-o))/(f*a-u*c);return[i+h*a,s+h*c]}function di(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}fi.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},fi.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=u,u=this[r],n=e[0]*u[1]-u[0]*e[1],o+=(e[0]+u[0])*n,a+=(e[1]+u[1])*n;return[o*t,a*t]},fi.clip=function(t){for(var e,n,r,i,o,a,u=di(t),s=-1,l=this.length-di(this),c=this[l-1];++s<l;){for(e=t.slice(),t.length=0,i=this[s],o=e[(r=e.length-u)-1],n=-1;++n<r;)hi(a=e[n],c,i)?(hi(o,c,i)||t.push(pi(o,a,c,i)),t.push(a)):hi(o,c,i)&&t.push(pi(o,a,c,i)),o=a;u&&t.push(t[0]),c=i}return t};var vi,mi,yi,gi,bi,_i=[],xi=[];function wi(){Ui(this),this.edge=this.site=this.circle=null}function ki(t){var e=_i.pop()||new wi;return e.site=t,e}function Ei(t){Pi(t),yi.remove(t),_i.push(t),Ui(t)}function Si(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,u=[t];Ei(t);for(var s=o;s.circle&&w(n-s.circle.x)<At&&w(r-s.circle.cy)<At;)o=s.P,u.unshift(s),Ei(s),s=o;u.unshift(s),Pi(s);for(var l=a;l.circle&&w(n-l.circle.x)<At&&w(r-l.circle.cy)<At;)a=l.N,u.push(l),Ei(l),l=a;u.push(l),Pi(l);var c,f=u.length;for(c=1;c<f;++c)l=u[c],s=u[c-1],Li(l.edge,s.site,l.site,i);s=u[0],(l=u[f-1]).edge=Ii(s.site,l.site,null,i),Di(s),Di(l)}function Oi(t){for(var e,n,r,i,o=t.x,a=t.y,u=yi._;u;)if((r=Ai(u,a)-o)>At)u=u.L;else{if(!((i=o-Mi(u,a))>At)){r>-At?(e=u.P,n=u):i>-At?(e=u,n=u.N):e=n=u;break}if(!u.R){e=u;break}u=u.R}var s=ki(t);if(yi.insert(e,s),e||n){if(e===n)return Pi(e),n=ki(e.site),yi.insert(s,n),s.edge=n.edge=Ii(e.site,s.site),Di(e),void Di(n);if(n){Pi(e),Pi(n);var l=e.site,c=l.x,f=l.y,h=t.x-c,p=t.y-f,d=n.site,v=d.x-c,m=d.y-f,y=2*(h*m-p*v),g=h*h+p*p,b=v*v+m*m,_={x:(m*g-p*b)/y+c,y:(h*b-v*g)/y+f};Li(n.edge,l,d,_),s.edge=Ii(l,t,null,_),n.edge=Ii(t,d,null,_),Di(e),Di(n)}else s.edge=Ii(e.site,s.site)}}function Ai(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var u=(n=a.site).x,s=n.y,l=s-e;if(!l)return u;var c=u-r,f=1/o-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-s+l/2+i-o/2)))/f+r:(r+u)/2}function Mi(t,e){var n=t.N;if(n)return Ai(n,e);var r=t.site;return r.y===e?r.x:1/0}function Ci(t){this.site=t,this.edges=[]}function Ti(t,e){return e.angle-t.angle}function ji(){Ui(this),this.x=this.y=this.arc=this.site=this.cy=null}function Di(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,u=i.y,s=r.x-a,l=r.y-u,c=o.x-a,f=2*(s*(m=o.y-u)-l*c);if(!(f>=-Mt)){var h=s*s+l*l,p=c*c+m*m,d=(m*h-l*p)/f,v=(s*p-c*h)/f,m=v+u,y=xi.pop()||new ji;y.arc=t,y.site=i,y.x=d+a,y.y=m+Math.sqrt(d*d+v*v),y.cy=m,t.circle=y;for(var g=null,b=bi._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){g=b.P;break}b=b.L}else{if(!b.R){g=b;break}b=b.R}bi.insert(g,y),g||(gi=y)}}}}function Pi(t){var e=t.circle;e&&(e.P||(gi=e.N),bi.remove(e),xi.push(e),Ui(e),t.circle=null)}function zi(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],u=e[1][0],s=e[0][1],l=e[1][1],c=t.l,f=t.r,h=c.x,p=c.y,d=f.x,v=f.y,m=(h+d)/2,y=(p+v)/2;if(v===p){if(m<a||m>=u)return;if(h>d){if(o){if(o.y>=l)return}else o={x:m,y:s};n={x:m,y:l}}else{if(o){if(o.y<s)return}else o={x:m,y:l};n={x:m,y:s}}}else if(i=y-(r=(h-d)/(v-p))*m,r<-1||r>1)if(h>d){if(o){if(o.y>=l)return}else o={x:(s-i)/r,y:s};n={x:(l-i)/r,y:l}}else{if(o){if(o.y<s)return}else o={x:(l-i)/r,y:l};n={x:(s-i)/r,y:s}}else if(p<v){if(o){if(o.x>=u)return}else o={x:a,y:r*a+i};n={x:u,y:r*u+i}}else{if(o){if(o.x<a)return}else o={x:u,y:r*u+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Ri(t,e){this.l=t,this.r=e,this.a=this.b=null}function Ii(t,e,n,r){var i=new Ri(t,e);return vi.push(i),n&&Li(i,t,e,n),r&&Li(i,e,t,r),mi[t.i].edges.push(new Ni(i,t,e)),mi[e.i].edges.push(new Ni(i,e,t)),i}function Fi(t,e,n){var r=new Ri(t,null);return r.a=e,r.b=n,vi.push(r),r}function Li(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Ni(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Bi(){this._=null}function Ui(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function qi(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Vi(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Wi(t){for(;t.L;)t=t.L;return t}function Hi(t,e){var n,r,i,o=t.sort(Gi).pop();for(vi=[],mi=new Array(t.length),yi=new Bi,bi=new Bi;;)if(i=gi,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(mi[o.i]=new Ci(o),Oi(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;Si(i.arc)}e&&(function(t){for(var e,n=vi,r=sr(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!zi(e=n[i],t)||!r(e)||w(e.a.x-e.b.x)<At&&w(e.a.y-e.b.y)<At)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var e,n,r,i,o,a,u,s,l,c,f=t[0][0],h=t[1][0],p=t[0][1],d=t[1][1],v=mi,m=v.length;m--;)if((o=v[m])&&o.prepare())for(s=(u=o.edges).length,a=0;a<s;)r=(c=u[a].end()).x,i=c.y,e=(l=u[++a%s].start()).x,n=l.y,(w(r-e)>At||w(i-n)>At)&&(u.splice(a,0,new Ni(Fi(o.site,c,w(r-f)<At&&d-i>At?{x:f,y:w(e-f)<At?n:d}:w(i-d)<At&&h-r>At?{x:w(n-d)<At?e:h,y:d}:w(r-h)<At&&i-p>At?{x:h,y:w(e-h)<At?n:p}:w(i-p)<At&&r-f>At?{x:w(n-p)<At?e:f,y:p}:null),o.site,null)),++s)}(e));var a={cells:mi,edges:vi};return yi=bi=vi=mi=null,a}function Gi(t,e){return e.y-t.y||e.x-t.x}Ci.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Ti),e.length},Ni.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Bi.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Wi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(qi(this,n),n=(t=n).U),n.C=!1,r.C=!0,Vi(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Vi(this,n),n=(t=n).U),n.C=!1,r.C=!0,qi(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Wi(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,qi(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Vi(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,qi(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Vi(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,qi(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Vi(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},o.geom.voronoi=function(t){var e=ui,n=si,r=e,i=n,o=Xi;if(t)return a(t);function a(t){var e=new Array(t.length),n=o[0][0],r=o[0][1],i=o[1][0],a=o[1][1];return Hi(u(t),o).cells.forEach(function(o,u){var s=o.edges,l=o.site;(e[u]=s.length?s.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=a?[[n,a],[i,a],[i,r],[n,r]]:[]).point=t[u]}),e}function u(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/At)*At,y:Math.round(i(t,e)/At)*At,i:e}})}return a.links=function(t){return Hi(u(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},a.triangles=function(t){var e=[];return Hi(u(t)).cells.forEach(function(n,r){for(var i,o,a,u,s=n.site,l=n.edges.sort(Ti),c=-1,f=l.length,h=l[f-1].edge,p=h.l===s?h.r:h.l;++c<f;)h,i=p,p=(h=l[c].edge).l===s?h.r:h.l,r<i.i&&r<p.i&&(a=i,u=p,((o=s).x-u.x)*(a.y-o.y)-(o.x-a.x)*(u.y-o.y)<0)&&e.push([t[r],t[i.i],t[p.i]])}),e},a.x=function(t){return arguments.length?(r=_e(e=t),a):e},a.y=function(t){return arguments.length?(i=_e(n=t),a):n},a.clipExtent=function(t){return arguments.length?(o=null==t?Xi:t,a):o===Xi?null:o},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):o===Xi?null:o&&o[1]},a};var Xi=[[-1e6,-1e6],[1e6,1e6]];function Zi(t){return t.x}function Yi(t){return t.y}function $i(t,e){t=o.rgb(t),e=o.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,u=e.g-r,s=e.b-i;return function(t){return"#"+pe(Math.round(n+a*t))+pe(Math.round(r+u*t))+pe(Math.round(i+s*t))}}function Ki(t,e){var n,r={},i={};for(n in t)n in e?r[n]=no(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function Ji(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Qi(t,e){var n,r,i,o=to.lastIndex=eo.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(n=to.exec(t))&&(r=eo.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:Ji(n,r)})),o=eo.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?(e=s[0].x,function(t){return e(t)+""}):function(){return e}:(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})}o.geom.delaunay=function(t){return o.geom.voronoi().triangles(t)},o.geom.quadtree=function(t,e,n,r,i){var o,a=ui,u=si;if(o=arguments.length)return a=Zi,u=Yi,3===o&&(i=n,r=e,n=e=0),s(t);function s(t){var s,l,c,f,h,p,d,v,m,y=_e(a),g=_e(u);if(null!=e)p=e,d=n,v=r,m=i;else if(v=m=-(p=d=1/0),l=[],c=[],h=t.length,o)for(f=0;f<h;++f)(s=t[f]).x<p&&(p=s.x),s.y<d&&(d=s.y),s.x>v&&(v=s.x),s.y>m&&(m=s.y),l.push(s.x),c.push(s.y);else for(f=0;f<h;++f){var b=+y(s=t[f],f),_=+g(s,f);b<p&&(p=b),_<d&&(d=_),b>v&&(v=b),_>m&&(m=_),l.push(b),c.push(_)}var x=v-p,k=m-d;function E(t,e,n,r,i,o,a,u){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var s=t.x,l=t.y;if(null!=s)if(w(s-n)+w(l-r)<.01)S(t,e,n,r,i,o,a,u);else{var c=t.point;t.x=t.y=t.point=null,S(t,c,s,l,i,o,a,u),S(t,e,n,r,i,o,a,u)}else t.x=n,t.y=r,t.point=e}else S(t,e,n,r,i,o,a,u)}function S(t,e,n,r,i,o,a,u){var s=.5*(i+a),l=.5*(o+u),c=n>=s,f=r>=l,h=f<<1|c;t.leaf=!1,c?i=s:a=s,f?o=l:u=l,E(t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,r,i,o,a,u)}x>k?m=d+x:v=p+k;var O={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){E(O,t,+y(t,++f),+g(t,f),p,d,v,m)}};if(O.visit=function(t){!function t(e,n,r,i,o,a){if(!e(n,r,i,o,a)){var u=.5*(r+o),s=.5*(i+a),l=n.nodes;l[0]&&t(e,l[0],r,i,u,s),l[1]&&t(e,l[1],u,i,o,s),l[2]&&t(e,l[2],r,s,u,a),l[3]&&t(e,l[3],u,s,o,a)}}(t,O,p,d,v,m)},O.find=function(t){return function(t,e,n,r,i,o,a){var u,s=1/0;return function t(l,c,f,h,p){if(!(c>o||f>a||h<r||p<i)){if(d=l.point){var d,v=e-l.x,m=n-l.y,y=v*v+m*m;if(y<s){var g=Math.sqrt(s=y);r=e-g,i=n-g,o=e+g,a=n+g,u=d}}for(var b=l.nodes,_=.5*(c+h),x=.5*(f+p),w=(n>=x)<<1|e>=_,k=w+4;w<k;++w)if(l=b[3&w])switch(3&w){case 0:t(l,c,f,_,x);break;case 1:t(l,_,f,h,x);break;case 2:t(l,c,x,_,p);break;case 3:t(l,_,x,h,p)}}}(t,r,i,o,a),u}(O,t[0],t[1],p,d,v,m)},f=-1,null==e){for(;++f<h;)E(O,t[f],l[f],c[f],p,d,v,m);--f}else t.forEach(O.add);return l=c=t=s=null,O}return s.x=function(t){return arguments.length?(a=t,s):a},s.y=function(t){return arguments.length?(u=t,s):u},s.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),s):null==e?null:[[e,n],[r,i]]},s.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),s):null==e?null:[r-e,i-n]},s},o.interpolateRgb=$i,o.interpolateObject=Ki,o.interpolateNumber=Ji,o.interpolateString=Qi;var to=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,eo=new RegExp(to.source,"g");function no(t,e){for(var n,r=o.interpolators.length;--r>=0&&!(n=o.interpolators[r](t,e)););return n}function ro(t,e){var n,r=[],i=[],o=t.length,a=e.length,u=Math.min(t.length,e.length);for(n=0;n<u;++n)r.push(no(t[n],e[n]));for(;n<o;++n)i[n]=t[n];for(;n<a;++n)i[n]=e[n];return function(t){for(n=0;n<u;++n)i[n]=r[n](t);return i}}o.interpolate=no,o.interpolators=[function(t,e){var n=typeof e;return("string"===n?be.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?$i:Qi:e instanceof Ht?$i:Array.isArray(e)?ro:"object"===n&&isNaN(e)?Ki:Ji)(t,e)}],o.interpolateArray=ro;var io=function(){return R},oo=o.map({linear:io,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return lo},cubic:function(){return co},sin:function(){return ho},exp:function(){return po},circle:function(){return vo},elastic:function(t,e){var n;arguments.length<2&&(e=.45);arguments.length?n=e/Tt*Math.asin(1/t):(t=1,n=e/4);return function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Tt/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return mo}}),ao=o.map({in:R,out:uo,"in-out":so,"out-in":function(t){return so(uo(t))}});function uo(t){return function(e){return 1-t(1-e)}}function so(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function lo(t){return t*t}function co(t){return t*t*t}function fo(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function ho(t){return 1-Math.cos(t*Dt)}function po(t){return Math.pow(2,10*(t-1))}function vo(t){return 1-Math.sqrt(1-t*t)}function mo(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function yo(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function go(t){var e,n,r,i=[t.a,t.b],o=[t.c,t.d],a=_o(i),u=bo(i,o),s=_o(((e=o)[0]+=(r=-u)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,u*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*zt,this.translate=[t.e,t.f],this.scale=[a,s],this.skew=s?Math.atan2(u,s)*zt:0}function bo(t,e){return t[0]*e[0]+t[1]*e[1]}function _o(t){var e=Math.sqrt(bo(t,t));return e&&(t[0]/=e,t[1]/=e),e}o.ease=function(t){var e,n=t.indexOf("-"),r=n>=0?t.slice(0,n):t,i=n>=0?t.slice(n+1):"in";return r=oo.get(r)||io,i=ao.get(i)||R,e=i(r.apply(null,a.call(arguments,1))),function(t){return t<=0?0:t>=1?1:e(t)}},o.interpolateHcl=function(t,e){t=o.hcl(t),e=o.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,u=e.c-r,s=e.l-i;isNaN(u)&&(u=0,r=isNaN(r)?e.c:r);isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360);return function(t){return Kt(n+a*t,r+u*t,i+s*t)+""}},o.interpolateHsl=function(t,e){t=o.hsl(t),e=o.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,u=e.s-r,s=e.l-i;isNaN(u)&&(u=0,r=isNaN(r)?e.s:r);isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360);return function(t){return Zt(n+a*t,r+u*t,i+s*t)+""}},o.interpolateLab=function(t,e){t=o.lab(t),e=o.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,u=e.a-r,s=e.b-i;return function(t){return ie(n+a*t,r+u*t,i+s*t)+""}},o.interpolateRound=yo,o.transform=function(t){var e=s.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new go(n?n.matrix:xo)})(t)},go.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var xo={a:1,b:0,c:0,d:1,e:0,f:0};function wo(t){return t.length?t.pop()+",":""}function ko(t,e){var n=[],r=[];return t=o.transform(t),e=o.transform(e),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Ji(t[0],e[0])},{i:i-2,x:Ji(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,r),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(wo(n)+"rotate(",null,")")-2,x:Ji(t,e)})):e&&n.push(wo(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,r),function(t,e,n,r){t!==e?r.push({i:n.push(wo(n)+"skewX(",null,")")-2,x:Ji(t,e)}):e&&n.push(wo(n)+"skewX("+e+")")}(t.skew,e.skew,n,r),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(wo(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Ji(t[0],e[0])},{i:i-2,x:Ji(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(wo(n)+"scale("+e+")")}(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,o=r.length;++i<o;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function Eo(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function So(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Oo(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;var n=Ao(t),r=Ao(e),i=n.pop(),o=r.pop(),a=null;for(;i===o;)a=i,i=n.pop(),o=r.pop();return a}(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Ao(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Mo(t){t.fixed|=2}function Co(t){t.fixed&=-7}function To(t){t.fixed|=4,t.px=t.x,t.py=t.y}function jo(t){t.fixed&=-5}o.interpolateTransform=ko,o.layout={},o.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Oo(t[n]));return e}},o.layout.chord=function(){var t,e,n,r,i,a,u,s={},l=0;function c(){var s,c,h,p,d,v={},m=[],y=o.range(r),g=[];for(t=[],e=[],s=0,p=-1;++p<r;){for(c=0,d=-1;++d<r;)c+=n[p][d];m.push(c),g.push(o.range(r)),s+=c}for(i&&y.sort(function(t,e){return i(m[t],m[e])}),a&&g.forEach(function(t,e){t.sort(function(t,r){return a(n[e][t],n[e][r])})}),s=(Tt-l*r)/s,c=0,p=-1;++p<r;){for(h=c,d=-1;++d<r;){var b=y[p],_=g[b][d],x=n[b][_],w=c,k=c+=x*s;v[b+"-"+_]={index:b,subindex:_,startAngle:w,endAngle:k,value:x}}e[b]={index:b,startAngle:h,endAngle:c,value:m[b]},c+=l}for(p=-1;++p<r;)for(d=p-1;++d<r;){var E=v[p+"-"+d],S=v[d+"-"+p];(E.value||S.value)&&t.push(E.value<S.value?{source:S,target:E}:{source:E,target:S})}u&&f()}function f(){t.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return s.matrix=function(i){return arguments.length?(r=(n=i)&&n.length,t=e=null,s):n},s.padding=function(n){return arguments.length?(l=n,t=e=null,s):l},s.sortGroups=function(n){return arguments.length?(i=n,t=e=null,s):i},s.sortSubgroups=function(e){return arguments.length?(a=e,t=null,s):a},s.sortChords=function(e){return arguments.length?(u=e,t&&f(),s):u},s.chords=function(){return t||c(),t},s.groups=function(){return e||c(),e},s},o.layout.force=function(){var t,e,n,r,i,a,u={},s=o.dispatch("start","tick","end"),l=[1,1],c=.9,f=Do,h=Po,p=-30,d=zo,v=.1,m=.64,y=[],g=[];function b(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,u=i-n,s=o*o+a*a;if(u*u/m<s){if(s<d){var l=e.charge/s;t.px-=o*l,t.py-=a*l}return!0}if(e.point&&s&&s<d){l=e.pointCharge/s;t.px-=o*l,t.py-=a*l}}return!e.charge}}function _(t){t.px=o.event.x,t.py=o.event.y,u.resume()}return u.tick=function(){if((n*=.99)<.005)return t=null,s.end({type:"end",alpha:n=0}),!0;var e,u,f,h,d,m,_,x,w,k=y.length,E=g.length;for(u=0;u<E;++u)h=(f=g[u]).source,(m=(x=(d=f.target).x-h.x)*x+(w=d.y-h.y)*w)&&(x*=m=n*i[u]*((m=Math.sqrt(m))-r[u])/m,w*=m,d.x-=x*(_=h.weight+d.weight?h.weight/(h.weight+d.weight):.5),d.y-=w*_,h.x+=x*(_=1-_),h.y+=w*_);if((_=n*v)&&(x=l[0]/2,w=l[1]/2,u=-1,_))for(;++u<k;)(f=y[u]).x+=(x-f.x)*_,f.y+=(w-f.y)*_;if(p)for(!function t(e,n,r){var i=0,o=0;e.charge=0;if(!e.leaf)for(var a,u=e.nodes,s=u.length,l=-1;++l<s;)null!=(a=u[l])&&(t(a,n,r),e.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*r[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,o+=c*e.point.y}e.cx=i/e.charge;e.cy=o/e.charge}(e=o.geom.quadtree(y),n,a),u=-1;++u<k;)(f=y[u]).fixed||e.visit(b(f));for(u=-1;++u<k;)(f=y[u]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);s.tick({type:"tick",alpha:n})},u.nodes=function(t){return arguments.length?(y=t,u):y},u.links=function(t){return arguments.length?(g=t,u):g},u.size=function(t){return arguments.length?(l=t,u):l},u.linkDistance=function(t){return arguments.length?(f="function"===typeof t?t:+t,u):f},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(h="function"===typeof t?t:+t,u):h},u.friction=function(t){return arguments.length?(c=+t,u):c},u.charge=function(t){return arguments.length?(p="function"===typeof t?t:+t,u):p},u.chargeDistance=function(t){return arguments.length?(d=t*t,u):Math.sqrt(d)},u.gravity=function(t){return arguments.length?(v=+t,u):v},u.theta=function(t){return arguments.length?(m=t*t,u):Math.sqrt(m)},u.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,s.end({type:"end",alpha:n=0})):e>0&&(s.start({type:"start",alpha:n=e}),t=Me(u.tick)),u):n},u.start=function(){var t,e,n,o=y.length,s=g.length,c=l[0],d=l[1];for(t=0;t<o;++t)(n=y[t]).index=t,n.weight=0;for(t=0;t<s;++t)"number"==typeof(n=g[t]).source&&(n.source=y[n.source]),"number"==typeof n.target&&(n.target=y[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<o;++t)n=y[t],isNaN(n.x)&&(n.x=v("x",c)),isNaN(n.y)&&(n.y=v("y",d)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"===typeof f)for(t=0;t<s;++t)r[t]=+f.call(this,g[t],t);else for(t=0;t<s;++t)r[t]=f;if(i=[],"function"===typeof h)for(t=0;t<s;++t)i[t]=+h.call(this,g[t],t);else for(t=0;t<s;++t)i[t]=h;if(a=[],"function"===typeof p)for(t=0;t<o;++t)a[t]=+p.call(this,y[t],t);else for(t=0;t<o;++t)a[t]=p;function v(n,r){if(!e){for(e=new Array(o),l=0;l<o;++l)e[l]=[];for(l=0;l<s;++l){var i=g[l];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var a,u=e[t],l=-1,c=u.length;++l<c;)if(!isNaN(a=u[l][n]))return a;return Math.random()*r}return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){if(e||(e=o.behavior.drag().origin(R).on("dragstart.force",Mo).on("drag.force",_).on("dragend.force",Co)),!arguments.length)return e;this.on("mouseover.force",To).on("mouseout.force",jo).call(e)},o.rebind(u,s,"on")};var Do=20,Po=1,zo=1/0;function Ro(t,e){return o.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Uo,t}function Io(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Fo(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function Lo(t){return t.children}function No(t){return t.value}function Bo(t,e){return e.value-t.value}function Uo(t){return o.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}o.layout.hierarchy=function(){var t=Bo,e=Lo,n=No;function r(i){var o,a=[i],u=[];for(i.depth=0;null!=(o=a.pop());)if(u.push(o),(l=e.call(r,o,o.depth))&&(s=l.length)){for(var s,l,c;--s>=0;)a.push(c=l[s]),c.parent=o,c.depth=o.depth+1;n&&(o.value=0),o.children=l}else n&&(o.value=+n.call(r,o,o.depth)||0),delete o.children;return Fo(i,function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)}),u}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(Io(t,function(t){t.children&&(t.value=0)}),Fo(t,function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},r},o.layout.partition=function(){var t=o.layout.hierarchy(),e=[1,1];function n(n,r){var i=t.call(this,n,r);return function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,u,s,l=-1;for(r=e.value?r/e.value:0;++l<a;)t(u=o[l],n,s=u.value*r,i),n+=s}}(i[0],0,e[0],e[1]/function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}(i[0])),i}return n.size=function(t){return arguments.length?(e=t,n):e},Ro(n,t)},o.layout.pie=function(){var t=Number,e=qo,n=0,r=Tt,i=0;function a(u){var s,l=u.length,c=u.map(function(e,n){return+t.call(a,e,n)}),f=+("function"===typeof n?n.apply(this,arguments):n),h=("function"===typeof r?r.apply(this,arguments):r)-f,p=Math.min(Math.abs(h)/l,+("function"===typeof i?i.apply(this,arguments):i)),d=p*(h<0?-1:1),v=o.sum(c),m=v?(h-l*d)/v:0,y=o.range(l),g=[];return null!=e&&y.sort(e===qo?function(t,e){return c[e]-c[t]}:function(t,n){return e(u[t],u[n])}),y.forEach(function(t){g[t]={data:u[t],value:s=c[t],startAngle:f,endAngle:f+=s*m+d,padAngle:p}}),g}return a.value=function(e){return arguments.length?(t=e,a):t},a.sort=function(t){return arguments.length?(e=t,a):e},a.startAngle=function(t){return arguments.length?(n=t,a):n},a.endAngle=function(t){return arguments.length?(r=t,a):r},a.padAngle=function(t){return arguments.length?(i=t,a):i},a};var qo={};function Vo(t){return t.x}function Wo(t){return t.y}function Ho(t,e,n){t.y0=e,t.y=n}o.layout.stack=function(){var t=R,e=Zo,n=Yo,r=Ho,i=Vo,a=Wo;function u(s,l){if(!(p=s.length))return s;var c=s.map(function(e,n){return t.call(u,e,n)}),f=c.map(function(t){return t.map(function(t,e){return[i.call(u,t,e),a.call(u,t,e)]})}),h=e.call(u,f,l);c=o.permute(c,h),f=o.permute(f,h);var p,d,v,m,y=n.call(u,f,l),g=c[0].length;for(v=0;v<g;++v)for(r.call(u,c[0][v],m=y[v],f[0][v][1]),d=1;d<p;++d)r.call(u,c[d][v],m+=f[d-1][v][1],f[d][v][1]);return s}return u.values=function(e){return arguments.length?(t=e,u):t},u.order=function(t){return arguments.length?(e="function"===typeof t?t:Go.get(t)||Zo,u):e},u.offset=function(t){return arguments.length?(n="function"===typeof t?t:Xo.get(t)||Yo,u):n},u.x=function(t){return arguments.length?(i=t,u):i},u.y=function(t){return arguments.length?(a=t,u):a},u.out=function(t){return arguments.length?(r=t,u):r},u};var Go=o.map({"inside-out":function(t){var e,n,r=t.length,i=t.map($o),a=t.map(Ko),u=o.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,l=0,c=[],f=[];for(e=0;e<r;++e)n=u[e],s<l?(s+=a[n],c.push(n)):(l+=a[n],f.push(n));return f.reverse().concat(c)},reverse:function(t){return o.range(t.length).reverse()},default:Zo}),Xo=o.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],u=0,s=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>u&&(u=r),a.push(r)}for(n=0;n<o;++n)s[n]=(u-a[n])/2;return s},wiggle:function(t){var e,n,r,i,o,a,u,s,l,c=t.length,f=t[0],h=f.length,p=[];for(p[0]=s=l=0,n=1;n<h;++n){for(e=0,i=0;e<c;++e)i+=t[e][n][1];for(e=0,o=0,u=f[n][0]-f[n-1][0];e<c;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*u);r<e;++r)a+=(t[r][n][1]-t[r][n-1][1])/u;o+=a*t[e][n][1]}p[n]=s-=i?o/i*u:0,s<l&&(l=s)}for(n=0;n<h;++n)p[n]-=l;return p},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,u=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=a}for(n=0;n<o;++n)u[n]=0;return u},zero:Yo});function Zo(t){return o.range(t.length)}function Yo(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function $o(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function Ko(t){return t.reduce(Jo,0)}function Jo(t,e){return t+e[1]}function Qo(t,e){return ta(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ta(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function ea(t){return[o.min(t),o.max(t)]}function na(t,e){return t.value-e.value}function ra(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function ia(t,e){t._pack_next=e,e._pack_prev=t}function oa(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function aa(t){if((e=t.children)&&(s=e.length)){var e,n,r,i,o,a,u,s,l=1/0,c=-1/0,f=1/0,h=-1/0;if(e.forEach(ua),(n=e[0]).x=-n.r,n.y=0,b(n),s>1&&((r=e[1]).x=r.r,r.y=0,b(r),s>2))for(la(n,r,i=e[2]),b(i),ra(n,i),n._pack_prev=i,ra(i,r),r=n._pack_next,o=3;o<s;o++){la(n,r,i=e[o]);var p=0,d=1,v=1;for(a=r._pack_next;a!==r;a=a._pack_next,d++)if(oa(a,i)){p=1;break}if(1==p)for(u=n._pack_prev;u!==a._pack_prev&&!oa(u,i);u=u._pack_prev,v++);p?(d<v||d==v&&r.r<n.r?ia(n,r=a):ia(n=u,r),o--):(ra(n,i),r=i,b(i))}var m=(l+c)/2,y=(f+h)/2,g=0;for(o=0;o<s;o++)(i=e[o]).x-=m,i.y-=y,g=Math.max(g,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=g,e.forEach(sa)}function b(t){l=Math.min(t.x-t.r,l),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),h=Math.max(t.y+t.r,h)}}function ua(t){t._pack_next=t._pack_prev=t}function sa(t){delete t._pack_next,delete t._pack_prev}function la(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,u=i*i+o*o,s=.5+((r*=r)-(a*=a))/(2*u),l=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);n.x=t.x+s*i+l*o,n.y=t.y+s*o-l*i}else n.x=t.x+r,n.y=t.y}function ca(t,e){return t.parent==e.parent?1:2}function fa(t){var e=t.children;return e.length?e[0]:t.t}function ha(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function pa(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function da(t,e,n){return t.a.parent===e.parent?t.a:n}function va(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ma(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function ya(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function ga(t){return t.rangeExtent?t.rangeExtent():ya(t.range())}function ba(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function _a(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function xa(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:wa}o.layout.histogram=function(){var t=!0,e=Number,n=ea,r=Qo;function i(i,a){for(var u,s,l=[],c=i.map(e,this),f=n.call(this,c,a),h=r.call(this,f,c,a),p=(a=-1,c.length),d=h.length-1,v=t?1:1/p;++a<d;)(u=l[a]=[]).dx=h[a+1]-(u.x=h[a]),u.y=0;if(d>0)for(a=-1;++a<p;)(s=c[a])>=f[0]&&s<=f[1]&&((u=l[o.bisect(h,s,1,d)-1]).y+=v,u.push(i[a]));return l}return i.value=function(t){return arguments.length?(e=t,i):e},i.range=function(t){return arguments.length?(n=_e(t),i):n},i.bins=function(t){return arguments.length?(r="number"===typeof t?function(e){return ta(e,t)}:_e(t),i):r},i.frequency=function(e){return arguments.length?(t=!!e,i):t},i},o.layout.pack=function(){var t,e=o.layout.hierarchy().sort(na),n=0,r=[1,1];function i(i,o){var a=e.call(this,i,o),u=a[0],s=r[0],l=r[1],c=null==t?Math.sqrt:"function"===typeof t?t:function(){return t};if(u.x=u.y=0,Fo(u,function(t){t.r=+c(t.value)}),Fo(u,aa),n){var f=n*(t?1:Math.max(2*u.r/s,2*u.r/l))/2;Fo(u,function(t){t.r+=f}),Fo(u,aa),Fo(u,function(t){t.r-=f})}return function t(e,n,r,i){var o=e.children;e.x=n+=i*e.x;e.y=r+=i*e.y;e.r*=i;if(o)for(var a=-1,u=o.length;++a<u;)t(o[a],n,r,i)}(u,s/2,l/2,t?1:1/Math.max(2*u.r/s,2*u.r/l)),a}return i.size=function(t){return arguments.length?(r=t,i):r},i.radius=function(e){return arguments.length?(t=null==e||"function"===typeof e?e:+e,i):t},i.padding=function(t){return arguments.length?(n=+t,i):n},Ro(i,e)},o.layout.tree=function(){var t=o.layout.hierarchy().sort(null).value(null),e=ca,n=[1,1],r=null;function i(i,o){var l=t.call(this,i,o),c=l[0],f=function(t){var e,n={A:null,children:[t]},r=[n];for(;null!=(e=r.pop());)for(var i,o=e.children,a=0,u=o.length;a<u;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}(c);if(Fo(f,a),f.parent.m=-f.z,Io(f,u),r)Io(c,s);else{var h=c,p=c,d=c;Io(c,function(t){t.x<h.x&&(h=t),t.x>p.x&&(p=t),t.depth>d.depth&&(d=t)});var v=e(h,p)/2-h.x,m=n[0]/(p.x+e(p,h)/2+v),y=n[1]/(d.depth||1);Io(c,function(t){t.x=(t.x+v)*m,t.y=t.depth*y})}return l}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n.length){!function(t){var e,n=0,r=0,i=t.children,o=i.length;for(;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,u=n,s=o.parent.children[0],l=o.m,c=a.m,f=u.m,h=s.m;u=ha(u),o=fa(o),u&&o;)s=fa(s),(a=ha(a)).a=t,(i=u.z+f-o.z-l+e(u._,o._))>0&&(pa(da(u,t,r),t,i),l+=i,c+=i),f+=u.m,l+=o.m,h+=s.m,c+=a.m;u&&!ha(a)&&(a.t=u,a.m+=f-c),o&&!fa(s)&&(s.t=o,s.m+=l-h,r=t)}return r}(t,i,t.parent.A||r[0])}function u(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=n[0],t.y=t.depth*n[1]}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=null==(n=t)?s:null,i):r?null:n},i.nodeSize=function(t){return arguments.length?(r=null==(n=t)?null:s,i):r?n:null},Ro(i,t)},o.layout.cluster=function(){var t=o.layout.hierarchy().sort(null).value(null),e=ca,n=[1,1],r=!1;function i(i,a){var u,s=t.call(this,i,a),l=s[0],c=0;Fo(l,function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(n),t.y=function(t){return 1+o.max(t,function(t){return t.y})}(n)):(t.x=u?c+=e(t,u):0,t.y=0,u=t)});var f=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(l),h=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(l),p=f.x-e(f,h)/2,d=h.x+e(h,f)/2;return Fo(l,r?function(t){t.x=(t.x-l.x)*n[0],t.y=(l.y-t.y)*n[1]}:function(t){t.x=(t.x-p)/(d-p)*n[0],t.y=(1-(l.y?t.y/l.y:1))*n[1]}),s}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=null==(n=t),i):r?null:n},i.nodeSize=function(t){return arguments.length?(r=null!=(n=t),i):r?n:null},Ro(i,t)},o.layout.treemap=function(){var t,e=o.layout.hierarchy(),n=Math.round,r=[1,1],i=null,a=va,u=!1,s="squarify",l=.5*(1+Math.sqrt(5));function c(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function f(t){var e=t.children;if(e&&e.length){var n,r,i,o=a(t),u=[],l=e.slice(),h=1/0,v="slice"===s?o.dx:"dice"===s?o.dy:"slice-dice"===s?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(c(l,o.dx*o.dy/t.value),u.area=0;(i=l.length)>0;)u.push(n=l[i-1]),u.area+=n.area,"squarify"!==s||(r=p(u,v))<=h?(l.pop(),h=r):(u.area-=u.pop().area,d(u,v,o,!1),v=Math.min(o.dx,o.dy),u.length=u.area=0,h=1/0);u.length&&(d(u,v,o,!0),u.length=u.area=0),e.forEach(f)}}function h(t){var e=t.children;if(e&&e.length){var n,r=a(t),i=e.slice(),o=[];for(c(i,r.dx*r.dy/t.value),o.area=0;n=i.pop();)o.push(n),o.area+=n.area,null!=n.z&&(d(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);e.forEach(h)}}function p(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,u=t.length;++a<u;)(n=t[a].area)&&(n<o&&(o=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*l/r,r/(e*o*l)):1/0}function d(t,e,r,i){var o,a=-1,u=t.length,s=r.x,l=r.y,c=e?n(t.area/e):0;if(e==r.dx){for((i||c>r.dy)&&(c=r.dy);++a<u;)(o=t[a]).x=s,o.y=l,o.dy=c,s+=o.dx=Math.min(r.x+r.dx-s,c?n(o.area/c):0);o.z=!0,o.dx+=r.x+r.dx-s,r.y+=c,r.dy-=c}else{for((i||c>r.dx)&&(c=r.dx);++a<u;)(o=t[a]).x=s,o.y=l,o.dx=c,l+=o.dy=Math.min(r.y+r.dy-l,c?n(o.area/c):0);o.z=!1,o.dy+=r.y+r.dy-l,r.x+=c,r.dx-=c}}function v(n){var i=t||e(n),o=i[0];return o.x=o.y=0,o.value?(o.dx=r[0],o.dy=r[1]):o.dx=o.dy=0,t&&e.revalue(o),c([o],o.dx*o.dy/o.value),(t?h:f)(o),u&&(t=i),i}return v.size=function(t){return arguments.length?(r=t,v):r},v.padding=function(t){if(!arguments.length)return i;function e(e){return ma(e,t)}var n;return a=null==(i=t)?va:"function"===(n=typeof t)?function(e){var n=t.call(v,e,e.depth);return null==n?va(e):ma(e,"number"===typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,v},v.round=function(t){return arguments.length?(n=t?Math.round:Number,v):n!=Number},v.sticky=function(e){return arguments.length?(u=e,t=null,v):u},v.ratio=function(t){return arguments.length?(l=t,v):l},v.mode=function(t){return arguments.length?(s=t+"",v):s},Ro(v,e)},o.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=o.random.normal.apply(o,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=o.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},o.scale={};var wa={floor:R,ceil:R};function ka(t,e,n,r){var i=[],a=[],u=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<=s;)i.push(n(t[u-1],t[u])),a.push(r(e[u-1],e[u]));return function(e){var n=o.bisect(t,e,1,s)-1;return a[n](i[n](e))}}function Ea(t,e){return o.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Sa(t,e){return _a(t,xa(Oa(t,e)[2])),_a(t,xa(Oa(t,e)[2])),t}function Oa(t,e){null==e&&(e=10);var n=ya(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Aa(t,e){return o.range.apply(o,Oa(t,e))}function Ma(t,e,n){var r=Oa(t,e);if(n){var i=Re.exec(n);if(i.shift(),"s"===i[8]){var a=o.formatPrefix(Math.max(w(r[0]),w(r[1])));return i[7]||(i[7]="."+Ta(a.scale(r[2]))),i[8]="f",n=o.format(i.join("")),function(t){return n(a.scale(t))+a.symbol}}i[7]||(i[7]="."+function(t,e){var n=Ta(e[2]);return t in Ca?Math.abs(n-Ta(Math.max(w(e[0]),w(e[1]))))+ +("e"!==t):n-2*("%"===t)}(i[8],r)),n=i.join("")}else n=",."+Ta(r[2])+"f";return o.format(n)}o.scale.linear=function(){return function t(e,n,r,i){var o,a;function u(){var t=Math.min(e.length,n.length)>2?ka:ba,u=i?So:Eo;return o=t(e,n,u,r),a=t(n,e,u,no),s}function s(t){return o(t)}s.invert=function(t){return a(t)};s.domain=function(t){return arguments.length?(e=t.map(Number),u()):e};s.range=function(t){return arguments.length?(n=t,u()):n};s.rangeRound=function(t){return s.range(t).interpolate(yo)};s.clamp=function(t){return arguments.length?(i=t,u()):i};s.interpolate=function(t){return arguments.length?(r=t,u()):r};s.ticks=function(t){return Aa(e,t)};s.tickFormat=function(t,n){return Ma(e,t,n)};s.nice=function(t){return Sa(e,t),u()};s.copy=function(){return t(e,n,r,i)};return u()}([0,1],[0,1],no,!1)};var Ca={s:1,g:1,p:1,r:1,e:1};function Ta(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}o.scale.log=function(){return function t(e,n,r,i){function a(t){return(r?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function u(t){return r?Math.pow(n,t):-Math.pow(n,-t)}function s(t){return e(a(t))}s.invert=function(t){return u(e.invert(t))};s.domain=function(t){return arguments.length?(r=t[0]>=0,e.domain((i=t.map(Number)).map(a)),s):i};s.base=function(t){return arguments.length?(n=+t,e.domain(i.map(a)),s):n};s.nice=function(){var t=_a(i.map(a),r?Math:Da);return e.domain(t),i=t.map(u),s};s.ticks=function(){var t=ya(i),e=[],o=t[0],s=t[1],l=Math.floor(a(o)),c=Math.ceil(a(s)),f=n%1?2:n;if(isFinite(c-l)){if(r){for(;l<c;l++)for(var h=1;h<f;h++)e.push(u(l)*h);e.push(u(l))}else for(e.push(u(l));l++<c;)for(var h=f-1;h>0;h--)e.push(u(l)*h);for(l=0;e[l]<o;l++);for(c=e.length;e[c-1]>s;c--);e=e.slice(l,c)}return e};s.tickFormat=function(t,e){if(!arguments.length)return ja;arguments.length<2?e=ja:"function"!==typeof e&&(e=o.format(e));var r=Math.max(1,n*t/s.ticks().length);return function(t){var i=t/u(Math.round(a(t)));return i*n<n-.5&&(i*=n),i<=r?e(t):""}};s.copy=function(){return t(e.copy(),n,r,i)};return Ea(s,e)}(o.scale.linear().domain([0,1]),10,!0,[1,10])};var ja=o.format(".0e"),Da={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Pa(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}o.scale.pow=function(){return function t(e,n,r){var i=Pa(n),o=Pa(1/n);function a(t){return e(i(t))}a.invert=function(t){return o(e.invert(t))};a.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(i)),a):r};a.ticks=function(t){return Aa(r,t)};a.tickFormat=function(t,e){return Ma(r,t,e)};a.nice=function(t){return a.domain(Sa(r,t))};a.exponent=function(t){return arguments.length?(i=Pa(n=t),o=Pa(1/n),e.domain(r.map(i)),a):n};a.copy=function(){return t(e.copy(),n,r)};return Ea(a,e)}(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return function t(e,n){var r,i,a;function u(t){return i[((r.get(t)||("range"===n.t?r.set(t,e.push(t)):NaN))-1)%i.length]}function s(t,n){return o.range(e.length).map(function(e){return t+n*e})}u.domain=function(t){if(!arguments.length)return e;e=[],r=new E;for(var i,o=-1,a=t.length;++o<a;)r.has(i=t[o])||r.set(i,e.push(i));return u[n.t].apply(u,n.a)};u.range=function(t){return arguments.length?(i=t,a=0,n={t:"range",a:arguments},u):i};u.rangePoints=function(t,r){arguments.length<2&&(r=0);var o=t[0],l=t[1],c=e.length<2?(o=(o+l)/2,0):(l-o)/(e.length-1+r);return i=s(o+c*r/2,c),a=0,n={t:"rangePoints",a:arguments},u};u.rangeRoundPoints=function(t,r){arguments.length<2&&(r=0);var o=t[0],l=t[1],c=e.length<2?(o=l=Math.round((o+l)/2),0):(l-o)/(e.length-1+r)|0;return i=s(o+Math.round(c*r/2+(l-o-(e.length-1+r)*c)/2),c),a=0,n={t:"rangeRoundPoints",a:arguments},u};u.rangeBands=function(t,r,o){arguments.length<2&&(r=0),arguments.length<3&&(o=r);var l=t[1]<t[0],c=t[l-0],f=t[1-l],h=(f-c)/(e.length-r+2*o);return i=s(c+h*o,h),l&&i.reverse(),a=h*(1-r),n={t:"rangeBands",a:arguments},u};u.rangeRoundBands=function(t,r,o){arguments.length<2&&(r=0),arguments.length<3&&(o=r);var l=t[1]<t[0],c=t[l-0],f=t[1-l],h=Math.floor((f-c)/(e.length-r+2*o));return i=s(c+Math.round((f-c-(e.length-r)*h)/2),h),l&&i.reverse(),a=Math.round(h*(1-r)),n={t:"rangeRoundBands",a:arguments},u};u.rangeBand=function(){return a};u.rangeExtent=function(){return ya(n.a[0])};u.copy=function(){return t(e,n)};return u.domain(e)}([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(za)},o.scale.category20=function(){return o.scale.ordinal().range(Ra)},o.scale.category20b=function(){return o.scale.ordinal().range(Ia)},o.scale.category20c=function(){return o.scale.ordinal().range(Fa)};var za=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(fe),Ra=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(fe),Ia=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(fe),Fa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(fe);function La(){return 0}o.scale.quantile=function(){return function t(e,n){var r;function i(){var t=0,i=n.length;for(r=[];++t<i;)r[t-1]=o.quantile(e,t/i);return a}function a(t){if(!isNaN(t=+t))return n[o.bisect(r,t)]}a.domain=function(t){return arguments.length?(e=t.map(y).filter(g).sort(m),i()):e};a.range=function(t){return arguments.length?(n=t,i()):n};a.quantiles=function(){return r};a.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?r[t-1]:e[0],t<r.length?r[t]:e[e.length-1]]};a.copy=function(){return t(e,n)};return i()}([],[])},o.scale.quantize=function(){return function t(e,n,r){var i,o;function a(t){return r[Math.max(0,Math.min(o,Math.floor(i*(t-e))))]}function u(){return i=r.length/(n-e),o=r.length-1,a}a.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],u()):[e,n]};a.range=function(t){return arguments.length?(r=t,u()):r};a.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/i+e,t+1/i]};a.copy=function(){return t(e,n,r)};return u()}(0,1,[0,1])},o.scale.threshold=function(){return function t(e,n){function r(t){if(t<=t)return n[o.bisect(e,t)]}r.domain=function(t){return arguments.length?(e=t,r):e};r.range=function(t){return arguments.length?(n=t,r):n};r.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]};r.copy=function(){return t(e,n)};return r}([.5],[0,1])},o.scale.identity=function(){return function t(e){function n(t){return+t}n.invert=n;n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e};n.ticks=function(t){return Aa(e,t)};n.tickFormat=function(t,n){return Ma(e,t,n)};n.copy=function(){return t(e)};return n}([0,1])},o.svg={},o.svg.arc=function(){var t=Ba,e=Ua,n=La,r=Na,i=qa,o=Va,a=Wa;function u(){var u=Math.max(0,+t.apply(this,arguments)),l=Math.max(0,+e.apply(this,arguments)),c=i.apply(this,arguments)-Dt,f=o.apply(this,arguments)-Dt,h=Math.abs(f-c),p=c>f?0:1;if(l<u&&(d=l,l=u,u=d),h>=jt)return s(l,p)+(u?s(u,1-p):"")+"Z";var d,v,m,y,g,b,_,x,w,k,E,S,O=0,A=0,M=[];if((y=(+a.apply(this,arguments)||0)/2)&&(m=r===Na?Math.sqrt(u*u+l*l):+r.apply(this,arguments),p||(A*=-1),l&&(A=Lt(m/l*Math.sin(y))),u&&(O=Lt(m/u*Math.sin(y)))),l){g=l*Math.cos(c+A),b=l*Math.sin(c+A),_=l*Math.cos(f-A),x=l*Math.sin(f-A);var C=Math.abs(f-c-2*A)<=Ct?0:1;if(A&&Ha(g,b,_,x)===p^C){var T=(c+f)/2;g=l*Math.cos(T),b=l*Math.sin(T),_=x=null}}else g=b=0;if(u){w=u*Math.cos(f-O),k=u*Math.sin(f-O),E=u*Math.cos(c+O),S=u*Math.sin(c+O);var j=Math.abs(c-f+2*O)<=Ct?0:1;if(O&&Ha(w,k,E,S)===1-p^j){var D=(c+f)/2;w=u*Math.cos(D),k=u*Math.sin(D),E=S=null}}else w=k=0;if(h>At&&(d=Math.min(Math.abs(l-u)/2,+n.apply(this,arguments)))>.001){v=u<l^p?0:1;var P=d,z=d;if(h<Ct){var R=null==E?[w,k]:null==_?[g,b]:pi([g,b],[E,S],[_,x],[w,k]),I=g-R[0],F=b-R[1],L=_-R[0],N=x-R[1],B=1/Math.sin(Math.acos((I*L+F*N)/(Math.sqrt(I*I+F*F)*Math.sqrt(L*L+N*N)))/2),U=Math.sqrt(R[0]*R[0]+R[1]*R[1]);z=Math.min(d,(u-U)/(B-1)),P=Math.min(d,(l-U)/(B+1))}if(null!=_){var q=Ga(null==E?[w,k]:[E,S],[g,b],l,P,p),V=Ga([_,x],[w,k],l,P,p);d===P?M.push("M",q[0],"A",P,",",P," 0 0,",v," ",q[1],"A",l,",",l," 0 ",1-p^Ha(q[1][0],q[1][1],V[1][0],V[1][1]),",",p," ",V[1],"A",P,",",P," 0 0,",v," ",V[0]):M.push("M",q[0],"A",P,",",P," 0 1,",v," ",V[0])}else M.push("M",g,",",b);if(null!=E){var W=Ga([g,b],[E,S],u,-z,p),H=Ga([w,k],null==_?[g,b]:[_,x],u,-z,p);d===z?M.push("L",H[0],"A",z,",",z," 0 0,",v," ",H[1],"A",u,",",u," 0 ",p^Ha(H[1][0],H[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",z,",",z," 0 0,",v," ",W[0]):M.push("L",H[0],"A",z,",",z," 0 0,",v," ",W[0])}else M.push("L",w,",",k)}else M.push("M",g,",",b),null!=_&&M.push("A",l,",",l," 0 ",C,",",p," ",_,",",x),M.push("L",w,",",k),null!=E&&M.push("A",u,",",u," 0 ",j,",",1-p," ",E,",",S);return M.push("Z"),M.join("")}function s(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return u.innerRadius=function(e){return arguments.length?(t=_e(e),u):t},u.outerRadius=function(t){return arguments.length?(e=_e(t),u):e},u.cornerRadius=function(t){return arguments.length?(n=_e(t),u):n},u.padRadius=function(t){return arguments.length?(r=t==Na?Na:_e(t),u):r},u.startAngle=function(t){return arguments.length?(i=_e(t),u):i},u.endAngle=function(t){return arguments.length?(o=_e(t),u):o},u.padAngle=function(t){return arguments.length?(a=_e(t),u):a},u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Dt;return[Math.cos(r)*n,Math.sin(r)*n]},u};var Na="auto";function Ba(t){return t.innerRadius}function Ua(t){return t.outerRadius}function qa(t){return t.startAngle}function Va(t){return t.endAngle}function Wa(t){return t&&t.padAngle}function Ha(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Ga(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],u=(i?r:-r)/Math.sqrt(o*o+a*a),s=u*a,l=-u*o,c=t[0]+s,f=t[1]+l,h=e[0]+s,p=e[1]+l,d=(c+h)/2,v=(f+p)/2,m=h-c,y=p-f,g=m*m+y*y,b=n-r,_=c*p-h*f,x=(y<0?-1:1)*Math.sqrt(Math.max(0,b*b*g-_*_)),w=(_*y-m*x)/g,k=(-_*m-y*x)/g,E=(_*y+m*x)/g,S=(-_*m+y*x)/g,O=w-d,A=k-v,M=E-d,C=S-v;return O*O+A*A>M*M+C*C&&(w=E,k=S),[[w-s,k-l],[w*n/b,k*n/b]]}function Xa(t){var e=ui,n=si,r=Qn,i=Ya,o=i.key,a=.7;function u(o){var u,s=[],l=[],c=-1,f=o.length,h=_e(e),p=_e(n);function d(){s.push("M",i(t(l),a))}for(;++c<f;)r.call(this,u=o[c],c)?l.push([+h.call(this,u,c),+p.call(this,u,c)]):l.length&&(d(),l=[]);return l.length&&d(),s.length?s.join(""):null}return u.x=function(t){return arguments.length?(e=t,u):e},u.y=function(t){return arguments.length?(n=t,u):n},u.defined=function(t){return arguments.length?(r=t,u):r},u.interpolate=function(t){return arguments.length?(o="function"===typeof t?i=t:(i=Za.get(t)||Ya).key,u):o},u.tension=function(t){return arguments.length?(a=t,u):a},u}o.svg.line=function(){return Xa(R)};var Za=o.map({linear:Ya,"linear-closed":$a,step:function(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];for(;++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);n>1&&i.push("H",r[0]);return i.join("")},"step-before":Ka,"step-after":Ja,basis:eu,"basis-open":function(t){if(t.length<4)return Ya(t);var e,n=[],r=-1,i=t.length,o=[0],a=[0];for(;++r<3;)e=t[r],o.push(e[0]),a.push(e[1]);n.push(nu(ou,o)+","+nu(ou,a)),--r;for(;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),au(n,o,a);return n.join("")},"basis-closed":function(t){var e,n,r=-1,i=t.length,o=i+4,a=[],u=[];for(;++r<4;)n=t[r%i],a.push(n[0]),u.push(n[1]);e=[nu(ou,a),",",nu(ou,u)],--r;for(;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),u.shift(),u.push(n[1]),au(e,a,u);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],u=t[n][0]-o,s=t[n][1]-a,l=-1;++l<=n;)r=t[l],i=l/n,r[0]=e*r[0]+(1-e)*(o+i*u),r[1]=e*r[1]+(1-e)*(a+i*s);return eu(t)},cardinal:function(t,e){return t.length<3?Ya(t):t[0]+Qa(t,tu(t,e))},"cardinal-open":function(t,e){return t.length<4?Ya(t):t[1]+Qa(t.slice(1,-1),tu(t,e))},"cardinal-closed":function(t,e){return t.length<3?$a(t):t[0]+Qa((t.push(t[0]),t),tu([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Ya(t):t[0]+Qa(t,function(t){var e,n,r,i,o=[],a=function(t){var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=uu(i,o);for(;++e<n;)r[e]=(a+(a=uu(i=o,o=t[e+1])))/2;return r[e]=a,r}(t),u=-1,s=t.length-1;for(;++u<s;)e=uu(t[u],t[u+1]),w(e)<At?a[u]=a[u+1]=0:(n=a[u]/e,r=a[u+1]/e,(i=n*n+r*r)>9&&(i=3*e/Math.sqrt(i),a[u]=i*n,a[u+1]=i*r));u=-1;for(;++u<=s;)i=(t[Math.min(s,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),o.push([i||0,a[u]*i||0]);return o}(t))}});function Ya(t){return t.length>1?t.join("L"):t+"Z"}function $a(t){return t.join("L")+"Z"}function Ka(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Ja(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Qa(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ya(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],u=a,s=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],s=2),e.length>1){u=e[1],o=t[s],s++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var l=2;l<e.length;l++,s++)o=t[s],u=e[l],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(n){var c=t[s];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function tu(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],u=1,s=t.length;++u<s;)n=o,o=a,a=t[u],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function eu(t){if(t.length<3)return Ya(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],s=[i,",",o,"L",nu(ou,a),",",nu(ou,u)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),au(s,a,u);return t.pop(),s.push("L",r),s.join("")}function nu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Za.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var ru=[0,2/3,1/3,0],iu=[0,1/3,2/3,0],ou=[0,1/6,2/3,1/6];function au(t,e,n){t.push("C",nu(ru,e),",",nu(ru,n),",",nu(iu,e),",",nu(iu,n),",",nu(ou,e),",",nu(ou,n))}function uu(t,e){return(e[1]-t[1])/(e[0]-t[0])}function su(t){for(var e,n,r,i=-1,o=t.length;++i<o;)n=(e=t[i])[0],r=e[1]-Dt,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function lu(t){var e=ui,n=ui,r=0,i=si,o=Qn,a=Ya,u=a.key,s=a,l="L",c=.7;function f(u){var f,h,p,d=[],v=[],m=[],y=-1,g=u.length,b=_e(e),_=_e(r),x=e===n?function(){return h}:_e(n),w=r===i?function(){return p}:_e(i);function k(){d.push("M",a(t(m),c),l,s(t(v.reverse()),c),"Z")}for(;++y<g;)o.call(this,f=u[y],y)?(v.push([h=+b.call(this,f,y),p=+_.call(this,f,y)]),m.push([+x.call(this,f,y),+w.call(this,f,y)])):v.length&&(k(),v=[],m=[]);return v.length&&k(),d.length?d.join(""):null}return f.x=function(t){return arguments.length?(e=n=t,f):n},f.x0=function(t){return arguments.length?(e=t,f):e},f.x1=function(t){return arguments.length?(n=t,f):n},f.y=function(t){return arguments.length?(r=i=t,f):i},f.y0=function(t){return arguments.length?(r=t,f):r},f.y1=function(t){return arguments.length?(i=t,f):i},f.defined=function(t){return arguments.length?(o=t,f):o},f.interpolate=function(t){return arguments.length?(u="function"===typeof t?a=t:(a=Za.get(t)||Ya).key,s=a.reverse||a,l=a.closed?"M":"L",f):u},f.tension=function(t){return arguments.length?(c=t,f):c},f}function cu(t){return t.radius}function fu(t){return[t.x,t.y]}function hu(){return 64}function pu(){return"circle"}function du(t){var e=Math.sqrt(t/Ct);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}o.svg.line.radial=function(){var t=Xa(su);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ka.reverse=Ja,Ja.reverse=Ka,o.svg.area=function(){return lu(R)},o.svg.area.radial=function(){var t=lu(su);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},o.svg.chord=function(){var t=Xr,e=Zr,n=cu,r=qa,i=Va;function o(n,r){var i,o,l=a(this,t,n,r),c=a(this,e,n,r);return"M"+l.p0+u(l.r,l.p1,l.a1-l.a0)+(o=c,(i=l).a0==o.a0&&i.a1==o.a1?s(l.r,l.p1,l.r,l.p0):s(l.r,l.p1,c.r,c.p0)+u(c.r,c.p1,c.a1-c.a0)+s(c.r,c.p1,l.r,l.p0))+"Z"}function a(t,e,o,a){var u=e.call(t,o,a),s=n.call(t,u,a),l=r.call(t,u,a)-Dt,c=i.call(t,u,a)-Dt;return{r:s,a0:l,a1:c,p0:[s*Math.cos(l),s*Math.sin(l)],p1:[s*Math.cos(c),s*Math.sin(c)]}}function u(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ct)+",1 "+e}function s(t,e,n,r){return"Q 0,0 "+r}return o.radius=function(t){return arguments.length?(n=_e(t),o):n},o.source=function(e){return arguments.length?(t=_e(e),o):t},o.target=function(t){return arguments.length?(e=_e(t),o):e},o.startAngle=function(t){return arguments.length?(r=_e(t),o):r},o.endAngle=function(t){return arguments.length?(i=_e(t),o):i},o},o.svg.diagonal=function(){var t=Xr,e=Zr,n=fu;function r(r,i){var o=t.call(this,r,i),a=e.call(this,r,i),u=(o.y+a.y)/2,s=[o,{x:o.x,y:u},{x:a.x,y:u},a];return"M"+(s=s.map(n))[0]+"C"+s[1]+" "+s[2]+" "+s[3]}return r.source=function(e){return arguments.length?(t=_e(e),r):t},r.target=function(t){return arguments.length?(e=_e(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},o.svg.diagonal.radial=function(){var t=o.svg.diagonal(),e=fu,n=t.projection;return t.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Dt;return[n*Math.cos(r),n*Math.sin(r)]}}(e=t)):e},t},o.svg.symbol=function(){var t=pu,e=hu;function n(n,r){return(vu.get(t.call(this,n,r))||du)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=_e(e),n):t},n.size=function(t){return arguments.length?(e=_e(t),n):e},n};var vu=o.map({circle:du,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*yu)),n=e*yu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/mu),n=e*mu/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/mu),n=e*mu/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});o.svg.symbolTypes=vu.keys();var mu=Math.sqrt(3),yu=Math.tan(30*Pt);K.transition=function(t){for(var e,n,r=xu||++Eu,i=Au(t),o=[],a=wu||{time:Date.now(),ease:fo,delay:0,duration:250},u=-1,s=this.length;++u<s;){o.push(e=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(n=l[c])&&Mu(n,c,i,r,a),e.push(n)}return _u(o,i,r)},K.interrupt=function(t){return this.each(null==t?gu:bu(Au(t)))};var gu=bu(Au());function bu(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function _u(t,e,n){return G(t,ku),t.namespace=e,t.id=n,t}var xu,wu,ku=[],Eu=0;function Su(t,e,n,r){var i=t.id,o=t.namespace;return dt(t,"function"===typeof n?function(t,a,u){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,u)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function Ou(t){return null==t&&(t=""),function(){this.textContent=t}}function Au(t){return null==t?"__transition__":"__transition_"+t+"__"}function Mu(t,e,n,r,i){var o,a,u,s,l,c=t[n]||(t[n]={active:0,count:0}),f=c[r];function h(n){var i=c.active,h=c[i];for(var d in h&&(h.timer.c=null,h.timer.t=NaN,--c.count,delete c[i],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),c)if(+d<r){var v=c[d];v.timer.c=null,v.timer.t=NaN,--c.count,delete c[d]}a.c=p,Me(function(){return a.c&&p(n||1)&&(a.c=null,a.t=NaN),1},0,o),c.active=r,f.event&&f.event.start.call(t,t.__data__,e),l=[],f.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&l.push(r)}),s=f.ease,u=f.duration}function p(i){for(var o=i/u,a=s(o),h=l.length;h>0;)l[--h].call(t,a);if(o>=1)return f.event&&f.event.end.call(t,t.__data__,e),--c.count?delete c[r]:delete t[n],1}f||(o=i.time,a=Me(function(t){var e=f.delay;if(a.t=e+o,e<=t)return h(t-e);a.c=h},0,o),f=c[r]={tween:new E,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++c.count)}ku.call=K.call,ku.empty=K.empty,ku.node=K.node,ku.size=K.size,o.transition=function(t,e){return t&&t.transition?xu?t.transition(e):t:o.selection().transition(t)},o.transition.prototype=ku,ku.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=J(t);for(var u=-1,s=this.length;++u<s;){a.push(e=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=t.call(r,r.__data__,c,u))?("__data__"in r&&(n.__data__=r.__data__),Mu(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return _u(a,o,i)},ku.selectAll=function(t){var e,n,r,i,o,a=this.id,u=this.namespace,s=[];t=Q(t);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],h=-1,p=f.length;++h<p;)if(r=f[h]){o=r[u][a],n=t.call(r,r.__data__,h,l),s.push(e=[]);for(var d=-1,v=n.length;++d<v;)(i=n[d])&&Mu(i,d,u,a,o),e.push(i)}return _u(s,u,a)},ku.filter=function(t){var e,n,r=[];"function"!==typeof t&&(t=pt(t));for(var i=0,o=this.length;i<o;i++){r.push(e=[]);for(var a,u=0,s=(a=this[i]).length;u<s;u++)(n=a[u])&&t.call(n,n.__data__,u,i)&&e.push(n)}return _u(r,this.namespace,this.id)},ku.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):dt(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},ku.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?ko:no,r=o.ns.qualify(t);function i(){this.removeAttribute(r)}function a(){this.removeAttributeNS(r.space,r.local)}return Su(this,"attr."+t,e,r.local?function(t){return null==t?a:(t+="",function(){var e,i=this.getAttributeNS(r.space,r.local);return i!==t&&(e=n(i,t),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}:function(t){return null==t?i:(t+="",function(){var e,i=this.getAttribute(r);return i!==t&&(e=n(i,t),function(t){this.setAttribute(r,e(t))})})})},ku.attrTween=function(t,e){var n=o.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,r){var i=e.call(this,t,r,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}:function(t,r){var i=e.call(this,t,r,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}})},ku.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}return Su(this,"style."+t,e,function(e){return null==e?i:(e+="",function(){var r,i=c(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=no(i,e),function(e){this.style.setProperty(t,r(e),n)})})})},ku.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(r,i){var o=e.call(this,r,i,c(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}})},ku.text=function(t){return Su(this,"text",t,Ou)},ku.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},ku.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!==typeof t&&(t=o.ease.apply(o,arguments)),dt(this,function(r){r[n][e].ease=t}))},ku.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:dt(this,"function"===typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},ku.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:dt(this,"function"===typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},ku.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=wu,a=xu;try{xu=n,dt(this,function(e,i,o){wu=e[r][n],t.call(e,e.__data__,i,o)})}finally{wu=i,xu=a}}else dt(this,function(i){var a=i[r][n];(a.event||(a.event=o.dispatch("start","end","interrupt"))).on(t,e)});return this},ku.transition=function(){for(var t,e,n,r=this.id,i=++Eu,o=this.namespace,a=[],u=0,s=this.length;u<s;u++){a.push(t=[]);for(var l,c=0,f=(l=this[u]).length;c<f;c++)(e=l[c])&&Mu(e,c,o,i,{time:(n=e[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return _u(a,o,i)},o.svg.axis=function(){var t,e=o.scale.linear(),n=Cu,r=6,i=6,a=3,s=[10],l=null;function c(u){u.each(function(){var u,c=o.select(this),f=this.__chart__||e,h=this.__chart__=e.copy(),p=null==l?h.ticks?h.ticks.apply(h,s):h.domain():l,d=null==t?h.tickFormat?h.tickFormat.apply(h,s):R:t,v=c.selectAll(".tick").data(p,h),m=v.enter().insert("g",".domain").attr("class","tick").style("opacity",At),y=o.transition(v.exit()).style("opacity",At).remove(),g=o.transition(v.order()).style("opacity",1),b=Math.max(r,0)+a,_=ga(h),x=c.selectAll(".domain").data([0]),w=(x.enter().append("path").attr("class","domain"),o.transition(x));m.append("line"),m.append("text");var k,E,S,O,A=m.select("line"),M=g.select("line"),C=v.select("text").text(d),T=m.select("text"),j=g.select("text"),D="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(u=ju,k="x",S="y",E="x2",O="y2",C.attr("dy",D<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+_[0]+","+D*i+"V0H"+_[1]+"V"+D*i)):(u=Du,k="y",S="x",E="y2",O="x2",C.attr("dy",".32em").style("text-anchor",D<0?"end":"start"),w.attr("d","M"+D*i+","+_[0]+"H0V"+_[1]+"H"+D*i)),A.attr(O,D*r),T.attr(S,D*b),M.attr(E,0).attr(O,D*r),j.attr(k,0).attr(S,D*b),h.rangeBand){var P=h,z=P.rangeBand()/2;f=h=function(t){return P(t)+z}}else f.rangeBand?f=h:y.call(u,h,f);m.call(u,f,h),g.call(u,h,h)})}return c.scale=function(t){return arguments.length?(e=t,c):e},c.orient=function(t){return arguments.length?(n=t in Tu?t+"":Cu,c):n},c.ticks=function(){return arguments.length?(s=u(arguments),c):s},c.tickValues=function(t){return arguments.length?(l=t,c):l},c.tickFormat=function(e){return arguments.length?(t=e,c):t},c.tickSize=function(t){var e=arguments.length;return e?(r=+t,i=+arguments[e-1],c):r},c.innerTickSize=function(t){return arguments.length?(r=+t,c):r},c.outerTickSize=function(t){return arguments.length?(i=+t,c):i},c.tickPadding=function(t){return arguments.length?(a=+t,c):a},c.tickSubdivide=function(){return arguments.length&&c},c};var Cu="bottom",Tu={top:1,right:1,bottom:1,left:1};function ju(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Du(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}o.svg.brush=function(){var t,e,n=W(h,"brushstart","brush","brushend"),r=null,i=null,a=[0,0],u=[0,0],s=!0,l=!0,f=zu[0];function h(t){t.each(function(){var t=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(f,R);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Pu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var a,u=o.transition(t),s=o.transition(e);r&&(a=ga(r),s.attr("x",a[0]).attr("width",a[1]-a[0]),d(u)),i&&(a=ga(i),s.attr("y",a[0]).attr("height",a[1]-a[0]),v(u)),p(u)})}function p(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+a[+/e$/.test(t)]+","+u[+/^s/.test(t)]+")"})}function d(t){t.select(".extent").attr("x",a[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",a[1]-a[0])}function v(t){t.select(".extent").attr("y",u[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",u[1]-u[0])}function m(){var f,m,y=this,g=o.select(o.event.target),b=n.of(y,arguments),_=o.select(y),x=g.datum(),w=!/^(n|s)$/.test(x)&&r,k=!/^(e|w)$/.test(x)&&i,E=g.classed("extent"),S=kt(y),O=o.mouse(y),A=o.select(c(y)).on("keydown.brush",function(){32==o.event.keyCode&&(E||(f=null,O[0]-=a[1],O[1]-=u[1],E=2),q())}).on("keyup.brush",function(){32==o.event.keyCode&&2==E&&(O[0]+=a[1],O[1]+=u[1],E=0,q())});if(o.event.changedTouches?A.on("touchmove.brush",T).on("touchend.brush",D):A.on("mousemove.brush",T).on("mouseup.brush",D),_.interrupt().selectAll("*").interrupt(),E)O[0]=a[0]-O[0],O[1]=u[0]-O[1];else if(x){var M=+/w$/.test(x),C=+/^n/.test(x);m=[a[1-M]-O[0],u[1-C]-O[1]],O[0]=a[M],O[1]=u[C]}else o.event.altKey&&(f=O.slice());function T(){var t=o.mouse(y),e=!1;m&&(t[0]+=m[0],t[1]+=m[1]),E||(o.event.altKey?(f||(f=[(a[0]+a[1])/2,(u[0]+u[1])/2]),O[0]=a[+(t[0]<f[0])],O[1]=u[+(t[1]<f[1])]):f=null),w&&j(t,r,0)&&(d(_),e=!0),k&&j(t,i,1)&&(v(_),e=!0),e&&(p(_),b({type:"brush",mode:E?"move":"resize"}))}function j(n,r,i){var o,c,h=ga(r),p=h[0],d=h[1],v=O[i],m=i?u:a,y=m[1]-m[0];if(E&&(p-=v,d-=y+v),o=(i?l:s)?Math.max(p,Math.min(d,n[i])):n[i],E?c=(o+=v)+y:(f&&(v=Math.max(p,Math.min(d,2*f[i]-o))),v<o?(c=o,o=v):c=v),m[0]!=o||m[1]!=c)return i?e=null:t=null,m[0]=o,m[1]=c,!0}function D(){T(),_.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),o.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),S(),b({type:"brushend"})}_.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",g.style("cursor")),b({type:"brushstart"}),T()}return h.event=function(r){r.each(function(){var r=n.of(this,arguments),i={x:a,y:u,i:t,j:e},s=this.__chart__||i;this.__chart__=i,xu?o.select(this).transition().each("start.brush",function(){t=s.i,e=s.j,a=s.x,u=s.y,r({type:"brushstart"})}).tween("brush:brush",function(){var n=ro(a,i.x),o=ro(u,i.y);return t=e=null,function(t){a=i.x=n(t),u=i.y=o(t),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=i.i,e=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},h.x=function(t){return arguments.length?(f=zu[!(r=t)<<1|!i],h):r},h.y=function(t){return arguments.length?(f=zu[!r<<1|!(i=t)],h):i},h.clamp=function(t){return arguments.length?(r&&i?(s=!!t[0],l=!!t[1]):r?s=!!t:i&&(l=!!t),h):r&&i?[s,l]:r?s:i?l:null},h.extent=function(n){var o,s,l,c,f;return arguments.length?(r&&(o=n[0],s=n[1],i&&(o=o[0],s=s[0]),t=[o,s],r.invert&&(o=r(o),s=r(s)),s<o&&(f=o,o=s,s=f),o==a[0]&&s==a[1]||(a=[o,s])),i&&(l=n[0],c=n[1],r&&(l=l[1],c=c[1]),e=[l,c],i.invert&&(l=i(l),c=i(c)),c<l&&(f=l,l=c,c=f),l==u[0]&&c==u[1]||(u=[l,c])),h):(r&&(t?(o=t[0],s=t[1]):(o=a[0],s=a[1],r.invert&&(o=r.invert(o),s=r.invert(s)),s<o&&(f=o,o=s,s=f))),i&&(e?(l=e[0],c=e[1]):(l=u[0],c=u[1],i.invert&&(l=i.invert(l),c=i.invert(c)),c<l&&(f=l,l=c,c=f))),r&&i?[[o,l],[s,c]]:r?[o,s]:i&&[l,c])},h.clear=function(){return h.empty()||(a=[0,0],u=[0,0],t=e=null),h},h.empty=function(){return!!r&&a[0]==a[1]||!!i&&u[0]==u[1]},o.rebind(h,n,"on")};var Pu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},zu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ru=Le.format=dn.timeFormat,Iu=Ru.utc,Fu=Iu("%Y-%m-%dT%H:%M:%S.%LZ");function Lu(t){return t.toISOString()}function Nu(t,e,n){function r(e){return t(e)}function i(t,n){var r=(t[1]-t[0])/n,i=o.bisect(Uu,r);return i==Uu.length?[e.year,Oa(t.map(function(t){return t/31536e6}),n)[2]]:i?e[r/Uu[i-1]<Uu[i]/r?i-1:i]:[Wu,Oa(t,n)[2]]}return r.invert=function(e){return Bu(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Bu)},r.nice=function(t,e){var n=r.domain(),o=ya(n),a=null==t?i(o,10):"number"===typeof t&&i(o,t);function u(n){return!isNaN(n)&&!t.range(n,Bu(+n+1),e).length}return a&&(t=a[0],e=a[1]),r.domain(_a(n,e>1?{floor:function(e){for(;u(e=t.floor(e));)e=Bu(e-1);return e},ceil:function(e){for(;u(e=t.ceil(e));)e=Bu(+e+1);return e}}:t))},r.ticks=function(t,e){var n=ya(r.domain()),o=null==t?i(n,10):"number"===typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Bu(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Nu(t.copy(),e,n)},Ea(r,t)}function Bu(t){return new Date(t)}Ru.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Lu:Fu,Lu.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Lu.toString=Fu.toString,Le.second=qe(function(t){return new Ne(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Le.seconds=Le.second.range,Le.seconds.utc=Le.second.utc.range,Le.minute=qe(function(t){return new Ne(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Le.minutes=Le.minute.range,Le.minutes.utc=Le.minute.utc.range,Le.hour=qe(function(t){var e=t.getTimezoneOffset()/60;return new Ne(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Le.hours=Le.hour.range,Le.hours.utc=Le.hour.utc.range,Le.month=qe(function(t){return(t=Le.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Le.months=Le.month.range,Le.months.utc=Le.month.utc.range;var Uu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],qu=[[Le.second,1],[Le.second,5],[Le.second,15],[Le.second,30],[Le.minute,1],[Le.minute,5],[Le.minute,15],[Le.minute,30],[Le.hour,1],[Le.hour,3],[Le.hour,6],[Le.hour,12],[Le.day,1],[Le.day,2],[Le.week,1],[Le.month,1],[Le.month,3],[Le.year,1]],Vu=Ru.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Qn]]),Wu={range:function(t,e,n){return o.range(Math.ceil(t/n)*n,+e,n).map(Bu)},floor:R,ceil:R};qu.year=Le.year,Le.scale=function(){return Nu(o.scale.linear(),qu,Vu)};var Hu=qu.map(function(t){return[t[0].utc,t[1]]}),Gu=Iu.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Qn]]);function Xu(t){return JSON.parse(t.responseText)}function Zu(t){var e=s.createRange();return e.selectNode(s.body),e.createContextualFragment(t.responseText)}Hu.year=Le.year.utc,Le.scale.utc=function(){return Nu(o.scale.linear(),Hu,Gu)},o.text=xe(function(t){return t.responseText}),o.json=function(t,e){return we(t,"application/json",Xu,e)},o.html=function(t,e){return we(t,"text/html",Zu,e)},o.xml=xe(function(t){return t.responseXML}),this.d3=o,void 0===(i="function"===typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i)}()},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return i});var r=n(0);function i(e,n){var i,o=n&&n.property?Object(r.s)(n.property):r.v;return!Object(r.D)(e)||(i=e,"function"===typeof t&&Object(r.B)(t.isBuffer)&&t.isBuffer(i))?o(JSON.parse(e)):function(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}(o(e))}i.responseType="json"}).call(this,n(147).Buffer)},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(684)),i=o(n(687));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,n,o){null===e&&(e=Function.prototype);var a=(0,i.default)(e,n);if(void 0===a){var u=(0,r.default)(e);return null===u?void 0:t(u,n,o)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(o):void 0}},function(t,e,n){"use strict";t.exports=function(t,e){e||(e={}),"function"===typeof e&&(e={cmp:e});var n,r="boolean"===typeof e.cycles&&e.cycles,i=e.cmp&&(n=e.cmp,function(t){return function(e,r){var i={key:e,value:t[e]},o={key:r,value:t[r]};return n(i,o)}}),o=[];return function t(e){if(e&&e.toJSON&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!==typeof e)return JSON.stringify(e);var n,a;if(Array.isArray(e)){for(a="[",n=0;n<e.length;n++)n&&(a+=","),a+=t(e[n])||"null";return a+"]"}if(null===e)return"null";if(-1!==o.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=o.push(e)-1,s=Object.keys(e).sort(i&&i(e));for(a="",n=0;n<s.length;n++){var l=s[n],c=t(e[l]);c&&(a&&(a+=","),a+=JSON.stringify(l)+":"+c)}return o.splice(u,1),"{"+a+"}"}}(t)}},,function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,a,u=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),s=1;s<arguments.length;s++){for(var l in n=Object(arguments[s]))i.call(n,l)&&(u[l]=n[l]);if(r){a=r(n);for(var c=0;c<a.length;c++)o.call(n,a[c])&&(u[a[c]]=n[a[c]])}}return u}},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,n){var r=n(43)(n(36),"Map");t.exports=r},function(t,e,n){var r=n(118),i=n(216),o=n(122);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){(function(t){var r=n(36),i=n(213),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,u=a&&a.exports===o?r.Buffer:void 0,s=(u?u.isBuffer:void 0)||i;t.exports=s}).call(this,n(58)(t))},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(113),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,u=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(e){}}();t.exports=u}).call(this,n(58)(t))},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(224),i=n(124),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return o.call(t,e)}))}:i;t.exports=u},function(t,e,n){var r=n(130);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},,function(t,e,n){var r=n(651);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(51);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(102)("keys"),i=n(74);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(32),i=n(40),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(73)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(50),i=n(661),o=n(103),a=n(101)("IE_PROTO"),u=function(){},s=function(){var t,e=n(135)("iframe"),r=o.length;for(e.style.display="none",n(662).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s.prototype[o[r]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(u.prototype=r(t),n=new u,u.prototype=null,n[a]=t):n=s(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(41).f,i=n(45),o=n(37)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){e.f=n(37)},function(t,e,n){var r=n(40),i=n(32),o=n(73),a=n(107),u=n(41).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(75),i=n(60),o=n(46),a=n(97),u=n(45),s=n(134),l=Object.getOwnPropertyDescriptor;e.f=n(44)?l:function(t,e){if(t=o(t),e=a(e,!0),s)try{return l(t,e)}catch(n){}if(u(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){t.exports=function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),(n=i(a)).workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else e=i;else t=i}return r(0,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=r;function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var u=this.sampleCurveDerivativeX(i);if(Math.abs(u)<1e-6)break;i-=o/u}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=o;function o(t,e){this.x=t,this.y=e}function a(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!a(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!a(t[r],e[r]))return!1;return!0}return t===e}function u(t,e,r,i){var o=new n(t,e,r,i);return function(t){return o.solve(t)}}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var s=u(.25,.1,.25,1);function l(t,e,n){return Math.min(n,Math.max(e,t))}function c(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function f(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}var h=1;function p(){return h++}function d(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function v(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function m(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function g(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function b(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function _(t){return Array.isArray(t)?t.map(_):"object"==typeof t&&t?g(t,_):t}var x={};function w(t){x[t]||("undefined"!=typeof console&&console.warn(t),x[t]=!0)}function k(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function E(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=t[n],e+=((a=t[i]).x-o.x)*(o.y+a.y);return e}function S(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var O,A,M=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),C=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,T=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,j={now:M,frame:function(t){var e=C(t);return{cancel:function(){return T(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},D={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},P={supported:!1,testSupport:function(t){!z&&A&&(R?I(t):O=t)}},z=!1,R=!1;function I(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,A),t.isContextLost())return;P.supported=!0}catch(t){}t.deleteTexture(e),z=!0}self.document&&((A=self.document.createElement("img")).onload=function(){O&&I(O),O=null,R=!0},A.onerror=function(){z=!0,O=null},A.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var F="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";function L(t,e){var n=G(D.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!D.REQUIRE_ACCESS_TOKEN)return X(t);if(!(e=e||D.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+F);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+F);return t.params.push("access_token="+e),X(t)}function N(t){return 0===t.indexOf("mapbox:")}var B=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function U(t){return B.test(t)}var q=/(\.(png|jpg)\d*)(?=$)/,V=/\.[\w]+$/,W=function(t){var e=G(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(V))return t;var n="mapbox://tiles/";n+=e.path.replace("/v4/","");var r=e.params.filter(function(t){return!t.match(/^access_token=/)});return r.length&&(n+="?"+r.join("&")),n},H=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function G(t){var e=t.match(H);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function X(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function Z(t){if(!t)return null;var e,n=t.split(".");if(!n||3!==n.length)return null;try{return JSON.parse((e=n[1],decodeURIComponent(self.atob(e).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(t){return null}}var Y=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Y.prototype.getStorageKey=function(t){var e,n=Z(D.ACCESS_TOKEN),r="";return n&&n.u?(e=n.u,r=self.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))}))):r=D.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+r:"mapbox.eventData:"+r},Y.prototype.fetchEventData=function(){var t=S("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var r=self.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var i=self.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){w("Unable to read from LocalStorage")}},Y.prototype.saveEventData=function(){var t=S("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){w("Unable to write to LocalStorage")}},Y.prototype.processRequests=function(){},Y.prototype.postEvent=function(t,e,n){var r=this;if(D.EVENTS_URL){var i=G(D.EVENTS_URL);i.params.push("access_token="+(D.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.53.1",userId:this.anonId},a=e?f(o,e):o,u={url:X(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=lt(u,function(t){r.pendingRequest=null,n(t),r.saveEventData(),r.processRequests()})}},Y.prototype.queueRequest=function(t){this.queue.push(t),this.processRequests()};var $=function(t){function e(){t.call(this,"map.load"),this.success={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postMapLoadEvent=function(t,e){D.EVENTS_URL&&D.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return N(t)||U(t)})&&this.queueRequest({id:e,timestamp:Date.now()})},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var e=this.queue.shift(),n=e.id,r=e.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=d()),this.postEvent(r,{},function(e){e||n&&(t.success[n]=!0)}))}},e}(Y),K=new(function(t){function e(){t.call(this,"appUserTurnstile")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postTurnstileEvent=function(t){D.EVENTS_URL&&D.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return N(t)||U(t)})&&this.queueRequest(Date.now())},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var e=Z(D.ACCESS_TOKEN),n=e?e.u:D.ACCESS_TOKEN,r=n!==this.eventData.tokenU;v(this.anonId)||(this.anonId=d(),r=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),a=new Date(i),u=(i-this.eventData.lastSuccess)/864e5;r=r||u>=1||u<-1||o.getDate()!==a.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},function(e){e||(t.eventData.lastSuccess=i,t.eventData.tokenU=n)})}},e}(Y)),J=K.postTurnstileEvent.bind(K),Q=new $,tt=Q.postMapLoadEvent.bind(Q),et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(et);var nt=function(t){function e(e,n,r){401===n&&U(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function rt(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var it,ot,at=rt()?function(){return self.worker&&self.worker.referrer}:function(){var t=self.location.origin;if(t&&"null"!==t&&"file://"!==t)return t+self.location.pathname},ut=function(t,e){if(!/^file:/.test(t.url)){if(self.fetch&&self.Request&&self.AbortController)return function(t,e){var n=new self.AbortController,r=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:at(),signal:n.signal});return"json"===t.type&&r.headers.set("Accept","application/json"),self.fetch(r).then(function(n){n.ok?n[t.type||"text"]().then(function(t){e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires"))}).catch(function(t){return e(new Error(t.message))}):e(new nt(n.statusText,n.status,t.url))}).catch(function(t){20!==t.code&&e(new Error(t.message))}),{cancel:function(){return n.abort()}}}(t,e);if(rt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e)}return function(t,e){var n=new self.XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&n.setRequestHeader("Accept","application/json"),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new nt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},st=function(t,e){return ut(f(t,{type:"arrayBuffer"}),e)},lt=function(t,e){return ut(f(t,{method:"POST"}),e)};function ct(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function ft(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}it=[],ot=0;var ht=function(t,e){void 0===e&&(e={}),f(this,e),this.type=t},pt=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",f({error:e},n))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ht),dt=function(){};dt.prototype.on=function(t,e){return this._listeners=this._listeners||{},ct(t,e,this._listeners),this},dt.prototype.off=function(t,e){return ft(t,e,this._listeners),ft(t,e,this._oneTimeListeners),this},dt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},ct(t,e,this._oneTimeListeners),this},dt.prototype.fire=function(t,e){"string"==typeof t&&(t=new ht(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var u=a[o];ft(n,u,this._oneTimeListeners),u.call(this,t)}var s=this._eventedParent;s&&(f(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(t))}else t instanceof pt&&console.error(t.error);return this},dt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},dt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var vt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},mt=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function yt(t){var e=t.key,n=t.value;return n?[new mt(e,n,"constants have been deprecated as of v8")]:[]}function gt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function bt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function _t(t){return Array.isArray(t)?t.map(_t):bt(t)}var xt=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),wt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];this.bindings[o]=a}};wt.prototype.concat=function(t){return new wt(this,t)},wt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},wt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var kt={kind:"null"},Et={kind:"number"},St={kind:"string"},Ot={kind:"boolean"},At={kind:"color"},Mt={kind:"object"},Ct={kind:"value"},Tt={kind:"collator"},jt={kind:"formatted"};function Dt(t,e){return{kind:"array",itemType:t,N:e}}function Pt(t){if("array"===t.kind){var e=Pt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var zt=[kt,Et,St,Ot,At,jt,Mt,Dt(Ct)];function Rt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Rt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=zt;n<r.length;n+=1)if(!Rt(r[n],e))return null}return"Expected "+Pt(t)+" but found "+Pt(e)+" instead."}var It=e(function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?r(parseFloat(t)/100*255):r(parseInt(t))}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function u(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in n)return n[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var s=i.indexOf("("),l=i.indexOf(")");if(-1!==s&&l+1===i.length){var c=i.substr(0,s),f=i.substr(s+1,l-(s+1)).split(","),h=1;switch(c){case"rgba":if(4!==f.length)return null;h=a(f.pop());case"rgb":return 3!==f.length?null:[o(f[0]),o(f[1]),o(f[2]),h];case"hsla":if(4!==f.length)return null;h=a(f.pop());case"hsl":if(3!==f.length)return null;var p=(parseFloat(f[0])%360+360)%360/360,d=a(f[1]),v=a(f[2]),m=v<=.5?v*(d+1):v+d-v*d,y=2*v-m;return[r(255*u(y,m,p+1/3)),r(255*u(y,m,p)),r(255*u(y,m,p-1/3)),h];default:return null}}return null}}catch(t){}}).parseCSSColor,Ft=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};Ft.parse=function(t){if(t){if(t instanceof Ft)return t;if("string"==typeof t){var e=It(t);if(e)return new Ft(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Ft.prototype.toString=function(){var t=this.toArray(),e=t[0],n=t[1],r=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(n)+","+Math.round(r)+","+i+")"},Ft.prototype.toArray=function(){var t=this.r,e=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]},Ft.black=new Ft(0,0,0,1),Ft.white=new Ft(1,1,1,1),Ft.transparent=new Ft(0,0,0,0),Ft.red=new Ft(1,0,0,1);var Lt=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Lt.prototype.compare=function(t,e){return this.collator.compare(t,e)},Lt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Nt=function(t,e,n){this.text=t,this.scale=e,this.fontStack=n},Bt=function(t){this.sections=t};function Ut(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function qt(t){if(null===t)return kt;if("string"==typeof t)return St;if("boolean"==typeof t)return Ot;if("number"==typeof t)return Et;if(t instanceof Ft)return At;if(t instanceof Lt)return Tt;if(t instanceof Bt)return jt;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=qt(i[r]);if(e){if(e===o)continue;e=Ct;break}e=o}return Dt(e||Ct,n)}return Mt}function Vt(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Ft||t instanceof Bt?t.toString():JSON.stringify(t)}Bt.fromString=function(t){return new Bt([new Nt(t,null,null)])},Bt.prototype.toString=function(){return this.sections.map(function(t){return t.text}).join("")},Bt.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),t.push(i)}return t};var Wt=function(t,e){this.type=t,this.value=e};Wt.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Ft)return!0;if(e instanceof Lt)return!0;if(e instanceof Bt)return!0;if(Array.isArray(e)){for(var n=0,r=e;n<r.length;n+=1)if(!t(r[n]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var n=t[1],r=qt(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Wt(r,n)},Wt.prototype.evaluate=function(){return this.value},Wt.prototype.eachChild=function(){},Wt.prototype.possibleOutputs=function(){return[this.value]},Wt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ft?["rgba"].concat(this.value.toArray()):this.value instanceof Bt?this.value.serialize():this.value};var Ht=function(t){this.name="ExpressionEvaluationError",this.message=t};Ht.prototype.toJSON=function(){return this.message};var Gt={string:St,number:Et,boolean:Ot,object:Mt},Xt=function(t,e){this.type=t,this.args=e};Xt.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,r=1,i=t[0];if("array"===i){var o,a;if(t.length>2){var u=t[1];if("string"!=typeof u||!(u in Gt)||"object"===u)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=Gt[u],r++}else o=Ct;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}n=Dt(o,a)}else n=Gt[i];for(var s=[];r<t.length;r++){var l=e.parse(t[r],r,Ct);if(!l)return null;s.push(l)}return new Xt(n,s)},Xt.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Rt(this.type,qt(n)))return n;if(e===this.args.length-1)throw new Ht("Expected value to be of type "+Pt(this.type)+", but found "+Pt(qt(n))+" instead.")}return null},Xt.prototype.eachChild=function(t){this.args.forEach(t)},Xt.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Xt.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var Zt=function(t){this.type=jt,this.sections=t};Zt.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var n=[],r=1;r<t.length-1;r+=2){var i=e.parse(t[r],1,Ct);if(!i)return null;var o=i.type.kind;if("string"!==o&&"value"!==o&&"null"!==o)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var a=t[r+1];if("object"!=typeof a||Array.isArray(a))return e.error("Format options argument must be an object.");var u=null;if(a["font-scale"]&&!(u=e.parse(a["font-scale"],1,Et)))return null;var s=null;if(a["text-font"]&&!(s=e.parse(a["text-font"],1,Dt(St))))return null;n.push({text:i,scale:u,font:s})}return new Zt(n)},Zt.prototype.evaluate=function(t){return new Bt(this.sections.map(function(e){return new Nt(Vt(e.text.evaluate(t)),e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null)}))},Zt.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t(r.text),r.scale&&t(r.scale),r.font&&t(r.font)}},Zt.prototype.possibleOutputs=function(){return[void 0]},Zt.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.text.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),t.push(i)}return t};var Yt={"to-boolean":Ot,"to-color":At,"to-number":Et,"to-string":St},$t=function(t,e){this.type=t,this.args=e};$t.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var r=Yt[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Ct);if(!a)return null;i.push(a)}return new $t(r,i)},$t.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(e=i[r].evaluate(t))instanceof Ft)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":Ut(e[0],e[1],e[2],e[3])))return new Ft(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Ht(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}if("number"===this.type.kind){for(var a=null,u=0,s=this.args;u<s.length;u+=1){if(null===(a=s[u].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new Ht("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?Bt.fromString(Vt(this.args[0].evaluate(t))):Vt(this.args[0].evaluate(t))},$t.prototype.eachChild=function(t){this.args.forEach(t)},$t.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},$t.prototype.serialize=function(){if("formatted"===this.type.kind)return new Zt([{text:this.args[0],scale:null,font:null}]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Kt=["Unknown","Point","LineString","Polygon"],Jt=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};Jt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Jt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Kt[this.feature.type]:this.feature.type:null},Jt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Jt.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Ft.parse(t)),e};var Qt=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};Qt.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Qt.prototype.eachChild=function(t){this.args.forEach(t)},Qt.prototype.possibleOutputs=function(){return[void 0]},Qt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Qt.parse=function(t,e){var n,r=t[0],i=Qt.definitions[r];if(!i)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,u=a.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),s=null,l=0,c=u;l<c.length;l+=1){var f=c[l],h=f[0],p=f[1];s=new oe(e.registry,e.path,null,e.scope);for(var d=[],v=!1,m=1;m<t.length;m++){var y=t[m],g=Array.isArray(h)?h[m-1]:h.type,b=s.parse(y,1+d.length,g);if(!b){v=!0;break}d.push(b)}if(!v)if(Array.isArray(h)&&h.length!==d.length)s.error("Expected "+h.length+" arguments, but found "+d.length+" instead.");else{for(var _=0;_<d.length;_++){var x=Array.isArray(h)?h[_]:h.type,w=d[_];s.concat(_+1).checkSubtype(x,w.type)}if(0===s.errors.length)return new Qt(r,o,p,d)}}if(1===u.length)(n=e.errors).push.apply(n,s.errors);else{for(var k=(u.length?u:a).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Pt).join(", ")+")":"("+Pt(e.type)+"...)"}).join(" | "),E=[],S=1;S<t.length;S++){var O=e.parse(t[S],1+E.length);if(!O)return null;E.push(Pt(O.type))}e.error("Expected arguments of type "+k+", but found ("+E.join(", ")+") instead.")}return null},Qt.register=function(t,e){for(var n in Qt.definitions=e,e)t[n]=Qt};var te=function(t,e,n){this.type=Tt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};function ee(t){if(t instanceof Qt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!ee(t)&&(e=!1)}),e}function ne(t){if(t instanceof Qt&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!ne(t)&&(e=!1)}),e}function re(t,e){if(t instanceof Qt&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!re(t,e)&&(n=!1)}),n}te.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Ot);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Ot);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,St))?null:new te(r,i,o)},te.prototype.evaluate=function(t){return new Lt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},te.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},te.prototype.possibleOutputs=function(){return[void 0]},te.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var ie=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};ie.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new ie(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},ie.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},ie.prototype.eachChild=function(){},ie.prototype.possibleOutputs=function(){return[void 0]},ie.prototype.serialize=function(){return["var",this.name]};var oe=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new wt),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};function ae(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)],r=t[a+1],e===n||e>n&&e<r)return a;if(n<e)i=a+1;else{if(!(n>e))throw new Ht("Input is not a number.");o=a-1}}return Math.max(a-1,0)}oe.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},oe.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new Xt(e,[t]):"coerce"===n?new $t(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,u=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==u.kind)if("color"!==a.kind&&"formatted"!==a.kind||"value"!==u.kind&&"string"!==u.kind){if(this.checkSubtype(a,u))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof Wt)&&function t(e){if(e instanceof ie)return t(e.boundExpression);if(e instanceof Qt&&"error"===e.name)return!1;if(e instanceof te)return!1;var n=e instanceof $t||e instanceof Xt,r=!0;return e.eachChild(function(e){r=n?r&&t(e):r&&e instanceof Wt}),!!r&&ee(e)&&re(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var s=new Jt;try{o=new Wt(o.type,o.evaluate(s))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},oe.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new oe(this.registry,r,e||null,i,this.errors)},oe.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new xt(r,t))},oe.prototype.checkSubtype=function(t,e){var n=Rt(t,e);return n&&this.error(n),n};var ue=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[0],u=o[1];this.labels.push(a),this.outputs.push(u)}};function se(t,e,n){return t*(1-n)+e*n}ue.parse=function(t,e){var n=t[1],r=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,Et)))return null;var i=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType),r.unshift(-1/0);for(var a=0;a<r.length;a+=2){var u=r[a],s=r[a+1],l=a+1,c=a+2;if("number"!=typeof u)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=u)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var f=e.parse(s,c,o);if(!f)return null;o=o||f.type,i.push([u,f])}return new ue(o,n,i)},ue.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[ae(e,r)].evaluate(t)},ue.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},ue.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},ue.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var le=Object.freeze({number:se,color:function(t,e,n){return new Ft(se(t.r,e.r,n),se(t.g,e.g,n),se(t.b,e.b,n),se(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,r){return se(t,e[r],n)})}}),ce=.95047,fe=1,he=1.08883,pe=4/29,de=6/29,ve=3*de*de,me=de*de*de,ye=Math.PI/180,ge=180/Math.PI;function be(t){return t>me?Math.pow(t,1/3):t/ve+pe}function _e(t){return t>de?t*t*t:ve*(t-pe)}function xe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function we(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ke(t){var e=we(t.r),n=we(t.g),r=we(t.b),i=be((.4124564*e+.3575761*n+.1804375*r)/ce),o=be((.2126729*e+.7151522*n+.072175*r)/fe);return{l:116*o-16,a:500*(i-o),b:200*(o-be((.0193339*e+.119192*n+.9503041*r)/he)),alpha:t.a}}function Ee(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=fe*_e(e),n=ce*_e(n),r=he*_e(r),new Ft(xe(3.2404542*n-1.5371385*e-.4985314*r),xe(-.969266*n+1.8760108*e+.041556*r),xe(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function Se(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var Oe={forward:ke,reverse:Ee,interpolate:function(t,e,n){return{l:se(t.l,e.l,n),a:se(t.a,e.a,n),b:se(t.b,e.b,n),alpha:se(t.alpha,e.alpha,n)}}},Ae={forward:function(t){var e=ke(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*ge;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*ye,n=t.c;return Ee({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Se(t.h,e.h,n),c:se(t.c,e.c,n),l:se(t.l,e.l,n),alpha:se(t.alpha,e.alpha,n)}}},Me=Object.freeze({lab:Oe,hcl:Ae}),Ce=function(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var u=a[o],s=u[0],l=u[1];this.labels.push(s),this.outputs.push(l)}};function Te(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}Ce.interpolationFactor=function(t,e,r,i){var o=0;if("exponential"===t.name)o=Te(e,t.base,r,i);else if("linear"===t.name)o=Te(e,1,r,i);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(Te(e,1,r,i))}return o},Ce.parse=function(t,e){var n=t[0],r=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var u=r.slice(1);if(4!==u.length||u.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:u}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,Et)))return null;var s=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=At:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var f=o[c],h=o[c+1],p=c+3,d=c+4;if("number"!=typeof f)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(s.length&&s[s.length-1][0]>=f)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var v=e.parse(h,d,l);if(!v)return null;l=l||v.type,s.push([f,v])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new Ce(l,n,r,i,s):e.error("Type "+Pt(l)+" is not interpolatable.")},Ce.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=ae(e,r),a=e[o],u=e[o+1],s=Ce.interpolationFactor(this.interpolation,r,a,u),l=n[o].evaluate(t),c=n[o+1].evaluate(t);return"interpolate"===this.operator?le[this.type.kind.toLowerCase()](l,c,s):"interpolate-hcl"===this.operator?Ae.reverse(Ae.interpolate(Ae.forward(l),Ae.forward(c),s)):Oe.reverse(Oe.interpolate(Oe.forward(l),Oe.forward(c),s))},Ce.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Ce.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},Ce.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var je=function(t,e){this.type=t,this.args=e};je.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var u=a[o],s=e.parse(u,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,i.push(s)}var l=r&&i.some(function(t){return Rt(r,t.type)});return new je(l?Ct:n,i)},je.prototype.evaluate=function(t){for(var e=null,n=0,r=this.args;n<r.length&&null===(e=r[n].evaluate(t));n+=1);return e},je.prototype.eachChild=function(t){this.args.forEach(t)},je.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},je.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var De=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};De.prototype.evaluate=function(t){return this.result.evaluate(t)},De.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},De.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new De(n,a):null},De.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},De.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t.push(i,o.serialize())}return t.push(this.result.serialize()),t};var Pe=function(t,e,n){this.type=t,this.index=e,this.input=n};Pe.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Et),r=e.parse(t[2],2,Dt(e.expectedType||Ct));if(!n||!r)return null;var i=r.type;return new Pe(i.itemType,n,r)},Pe.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Ht("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new Ht("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new Ht("Array index must be an integer, but found "+e+" instead.");return n[e]},Pe.prototype.eachChild=function(t){t(this.index),t(this.input)},Pe.prototype.possibleOutputs=function(){return[void 0]},Pe.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ze=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};ze.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var u=t[a],s=t[a+1];Array.isArray(u)||(u=[u]);var l=e.concat(a);if(0===u.length)return l.error("Expected at least one branch label.");for(var c=0,f=u;c<f.length;c+=1){var h=f[c];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,qt(h)))return null}else n=qt(h);if(void 0!==i[String(h)])return l.error("Branch labels must be unique.");i[String(h)]=o.length}var p=e.parse(s,a,r);if(!p)return null;r=r||p.type,o.push(p)}var d=e.parse(t[1],1,Ct);if(!d)return null;var v=e.parse(t[t.length-1],t.length-1,r);return v?"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new ze(n,r,d,i,o,v):null},ze.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(qt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},ze.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},ze.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},ze.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(f=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[f][1].push(a)}for(var u=function(e){return"number"===t.inputType.kind?Number(e):e},s=0,l=n;s<l.length;s+=1){var c=l[s],f=c[0],h=c[1];1===h.length?e.push(u(h[0])):e.push(h.map(u)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var Re=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};function Ie(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Fe(t,e,n,r){return 0===r.compare(e,n)}function Le(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){this.type=Ot,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,Ct);if(!o)return null;if(!Ie(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Pt(o.type)+"'.");var a=e.parse(t[2],2,Ct);if(!a)return null;if(!Ie(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Pt(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Pt(o.type)+"' and '"+Pt(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Xt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Xt(o.type,[a])));var u=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(u=e.parse(t[3],3,Tt)))return null}return new i(o,a,u)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var u=qt(o),s=qt(a);if(u.kind!==s.kind||"string"!==u.kind&&"number"!==u.kind)throw new Ht('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+u.kind+", "+s.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=qt(o),c=qt(a);if("string"!==l.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},i}()}Re.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,Ot);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var u=e.parse(t[t.length-1],t.length-1,n);return u?new Re(n,r,u):null},Re.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];if(i.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},Re.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t(i),t(o)}t(this.otherwise)},Re.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Re.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Ne=Le("==",function(t,e,n){return e===n},Fe),Be=Le("!=",function(t,e,n){return e!==n},function(t,e,n,r){return!Fe(0,e,n,r)}),Ue=Le("<",function(t,e,n){return e<n},function(t,e,n,r){return r.compare(e,n)<0}),qe=Le(">",function(t,e,n){return e>n},function(t,e,n,r){return r.compare(e,n)>0}),Ve=Le("<=",function(t,e,n){return e<=n},function(t,e,n,r){return r.compare(e,n)<=0}),We=Le(">=",function(t,e,n){return e>=n},function(t,e,n,r){return r.compare(e,n)>=0}),He=function(t,e,n,r,i){this.type=St,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};He.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Et);if(!n)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=e.parse(r.locale,1,St)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,St)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,Et)))return null;var u=null;return r["max-fraction-digits"]&&!(u=e.parse(r["max-fraction-digits"],1,Et))?null:new He(n,i,o,a,u)},He.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},He.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},He.prototype.possibleOutputs=function(){return[void 0]},He.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Ge=function(t){this.type=Et,this.input=t};Ge.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+Pt(n.type)+" instead."):new Ge(n):null},Ge.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Ht("Expected value to be of type string or array, but found "+Pt(qt(e))+" instead.")},Ge.prototype.eachChild=function(t){t(this.input)},Ge.prototype.possibleOutputs=function(){return[void 0]},Ge.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Xe={"==":Ne,"!=":Be,">":qe,"<":Ue,">=":We,"<=":Ve,array:Xt,at:Pe,boolean:Xt,case:Re,coalesce:je,collator:te,format:Zt,interpolate:Ce,"interpolate-hcl":Ce,"interpolate-lab":Ce,length:Ge,let:De,literal:Wt,match:ze,number:Xt,"number-format":He,object:Xt,step:ue,string:Xt,"to-boolean":$t,"to-color":$t,"to-number":$t,"to-string":$t,var:ie};function Ze(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,u=Ut(n,r,i,a);if(u)throw new Ht(u);return new Ft(n/255*a,r/255*a,i/255*a,a)}function Ye(t,e){return t in e}function $e(t,e){var n=e[t];return void 0===n?null:n}function Ke(t){return{type:t}}function Je(t){return{result:"success",value:t}}function Qe(t){return{result:"error",value:t}}function tn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function en(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function nn(t){return!!t.expression&&t.expression.interpolated}function rn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function on(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function an(t){return t}function un(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function sn(t,e,n,r,i){return un(typeof n===i?r[n]:void 0,t.default,e.default)}function ln(t,e,n){if("number"!==rn(n))return un(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=hn(t.stops,n);return t.stops[i][1]}function cn(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==rn(n))return un(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=hn(t.stops,n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),u=t.stops[o][1],s=t.stops[o+1][1],l=le[e.type]||an;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=Me[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof u.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=u.evaluate.apply(void 0,t),r=s.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return l(n,r,a)}}:l(u,s,a)}function fn(t,e,n){return"color"===e.type?n=Ft.parse(n):"formatted"===e.type?n=Bt.fromString(n.toString()):rn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),un(n,t.default,e.default)}function hn(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)][0],r=t[a+1][0],e===n||e>n&&e<r)return a;n<e?i=a+1:n>e&&(o=a-1)}return Math.max(a-1,0)}Qt.register(Xe,{error:[{kind:"error"},[St],function(t,e){var n=e[0];throw new Ht(n.evaluate(t))}],typeof:[St,[Ct],function(t,e){return Pt(qt(e[0].evaluate(t)))}],"to-rgba":[Dt(Et,4),[At],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[At,[Et,Et,Et],Ze],rgba:[At,[Et,Et,Et,Et],Ze],has:{type:Ot,overloads:[[[St],function(t,e){return Ye(e[0].evaluate(t),t.properties())}],[[St,Mt],function(t,e){var n=e[0],r=e[1];return Ye(n.evaluate(t),r.evaluate(t))}]]},get:{type:Ct,overloads:[[[St],function(t,e){return $e(e[0].evaluate(t),t.properties())}],[[St,Mt],function(t,e){var n=e[0],r=e[1];return $e(n.evaluate(t),r.evaluate(t))}]]},"feature-state":[Ct,[St],function(t,e){return $e(e[0].evaluate(t),t.featureState||{})}],properties:[Mt,[],function(t){return t.properties()}],"geometry-type":[St,[],function(t){return t.geometryType()}],id:[Ct,[],function(t){return t.id()}],zoom:[Et,[],function(t){return t.globals.zoom}],"heatmap-density":[Et,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Et,[],function(t){return t.globals.lineProgress||0}],accumulated:[Ct,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Et,Ke(Et),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[Et,Ke(Et),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:Et,overloads:[[[Et,Et],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)-r.evaluate(t)}],[[Et],function(t,e){return-e[0].evaluate(t)}]]},"/":[Et,[Et,Et],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)/r.evaluate(t)}],"%":[Et,[Et,Et],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)%r.evaluate(t)}],ln2:[Et,[],function(){return Math.LN2}],pi:[Et,[],function(){return Math.PI}],e:[Et,[],function(){return Math.E}],"^":[Et,[Et,Et],function(t,e){var n=e[0],r=e[1];return Math.pow(n.evaluate(t),r.evaluate(t))}],sqrt:[Et,[Et],function(t,e){var n=e[0];return Math.sqrt(n.evaluate(t))}],log10:[Et,[Et],function(t,e){var n=e[0];return Math.log(n.evaluate(t))/Math.LN10}],ln:[Et,[Et],function(t,e){var n=e[0];return Math.log(n.evaluate(t))}],log2:[Et,[Et],function(t,e){var n=e[0];return Math.log(n.evaluate(t))/Math.LN2}],sin:[Et,[Et],function(t,e){var n=e[0];return Math.sin(n.evaluate(t))}],cos:[Et,[Et],function(t,e){var n=e[0];return Math.cos(n.evaluate(t))}],tan:[Et,[Et],function(t,e){var n=e[0];return Math.tan(n.evaluate(t))}],asin:[Et,[Et],function(t,e){var n=e[0];return Math.asin(n.evaluate(t))}],acos:[Et,[Et],function(t,e){var n=e[0];return Math.acos(n.evaluate(t))}],atan:[Et,[Et],function(t,e){var n=e[0];return Math.atan(n.evaluate(t))}],min:[Et,Ke(Et),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[Et,Ke(Et),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[Et,[Et],function(t,e){var n=e[0];return Math.abs(n.evaluate(t))}],round:[Et,[Et],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Et,[Et],function(t,e){var n=e[0];return Math.floor(n.evaluate(t))}],ceil:[Et,[Et],function(t,e){var n=e[0];return Math.ceil(n.evaluate(t))}],"filter-==":[Ot,[St,Ct],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[Ot,[Ct],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[Ot,[St],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[Ot,[St,Ct],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[Ot,[Ct],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[Ot,[St,Ct],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[Ot,[Ct],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[Ot,[St,Ct],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[Ot,[Ct],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[Ot,[St,Ct],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[Ot,[Ct],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[Ot,[Ct],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Ot,[],function(t){return null!==t.id()}],"filter-type-in":[Ot,[Dt(St)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Ot,[Dt(Ct)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Ot,[St,Dt(Ct)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[Ot,[St,Dt(Ct)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:Ot,overloads:[[[Ot,Ot],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)&&r.evaluate(t)}],[Ke(Ot),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:Ot,overloads:[[[Ot,Ot],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)||r.evaluate(t)}],[Ke(Ot),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[Ot,[Ot],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Ot,[St],function(t,e){var n=e[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[St,[St],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[St,[St],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[St,Ke(Ct),function(t,e){return e.map(function(e){return Vt(e.evaluate(t))}).join("")}],"resolved-locale":[St,[Tt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var pn=function(t,e){var n;this.expression=t,this._warningHistory={},this._evaluator=new Jt,this._defaultValue=e?"color"===(n=e).type&&on(n.default)?new Ft(0,0,0,0):"color"===n.type?Ft.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function dn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Xe}function vn(t,e){var n=new oe(Xe,[],e?function(t){var e={color:At,string:St,number:Et,enum:St,boolean:Ot,formatted:jt};return"array"===t.type?Dt(e[t.value]||Ct,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Je(new pn(r,e)):Qe(n.errors)}pn.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},pn.prototype.evaluate=function(t,e,n){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null;try{var r=this.expression.evaluate(this._evaluator);if(null==r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new Ht("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var mn=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ne(e.expression)};mn.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},mn.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)};var yn=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ne(e.expression),n instanceof Ce&&(this._interpolationType=n.interpolation)};function gn(t,e){if("error"===(t=vn(t,e)).result)return t;var n=t.value.expression,r=ee(n);if(!r&&!tn(e))return Qe([new xt("","data expressions not supported")]);var i=re(n,["zoom"]);if(!i&&!en(e))return Qe([new xt("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof De)n=t(e.result);else if(e instanceof je)for(var r=0,i=e.args;r<i.length;r+=1){var o=i[r];if(n=t(o))break}else(e instanceof ue||e instanceof Ce)&&e.input instanceof Qt&&"zoom"===e.input.name&&(n=e);return n instanceof xt?n:(e.eachChild(function(e){var r=t(e);r instanceof xt?n=r:!n&&r?n=new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new xt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return o||i?o instanceof xt?Qe([o]):o instanceof Ce&&!nn(e)?Qe([new xt("",'"interpolate" expressions cannot be used with this property')]):Je(o?new yn(r?"camera":"composite",t.value,o):new mn(r?"constant":"source",t.value)):Qe([new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}yn.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},yn.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)},yn.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?Ce.interpolationFactor(this._interpolationType,t,e,n):0};var bn=function(t,e){this._parameters=t,this._specification=e,gt(this,function t(e,n){var r,i,o,a="color"===n.type,u=e.stops&&"object"==typeof e.stops[0][0],s=u||void 0!==e.property,l=u||!s,c=e.type||(nn(n)?"exponential":"interval");if(a&&((e=gt({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],Ft.parse(t[1])]})),e.default?e.default=Ft.parse(e.default):e.default=Ft.parse(n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Me[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)r=cn;else if("interval"===c)r=ln;else if("categorical"===c){r=sn,i=Object.create(null);for(var f=0,h=e.stops;f<h.length;f+=1){var p=h[f];i[p[0]]=p[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=fn}if(u){for(var d={},v=[],m=0;m<e.stops.length;m++){var y=e.stops[m],g=y[0].zoom;void 0===d[g]&&(d[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},v.push(g)),d[g].stops.push([y[0].value,y[1]])}for(var b=[],_=0,x=v;_<x.length;_+=1){var w=x[_];b.push([d[w].zoom,t(d[w],n)])}return{kind:"composite",interpolationFactor:Ce.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:b.map(function(t){return t[0]}),evaluate:function(t,r){var i=t.zoom;return cn({stops:b,base:e.base},n,i).evaluate(i,r)}}}return l?{kind:"camera",interpolationFactor:"exponential"===c?Ce.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var a=t.zoom;return r(e,n,a,i,o)}}:{kind:"source",evaluate:function(t,a){var u=a&&a.properties?a.properties[e.property]:void 0;return void 0===u?un(e.default,n.default):r(e,n,u,i,o)}}}(this._parameters,this._specification))};function _n(t,e){if(on(t))return new bn(t,e);if(dn(t)){var n=gn(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=Ft.parse(t)),{kind:"constant",evaluate:function(){return r}}}function xn(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,u=[],s=rn(n);if("object"!==s)return[new mt(e,n,"object expected, "+s+" found")];for(var l in n){var c=l.split(".")[0],f=r[c]||r["*"],h=void 0;if(i[c])h=i[c];else if(r[c])h=Hn;else if(i["*"])h=i["*"];else{if(!r["*"]){u.push(new mt(e,n[l],'unknown property "'+l+'"'));continue}h=Hn}u=u.concat(h({key:(e?e+".":e)+l,value:n[l],valueSpec:f,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var p in r)i[p]||r[p].required&&void 0===r[p].default&&void 0===n[p]&&u.push(new mt(e,n,'missing required property "'+p+'"'));return u}function wn(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Hn;if("array"!==rn(e))return[new mt(o,e,"array expected, "+rn(e)+" found")];if(n.length&&e.length!==n.length)return[new mt(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new mt(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var u={type:n.value};i.$version<7&&(u.function=n.function),"object"===rn(n.value)&&(u=n.value);for(var s=[],l=0;l<e.length;l++)s=s.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:u,style:r,styleSpec:i,key:o+"["+l+"]"}));return s}function kn(t){var e=t.key,n=t.value,r=t.valueSpec,i=rn(n);return"number"!==i?[new mt(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new mt(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new mt(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function En(t){var e,n,r,i=t.valueSpec,o=bt(t.value.type),a={},u="categorical"!==o&&void 0===t.value.property,s=!u,l="array"===rn(t.value.stops)&&"array"===rn(t.value.stops[0])&&"object"===rn(t.value.stops[0][0]),c=xn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new mt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(wn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:f})),"array"===rn(n)&&0===n.length&&e.push(new mt(t.key,n,"array must have at least one stop")),e},default:function(t){return Hn({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&u&&c.push(new mt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new mt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!nn(t.valueSpec)&&c.push(new mt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(s&&!tn(t.valueSpec)?c.push(new mt(t.key,t.value,"property functions not supported")):u&&!en(t.valueSpec)&&c.push(new mt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==t.value.property||c.push(new mt(t.key,t.value,'"property" property is required')),c;function f(t){var e=[],o=t.value,u=t.key;if("array"!==rn(o))return[new mt(u,o,"array expected, "+rn(o)+" found")];if(2!==o.length)return[new mt(u,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==rn(o[0]))return[new mt(u,o,"object expected, "+rn(o[0])+" found")];if(void 0===o[0].zoom)return[new mt(u,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new mt(u,o,"object stop key must have value")];if(r&&r>bt(o[0].zoom))return[new mt(u,o[0].zoom,"stop zoom values must appear in ascending order")];bt(o[0].zoom)!==r&&(r=bt(o[0].zoom),n=void 0,a={}),e=e.concat(xn({key:u+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:kn,value:h}}))}else e=e.concat(h({key:u+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return dn(_t(o[1]))?e.concat([new mt(u+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Hn({key:u+"[1]",value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function h(t,r){var u=rn(t.value),s=bt(t.value),l=null!==t.value?t.value:r;if(e){if(u!==e)return[new mt(t.key,l,u+" stop domain type must match previous stop domain type "+e)]}else e=u;if("number"!==u&&"string"!==u&&"boolean"!==u)return[new mt(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==u&&"categorical"!==o){var c="number expected, "+u+" found";return tn(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mt(t.key,l,c)]}return"categorical"!==o||"number"!==u||isFinite(s)&&Math.floor(s)===s?"categorical"!==o&&"number"===u&&void 0!==n&&s<n?[new mt(t.key,l,"stop domain values must appear in ascending order")]:(n=s,"categorical"===o&&s in a?[new mt(t.key,l,"stop domain values must be unique")]:(a[s]=!0,[])):[new mt(t.key,l,"integer expected, found "+s)]}}function Sn(t){var e=("property"===t.expressionContext?gn:vn)(_t(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new mt(""+t.key+e.key,t.value,e.message)});var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==n.possibleOutputs().indexOf(void 0))return[new mt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ne(n))return[new mt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ne(n))return[new mt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!re(n,["zoom","feature-state"]))return[new mt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ee(n))return[new mt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function On(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(bt(n))&&i.push(new mt(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(bt(n))&&i.push(new mt(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function An(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!An(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}bn.deserialize=function(t){return new bn(t._parameters,t._specification)},bn.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Mn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Cn(t){if(null==t)return function(){return!0};An(t)||(t=jn(t));var e=vn(t,Mn);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,n){return e.value.evaluate(t,n)}}function Tn(t,e){return t<e?-1:t>e?1:0}function jn(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?Dn(t[1],t[2],"=="):"!="===n?Rn(Dn(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Dn(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(jn))):"all"===n?["all"].concat(t.slice(1).map(jn)):"none"===n?["all"].concat(t.slice(1).map(jn).map(Rn)):"in"===n?Pn(t[1],t.slice(2)):"!in"===n?Rn(Pn(t[1],t.slice(2))):"has"===n?zn(t[1]):"!has"!==n||Rn(zn(t[1]))}function Dn(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function Pn(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(Tn)]]:["filter-in-small",t,["literal",e]]}}function zn(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Rn(t){return["!",t]}function In(t){return An(_t(t.value))?Sn(gt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==rn(n))return[new mt(r,n,"array expected, "+rn(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new mt(r,n,"filter array must have at least 1 element")];switch(a=a.concat(On({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),bt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===bt(n[1])&&a.push(new mt(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new mt(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=rn(n[1]))&&a.push(new mt(r+"[1]",n[1],"string expected, "+i+" found"));for(var u=2;u<n.length;u++)i=rn(n[u]),"$type"===bt(n[1])?a=a.concat(On({key:r+"["+u+"]",value:n[u],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new mt(r+"["+u+"]",n[u],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var s=1;s<n.length;s++)a=a.concat(t({key:r+"["+s+"]",value:n[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=rn(n[1]),2!==n.length?a.push(new mt(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new mt(r+"[1]",n[1],"string expected, "+i+" found"))}return a}(t)}function Fn(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,u=i[e+"_"+t.layerType];if(!u)return[];var s=a.match(/^(.*)-transition$/);if("paint"===e&&s&&u[s[1]]&&u[s[1]].transition)return Hn({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=t.valueSpec||u[a];if(!c)return[new mt(n,o,'unknown property "'+a+'"')];if("string"===rn(o)&&tn(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new mt(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var f=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&f.push(new mt(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&on(_t(o))&&"identity"===bt(o.type)&&f.push(new mt(n,o,'"text-font" does not support identity functions'))),f.concat(Hn({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function Ln(t){return Fn(t,"paint")}function Nn(t){return Fn(t,"layout")}function Bn(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new mt(r,n,'either "type" or "ref" is required'));var a,u=bt(n.type),s=bt(n.ref);if(n.id)for(var l=bt(n.id),c=0;c<t.arrayIndex;c++){var f=i.layers[c];bt(f.id)===l&&e.push(new mt(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+f.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new mt(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){bt(t.id)===s&&(a=t)}),a?a.ref?e.push(new mt(r,n.ref,"ref cannot reference another ref layer")):u=bt(a.type):e.push(new mt(r,n.ref,'ref layer "'+s+'" not found'));else if("background"!==u)if(n.source){var h=i.sources&&i.sources[n.source],p=h&&bt(h.type);h?"vector"===p&&"raster"===u?e.push(new mt(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===p&&"raster"!==u?e.push(new mt(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==u?e.push(new mt(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==u||!n.paint||!n.paint["line-gradient"]||"geojson"===p&&h.lineMetrics||e.push(new mt(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new mt(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new mt(r,n.source,'source "'+n.source+'" not found'))}else e.push(new mt(r,n,'missing required property "source"'));return e=e.concat(xn({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Hn({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:In,layout:function(t){return xn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Nn(gt({layerType:u},t))}}})},paint:function(t){return xn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Ln(gt({layerType:u},t))}}})}}}))}function Un(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new mt(n,e,'"type" is required')];var o,a=bt(e.type);switch(a){case"vector":case"raster":case"raster-dem":if(o=xn({key:n,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r}),"url"in e)for(var u in e)["type","url","tileSize"].indexOf(u)<0&&o.push(new mt(n+"."+u,e[u],'a source with a "url" property may not include a "'+u+'" property'));return o;case"geojson":if(o=xn({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r}),e.cluster)for(var s in e.clusterProperties){var l=e.clusterProperties[s],c=l[0],f=l[1],h="string"==typeof c?[c,["accumulated"],["get",s]]:c;o.push.apply(o,Sn({key:n+"."+s+".map",value:f,expressionContext:"cluster-map"})),o.push.apply(o,Sn({key:n+"."+s+".reduce",value:h,expressionContext:"cluster-reduce"}))}return o;case"video":return xn({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return xn({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new mt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return On({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function qn(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=rn(e);if(void 0===e)return o;if("object"!==a)return o.concat([new mt("light",e,"object expected, "+a+" found")]);for(var u in e){var s=u.match(/^(.*)-transition$/);o=s&&r[s[1]]&&r[s[1]].transition?o.concat(Hn({key:u,value:e[u],valueSpec:n.transition,style:i,styleSpec:n})):r[u]?o.concat(Hn({key:u,value:e[u],valueSpec:r[u],style:i,styleSpec:n})):o.concat([new mt(u,e[u],'unknown property "'+u+'"')])}return o}function Vn(t){var e=t.value,n=t.key,r=rn(e);return"string"!==r?[new mt(n,e,"string expected, "+r+" found")]:[]}var Wn={"*":function(){return[]},array:wn,boolean:function(t){var e=t.value,n=t.key,r=rn(e);return"boolean"!==r?[new mt(n,e,"boolean expected, "+r+" found")]:[]},number:kn,color:function(t){var e=t.key,n=t.value,r=rn(n);return"string"!==r?[new mt(e,n,"color expected, "+r+" found")]:null===It(n)?[new mt(e,n,'color expected, "'+n+'" found')]:[]},constants:yt,enum:On,filter:In,function:En,layer:Bn,object:xn,source:Un,light:qn,string:Vn,formatted:function(t){return 0===Vn(t).length?[]:Sn(t)}};function Hn(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&on(bt(e))?En(t):n.expression&&dn(_t(e))?Sn(t):n.type&&Wn[n.type]?Wn[n.type](t):xn(gt({},t,{valueSpec:n.type?r[n.type]:n}))}function Gn(t){var e=t.value,n=t.key,r=Vn(t);return r.length?r:(-1===e.indexOf("{fontstack}")&&r.push(new mt(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new mt(n,e,'"glyphs" url must include a "{range}" token')),r)}function Xn(t,e){e=e||vt;var n=[];return n=n.concat(Hn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Gn,"*":function(){return[]}}})),t.constants&&(n=n.concat(yt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Zn(n)}function Zn(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function Yn(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return Zn(t.apply(this,e))}}Xn.source=Yn(Un),Xn.light=Yn(qn),Xn.layer=Yn(Bn),Xn.filter=Yn(In),Xn.paintProperty=Yn(Ln),Xn.layoutProperty=Yn(Nn);var $n=Xn,Kn=Xn.light,Jn=Xn.paintProperty,Qn=Xn.layoutProperty;function tr(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1){var o=i[r];t.fire(new pt(new Error(o.message))),n=!0}return n}var er=rr,nr=3;function rr(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],n=i[2],this.d=e+2*n;for(var o=0;o<this.d*this.d;o++){var a=i[nr+o],u=i[nr+o+1];r.push(a===u?null:i.subarray(a,u))}var s=i[nr+r.length],l=i[nr+r.length+1];this.keys=i.subarray(s,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var f=n/e*t;this.min=-f,this.max=t+f}rr.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},rr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},rr.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},rr.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var u=[];return this._forEachCell(t,e,n,r,this._queryCell,u,{},i),u},rr.prototype._queryCell=function(t,e,n,r,i,o,a,u){var s=this.cells[i];if(null!==s)for(var l=this.keys,c=this.bboxes,f=0;f<s.length;f++){var h=s[f];if(void 0===a[h]){var p=4*h;(u?u(c[p+0],c[p+1],c[p+2],c[p+3]):t<=c[p+2]&&e<=c[p+3]&&n>=c[p+0]&&r>=c[p+1])?(a[h]=!0,o.push(l[h])):a[h]=!1}}},rr.prototype._forEachCell=function(t,e,n,r,i,o,a,u){for(var s=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(n),f=this._convertToCellCoord(r),h=s;h<=c;h++)for(var p=l;p<=f;p++){var d=this.d*p+h;if((!u||u(this._convertFromCellCoord(h),this._convertFromCellCoord(p),this._convertFromCellCoord(h+1),this._convertFromCellCoord(p+1)))&&i.call(this,t,e,n,r,d,o,a,u))return}},rr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},rr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},rr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=nr+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var u=t[a];i[nr+a]=o,i.set(u,o),o+=u.length}return i[nr+t.length]=o,i.set(this.keys,o),o+=this.keys.length,i[nr+t.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var ir=self.ImageData,or={};function ar(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),or[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var ur in ar("Object",Object),er.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},er.deserialize=function(t){return new er(t.buffer)},ar("Grid",er),ar("Color",Ft),ar("Error",Error),ar("StylePropertyFunction",bn),ar("StyleExpression",pn,{omit:["_evaluator"]}),ar("ZoomDependentExpression",yn),ar("ZoomConstantExpression",mn),ar("CompoundExpression",Qt,{omit:["_evaluate"]}),Xe)Xe[ur]._classRegistryKey||ar("Expression_"+ur,Xe[ur]);function sr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof ir)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1){var a=o[i];r.push(sr(a,e))}return r}if("object"==typeof t){var u=t.constructor,s=u._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l=u.serialize?u.serialize(t,e):{};if(!u.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(or[s].omit.indexOf(c)>=0)){var f=t[c];l[c]=or[s].shallow.indexOf(c)>=0?f:sr(f,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l}throw new Error("can't serialize object of type "+typeof t)}function lr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof ir)return t;if(Array.isArray(t))return t.map(lr);if("object"==typeof t){var e=t.$name||"Object",n=or[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var a=o[i];if("$name"!==a){var u=t[a];r[a]=or[e].shallow.indexOf(a)>=0?u:lr(u)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var cr=function(){this.first=!0};cr.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var fr={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function hr(t){for(var e=0,n=t;e<n.length;e+=1)if(dr(n[e].charCodeAt(0)))return!0;return!1}function pr(t){return!fr.Arabic(t)&&!fr["Arabic Supplement"](t)&&!fr["Arabic Extended-A"](t)&&!fr["Arabic Presentation Forms-A"](t)&&!fr["Arabic Presentation Forms-B"](t)}function dr(t){return 746===t||747===t||!(t<4352)&&(!!fr["Bopomofo Extended"](t)||!!fr.Bopomofo(t)||!(!fr["CJK Compatibility Forms"](t)||t>=65097&&t<=65103)||!!fr["CJK Compatibility Ideographs"](t)||!!fr["CJK Compatibility"](t)||!!fr["CJK Radicals Supplement"](t)||!!fr["CJK Strokes"](t)||!(!fr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||!!fr["CJK Unified Ideographs Extension A"](t)||!!fr["CJK Unified Ideographs"](t)||!!fr["Enclosed CJK Letters and Months"](t)||!!fr["Hangul Compatibility Jamo"](t)||!!fr["Hangul Jamo Extended-A"](t)||!!fr["Hangul Jamo Extended-B"](t)||!!fr["Hangul Jamo"](t)||!!fr["Hangul Syllables"](t)||!!fr.Hiragana(t)||!!fr["Ideographic Description Characters"](t)||!!fr.Kanbun(t)||!!fr["Kangxi Radicals"](t)||!!fr["Katakana Phonetic Extensions"](t)||!(!fr.Katakana(t)||12540===t)||!(!fr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!fr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||!!fr["Unified Canadian Aboriginal Syllabics"](t)||!!fr["Unified Canadian Aboriginal Syllabics Extended"](t)||!!fr["Vertical Forms"](t)||!!fr["Yijing Hexagram Symbols"](t)||!!fr["Yi Syllables"](t)||!!fr["Yi Radicals"](t))}function vr(t){return!(dr(t)||function(t){return!!(fr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||fr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||fr["Letterlike Symbols"](t)||fr["Number Forms"](t)||fr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||fr["Control Pictures"](t)&&9251!==t||fr["Optical Character Recognition"](t)||fr["Enclosed Alphanumerics"](t)||fr["Geometric Shapes"](t)||fr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||fr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||fr["CJK Symbols and Punctuation"](t)||fr.Katakana(t)||fr["Private Use Area"](t)||fr["CJK Compatibility Forms"](t)||fr["Small Form Variants"](t)||fr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function mr(t,e){return!(!e&&(t>=1424&&t<=2303||fr["Arabic Presentation Forms-A"](t)||fr["Arabic Presentation Forms-B"](t)))&&!(t>=2304&&t<=3583||t>=3840&&t<=4255||fr.Khmer(t))}var yr,gr=!1,br=null,_r=!1,xr=new dt,wr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return _r||null!=wr.applyArabicShaping}},kr=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new cr,this.transition={})};kr.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!mr(r[n].charCodeAt(0),e))return!1;return!0}(t,wr.isLoaded())},kr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},kr.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var Er=function(t,e){this.property=t,this.value=e,this.expression=_n(void 0===e?t.specification.default:e,t.specification)};Er.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Er.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var Sr=function(t){this.property=t,this.value=new Er(t,void 0)};Sr.prototype.transitioned=function(t,e){return new Ar(this.property,this.value,e,f({},t.transition,this.transition),t.now)},Sr.prototype.untransitioned=function(){return new Ar(this.property,this.value,null,{},0)};var Or=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Or.prototype.getValue=function(t){return _(this._values[t].value.value)},Or.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Sr(this._values[t].property)),this._values[t].value=new Er(this._values[t].property,null===e?void 0:_(e))},Or.prototype.getTransition=function(t){return _(this._values[t].transition)},Or.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Sr(this._values[t].property)),this._values[t].transition=_(e)||void 0},Or.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},Or.prototype.transitioned=function(t,e){for(var n=new Mr(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},Or.prototype.untransitioned=function(){for(var t=new Mr(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var Ar=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};Ar.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),r=this.prior;if(r){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return r.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t),n,function(t){if(i<=0)return 0;if(i>=1)return 1;var e=i*i,n=e*i;return 4*(i<.5?n:3*(i-e)+n-.75)}())}return n};var Mr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Mr.prototype.possiblyEvaluate=function(t){for(var e=new jr(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e},Mr.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var n=e[t];if(this._values[n].prior)return!0}return!1};var Cr=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Cr.prototype.getValue=function(t){return _(this._values[t].value)},Cr.prototype.setValue=function(t,e){this._values[t]=new Er(this._values[t].property,null===e?void 0:_(e))},Cr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},Cr.prototype.possiblyEvaluate=function(t){for(var e=new jr(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e};var Tr=function(t,e,n){this.property=t,this.value=e,this.parameters=n};Tr.prototype.isConstant=function(){return"constant"===this.value.kind},Tr.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Tr.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.parameters,t,e)};var jr=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};jr.prototype.get=function(t){return this._values[t]};var Dr=function(t){this.specification=t};Dr.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Dr.prototype.interpolate=function(t,e,n){var r=le[this.specification.type];return r?r(t,e,n):t};var Pr=function(t){this.specification=t};Pr.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Tr(this,{kind:"constant",value:t.expression.evaluate(e)},e):new Tr(this,t.expression,e)},Pr.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Tr(this,{kind:"constant",value:void 0},t.parameters);var r=le[this.specification.type];return r?new Tr(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t},Pr.prototype.evaluate=function(t,e,n,r){return"constant"===t.kind?t.value:t.evaluate(e,n,r)};var zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(t,e){if(void 0===t.value)return new Tr(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e),r=this._calculate(n,n,n,e);return new Tr(this,{kind:"constant",value:r},e)}if("camera"===t.expression.kind){var i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Tr(this,{kind:"constant",value:i},e)}return new Tr(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,r){if("source"===t.kind){var i=t.evaluate(e,n,r);return this._calculate(i,i,i,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value},e.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(Pr),Rr=function(t){this.specification=t};Rr.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new kr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new kr(Math.floor(e.zoom),e)),t.expression.evaluate(new kr(Math.floor(e.zoom+1),e)),e)}},Rr.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},Rr.prototype.interpolate=function(t){return t};var Ir=function(t){this.specification=t};Ir.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},Ir.prototype.interpolate=function(){return!1};var Fr=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var n=t[e],r=this.defaultPropertyValues[e]=new Er(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new Sr(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};ar("DataDrivenProperty",Pr),ar("DataConstantProperty",Dr),ar("CrossFadedDataDrivenProperty",zr),ar("CrossFadedProperty",Rr),ar("ColorRampProperty",Ir);var Lr=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new Cr(n.layout)),n.paint)){for(var r in this._transitionablePaint=new Or(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e){var r="layers."+this.id+".layout."+t;if(this._validate(Qn,r,t,e,n))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},e.prototype.getPaintProperty=function(t){return y(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e){var r="layers."+this.id+".paint."+t;if(this._validate(Jn,r,t,e,n))return!1}if(y(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],o="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&e,a=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var u=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),u||a||o},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),b(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&tr(this,t.call($n,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Tr&&tn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(dt),Nr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Br=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ur=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function qr(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map(function(t){var i,o=(i=t.type,Nr[i].BYTES_PER_ELEMENT),a=n=Vr(n,Math.max(e,o)),u=t.components||1;return r=Math.max(r,o),n+=o*u,{name:t.name,type:t.type,components:u,offset:a}}),size:Vr(n,Math.max(r,e)),alignment:e}}function Vr(t,e){return Math.ceil(t/e)*e}Ur.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Ur.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Ur.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ur.prototype.clear=function(){this.length=0},Ur.prototype.resize=function(t){this.reserve(t),this.length=t},Ur.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Ur.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(Ur);Wr.prototype.bytesPerElement=4,ar("StructArrayLayout2i4",Wr);var Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(Ur);Hr.prototype.bytesPerElement=8,ar("StructArrayLayout4i8",Hr);var Gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var u=6*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+3]=i,this.int16[u+4]=o,this.int16[u+5]=a,t},e}(Ur);Gr.prototype.bytesPerElement=12,ar("StructArrayLayout2i4i12",Gr);var Xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,u){var s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o,a,u)},e.prototype.emplace=function(t,e,n,r,i,o,a,u,s){var l=6*t,c=12*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint8[c+8]=o,this.uint8[c+9]=a,this.uint8[c+10]=u,this.uint8[c+11]=s,t},e}(Ur);Xr.prototype.bytesPerElement=12,ar("StructArrayLayout4i4ub12",Xr);var Zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,u){var s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o,a,u)},e.prototype.emplace=function(t,e,n,r,i,o,a,u,s){var l=8*t;return this.uint16[l+0]=e,this.uint16[l+1]=n,this.uint16[l+2]=r,this.uint16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=u,this.uint16[l+7]=s,t},e}(Ur);Zr.prototype.bytesPerElement=16,ar("StructArrayLayout8ui16",Zr);var Yr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,u){var s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o,a,u)},e.prototype.emplace=function(t,e,n,r,i,o,a,u,s){var l=8*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=u,this.uint16[l+7]=s,t},e}(Ur);Yr.prototype.bytesPerElement=16,ar("StructArrayLayout4i4ui16",Yr);var $r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(Ur);$r.prototype.bytesPerElement=12,ar("StructArrayLayout3f12",$r);var Kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var n=1*t;return this.uint32[n+0]=e,t},e}(Ur);Kr.prototype.bytesPerElement=4,ar("StructArrayLayout1ul4",Kr);var Jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,u,s,l,c){var f=this.length;return this.resize(f+1),this.emplace(f,t,e,n,r,i,o,a,u,s,l,c)},e.prototype.emplace=function(t,e,n,r,i,o,a,u,s,l,c,f){var h=12*t,p=6*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.int16[h+2]=r,this.int16[h+3]=i,this.int16[h+4]=o,this.int16[h+5]=a,this.uint32[p+3]=u,this.uint16[h+8]=s,this.uint16[h+9]=l,this.int16[h+10]=c,this.int16[h+11]=f,t},e}(Ur);Jr.prototype.bytesPerElement=24,ar("StructArrayLayout6i1ul2ui2i24",Jr);var Qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var u=6*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+3]=i,this.int16[u+4]=o,this.int16[u+5]=a,t},e}(Ur);Qr.prototype.bytesPerElement=12,ar("StructArrayLayout2i2i2i12",Qr);var ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=4*t;return this.uint8[r+0]=e,this.uint8[r+1]=n,t},e}(Ur);ti.prototype.bytesPerElement=4,ar("StructArrayLayout2ub4",ti);var ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,u,s,l,c,f,h,p){var d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,r,i,o,a,u,s,l,c,f,h,p)},e.prototype.emplace=function(t,e,n,r,i,o,a,u,s,l,c,f,h,p,d){var v=20*t,m=10*t,y=40*t;return this.int16[v+0]=e,this.int16[v+1]=n,this.uint16[v+2]=r,this.uint16[v+3]=i,this.uint32[m+2]=o,this.uint32[m+3]=a,this.uint32[m+4]=u,this.uint16[v+10]=s,this.uint16[v+11]=l,this.uint16[v+12]=c,this.float32[m+7]=f,this.float32[m+8]=h,this.uint8[y+36]=p,this.uint8[y+37]=d,t},e}(Ur);ei.prototype.bytesPerElement=40,ar("StructArrayLayout2i2ui3ul3ui2f2ub40",ei);var ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,u,s,l,c,f,h,p){var d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,r,i,o,a,u,s,l,c,f,h,p)},e.prototype.emplace=function(t,e,n,r,i,o,a,u,s,l,c,f,h,p,d){var v=16*t,m=8*t;return this.int16[v+0]=e,this.int16[v+1]=n,this.int16[v+2]=r,this.int16[v+3]=i,this.uint16[v+4]=o,this.uint16[v+5]=a,this.uint16[v+6]=u,this.uint16[v+7]=s,this.uint16[v+8]=l,this.uint16[v+9]=c,this.uint16[v+10]=f,this.uint16[v+11]=h,this.uint16[v+12]=p,this.uint32[m+7]=d,t},e}(Ur);ni.prototype.bytesPerElement=32,ar("StructArrayLayout4i9ui1ul32",ni);var ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var n=1*t;return this.float32[n+0]=e,t},e}(Ur);ri.prototype.bytesPerElement=4,ar("StructArrayLayout1f4",ri);var ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(Ur);ii.prototype.bytesPerElement=6,ar("StructArrayLayout3i6",ii);var oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=2*t,o=4*t;return this.uint32[i+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=r,t},e}(Ur);oi.prototype.bytesPerElement=8,ar("StructArrayLayout1ul2ui8",oi);var ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(Ur);ai.prototype.bytesPerElement=6,ar("StructArrayLayout3ui6",ai);var ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(Ur);ui.prototype.bytesPerElement=4,ar("StructArrayLayout2ui4",ui);var si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var n=1*t;return this.uint16[n+0]=e,t},e}(Ur);si.prototype.bytesPerElement=2,ar("StructArrayLayout1ui2",si);var li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(Ur);li.prototype.bytesPerElement=8,ar("StructArrayLayout2f8",li);var ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(Ur);ci.prototype.bytesPerElement=16,ar("StructArrayLayout4f16",ci);var fi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(Br);fi.prototype.size=24;var hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new fi(this,t)},e}(Jr);ar("CollisionBoxArray",hi);var pi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(Br);pi.prototype.size=40;var di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new pi(this,t)},e}(ei);ar("PlacedSymbolArray",di);var vi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.horizontalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},n.key.get=function(){return this._structArray.uint16[this._pos2+4]},n.key.set=function(t){this._structArray.uint16[this._pos2+4]=t},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},n.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+5]=t},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},n.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+6]=t},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},n.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+7]=t},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.featureIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},n.numGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},n.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},n.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+7]=t},Object.defineProperties(e.prototype,n),e}(Br);vi.prototype.size=32;var mi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new vi(this,t)},e}(ni);ar("SymbolInstanceArray",mi);var yi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(Br);yi.prototype.size=4;var gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new yi(this,t)},e}(ri);ar("GlyphOffsetArray",gi);var bi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(Br);bi.prototype.size=6;var _i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new bi(this,t)},e}(ii);ar("SymbolLineVertexArray",_i);var xi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(Br);xi.prototype.size=8;var wi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new xi(this,t)},e}(oi);ar("FeatureIndexArray",wi);var ki=qr([{name:"a_pos",components:2,type:"Int16"}],4),Ei=ki.members,Si=(ki.size,ki.alignment,function(t){void 0===t&&(t=[]),this.segments=t});function Oi(t,e){return 256*(t=l(Math.floor(t),0,255))+l(Math.floor(e),0,255)}Si.prototype.prepareSegment=function(t,e,n,r){var i=this.segments[this.segments.length-1];return t>Si.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+Si.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>Si.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},Si.prototype.get=function(){return this.segments},Si.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},Si.simpleSegment=function(t,e,n,r){return new Si([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},Si.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ar("SegmentVector",Si);var Ai=function(){this.ids=[],this.positions=[],this.indexed=!1};function Mi(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}Ai.prototype.add=function(t,e,n,r){this.ids.push(t),this.positions.push(e,n,r)},Ai.prototype.getPositions=function(t){for(var e=0,n=this.ids.length-1;e<n;){var r=e+n>>1;this.ids[r]>=t?n=r:e=r+1}for(var i=[];this.ids[e]===t;){var o=this.positions[3*e],a=this.positions[3*e+1],u=this.positions[3*e+2];i.push({index:o,start:a,end:u}),e++}return i},Ai.serialize=function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,n,r,i){if(!(r>=i)){for(var o=e[r+i>>1],a=r-1,u=i+1;;){do{a++}while(e[a]<o);do{u--}while(e[u]>o);if(a>=u)break;Mi(e,a,u),Mi(n,3*a,3*u),Mi(n,3*a+1,3*u+1),Mi(n,3*a+2,3*u+2)}t(e,n,r,u),t(e,n,u+1,i)}}(n,r,0,n.length-1),e.push(n.buffer,r.buffer),{ids:n,positions:r}},Ai.deserialize=function(t){var e=new Ai;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},ar("FeaturePositionMap",Ai);var Ci=function(t,e){this.gl=t.gl,this.location=e},Ti=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Ci),ji=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Ci),Di=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Ci),Pi=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Ci),zi=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Ci),Ri=function(t){function e(e,n){t.call(this,e,n),this.current=Ft.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Ci),Ii=new Float32Array(16),Fi=function(t){function e(e,n){t.call(this,e,n),this.current=Ii}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Ci);function Li(t){return[Oi(255*t.r,255*t.g),Oi(255*t.b,255*t.a)]}var Ni=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0};Ni.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},Ni.prototype.setConstantPatternPositions=function(){},Ni.prototype.populatePaintArray=function(){},Ni.prototype.updatePaintArray=function(){},Ni.prototype.upload=function(){},Ni.prototype.destroy=function(){},Ni.prototype.setUniforms=function(t,e,n,r){e.set(r.constantOr(this.value))},Ni.prototype.getBinding=function(t,e){return"color"===this.type?new Ri(t,e):new ji(t,e)},Ni.serialize=function(t){var e=t.value,n=t.names,r=t.type;return{value:sr(e),names:n,type:r}},Ni.deserialize=function(t){var e=t.value,n=t.names,r=t.type;return new Ni(lr(e),n,r)};var Bi=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};Bi.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},Bi.prototype.populatePaintArray=function(){},Bi.prototype.updatePaintArray=function(){},Bi.prototype.upload=function(){},Bi.prototype.destroy=function(){},Bi.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},Bi.prototype.setUniforms=function(t,e,n,r,i){var o=this.patternPositions;"u_pattern_to"===i&&o.patternTo&&e.set(o.patternTo),"u_pattern_from"===i&&o.patternFrom&&e.set(o.patternFrom)},Bi.prototype.getBinding=function(t,e){return new zi(t,e)};var Ui=function(t,e,n,r){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new r};Ui.prototype.defines=function(){return[]},Ui.prototype.setConstantPatternPositions=function(){},Ui.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new kr(0),e,{});if("color"===this.type)for(var o=Li(i),a=r;a<t;a++)n.emplaceBack(o[0],o[1]);else{for(var u=r;u<t;u++)n.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},Ui.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},n,r);if("color"===this.type)for(var a=Li(o),u=t;u<e;u++)i.emplace(u,a[0],a[1]);else{for(var s=t;s<e;s++)i.emplace(s,o);this.maxValue=Math.max(this.maxValue,o)}},Ui.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ui.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ui.prototype.setUniforms=function(t,e){e.set(0)},Ui.prototype.getBinding=function(t,e){return new ji(t,e)};var qi=function(t,e,n,r,i,o){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0;var a=o;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new a};qi.prototype.defines=function(){return[]},qi.prototype.setConstantPatternPositions=function(){},qi.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new kr(this.zoom),e,{}),o=this.expression.evaluate(new kr(this.zoom+1),e,{});if("color"===this.type)for(var a=Li(i),u=Li(o),s=r;s<t;s++)n.emplaceBack(a[0],a[1],u[0],u[1]);else{for(var l=r;l<t;l++)n.emplaceBack(i,o);this.maxValue=Math.max(this.maxValue,i,o)}},qi.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);if("color"===this.type)for(var u=Li(o),s=Li(a),l=t;l<e;l++)i.emplace(l,u[0],u[1],s[0],s[1]);else{for(var c=t;c<e;c++)i.emplace(c,o,a);this.maxValue=Math.max(this.maxValue,o,a)}},qi.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},qi.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},qi.prototype.setUniforms=function(t,e,n){e.set(this.interpolationFactor(n.zoom))},qi.prototype.getBinding=function(t,e){return new ji(t,e)};var Vi=function(t,e,n,r,i,o,a){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0,this.layerId=a,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};Vi.prototype.defines=function(){return[]},Vi.prototype.setConstantPatternPositions=function(){},Vi.prototype.populatePaintArray=function(t,e,n){var r=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,o=this.layerId,a=r.length;if(r.reserve(t),i.reserve(t),n&&e.patterns&&e.patterns[o]){var u=e.patterns[o],s=u.min,l=u.mid,c=u.max,f=n[s],h=n[l],p=n[c];if(!f||!h||!p)return;for(var d=a;d<t;d++)r.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1]),i.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1])}},Vi.prototype.updatePaintArray=function(t,e,n,r,i){var o=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,u=this.layerId;if(i&&n.patterns&&n.patterns[u]){var s=n.patterns[u],l=s.min,c=s.mid,f=s.max,h=i[l],p=i[c],d=i[f];if(!h||!p||!d)return;for(var v=t;v<e;v++)o.emplace(v,p.tl[0],p.tl[1],p.br[0],p.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),a.emplace(v,p.tl[0],p.tl[1],p.br[0],p.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},Vi.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Vi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Vi.prototype.setUniforms=function(t,e){e.set(0)},Vi.prototype.getBinding=function(t,e){return new ji(t,e)};var Wi=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Ai,this._bufferOffset=0};Wi.createDynamic=function(t,e,n){var r=new Wi,i=[];for(var o in t.paint._values)if(n(o)){var a=t.paint.get(o);if(a instanceof Tr&&tn(a.property.specification)){var u=Gi(o,t.type),s=a.property.specification.type,l=a.property.useIntegerZoom;if("cross-faded"===a.property.specification["property-type"]||"cross-faded-data-driven"===a.property.specification["property-type"])if("constant"===a.value.kind)r.binders[o]=new Bi(a.value.value,u,s),i.push("/u_"+o);else{var c=Xi(o,s,"source");r.binders[o]=new Vi(a.value,u,s,l,e,c,t.id),i.push("/a_"+o)}else if("constant"===a.value.kind)r.binders[o]=new Ni(a.value.value,u,s),i.push("/u_"+o);else if("source"===a.value.kind){var f=Xi(o,s,"source");r.binders[o]=new Ui(a.value,u,s,f),i.push("/a_"+o)}else{var h=Xi(o,s,"composite");r.binders[o]=new qi(a.value,u,s,l,e,h),i.push("/z_"+o)}}}return r.cacheKey=i.sort().join(""),r},Wi.prototype.populatePaintArrays=function(t,e,n,r){for(var i in this.binders)this.binders[i].populatePaintArray(t,e,r);void 0!==e.id&&this._featureMap.add(+e.id,n,this._bufferOffset,t),this._bufferOffset=t},Wi.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders)this.binders[n].setConstantPatternPositions(t,e)},Wi.prototype.updatePaintArrays=function(t,e,n,r){var i=!1;for(var o in t)for(var a=0,u=this._featureMap.getPositions(+o);a<u.length;a+=1){var s=u[a],l=e.feature(s.index);for(var c in this.binders){var f=this.binders[c];if(!(f instanceof Ni||f instanceof Bi)&&!0===f.expression.isStateDependent){var h=n.paint.get(c);f.expression=h.value,f.updatePaintArray(s.start,s.end,l,t[o],r),i=!0}}}return i},Wi.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},Wi.prototype.getPaintVertexBuffers=function(){return this._buffers},Wi.prototype.getUniforms=function(t,e){var n={};for(var r in this.binders)for(var i=this.binders[r],o=0,a=i.uniformNames;o<a.length;o+=1){var u=a[o];n[u]=i.getBinding(t,e[u])}return n},Wi.prototype.setUniforms=function(t,e,n,r){for(var i in this.binders)for(var o=this.binders[i],a=0,u=o.uniformNames;a<u.length;a+=1){var s=u[a];o.setUniforms(t,e[s],r,n.get(i),s)}},Wi.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof Vi){var i=2===t.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;i&&e.push(i)}else(r instanceof Ui||r instanceof qi)&&r.paintVertexBuffer&&e.push(r.paintVertexBuffer)}this._buffers=e},Wi.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof Ui||i instanceof qi)&&i.paintVertexBuffer&&n.push(i.paintVertexBuffer)}this._buffers=n},Wi.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var Hi=function(t,e,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=Wi.createDynamic(a,n,r),this.programConfigurations[a.id].layoutAttributes=t}this.needsUpload=!1};function Gi(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Xi(t,e,n){var r={color:{source:li,composite:ci},number:{source:ri,composite:li}},i=function(t){return{"line-pattern":{source:Zr,composite:Zr},"fill-pattern":{source:Zr,composite:Zr},"fill-extrusion-pattern":{source:Zr,composite:Zr}}[t]}(t);return i&&i[n]||r[e][n]}Hi.prototype.populatePaintArrays=function(t,e,n,r){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,n,r);this.needsUpload=!0},Hi.prototype.updatePaintArrays=function(t,e,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,e,a,r)||this.needsUpload}},Hi.prototype.get=function(t){return this.programConfigurations[t]},Hi.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Hi.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},ar("ConstantBinder",Ni),ar("CrossFadedConstantBinder",Bi),ar("SourceExpressionBinder",Ui),ar("CrossFadedCompositeBinder",Vi),ar("CompositeExpressionBinder",qi),ar("ProgramConfiguration",Wi,{omit:["_buffers"]}),ar("ProgramConfigurationSet",Hi);var Zi=8192,Yi={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function $i(t){for(var e=Zi/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<Yi.min||a.x>Yi.max||a.y<Yi.min||a.y>Yi.max)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Ki(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var Ji=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Wr,this.indexArray=new ai,this.segments=new Si,this.programConfigurations=new Hi(Ei,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Qi(t,e){for(var n=0;n<t.length;n++)if(so(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(so(t,e[r]))return!0;return!!ro(t,e)}function to(t,e,n){return!!so(t,e)||!!oo(e,t,n)}function eo(t,e){if(1===t.length)return uo(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(so(t,r[i]))return!0;for(var o=0;o<t.length;o++)if(uo(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(ro(t,e[a]))return!0;return!1}function no(t,e,n){if(t.length>1){if(ro(t,e))return!0;for(var r=0;r<e.length;r++)if(oo(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(oo(t[i],e,n))return!0;return!1}function ro(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(io(r,i,e[o],e[o+1]))return!0;return!1}function io(t,e,n,r){return k(t,n,r)!==k(e,n,r)&&k(t,e,n)!==k(t,e,r)}function oo(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(ao(t,e[i-1],e[i])<r)return!0;return!1}function ao(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return i<0?t.distSqr(e):i>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(i)._add(e))}function uo(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var u=0,s=(n=t[a]).length-1;u<n.length;s=u++)r=n[u],i=n[s],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function so(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function lo(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var o=k(t,e,n[0]);return o!==k(t,e,n[1])||o!==k(t,e,n[2])||o!==k(t,e,n[3])}function co(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).binders[t].maxValue}function fo(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ho(t,e,n,r,o){if(!e[0]&&!e[1])return t;var a=i.convert(e)._mult(o);"viewport"===n&&a._rotate(-r);for(var u=[],s=0;s<t.length;s++){var l=t[s];u.push(l.sub(a))}return u}Ji.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,u=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new kr(this.zoom),o)){var s=$i(o);this.addFeature(o,s,a),e.featureIndex.insert(o,s,a,u,this.index)}}},Ji.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Ji.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ji.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ji.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ei),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ji.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ji.prototype.addFeature=function(t,e,n){for(var r=0,i=e;r<i.length;r+=1)for(var o=0,a=i[r];o<a.length;o+=1){var u=a[o],s=u.x,l=u.y;if(!(s<0||s>=Zi||l<0||l>=Zi)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),f=c.vertexLength;Ki(this.layoutVertexArray,s,l,-1,-1),Ki(this.layoutVertexArray,s,l,1,-1),Ki(this.layoutVertexArray,s,l,1,1),Ki(this.layoutVertexArray,s,l,-1,1),this.indexArray.emplaceBack(f,f+1,f+2),this.indexArray.emplaceBack(f,f+3,f+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{})},ar("CircleBucket",Ji,{omit:["layers"]});var po={paint:new Fr({"circle-radius":new Pr(vt.paint_circle["circle-radius"]),"circle-color":new Pr(vt.paint_circle["circle-color"]),"circle-blur":new Pr(vt.paint_circle["circle-blur"]),"circle-opacity":new Pr(vt.paint_circle["circle-opacity"]),"circle-translate":new Dr(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new Dr(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Dr(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Dr(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Pr(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Pr(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Pr(vt.paint_circle["circle-stroke-opacity"])})},vo="undefined"!=typeof Float32Array?Float32Array:Array;function mo(){var t=new vo(9);return vo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function yo(){var t=new vo(3);return vo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function go(t,e,n){var r=new vo(3);return r[0]=t,r[1]=e,r[2]=n,r}function bo(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function _o(){var t=new vo(4);return vo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}Math.PI,yo(),function(){var t;t=new vo(4),vo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}(),yo(),go(1,0,0),go(0,1,0),_o(),_o(),mo(),function(){var t;t=new vo(2),vo!=Float32Array&&(t[0]=0,t[1]=0)}();var xo=function(t){function e(e){t.call(this,e,po)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Ji(t)},e.prototype.queryRadius=function(t){var e=t;return co("circle-radius",this,e)+co("circle-stroke-width",this,e)+fo(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,u){for(var s=ho(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),f=c?s:function(t,e){return s.map(function(t){return wo(t,e)})}(0,u),h=c?l*a:l,p=0,d=r;p<d.length;p+=1)for(var v=0,m=d[p];v<m.length;v+=1){var y=m[v],g=c?y:wo(y,u),b=h,_=bo([],[y.x,y.y,0,1],u);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?b*=_[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(b*=o.cameraToCenterDistance/_[3]),to(f,g,b))return!0}return!1},e}(Lr);function wo(t,e){var n=bo([],[t.x,t.y,0,1],e);return new i(n[0]/n[3],n[1]/n[3])}var ko=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ji);function Eo(t,e,n,r){var i=e.width,o=e.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function So(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=Eo({},{width:r,height:i},n);Oo(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function Oo(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,u=e.data,s=0;s<i.height;s++)for(var l=((n.y+s)*t.width+n.x)*o,c=((r.y+s)*e.width+r.x)*o,f=0;f<i.width*o;f++)u[c+f]=a[l+f];return e}ar("HeatmapBucket",ko,{omit:["layers"]});var Ao=function(t,e){Eo(this,t,1,e)};Ao.prototype.resize=function(t){So(this,t,1)},Ao.prototype.clone=function(){return new Ao({width:this.width,height:this.height},new Uint8Array(this.data))},Ao.copy=function(t,e,n,r,i){Oo(t,e,n,r,i,1)};var Mo=function(t,e){Eo(this,t,4,e)};Mo.prototype.resize=function(t){So(this,t,4)},Mo.prototype.clone=function(){return new Mo({width:this.width,height:this.height},new Uint8Array(this.data))},Mo.copy=function(t,e,n,r,i){Oo(t,e,n,r,i,4)},ar("AlphaImage",Ao),ar("RGBAImage",Mo);var Co={paint:new Fr({"heatmap-radius":new Pr(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Pr(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Dr(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ir(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Dr(vt.paint_heatmap["heatmap-opacity"])})};function To(t,e){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[e]=i/255;var a=t.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new Mo({width:256,height:1},n)}var jo=function(t){function e(e){t.call(this,e,Co),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new ko(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=To(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Lr),Do={paint:new Fr({"hillshade-illumination-direction":new Dr(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Dr(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Dr(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Dr(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Dr(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Dr(vt.paint_hillshade["hillshade-accent-color"])})},Po=function(t){function e(e){t.call(this,e,Do)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Lr),zo=qr([{name:"a_pos",components:2,type:"Int16"}],4),Ro=zo.members,Io=(zo.size,zo.alignment,Lo),Fo=Lo;function Lo(t,e,n){n=n||2;var r,i,o,a,u,s,l,c=e&&e.length,f=c?e[0]*n:t.length,h=No(t,0,f,n,!0),p=[];if(!h||h.next===h.prev)return p;if(c&&(h=function(t,e,n,r){var i,o,a,u=[];for(i=0,o=e.length;i<o;i++)(a=No(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),u.push(Yo(a));for(u.sort(Go),i=0;i<u.length;i++)Xo(u[i],n),n=Bo(n,n.next);return n}(t,e,h,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<f;d+=n)(u=t[d])<r&&(r=u),(s=t[d+1])<i&&(i=s),u>o&&(o=u),s>a&&(a=s);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return Uo(h,p,n,r,i,l),p}function No(t,e,n,r,i){var o,a;if(i===aa(t,e,n,r)>0)for(o=e;o<n;o+=r)a=ra(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=ra(o,t[o],t[o+1],a);return a&&Qo(a,a.next)&&(ia(a),a=a.next),a}function Bo(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Qo(r,r.next)&&0!==Jo(r.prev,r,r.next))r=r.next;else{if(ia(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Uo(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Zo(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,u,s,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,u=0,e=0;e<l&&(u++,r=r.nextZ);e++);for(s=l;u>0||s>0&&r;)0!==u&&(0===s||!r||n.z<=r.z)?(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,s--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var u,s,l=t;t.prev!==t.next;)if(u=t.prev,s=t.next,o?Vo(t,r,i,o):qo(t))e.push(u.i/n),e.push(t.i/n),e.push(s.i/n),ia(t),t=s.next,l=s.next;else if((t=s)===l){a?1===a?Uo(t=Wo(t,e,n),e,n,r,i,o,2):2===a&&Ho(t,e,n,r,i,o):Uo(Bo(t),e,n,r,i,o,1);break}}}function qo(t){var e=t.prev,n=t,r=t.next;if(Jo(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if($o(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Jo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Vo(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Jo(i,o,a)>=0)return!1;for(var u=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,s=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=Zo(u,s,e,n,r),h=Zo(l,c,e,n,r),p=t.prevZ,d=t.nextZ;p&&p.z>=f&&d&&d.z<=h;){if(p!==t.prev&&p!==t.next&&$o(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Jo(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&$o(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Jo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=f;){if(p!==t.prev&&p!==t.next&&$o(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Jo(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&$o(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Jo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Wo(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Qo(i,o)&&ta(i,r,r.next,o)&&ea(i,o)&&ea(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),ia(r),ia(r.next),r=t=o),r=r.next}while(r!==t);return r}function Ho(t,e,n,r,i,o){var a=t;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&Ko(a,u)){var s=na(a,u);return a=Bo(a,a.next),s=Bo(s,s.next),Uo(a,e,n,r,i,o),void Uo(s,e,n,r,i,o)}u=u.next}a=a.next}while(a!==t)}function Go(t,e){return t.x-e.x}function Xo(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var u=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(u<=i&&u>a){if(a=u,u===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var s,l=n,c=n.x,f=n.y,h=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&$o(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&((s=Math.abs(o-r.y)/(i-r.x))<h||s===h&&r.x>n.x)&&ea(r,t)&&(n=r,h=s),r=r.next;return n}(t,e)){var n=na(e,t);Bo(n,n.next)}}function Zo(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Yo(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function $o(t,e,n,r,i,o,a,u){return(i-a)*(e-u)-(t-a)*(o-u)>=0&&(t-a)*(r-u)-(n-a)*(e-u)>=0&&(n-a)*(o-u)-(i-a)*(r-u)>=0}function Ko(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ta(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&ea(t,e)&&ea(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Jo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Qo(t,e){return t.x===e.x&&t.y===e.y}function ta(t,e,n,r){return!!(Qo(t,e)&&Qo(n,r)||Qo(t,r)&&Qo(n,e))||Jo(t,e,n)>0!=Jo(t,e,r)>0&&Jo(n,r,t)>0!=Jo(n,r,e)>0}function ea(t,e){return Jo(t.prev,t,t.next)<0?Jo(t,e,t.next)>=0&&Jo(t,t.prev,e)>=0:Jo(t,e,t.prev)<0||Jo(t,t.next,e)<0}function na(t,e){var n=new oa(t.i,t.x,t.y),r=new oa(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ra(t,e,n,r){var i=new oa(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ia(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function oa(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function aa(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function ua(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,u=n-r+1,s=Math.log(a),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(a-l)/a)*(u-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-u*l/a+c)),Math.min(i,Math.floor(n+(a-u)*l/a+c)),o)}var f=e[n],h=r,p=i;for(sa(e,r,n),o(e[i],f)>0&&sa(e,r,i);h<p;){for(sa(e,h,p),h++,p--;o(e[h],f)<0;)h++;for(;o(e[p],f)>0;)p--}0===o(e[r],f)?sa(e,r,p):sa(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(t,e,n||0,r||t.length-1,i||la)}function sa(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function la(t,e){return t<e?-1:t>e?1:0}function ca(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var u=E(t[a]);0!==u&&(t[a].area=Math.abs(u),void 0===i&&(i=u<0),i===u<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var s=0;s<o.length;s++)o[s].length<=e||(ua(o[s],e,1,o[s].length-1,fa),o[s]=o[s].slice(0,e));return o}function fa(t,e){return e.area-t.area}function ha(t,e,n){for(var r=n.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var u=a[o].paint.get(t+"-pattern");u.isConstant()||(i=!0);var s=u.constantOr(null);s&&(i=!0,r[s.to]=!0,r[s.from]=!0)}return i}function pa(t,e,n,r,i){for(var o=i.patternDependencies,a=0,u=e;a<u.length;a+=1){var s=u[a],l=s.paint.get(t+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},n,{}),f=l.evaluate({zoom:r},n,{}),h=l.evaluate({zoom:r+1},n,{});o[c]=!0,o[f]=!0,o[h]=!0,n.patterns[s.id]={min:c,mid:f,max:h}}}return n}Lo.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(aa(t,0,o,n));if(i)for(var u=0,s=e.length;u<s;u++){var l=e[u]*n,c=u<s-1?e[u+1]*n:t.length;a-=Math.abs(aa(t,l,c,n))}var f=0;for(u=0;u<r.length;u+=3){var h=r[u]*n,p=r[u+1]*n,d=r[u+2]*n;f+=Math.abs((t[h]-t[d])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[d+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},Lo.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},Io.default=Fo;var da=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Wr,this.indexArray=new ai,this.indexArray2=new ui,this.programConfigurations=new Hi(Ro,t.layers,t.zoom),this.segments=new Si,this.segments2=new Si,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};da.prototype.populate=function(t,e){this.features=[],this.hasPattern=ha("fill",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,u=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new kr(this.zoom),o)){var s=$i(o),l={sourceLayerIndex:u,index:a,geometry:s,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(pa("fill",this.layers,l,this.zoom,e)):this.addFeature(l,s,a,{}),e.featureIndex.insert(o,s,a,u,this.index)}}},da.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},da.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,e)}},da.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},da.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},da.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ro),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},da.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},da.prototype.addFeature=function(t,e,n,r){for(var i=0,o=ca(e,500);i<o.length;i+=1){for(var a=o[i],u=0,s=0,l=a;s<l.length;s+=1)u+=l[s].length;for(var c=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),f=c.vertexLength,h=[],p=[],d=0,v=a;d<v.length;d+=1){var m=v[d];if(0!==m.length){m!==a[0]&&p.push(h.length/2);var y=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),g=y.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(g+m.length-1,g),h.push(m[0].x),h.push(m[0].y);for(var b=1;b<m.length;b++)this.layoutVertexArray.emplaceBack(m[b].x,m[b].y),this.indexArray2.emplaceBack(g+b-1,g+b),h.push(m[b].x),h.push(m[b].y);y.vertexLength+=m.length,y.primitiveLength+=m.length}}for(var _=Io(h,p),x=0;x<_.length;x+=3)this.indexArray.emplaceBack(f+_[x],f+_[x+1],f+_[x+2]);c.vertexLength+=u,c.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r)},ar("FillBucket",da,{omit:["layers","features"]});var va={paint:new Fr({"fill-antialias":new Dr(vt.paint_fill["fill-antialias"]),"fill-opacity":new Pr(vt.paint_fill["fill-opacity"]),"fill-color":new Pr(vt.paint_fill["fill-color"]),"fill-outline-color":new Pr(vt.paint_fill["fill-outline-color"]),"fill-translate":new Dr(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new Dr(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new zr(vt.paint_fill["fill-pattern"])})},ma=function(t){function e(e){t.call(this,e,va)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new da(t)},e.prototype.queryRadius=function(){return fo(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return eo(ho(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e}(Lr),ya=qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ga=ya.members,ba=(ya.size,ya.alignment,Math.pow(2,13));function _a(t,e,n,r,i,o,a,u){t.emplaceBack(e,n,2*Math.floor(r*ba)+a,i*ba*2,o*ba*2,Math.round(u))}var xa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Gr,this.indexArray=new ai,this.programConfigurations=new Hi(ga,t.layers,t.zoom),this.segments=new Si,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function wa(t,e){return t.x===e.x&&(t.x<0||t.x>Zi)||t.y===e.y&&(t.y<0||t.y>Zi)}function ka(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>Zi})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>Zi})}xa.prototype.populate=function(t,e){this.features=[],this.hasPattern=ha("fill-extrusion",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,u=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new kr(this.zoom),o)){var s=$i(o),l={sourceLayerIndex:u,index:a,geometry:s,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(pa("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,s,a,{}),e.featureIndex.insert(o,s,a,u,this.index,!0)}}},xa.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,e)}},xa.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},xa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},xa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ga),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},xa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},xa.prototype.addFeature=function(t,e,n,r){for(var i=0,o=ca(e,500);i<o.length;i+=1){for(var a=o[i],u=0,s=0,l=a;s<l.length;s+=1)u+=l[s].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),f=0,h=a;f<h.length;f+=1){var p=h[f];if(0!==p.length&&!ka(p))for(var d=0,v=0;v<p.length;v++){var m=p[v];if(v>=1){var y=p[v-1];if(!wa(m,y)){c.vertexLength+4>Si.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var g=m.sub(y)._perp()._unit(),b=y.dist(m);d+b>32768&&(d=0),_a(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,0,d),_a(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,1,d),d+=b,_a(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,0,d),_a(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,1,d);var _=c.vertexLength;this.indexArray.emplaceBack(_,_+2,_+1),this.indexArray.emplaceBack(_+1,_+2,_+3),c.vertexLength+=4,c.primitiveLength+=2}}}}c.vertexLength+u>Si.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray));for(var x=[],w=[],k=c.vertexLength,E=0,S=a;E<S.length;E+=1){var O=S[E];if(0!==O.length){O!==a[0]&&w.push(x.length/2);for(var A=0;A<O.length;A++){var M=O[A];_a(this.layoutVertexArray,M.x,M.y,0,0,1,1,0),x.push(M.x),x.push(M.y)}}}for(var C=Io(x,w),T=0;T<C.length;T+=3)this.indexArray.emplaceBack(k+C[T],k+C[T+2],k+C[T+1]);c.primitiveLength+=C.length/3,c.vertexLength+=u}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r)},ar("FillExtrusionBucket",xa,{omit:["layers","features"]});var Ea={paint:new Fr({"fill-extrusion-opacity":new Dr(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Pr(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Dr(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Dr(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new zr(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Pr(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Pr(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Dr(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Sa=function(t){function e(e){t.call(this,e,Ea)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new xa(t)},e.prototype.queryRadius=function(){return fo(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,a,u,s){var l=ho(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,u),c=this.paint.get("fill-extrusion-height").evaluate(e,n),f=this.paint.get("fill-extrusion-base").evaluate(e,n),h=function(t,e,n,r){for(var o=[],a=0,u=t;a<u.length;a+=1){var s=u[a],l=[s.x,s.y,0,1];bo(l,l,e),o.push(new i(l[0]/l[3],l[1]/l[3]))}return o}(l,s),p=function(t,e,n,r){for(var o=[],a=[],u=r[8]*e,s=r[9]*e,l=r[10]*e,c=r[11]*e,f=r[8]*n,h=r[9]*n,p=r[10]*n,d=r[11]*n,v=0,m=t;v<m.length;v+=1){for(var y=[],g=[],b=0,_=m[v];b<_.length;b+=1){var x=_[b],w=x.x,k=x.y,E=r[0]*w+r[4]*k+r[12],S=r[1]*w+r[5]*k+r[13],O=r[2]*w+r[6]*k+r[14],A=r[3]*w+r[7]*k+r[15],M=O+l,C=A+c,T=E+f,j=S+h,D=O+p,P=A+d,z=new i((E+u)/C,(S+s)/C);z.z=M/C,y.push(z);var R=new i(T/P,j/P);R.z=D/P,g.push(R)}o.push(y),a.push(g)}return[o,a]}(r,f,c,s);return function(t,e,n){var r=1/0;eo(n,e)&&(r=Aa(n,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],u=0;u<o.length-1;u++){var s=o[u],l=o[u+1],c=a[u],f=[s,l,a[u+1],c,s];Qi(n,f)&&(r=Math.min(r,Aa(n,f)))}return r!==1/0&&r}(p[0],p[1],h)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(Lr);function Oa(t,e){return t.x*e.x+t.y*e.y}function Aa(t,e){if(1===t.length){var n=e[0],r=e[1],i=e[3],o=t[0],a=r.sub(n),u=i.sub(n),s=o.sub(n),l=Oa(a,a),c=Oa(a,u),f=Oa(u,u),h=Oa(s,a),p=Oa(s,u),d=l*f-c*c,v=(f*h-c*p)/d,m=(l*p-c*h)/d,y=1-v-m;return n.z*y+r.z*v+i.z*m}for(var g=1/0,b=0,_=e;b<_.length;b+=1){var x=_[b];g=Math.min(g,x.z)}return g}var Ma=qr([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Ca=Ma.members,Ta=(Ma.size,Ma.alignment,ja);function ja(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Da,this,e)}function Da(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Pa(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r+=((n=t[a]).x-e.x)*(e.y+n.y);return r}ja.types=["Unknown","Point","LineString","Polygon"],ja.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,o=0,a=0,u=0,s=[];t.pos<n;){if(o<=0){var l=t.readVarint();r=7&l,o=l>>3}if(o--,1===r||2===r)a+=t.readSVarint(),u+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new i(a,u));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},ja.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,u=-1/0,s=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>u&&(u=i),(o+=t.readSVarint())<s&&(s=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,s,u,l]},ja.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,u=this.extent*e,s=this.loadGeometry(),l=ja.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+u)/o;t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(r=0;r<s.length;r++)f[r]=s[r][0];c(s=f);break;case 2:for(r=0;r<s.length;r++)c(s[r]);break;case 3:for(s=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Pa(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(s),r=0;r<s.length;r++)for(i=0;i<s[r].length;i++)c(s[r][i])}1===s.length?s=s[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:s},properties:this.properties};return"id"in this&&(h.id=this.id),h};var za=Ra;function Ra(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Ia,this,e),this.length=this._features.length}function Ia(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function Fa(t,e,n){if(3===t){var r=new za(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}Ra.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Ta(this._pbf,e,this.extent,this._keys,this._values)};var La={VectorTile:function(t,e){this.layers=t.readFields(Fa,{},e)},VectorTileFeature:Ta,VectorTileLayer:za},Na=La.VectorTileFeature.types,Ba=63,Ua=Math.cos(Math.PI/180*37.5),qa=.5,Va=Math.pow(2,14)/qa;function Wa(t,e,n,r,i,o,a){t.emplaceBack(e.x,e.y,r?1:0,i?1:-1,Math.round(Ba*n.x)+128,Math.round(Ba*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*qa&63)<<2,a*qa>>6)}var Ha=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new Xr,this.indexArray=new ai,this.programConfigurations=new Hi(Ca,t.layers,t.zoom),this.segments=new Si,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Ga(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(Va-1)}Ha.prototype.populate=function(t,e){this.features=[],this.hasPattern=ha("line",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,u=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new kr(this.zoom),o)){var s=$i(o),l={sourceLayerIndex:u,index:a,geometry:s,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(pa("line",this.layers,l,this.zoom,e)):this.addFeature(l,s,a,{}),e.featureIndex.insert(o,s,a,u,this.index)}}},Ha.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Ha.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],o=i.geometry;this.addFeature(i,o,i.index,e)}},Ha.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ha.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ha.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ca),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ha.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ha.prototype.addFeature=function(t,e,n,r){for(var i=this.layers[0].layout,o=i.get("line-join").evaluate(t,{}),a=i.get("line-cap"),u=i.get("line-miter-limit"),s=i.get("line-round-limit"),l=0,c=e;l<c.length;l+=1){var f=c[l];this.addLine(f,t,o,a,u,s,n,r)}},Ha.prototype.addLine=function(t,e,n,r,i,o,a,u){var s=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(s={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var l="Polygon"===Na[e.type],c=t.length;c>=2&&t[c-1].equals(t[c-2]);)c--;for(var f=0;f<c-1&&t[f].equals(t[f+1]);)f++;if(!(c<(l?3:2))){s&&(s.tileTotal=function(t,e,n){for(var r,i,o=0,a=f;a<n-1;a++)r=t[a],i=t[a+1],o+=r.dist(i);return o}(t,0,c)),"bevel"===n&&(i=1.05);var h=Zi/(512*this.overscaling)*15,p=t[f],d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);this.distance=0;var v,m,y,g=r,b=l?"butt":r,_=!0,x=void 0,w=void 0,k=void 0,E=void 0;this.e1=this.e2=this.e3=-1,l&&(v=t[c-2],E=p.sub(v)._unit()._perp());for(var S=f;S<c;S++)if(!(w=l&&S===c-1?t[f+1]:t[S+1])||!t[S].equals(w)){E&&(k=E),v&&(x=v),v=t[S],E=w?w.sub(v)._unit()._perp():k;var O=(k=k||E).add(E);0===O.x&&0===O.y||O._unit();var A=O.x*E.x+O.y*E.y,M=0!==A?1/A:1/0,C=A<Ua&&x&&w;if(C&&S>f){var T=v.dist(x);if(T>2*h){var j=v.sub(v.sub(x)._mult(h/T)._round());this.distance+=j.dist(x),this.addCurrentVertex(j,this.distance,k.mult(1),0,0,!1,d,s),x=j}}var D=x&&w,P=D?n:w?g:b;if(D&&"round"===P&&(M<o?P="miter":M<=2&&(P="fakeround")),"miter"===P&&M>i&&(P="bevel"),"bevel"===P&&(M>2&&(P="flipbevel"),M<i&&(P="miter")),x&&(this.distance+=v.dist(x)),"miter"===P)O._mult(M),this.addCurrentVertex(v,this.distance,O,0,0,!1,d,s);else if("flipbevel"===P){if(M>100)O=E.clone().mult(-1);else{var z=k.x*E.y-k.y*E.x>0?-1:1,R=M*k.add(E).mag()/k.sub(E).mag();O._perp()._mult(R*z)}this.addCurrentVertex(v,this.distance,O,0,0,!1,d,s),this.addCurrentVertex(v,this.distance,O.mult(-1),0,0,!1,d,s)}else if("bevel"===P||"fakeround"===P){var I=k.x*E.y-k.y*E.x>0,F=-Math.sqrt(M*M-1);if(I?(y=0,m=F):(m=0,y=F),_||this.addCurrentVertex(v,this.distance,k,m,y,!1,d,s),"fakeround"===P){for(var L=Math.floor(8*(.5-(A-.5))),N=void 0,B=0;B<L;B++)N=E.mult((B+1)/(L+1))._add(k)._unit(),this.addPieSliceVertex(v,this.distance,N,I,d,s);this.addPieSliceVertex(v,this.distance,O,I,d,s);for(var U=L-1;U>=0;U--)N=k.mult((U+1)/(L+1))._add(E)._unit(),this.addPieSliceVertex(v,this.distance,N,I,d,s)}w&&this.addCurrentVertex(v,this.distance,E,-m,-y,!1,d,s)}else"butt"===P?(_||this.addCurrentVertex(v,this.distance,k,0,0,!1,d,s),w&&this.addCurrentVertex(v,this.distance,E,0,0,!1,d,s)):"square"===P?(_||(this.addCurrentVertex(v,this.distance,k,1,1,!1,d,s),this.e1=this.e2=-1),w&&this.addCurrentVertex(v,this.distance,E,-1,-1,!1,d,s)):"round"===P&&(_||(this.addCurrentVertex(v,this.distance,k,0,0,!1,d,s),this.addCurrentVertex(v,this.distance,k,1,1,!0,d,s),this.e1=this.e2=-1),w&&(this.addCurrentVertex(v,this.distance,E,-1,-1,!0,d,s),this.addCurrentVertex(v,this.distance,E,0,0,!1,d,s)));if(C&&S<c-1){var q=v.dist(w);if(q>2*h){var V=v.add(w.sub(v)._mult(h/q)._round());this.distance+=V.dist(v),this.addCurrentVertex(V,this.distance,E.mult(1),0,0,!1,d,s),v=V}}_=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,u)}},Ha.prototype.addCurrentVertex=function(t,e,n,r,i,o,a,u){var s,l=this.layoutVertexArray,c=this.indexArray;u&&(e=Ga(e,u)),s=n.clone(),r&&s._sub(n.perp()._mult(r)),Wa(l,t,s,o,!1,r,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,s=n.mult(-1),i&&s._sub(n.perp()._mult(i)),Wa(l,t,s,o,!0,-i,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>Va/2&&!u&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,i,o,a))},Ha.prototype.addPieSliceVertex=function(t,e,n,r,i,o){n=n.mult(r?-1:1);var a=this.layoutVertexArray,u=this.indexArray;o&&(e=Ga(e,o)),Wa(a,t,n,!1,r,0,e),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(u.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},ar("LineBucket",Ha,{omit:["layers","features"]});var Xa=new Fr({"line-cap":new Dr(vt.layout_line["line-cap"]),"line-join":new Pr(vt.layout_line["line-join"]),"line-miter-limit":new Dr(vt.layout_line["line-miter-limit"]),"line-round-limit":new Dr(vt.layout_line["line-round-limit"])}),Za={paint:new Fr({"line-opacity":new Pr(vt.paint_line["line-opacity"]),"line-color":new Pr(vt.paint_line["line-color"]),"line-translate":new Dr(vt.paint_line["line-translate"]),"line-translate-anchor":new Dr(vt.paint_line["line-translate-anchor"]),"line-width":new Pr(vt.paint_line["line-width"]),"line-gap-width":new Pr(vt.paint_line["line-gap-width"]),"line-offset":new Pr(vt.paint_line["line-offset"]),"line-blur":new Pr(vt.paint_line["line-blur"]),"line-dasharray":new Rr(vt.paint_line["line-dasharray"]),"line-pattern":new zr(vt.paint_line["line-pattern"]),"line-gradient":new Ir(vt.paint_line["line-gradient"])}),layout:Xa},Ya=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new kr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=f({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}(Pr))(Za.paint.properties["line-width"].specification);Ya.useIntegerZoom=!0;var $a=function(t){function e(e){t.call(this,e,Za)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=To(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=Ya.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Ha(t)},e.prototype.queryRadius=function(t){var e=t,n=Ka(co("line-width",this,e),co("line-gap-width",this,e)),r=co("line-offset",this,e);return n/2+Math.abs(r)+fo(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,a,u){var s=ho(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,u),l=u/2*Ka(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(r=function(t,e){for(var n=[],r=new i(0,0),o=0;o<t.length;o++){for(var a=t[o],u=[],s=0;s<a.length;s++){var l=a[s-1],c=a[s],f=a[s+1],h=0===s?r:c.sub(l)._unit()._perp(),p=s===a.length-1?r:f.sub(c)._unit()._perp(),d=h._add(p)._unit(),v=d.x*p.x+d.y*p.y;d._mult(1/v),u.push(d._mult(e)._add(c))}n.push(u)}return n}(r,c*u)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var o=0;o<i.length;o++)if(so(t,i[o]))return!0;if(no(t,i,n))return!0}return!1}(s,r,l)},e}(Lr);function Ka(t,e){return e>0?e+2*t:t}var Ja=qr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),Qa=qr([{name:"a_projected_pos",components:3,type:"Float32"}],4),tu=(qr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),qr([{name:"a_placed",components:2,type:"Uint8"}],4)),eu=(qr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),nu=qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function ru(t,e,n){return t.sections.forEach(function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),wr.applyArabicShaping&&(t=wr.applyArabicShaping(t)),t}(t.text,e,n)}),t}qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),qr([{type:"Float32",name:"offsetX"}]),qr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var iu={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},ou=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);function au(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new kr(t+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=t;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate(new kr(t+1)),zoomRange:a,sizeRange:{min:n.evaluate(new kr(a.min)),max:n.evaluate(new kr(a.max))},propertyValue:e.value}}ar("Anchor",ou);var uu=La.VectorTileFeature.types,su=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lu(t,e,n,r,i,o,a,u){t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,u?u[0]:0,u?u[1]:0)}function cu(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}var fu=function(t){this.layoutVertexArray=new Yr,this.indexArray=new ai,this.programConfigurations=t,this.segments=new Si,this.dynamicLayoutVertexArray=new $r,this.opacityVertexArray=new Kr,this.placedSymbolArray=new di};fu.prototype.upload=function(t,e,n,r){n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ja.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Qa.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,su,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t)},fu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ar("SymbolBuffers",fu);var hu=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Si,this.collisionVertexArray=new ti};hu.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,tu.members,!0)},hu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ar("CollisionBuffers",hu);var pu=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=au(this.zoom,e["text-size"]),this.iconSizeData=au(this.zoom,e["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1);var o="viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey;this.sortFeaturesByY=o&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};pu.prototype.createArrays=function(){this.text=new fu(new Hi(Ja.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new fu(new Hi(Ja.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new hu(Qr,eu.members,ui),this.collisionCircle=new hu(Qr,nu.members,ai),this.glyphOffsetArray=new gi,this.lineVertexArray=new _i,this.symbolInstances=new mi},pu.prototype.calculateGlyphDependencies=function(t,e,n,r){for(var i=0;i<t.length;i++)if(e[t.charCodeAt(i)]=!0,n&&r){var o=iu[t.charAt(i)];o&&(e[o.charCodeAt(0)]=!0)}},pu.prototype.populate=function(t,e){var n=this.layers[0],r=n.layout,i=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),u=("constant"!==o.value.kind||o.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),s="constant"!==a.value.kind||a.value.value&&a.value.value.length>0,l=r.get("symbol-sort-key");if(this.features=[],u||s){for(var c=e.iconDependencies,f=e.glyphDependencies,h=new kr(this.zoom),p=0,d=t;p<d.length;p+=1){var v=d[p],m=v.feature,y=v.index,g=v.sourceLayerIndex;if(n._featureFilter(h,m)){var b=void 0;if(u){var _=n.getValueAndResolveTokens("text-field",m);b=ru(_ instanceof Bt?_:Bt.fromString(_),n,m)}var x=void 0;if(s&&(x=n.getValueAndResolveTokens("icon-image",m)),b||x){var w=this.sortFeaturesByKey?l.evaluate(m,{}):void 0,k={text:b,icon:x,index:y,sourceLayerIndex:g,geometry:$i(m),properties:m.properties,type:uu[m.type],sortKey:w};if(void 0!==m.id&&(k.id=m.id),this.features.push(k),x&&(c[x]=!0),b)for(var E=i.evaluate(m,{}).join(","),S="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),O=0,A=b.sections;O<A.length;O+=1){var M=A[O],C=hr(b.toString()),T=M.fontStack||E,j=f[T]=f[T]||{};this.calculateGlyphDependencies(M.text,j,S,C)}}}}"line"===r.get("symbol-placement")&&(this.features=function(t){var e={},n={},r=[],i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){var o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function u(t,n,i){var o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function s(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var l=0;l<t.length;l++){var c=t[l],f=c.geometry,h=c.text?c.text.toString():null;if(h){var p=s(h,f),d=s(h,f,!0);if(p in n&&d in e&&n[p]!==e[d]){var v=u(p,d,f),m=a(p,d,r[v].geometry);delete e[p],delete n[d],n[s(h,r[m].geometry,!0)]=m,r[v].geometry=null}else p in n?a(p,d,f):d in e?u(p,d,f):(o(l),e[p]=i-1,n[d]=i-1)}else o(l)}return r.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},pu.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},pu.prototype.isEmpty=function(){return 0===this.symbolInstances.length},pu.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},pu.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},pu.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},pu.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var u=t.segment||0;u>=0;u--)o[u]={x:e[u].x,y:e[u].y,tileUnitDistanceFromAnchor:i},u>0&&(i+=e[u-1].dist(e[u]));for(var s=0;s<e.length;s++){var l=o[s];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},pu.prototype.addSymbols=function(t,e,n,r,i,o,a,u,s,l){for(var c=t.indexArray,f=t.layoutVertexArray,h=t.dynamicLayoutVertexArray,p=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,o.sortKey),d=this.glyphOffsetArray.length,v=p.vertexLength,m=0,y=e;m<y.length;m+=1){var g=y[m],b=g.tl,_=g.tr,x=g.bl,w=g.br,k=g.tex,E=p.vertexLength,S=g.glyphOffset[1];lu(f,u.x,u.y,b.x,S+b.y,k.x,k.y,n),lu(f,u.x,u.y,_.x,S+_.y,k.x+k.w,k.y,n),lu(f,u.x,u.y,x.x,S+x.y,k.x,k.y+k.h,n),lu(f,u.x,u.y,w.x,S+w.y,k.x+k.w,k.y+k.h,n),cu(h,u,0),c.emplaceBack(E,E+1,E+2),c.emplaceBack(E+1,E+2,E+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(g.glyphOffset[0])}t.placedSymbolArray.emplaceBack(u.x,u.y,d,this.glyphOffsetArray.length-d,v,s,l,u.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index,{})},pu.prototype._addCollisionDebugVertex=function(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},pu.prototype.addCollisionDebugVertices=function(t,e,n,r,o,a,u,s){var l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=l.vertexLength,f=o.layoutVertexArray,h=o.collisionVertexArray,p=u.anchorX,d=u.anchorY;if(this._addCollisionDebugVertex(f,h,a,p,d,new i(t,e)),this._addCollisionDebugVertex(f,h,a,p,d,new i(n,e)),this._addCollisionDebugVertex(f,h,a,p,d,new i(n,r)),this._addCollisionDebugVertex(f,h,a,p,d,new i(t,r)),l.vertexLength+=4,s){var v=o.indexArray;v.emplaceBack(c,c+1,c+2),v.emplaceBack(c,c+2,c+3),l.primitiveLength+=2}else{var m=o.indexArray;m.emplaceBack(c,c+1),m.emplaceBack(c+1,c+2),m.emplaceBack(c+2,c+3),m.emplaceBack(c+3,c),l.primitiveLength+=4}},pu.prototype.addDebugCollisionBoxes=function(t,e,n){for(var r=t;r<e;r++){var i=this.collisionBoxArray.get(r),o=i.x1,a=i.y1,u=i.x2,s=i.y2,l=i.radius>0;this.addCollisionDebugVertices(o,a,u,s,l?this.collisionCircle:this.collisionBox,i.anchorPoint,n,l)}},pu.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e)}},pu.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,r,i){for(var o={},a=e;a<n;a++){var u=t.get(a);if(0===u.radius){o.textBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},o.textFeatureIndex=u.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=u.featureIndex),o.textCircles.push(u.anchorPointX,u.anchorPointY,u.radius,u.signedDistanceFromAnchor,1)}for(var s=r;s<i;s++){var l=t.get(s);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},o.iconFeatureIndex=l.featureIndex;break}}return o},pu.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex))}},pu.prototype.hasTextData=function(){return this.text.segments.get().length>0},pu.prototype.hasIconData=function(){return this.icon.segments.get().length>0},pu.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},pu.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},pu.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),n=e.vertexStartIndex+4*e.numGlyphs,r=e.vertexStartIndex;r<n;r+=4)this.text.indexArray.emplaceBack(r,r+1,r+2),this.text.indexArray.emplaceBack(r+1,r+2,r+3)},pu.prototype.sortFeatures=function(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var e=[],n=0;n<this.symbolInstances.length;n++)e.push(n);for(var r=Math.sin(t),i=Math.cos(t),o=[],a=[],u=0;u<this.symbolInstances.length;u++){var s=this.symbolInstances.get(u);o.push(0|Math.round(r*s.anchorX+i*s.anchorY)),a.push(s.featureIndex)}e.sort(function(t,e){return o[t]-o[e]||a[e]-a[t]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var l=0,c=e;l<c.length;l+=1){var f=c[l],h=this.symbolInstances.get(f);this.featureSortOrder.push(h.featureIndex),h.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.horizontalPlacedTextSymbolIndex),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(h.verticalPlacedTextSymbolIndex);var p=this.icon.placedSymbolArray.get(f);if(p.numGlyphs){var d=p.vertexStartIndex;this.icon.indexArray.emplaceBack(d,d+1,d+2),this.icon.indexArray.emplaceBack(d+1,d+2,d+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ar("SymbolBucket",pu,{omit:["layers","collisionBoxArray","features","compareText"]}),pu.MAX_GLYPHS=65535,pu.addDynamicAttributes=cu;var du=new Fr({"symbol-placement":new Dr(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new Dr(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Dr(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Pr(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Dr(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Dr(vt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Dr(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Dr(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Dr(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Pr(vt.layout_symbol["icon-size"]),"icon-text-fit":new Dr(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Dr(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Pr(vt.layout_symbol["icon-image"]),"icon-rotate":new Pr(vt.layout_symbol["icon-rotate"]),"icon-padding":new Dr(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new Dr(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new Pr(vt.layout_symbol["icon-offset"]),"icon-anchor":new Pr(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Dr(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Dr(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Dr(vt.layout_symbol["text-rotation-alignment"]),"text-field":new Pr(vt.layout_symbol["text-field"]),"text-font":new Pr(vt.layout_symbol["text-font"]),"text-size":new Pr(vt.layout_symbol["text-size"]),"text-max-width":new Pr(vt.layout_symbol["text-max-width"]),"text-line-height":new Dr(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new Pr(vt.layout_symbol["text-letter-spacing"]),"text-justify":new Pr(vt.layout_symbol["text-justify"]),"text-anchor":new Pr(vt.layout_symbol["text-anchor"]),"text-max-angle":new Dr(vt.layout_symbol["text-max-angle"]),"text-rotate":new Pr(vt.layout_symbol["text-rotate"]),"text-padding":new Dr(vt.layout_symbol["text-padding"]),"text-keep-upright":new Dr(vt.layout_symbol["text-keep-upright"]),"text-transform":new Pr(vt.layout_symbol["text-transform"]),"text-offset":new Pr(vt.layout_symbol["text-offset"]),"text-allow-overlap":new Dr(vt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Dr(vt.layout_symbol["text-ignore-placement"]),"text-optional":new Dr(vt.layout_symbol["text-optional"])}),vu={paint:new Fr({"icon-opacity":new Pr(vt.paint_symbol["icon-opacity"]),"icon-color":new Pr(vt.paint_symbol["icon-color"]),"icon-halo-color":new Pr(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Pr(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Pr(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new Dr(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Dr(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Pr(vt.paint_symbol["text-opacity"]),"text-color":new Pr(vt.paint_symbol["text-color"]),"text-halo-color":new Pr(vt.paint_symbol["text-halo-color"]),"text-halo-width":new Pr(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new Pr(vt.paint_symbol["text-halo-blur"]),"text-translate":new Dr(vt.paint_symbol["text-translate"]),"text-translate-anchor":new Dr(vt.paint_symbol["text-translate-anchor"])}),layout:du},mu=function(t){function e(e){t.call(this,e,vu)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var n,r=this.layout.get(t).evaluate(e,{}),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||dn(i.value)?r:(n=e.properties,r.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""}))},e.prototype.createBucket=function(t){return new pu(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(Lr),yu={paint:new Fr({"background-color":new Dr(vt.paint_background["background-color"]),"background-pattern":new Rr(vt.paint_background["background-pattern"]),"background-opacity":new Dr(vt.paint_background["background-opacity"])})},gu=function(t){function e(e){t.call(this,e,yu)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Lr),bu={paint:new Fr({"raster-opacity":new Dr(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Dr(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Dr(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Dr(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new Dr(vt.paint_raster["raster-saturation"]),"raster-contrast":new Dr(vt.paint_raster["raster-contrast"]),"raster-resampling":new Dr(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new Dr(vt.paint_raster["raster-fade-duration"])})},_u=function(t){function e(e){t.call(this,e,bu)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Lr),xu=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender||"3d"===this.implementation.renderingMode},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t)},e}(Lr),wu={circle:xo,heatmap:jo,hillshade:Po,fill:ma,"fill-extrusion":Sa,line:$a,symbol:mu,background:gu,raster:_u};function ku(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort(function(t,e){return e.h-t.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],u=0,s=0,l=0,c=t;l<c.length;l+=1)for(var f=c[l],h=a.length-1;h>=0;h--){var p=a[h];if(!(f.w>p.w||f.h>p.h)){if(f.x=p.x,f.y=p.y,s=Math.max(s,f.y+f.h),u=Math.max(u,f.x+f.w),f.w===p.w&&f.h===p.h){var d=a.pop();h<a.length&&(a[h]=d)}else f.h===p.h?(p.x+=f.w,p.w-=f.w):f.w===p.w?(p.y+=f.h,p.h-=f.h):(a.push({x:p.x+f.w,y:p.y,w:p.w-f.w,h:f.h}),p.y+=f.h,p.h-=f.h);break}}return{w:u,h:s,fill:e/(u*s)||0}}var Eu=function(t,e){var n=e.pixelRatio;this.paddedRect=t,this.pixelRatio=n},Su={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Su.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Su.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Su.tlbr.get=function(){return this.tl.concat(this.br)},Su.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Eu.prototype,Su);var Ou=function(t,e){var n={},r={},i=[];for(var o in t){var a=t[o],u={x:0,y:0,w:a.data.width+2,h:a.data.height+2};i.push(u),n[o]=new Eu(u,a)}for(var s in e){var l=e[s],c={x:0,y:0,w:l.data.width+2,h:l.data.height+2};i.push(c),r[s]=new Eu(c,l)}var f=ku(i),h=f.w,p=f.h,d=new Mo({width:h||1,height:p||1});for(var v in t){var m=t[v],y=n[v].paddedRect;Mo.copy(m.data,d,{x:0,y:0},{x:y.x+1,y:y.y+1},m.data)}for(var g in e){var b=e[g],_=r[g].paddedRect,x=_.x+1,w=_.y+1,k=b.data.width,E=b.data.height;Mo.copy(b.data,d,{x:0,y:0},{x:x,y:w},b.data),Mo.copy(b.data,d,{x:0,y:E-1},{x:x,y:w-1},{width:k,height:1}),Mo.copy(b.data,d,{x:0,y:0},{x:x,y:w+E},{width:k,height:1}),Mo.copy(b.data,d,{x:k-1,y:0},{x:x-1,y:w},{width:1,height:E}),Mo.copy(b.data,d,{x:0,y:0},{x:x+k,y:w},{width:1,height:E})}this.image=d,this.iconPositions=n,this.patternPositions=r};ar("ImagePosition",Eu),ar("ImageAtlas",Ou);var Au=self.HTMLImageElement,Mu=self.HTMLCanvasElement,Cu=self.HTMLVideoElement,Tu=self.ImageData,ju=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};ju.prototype.update=function(t,e){var n=t.width,r=t.height,i=!this.size||this.size[0]!==n||this.size[1]!==r,o=this.context,a=o.gl;this.useMipmap=Boolean(e&&e.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!e||!1!==e.premultiply)),i?(this.size=[n,r],t instanceof Au||t instanceof Mu||t instanceof Cu||t instanceof Tu?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,n,r,0,this.format,a.UNSIGNED_BYTE,t.data)):t instanceof Au||t instanceof Mu||t instanceof Cu||t instanceof Tu?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},ju.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},ju.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ju.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Du=function(t,e,n,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,l=s>>1,c=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=u;c>0;o=256*o+t[e+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},Pu=function(t,e,n,r,i,o){var a,u,s,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=c?(u=0,a=c):a+f>=1?(u=(e*s-1)*Math.pow(2,i),a+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&u,p+=d,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*v},zu=Ru;function Ru(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function Iu(t){return t.type===Ru.Bytes?t.readVarint()+t.pos:t.pos+1}function Fu(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Lu(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function Nu(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Bu(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Uu(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function qu(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Vu(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Wu(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Hu(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Gu(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Xu(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Zu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Yu(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function $u(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Ru.Varint=0,Ru.Fixed64=1,Ru.Bytes=2,Ru.Fixed32=5,Ru.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Zu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=$u(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Zu(this.buf,this.pos)+4294967296*Zu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Zu(this.buf,this.pos)+4294967296*$u(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Du(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Du(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Fu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Fu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Fu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Fu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Fu(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Fu(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var r="",i=e;i<n;){var o,a,u,s=t[i],l=null,c=s>239?4:s>223?3:s>191?2:1;if(i+c>n)break;1===c?s<128&&(l=s):2===c?128==(192&(o=t[i+1]))&&(l=(31&s)<<6|63&o)<=127&&(l=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((l=(15&s)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[i+1],a=t[i+2],u=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&u)&&((l=(15&s)<<18|(63&o)<<12|(63&a)<<6|63&u)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=Iu(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=Iu(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=Iu(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=Iu(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=Iu(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=Iu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=Iu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=Iu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=Iu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Ru.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ru.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ru.Fixed32)this.pos+=4;else{if(e!==Ru.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Yu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Yu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Yu(this.buf,-1&t,this.pos),Yu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Yu(this.buf,-1&t,this.pos),Yu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Lu(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Pu(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Pu(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&Lu(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Ru.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,Nu,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Bu,e)},writePackedBoolean:function(t,e){this.writeMessage(t,Vu,e)},writePackedFloat:function(t,e){this.writeMessage(t,Uu,e)},writePackedDouble:function(t,e){this.writeMessage(t,qu,e)},writePackedFixed32:function(t,e){this.writeMessage(t,Wu,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,Hu,e)},writePackedFixed64:function(t,e){this.writeMessage(t,Gu,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,Xu,e)},writeBytesField:function(t,e){this.writeTag(t,Ru.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Ru.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Ru.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Ru.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Ru.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Ru.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Ru.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Ru.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Ru.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Ru.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Ku=3;function Ju(t,e,n){1===t&&n.readMessage(Qu,e)}function Qu(t,e,n){if(3===t){var r=n.readMessage(ts,{}),i=r.id,o=r.bitmap,a=r.width,u=r.height,s=r.left,l=r.top,c=r.advance;e.push({id:i,bitmap:new Ao({width:a+2*Ku,height:u+2*Ku},o),metrics:{width:a,height:u,left:s,top:l,advance:c}})}}function ts(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}var es=Ku,ns=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,m(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function rs(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}ns.prototype.send=function(t,e,n,r){var i=this,o=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[o]=n);var a=[];if(this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(o),data:sr(e,a)},a),n)return{cancel:function(){return i.target.postMessage({targetMapId:r,sourceMapId:i.mapId,type:"<cancel>",id:String(o)})}}},ns.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(t,e){delete n.callbacks[i];var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?sr(t):null,data:sr(e,r)},r)};if("<response>"===r.type||"<cancel>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&r.error?e(lr(r.error)):e&&e(null,lr(r.data));else if(void 0!==r.id&&this.parent[r.type]){this.callbacks[r.id]=null;var a=this.parent[r.type](r.sourceMapId,lr(r.data),o);a&&null===this.callbacks[r.id]&&(this.callbacks[r.id]=a)}else if(void 0!==r.id&&this.parent.getWorkerSource){var u=r.type.split("."),s=lr(r.data);this.parent.getWorkerSource(r.sourceMapId,u[0],s.source)[u[1]](s,o)}else this.parent[r.type](lr(r.data))}},ns.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var is=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};is.prototype.setNorthEast=function(t){return this._ne=t instanceof os?new os(t.lng,t.lat):os.convert(t),this},is.prototype.setSouthWest=function(t){return this._sw=t instanceof os?new os(t.lng,t.lat):os.convert(t),this},is.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof os)e=t,n=t;else{if(!(t instanceof is))return Array.isArray(t)?t.every(Array.isArray)?this.extend(is.convert(t)):this.extend(os.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new os(e.lng,e.lat),this._ne=new os(n.lng,n.lat)),this},is.prototype.getCenter=function(){return new os((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},is.prototype.getSouthWest=function(){return this._sw},is.prototype.getNorthEast=function(){return this._ne},is.prototype.getNorthWest=function(){return new os(this.getWest(),this.getNorth())},is.prototype.getSouthEast=function(){return new os(this.getEast(),this.getSouth())},is.prototype.getWest=function(){return this._sw.lng},is.prototype.getSouth=function(){return this._sw.lat},is.prototype.getEast=function(){return this._ne.lng},is.prototype.getNorth=function(){return this._ne.lat},is.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},is.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},is.prototype.isEmpty=function(){return!(this._sw&&this._ne)},is.convert=function(t){return!t||t instanceof is?t:new is(t)};var os=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function as(t){return 2*Math.PI*6378137*Math.cos(t*Math.PI/180)}function us(t){return(180+t)/360}function ss(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function ls(t,e){return t/as(e)}function cs(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}os.prototype.wrap=function(){return new os(c(this.lng,-180,180),this.lat)},os.prototype.toArray=function(){return[this.lng,this.lat]},os.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},os.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new is(new os(this.lng-n,this.lat-e),new os(this.lng+n,this.lat+e))},os.convert=function(t){if(t instanceof os)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new os(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new os(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var fs=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};fs.fromLngLat=function(t,e){void 0===e&&(e=0);var n=os.convert(t);return new fs(us(n.lng),ss(n.lat),ls(e,n.lat))},fs.prototype.toLngLat=function(){return new os(360*this.x-180,cs(this.y))},fs.prototype.toAltitude=function(){return this.z*as(cs(this.y))};var hs=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=vs(0,t,e,n)};hs.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},hs.prototype.url=function(t,e){var n,r,i,o,a,u=(n=this.x,r=this.y,i=this.z,o=rs(256*n,256*(r=Math.pow(2,i)-r-1),i),a=rs(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),s=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",s).replace("{bbox-epsg-3857}",u)},hs.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i((t.x*e-this.x)*Zi,(t.y*e-this.y)*Zi)};var ps=function(t,e){this.wrap=t,this.canonical=e,this.key=vs(t,e.z,e.x,e.y)},ds=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new hs(n,+r,+i),this.key=vs(e,t,r,i)};function vs(t,e,n,r){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*r+n)+e}ds.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},ds.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new ds(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ds(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},ds.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},ds.prototype.children=function(t){if(this.overscaledZ>=t)return[new ds(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new ds(e,this.wrap,e,n,r),new ds(e,this.wrap,e,n+1,r),new ds(e,this.wrap,e,n,r+1),new ds(e,this.wrap,e,n+1,r+1)]},ds.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},ds.prototype.wrapped=function(){return new ds(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ds.prototype.unwrapTo=function(t){return new ds(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},ds.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ds.prototype.toUnwrapped=function(){return new ps(this.wrap,this.canonical)},ds.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ds.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new fs(t.x-this.wrap,t.y))},ar("CanonicalTileID",hs),ar("OverscaledTileID",ds,{omit:["posMatrix"]});var ms=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return w('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var r=this.dim=e.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var i=e.data,o="terrarium"===n?this._unpackTerrarium:this._unpackMapbox,a=0;a<r;a++)for(var u=0;u<r;u++){var s=4*(a*r+u);this.set(u,a,o(i[s],i[s+1],i[s+2]))}for(var l=0;l<r;l++)this.set(-1,l,this.get(0,l)),this.set(r,l,this.get(r-1,l)),this.set(l,-1,this.get(l,0)),this.set(l,r,this.get(l,r-1));this.set(-1,-1,this.get(0,0)),this.set(r,-1,this.get(r-1,0)),this.set(-1,r,this.get(0,r-1)),this.set(r,r,this.get(r-1,r-1))};ms.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},ms.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},ms.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},ms.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},ms.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},ms.prototype.getPixels=function(){return new Mo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ms.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var u=-e*this.dim,s=-n*this.dim,l=o;l<a;l++)for(var c=r;c<i;c++)this.set(c,l,t.get(c+u,l+s))},ar("DEMData",ms);var ys=qr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),gs=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};gs.prototype.encode=function(t){return this._stringToNumber[t]},gs.prototype.decode=function(t){return this._numberToString[t]};var bs=function(t,e,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},_s={geometry:{configurable:!0}};_s.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},_s.geometry.set=function(t){this._geometry=t},bs.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(bs.prototype,_s);var xs=function(){this.state={},this.stateChanges={},this.deletedStates={}};xs.prototype.updateState=function(t,e,n){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},f(this.stateChanges[t][r],n),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==r&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])n[o]||(this.deletedStates[t][r][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},xs.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},xs.prototype.getState=function(t,e){var n=String(e),r=this.state[t]||{},i=this.stateChanges[t]||{},o=f({},r[n],i[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var a=this.deletedStates[t][e];if(null===a)return{};for(var u in a)delete o[u]}return o},xs.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},xs.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),f(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var u={};if(null===this.deletedStates[a]){for(var s in this.state[a])u[s]={};this.state[a]={}}else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var c=0,h=Object.keys(this.deletedStates[a][l]);c<h.length;c+=1){var p=h[c];delete this.state[a][l][p]}u[l]=this.state[a][l]}n[a]=n[a]||{},f(n[a],u)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var d in t)t[d].setFeatureState(n,e)};var ws=function(t,e,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new er(Zi,16,0),this.grid3D=new er(Zi,16,0),this.featureIndexArray=n||new wi};function ks(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var u=a[o];e=Math.min(e,u.x),n=Math.min(n,u.y),r=Math.max(r,u.x),i=Math.max(i,u.y)}return{minX:e,minY:n,maxX:r,maxY:i}}function Es(t,e){return e-t}ws.prototype.insert=function(t,e,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var u=o?this.grid3D:this.grid,s=0;s<e.length;s++){for(var l=e[s],c=[1/0,1/0,-1/0,-1/0],f=0;f<l.length;f++){var h=l[f];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<Zi&&c[1]<Zi&&c[2]>=0&&c[3]>=0&&u.insert(a,c[0],c[1],c[2],c[3])}},ws.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new La.VectorTile(new zu(this.rawTileData)).layers,this.sourceLayerCoder=new gs(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ws.prototype.query=function(t,e,n){var r=this;this.loadVTLayers();for(var o=t.params||{},a=Zi/t.tileSize/t.scale,u=Cn(o.filter),s=t.queryGeometry,l=t.queryPadding*a,c=ks(s),f=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),h=ks(t.cameraQueryGeometry),p=0,d=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,function(e,n,r,o){return function(t,e,n,r,o){for(var a=0,u=t;a<u.length;a+=1){var s=u[a];if(e<=s.x&&n<=s.y&&r>=s.x&&o>=s.y)return!0}var l=[new i(e,n),new i(e,o),new i(r,o),new i(r,n)];if(t.length>2)for(var c=0,f=l;c<f.length;c+=1)if(so(t,f[c]))return!0;for(var h=0;h<t.length-1;h++)if(lo(t[h],t[h+1],l))return!0;return!1}(t.cameraQueryGeometry,e-l,n-l,r+l,o+l)});p<d.length;p+=1){var v=d[p];f.push(v)}f.sort(Es);for(var m,y={},g=function(i){var l=f[i];if(l!==m){m=l;var c=r.featureIndexArray.get(l),h=null;r.loadMatchingFeature(y,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,u,o.layers,e,function(e,i){h||(h=$i(e));var o={};return e.id&&(o=n.getState(i.sourceLayer||"_geojsonTileLayer",e.id)),i.queryIntersectsFeature(s,e,o,h,r.z,t.transform,a,t.pixelPosMatrix)})}},b=0;b<f.length;b++)g(b);return y},ws.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,u){var s=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,s)){var l=this.sourceLayerCoder.decode(n),c=this.vtLayers[l].feature(r);if(i(new kr(this.tileID.overscaledZ),c))for(var f=0;f<s.length;f++){var h=s[f];if(!(o&&o.indexOf(h)<0)){var p=a[h];if(p){var d=!u||u(c,p);if(d){var v=new bs(c,this.z,this.x,this.y);v.layer=p.serialize();var m=t[h];void 0===m&&(m=t[h]=[]),m.push({featureIndex:r,feature:v,intersectionZ:d})}}}}}},ws.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o){var a={};this.loadVTLayers();for(var u=Cn(r),s=0,l=t;s<l.length;s+=1){var c=l[s];this.loadMatchingFeature(a,e,n,c,u,i,o)}return a},ws.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},ar("FeatureIndex",ws,{omit:["rawTileData","sourceLayerCoder"]});var Ss=function(t,e){this.tileID=t,this.uid=p(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};Ss.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<j.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Ss.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ss.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=function(){var t=o[i],r=t.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(t){return r.filter(function(e){return e.id===t})[0]}));for(var a=0,u=r;a<u.length;a+=1){var s=u[a];n[s.id]=t}}},i=0,o=t;i<o.length;i+=1)r();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof pu){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(o).queryRadius(a))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new hi},Ss.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ss.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},Ss.prototype.getBucket=function(t){return this.buckets[t.id]},Ss.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ju(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ju(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Ss.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,u,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:r,scale:i,tileSize:this.tileSize,pixelPosMatrix:s,transform:a,params:o,queryPadding:this.queryPadding*u},t,e):{}},Ss.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),r=e?e.sourceLayer:"",i=n._geojsonTileLayer||n[r];if(i)for(var o=Cn(e&&e.filter),a=this.tileID.canonical,u=a.z,s=a.x,l=a.y,c={z:u,x:s,y:l},f=0;f<i.length;f++){var h=i.feature(f);if(o(new kr(this.tileID.overscaledZ),h)){var p=new bs(h,u,s,l);p.tile=c,t.push(p)}}}},Ss.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},Ss.prototype.setMask=function(t,e){if(!a(this.mask,t)&&(this.mask=t,this.clearMask(),!a(t,{0:!0}))){var n=new Hr,r=new ai;this.segments=new Si,this.segments.prepareSegment(0,n,r);for(var o=Object.keys(t),u=0;u<o.length;u++){var s=t[o[u]],l=Zi>>s.z,c=new i(s.x*l,s.y*l),f=new i(c.x+l,c.y+l),h=this.segments.prepareSegment(4,n,r);n.emplaceBack(c.x,c.y,c.x,c.y),n.emplaceBack(f.x,c.y,f.x,c.y),n.emplaceBack(c.x,f.y,c.x,f.y),n.emplaceBack(f.x,f.y,f.x,f.y);var p=h.vertexLength;r.emplaceBack(p,p+1,p+2),r.emplaceBack(p+1,p+2,p+3),h.vertexLength+=4,h.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(n,ys.members),this.maskedIndexBuffer=e.createIndexBuffer(r)}},Ss.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ss.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ss.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ss.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ss.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],u=t[o];a&&u&&0!==Object.keys(u).length&&(i.update(u,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(r).queryRadius(i))))}}},Ss.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ss.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now()},Ss.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ss.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=j.now()+t};var Os={horizontal:1,vertical:2,horizontalOnly:3},As=function(){this.text="",this.sectionIndex=[],this.sections=[]};As.fromFeature=function(t,e){for(var n=new As,r=0;r<t.sections.length;r++){var i=t.sections[r];n.sections.push({scale:i.scale||1,fontStack:i.fontStack||e}),n.text+=i.text;for(var o=0;o<i.text.length;o++)n.sectionIndex.push(r)}return n},As.prototype.length=function(){return this.text.length},As.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},As.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},As.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;r&&vr(r)&&!iu[t[n+1]]||i&&vr(i)&&!iu[t[n-1]]||!iu[t[n]]?e+=t[n]:e+=iu[t[n]]}return e}(this.text)},As.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Ms[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&Ms[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},As.prototype.substring=function(t,e){var n=new As;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},As.prototype.toString=function(){return this.text},As.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,n){return Math.max(e,t.sections[n].scale)},0)};var Ms={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Cs={};function Ts(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function js(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Ds(t,e,n,r,i,o){for(var a=null,u=Ts(e,n,i,o),s=0,l=r;s<l.length;s+=1){var c=l[s],f=Ts(e-c.x,n,i,o)+c.badness;f<=u&&(a=c,u=f)}return{index:t,x:e,priorBreak:a,badness:u}}function Ps(t,e,n,r){if(!n)return[];if(!t)return[];for(var i,o=[],a=function(t,e,n,r){for(var i=0,o=0;o<t.length();o++){var a=t.getSection(o),u=r[a.fontStack],s=u&&u[t.getCharCode(o)];s&&(i+=s.metrics.advance*a.scale+e)}return i/Math.max(1,Math.ceil(i/n))}(t,e,n,r),u=0,s=0;s<t.length();s++){var l=t.getSection(s),c=t.getCharCode(s),f=r[l.fontStack],h=f&&f[c];h&&!Ms[c]&&(u+=h.metrics.advance*l.scale+e),s<t.length()-1&&(Cs[c]||!((i=c)<11904)&&(fr["Bopomofo Extended"](i)||fr.Bopomofo(i)||fr["CJK Compatibility Forms"](i)||fr["CJK Compatibility Ideographs"](i)||fr["CJK Compatibility"](i)||fr["CJK Radicals Supplement"](i)||fr["CJK Strokes"](i)||fr["CJK Symbols and Punctuation"](i)||fr["CJK Unified Ideographs Extension A"](i)||fr["CJK Unified Ideographs"](i)||fr["Enclosed CJK Letters and Months"](i)||fr["Halfwidth and Fullwidth Forms"](i)||fr.Hiragana(i)||fr["Ideographic Description Characters"](i)||fr["Kangxi Radicals"](i)||fr["Katakana Phonetic Extensions"](i)||fr.Katakana(i)||fr["Vertical Forms"](i)||fr["Yi Radicals"](i)||fr["Yi Syllables"](i)))&&o.push(Ds(s+1,u,a,o,js(c,t.getCharCode(s+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Ds(t.length(),u,a,o,0,!0))}function zs(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Rs(t,e,n,r,i){if(i){var o=t[r],a=e[o.fontStack],u=a&&a[o.glyph];if(u)for(var s=u.metrics.advance*o.scale,l=(t[r].x+s)*i,c=n;c<=r;c++)t[c].x-=l}}Cs[10]=!0,Cs[32]=!0,Cs[38]=!0,Cs[40]=!0,Cs[41]=!0,Cs[43]=!0,Cs[45]=!0,Cs[47]=!0,Cs[173]=!0,Cs[183]=!0,Cs[8203]=!0,Cs[8208]=!0,Cs[8211]=!0,Cs[8231]=!0,t.createCommonjsModule=e,t.window=self,t.Point=i,t.browser=j,t.getJSON=function(t,e){return ut(f(t,{type:"json"}),e)},t.normalizeSpriteURL=function(t,e,n,r){var i=G(t);return N(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+n,L(i,r)):(i.path+=""+e+n,X(i))},t.ResourceType=et,t.getImage=function t(e,n){if(ot>=D.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:e,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return it.push(r),r}ot++;var i=!1,o=function(){if(!i)for(i=!0,ot--;it.length&&ot<D.MAX_PARALLEL_IMAGE_REQUESTS;){var e=it.shift(),n=e.requestParameters,r=e.callback;e.cancelled||(e.cancel=t(n,r).cancel)}},a=st(e,function(t,e,r,i){if(o(),t)n(t);else if(e){var a=new self.Image,u=self.URL||self.webkitURL;a.onload=function(){n(null,a),u.revokeObjectURL(a.src)},a.onerror=function(){return n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new self.Blob([new Uint8Array(e)],{type:"image/png"});a.cacheControl=r,a.expires=i,a.src=e.byteLength?u.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}});return{cancel:function(){a.cancel(),o()}}},t.RGBAImage=Mo,t.ImagePosition=Eu,t.Texture=ju,t.potpack=ku,t.normalizeGlyphsURL=function(t,e){if(!N(t))return t;var n=G(t);return n.path="/fonts/v1"+n.path,L(n,e)},t.getArrayBuffer=st,t.parseGlyphPBF=function(t){return new zu(t).readFields(Ju,[])},t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)})})},t.isChar=fr,t.AlphaImage=Ao,t.Properties=Fr,t.DataConstantProperty=Dr,t.styleSpec=vt,t.validateLight=Kn,t.endsWith=y,t.emitValidationErrors=tr,t.validateStyle=$n,t.extend=f,t.Evented=dt,t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.number=se,t.Transitionable=Or,t.warnOnce=w,t.uniqueId=p,t.Actor=ns,t.normalizeSourceURL=function(t,e){if(!N(t))return t;var n=G(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),L(n,e)},t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.canonicalizeTileset=function(t,e){if(!N(e))return t.tiles||[];for(var n=[],r=0,i=t.tiles;r<i.length;r+=1){var o=i[r],a=W(o);n.push(a)}return n},t.LngLatBounds=is,t.mercatorXfromLng=us,t.mercatorYfromLat=ss,t.Event=ht,t.ErrorEvent=pt,t.postTurnstileEvent=J,t.postMapLoadEvent=tt,t.normalizeTileURL=function(t,e,n){if(!e||!N(e))return t;var r=G(t),i=j.devicePixelRatio>=2||512===n?"@2x":"",o=P.supported?".webp":"$1";return r.path=r.path.replace(q,""+i+o),r.path="/v4"+r.path,L(r)},t.OverscaledTileID=ds,t.EXTENT=Zi,t.MercatorCoordinate=fs,t.CanonicalTileID=hs,t.StructArrayLayout4i8=Hr,t.rasterBoundsAttributes=ys,t.SegmentVector=Si,t.getVideo=function(t,e){var n,r,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");n=t[o],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.ValidationError=mt,t.bindAll=m,t.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],m=e[13],y=e[14],g=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*u+x*f+w*v,t[1]=b*i+_*s+x*h+w*m,t[2]=b*o+_*l+x*p+w*y,t[3]=b*a+_*c+x*d+w*g,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*u+x*f+w*v,t[5]=b*i+_*s+x*h+w*m,t[6]=b*o+_*l+x*p+w*y,t[7]=b*a+_*c+x*d+w*g,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*u+x*f+w*v,t[9]=b*i+_*s+x*h+w*m,t[10]=b*o+_*l+x*p+w*y,t[11]=b*a+_*c+x*d+w*g,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*u+x*f+w*v,t[13]=b*i+_*s+x*h+w*m,t[14]=b*o+_*l+x*p+w*y,t[15]=b*a+_*c+x*d+w*g,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.translate=function(t,e,n){var r,i,o,a,u,s,l,c,f,h,p,d,v=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*y+e[12],t[13]=e[1]*v+e[5]*m+e[9]*y+e[13],t[14]=e[2]*v+e[6]*m+e[10]*y+e[14],t[15]=e[3]*v+e[7]*m+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=l,t[7]=c,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=r*v+u*m+f*y+e[12],t[13]=i*v+s*m+h*y+e[13],t[14]=o*v+l*m+p*y+e[14],t[15]=a*v+c*m+d*y+e[15]),t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.Color=Ft,t.isEqual=a,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.Tile=Ss,t.SourceFeatureState=xs,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],u=e[2],s=e[3],l=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=u*i+f*r,t[3]=s*i+h*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=f*i-u*r,t[7]=h*i-s*r,t},t.evaluateSizeForZoom=function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var r=t.propertyValue,i=t.zoomRange,o=t.sizeRange,a=l(_n(r,n.specification).interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+a*(o.max-o.min)}}var u=t.propertyValue,s=t.zoomRange;return{uSizeT:l(_n(u,n.specification).interpolationFactor(e,s.min,s.max),0,1),uSize:0}},t.WritingMode=Os,t.transformMat4=bo,t.evaluateSizeForFeature=function(t,e,n){var r=e;return"source"===t.functionType?n.lowerSize/256:"composite"===t.functionType?se(n.lowerSize/256,n.upperSize/256,r.uSizeT):r.uSize},t.addDynamicAttributes=cu,t.properties=vu,t.polygonIntersectsPolygon=Qi,t.isMapboxURL=N,t.normalizeStyleURL=function(t,e){if(!N(t))return t;var n=G(t);return n.path="/styles/v1"+n.path,L(n,e)},t.createStyleLayer=function(t){return"custom"===t.type?new xu(t):new wu[t.type](t)},t.clone=_,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.filterObject=b,t.mapObject=g,t.evented=xr,t.makeRequest=ut,t.registerForPluginAvailability=function(t){return br?t({pluginURL:br,completionCallback:yr}):xr.once("pluginAvailable",t),t},t.ZoomHistory=cr,t.getReferrer=at,t.createLayout=qr,t.UniformMatrix4f=Fi,t.Uniform3f=Pi,t.Uniform1f=ji,t.Uniform1i=Ti,t.Uniform2f=Di,t.Uniform4f=zi,t.create=mo,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.create$1=function(){var t=new vo(16);return vo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.ortho=function(t,e,n,r,i,o,a){var u=1/(e-n),s=1/(r-i),l=1/(o-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*u,t[13]=(i+r)*s,t[14]=(a+o)*l,t[15]=1,t},t.UniformColor=Ri,t.clamp=l,t.StructArrayLayout2i4=Wr,t.StructArrayLayout2ui4=ui,t.ProgramConfiguration=Wi,t.StructArrayLayout1ui2=si,t.StructArrayLayout3ui6=ai,t.wrap=c,t.create$2=function(){var t=new vo(4);return vo!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*-u+o*s,t[3]=i*-u+a*s,t},t.LngLat=os,t.UnwrappedTileID=ps,t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],u=e[6],s=e[7],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=u*i+f*r,t[7]=s*i+h*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=f*i-u*r,t[11]=h*i-s*r,t},t.mercatorZfromAltitude=ls,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],y=e[15],g=n*u-r*a,b=n*s-i*a,_=n*l-o*a,x=r*s-i*u,w=r*l-o*u,k=i*l-o*s,E=c*v-f*d,S=c*m-h*d,O=c*y-p*d,A=f*m-h*v,M=f*y-p*v,C=h*y-p*m,T=g*C-b*M+_*A+x*O-w*S+k*E;return T?(T=1/T,t[0]=(u*C-s*M+l*A)*T,t[1]=(i*M-r*C-o*A)*T,t[2]=(v*k-m*w+y*x)*T,t[3]=(h*w-f*k-p*x)*T,t[4]=(s*O-a*C-l*S)*T,t[5]=(n*C-i*O+o*S)*T,t[6]=(m*_-d*k-y*b)*T,t[7]=(c*k-h*_+p*b)*T,t[8]=(a*M-u*O+l*E)*T,t[9]=(r*O-n*M-o*E)*T,t[10]=(d*w-v*_+y*g)*T,t[11]=(f*_-c*w-p*g)*T,t[12]=(u*S-a*A-s*E)*T,t[13]=(n*A-r*S+i*E)*T,t[14]=(v*b-d*x-m*g)*T,t[15]=(c*x-f*b+h*g)*T,t):null},t.ease=s,t.bezier=u,t.config=D,t.webpSupported=P,t.EvaluationParameters=kr,t.version="0.53.1",t.setRTLTextPlugin=function(t,e){if(gr)throw new Error("setRTLTextPlugin cannot be called multiple times.");gr=!0,br=j.resolveURL(t),yr=function(t){t?(gr=!1,br=null,e&&e(t)):_r=!0},xr.fire(new ht("pluginAvailable",{pluginURL:br,completionCallback:yr}))},t.featureFilter=Cn,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.Anchor=ou,t.GLYPH_PBF_BORDER=es,t.distToSegmentSquared=ao,t.allowsLetterSpacing=function(t){for(var e=0,n=t;e<n.length;e+=1)if(!pr(n[e].charCodeAt(0)))return!1;return!0},t.shapeText=function(t,e,n,r,i,o,a,u,s,l,c){var f=As.fromFeature(t,n);c===Os.vertical&&f.verticalizePunctuation();var h,p=[],d={positionedGlyphs:p,text:f,top:s[1],bottom:s[1],left:s[0],right:s[0],writingMode:c},v=wr.processBidirectionalText,m=wr.processStyledBidirectionalText;if(v&&1===f.sections.length){h=[];for(var y=0,g=v(f.toString(),Ps(f,u,r,e));y<g.length;y+=1){var b=g[y],_=new As;_.text=b,_.sections=f.sections;for(var x=0;x<b.length;x++)_.sectionIndex.push(0);h.push(_)}}else if(m){h=[];for(var w=0,k=m(f.text,f.sectionIndex,Ps(f,u,r,e));w<k.length;w+=1){var E=k[w],S=new As;S.text=E[0],S.sectionIndex=E[1],S.sections=f.sections,h.push(S)}}else h=function(t,e){for(var n=[],r=t.text,i=0,o=0,a=e;o<a.length;o+=1){var u=a[o];n.push(t.substring(i,u)),i=u}return i<r.length&&n.push(t.substring(i,r.length)),n}(f,Ps(f,u,r,e));return function(t,e,n,r,i,o,a,u,s){for(var l=0,c=-17,f=0,h=t.positionedGlyphs,p="right"===o?1:"left"===o?0:.5,d=0,v=n;d<v.length;d+=1){var m=v[d];m.trim();var y=m.getMaxScale();if(m.length()){for(var g=h.length,b=0;b<m.length();b++){var _=m.getSection(b),x=m.getCharCode(b),w=24*(y-_.scale),k=e[_.fontStack],E=k&&k[x];E&&(dr(x)&&a!==Os.horizontal?(h.push({glyph:x,x:l,y:w,vertical:!0,scale:_.scale,fontStack:_.fontStack}),l+=s*_.scale+u):(h.push({glyph:x,x:l,y:c+w,vertical:!1,scale:_.scale,fontStack:_.fontStack}),l+=E.metrics.advance*_.scale+u))}if(h.length!==g){var S=l-u;f=Math.max(S,f),Rs(h,e,g,h.length-1,p)}l=0,c+=r*y}else c+=r}var O=zs(i),A=O.horizontalAlign,M=O.verticalAlign;!function(t,e,n,r,i,o,a){for(var u=(e-n)*i,s=(-r*a+.5)*o,l=0;l<t.length;l++)t[l].x+=u,t[l].y+=s}(h,p,A,M,f,r,n.length);var C=c- -17;t.top+=-M*C,t.bottom=t.top+C,t.left+=-A*f,t.right=t.left+f}(d,e,h,i,o,a,c,u,l),!!p.length&&(d.text=d.text.toString(),d)},t.allowsVerticalWritingMode=hr,t.shapeIcon=function(t,e,n){var r=zs(n),i=r.horizontalAlign,o=r.verticalAlign,a=e[0],u=e[1],s=a-t.displaySize[0]*i,l=s+t.displaySize[0],c=u-t.displaySize[1]*o;return{image:t,top:c,bottom:c+t.displaySize[1],left:s,right:l}},t.classifyRings=ca,t.SIZE_PACK_FACTOR=256,t.SymbolBucket=pu,t.register=ar,t.CollisionBoxArray=hi,t.DictionaryCoder=gs,t.FeatureIndex=ws,t.ImageAtlas=Ou,t.LineBucket=Ha,t.FillBucket=da,t.FillExtrusionBucket=xa,t.mvt=La,t.Protobuf=zu,t.DEMData=ms,t.vectorTile=La,t.Point$1=i,t.pbf=zu,t.createExpression=vn,t.plugin=wr}),r(0,function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),u="{",s=0;s<a.length;s++)u+=JSON.stringify(a[s])+":"+e(t[a[s]])+",";return u+"}"}function n(n){for(var r="",i=0,o=t.refProperties;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}var r=function(t){t&&this.replace(t)};function i(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,u=0;u>-n/2;){if(--a<0)return!1;u-=t[a].dist(o),o=t[a]}u+=t[a].dist(t[a+1]),a++;for(var s=[],l=0;u<n/2;){var c=t[a-1],f=t[a],h=t[a+1];if(!h)return!1;var p=c.angleTo(f)-f.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),s.push({distance:u,angleDelta:p}),l+=p;u-s[0].distance>r;)l-=s.shift().angleDelta;if(l>i)return!1;a++,u+=f.dist(h)}return!0}function o(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function a(t,e,n){return t?.6*e*n:0}function u(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function s(e,n,r,s,l,c){for(var f=a(r,l,c),h=u(r,s)*c,p=0,d=o(e)/2,v=0;v<e.length-1;v++){var m=e[v],y=e[v+1],g=m.dist(y);if(p+g>d){var b=(d-p)/g,_=t.number(m.x,y.x,b),x=t.number(m.y,y.y,b),w=new t.Anchor(_,x,y.angleTo(m),v);return w._round(),!f||i(e,w,h,f,n)?w:void 0}p+=g}}function l(e,n,r,s,l,c,f,h,p){var d=a(s,c,f),v=u(s,l),m=v*f,y=0===e[0].x||e[0].x===p||0===e[0].y||e[0].y===p;return n-m<n/4&&(n=m+n/4),function e(n,r,a,u,s,l,c,f,h){for(var p=l/2,d=o(n),v=0,m=r-a,y=[],g=0;g<n.length-1;g++){for(var b=n[g],_=n[g+1],x=b.dist(_),w=_.angleTo(b);m+a<v+x;){var k=((m+=a)-v)/x,E=t.number(b.x,_.x,k),S=t.number(b.y,_.y,k);if(E>=0&&E<h&&S>=0&&S<h&&m-p>=0&&m+p<=d){var O=new t.Anchor(E,S,w,g);O._round(),u&&!i(n,O,l,u,s)||y.push(O)}}v+=x}return f||y.length||c||(y=e(n,v/2,a,u,s,l,c,!0,h)),y}(e,y?n/2*h%n:(v/2+2*c)*f*h%n,n,d,r,m,y,!1,p)}r.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},r.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var u=a[o];this._layerConfigs[u.id]=u;var s=this._layers[u.id]=t.createStyleLayer(u);s._featureFilter=t.featureFilter(s.filter)}for(var l=0,c=r;l<c.length;l+=1){var f=c[l];delete this._layerConfigs[f],delete this._layers[f]}this.familiesBySource={};for(var h=0,p=function(t){for(var e={},r=0;r<t.length;r++){var i=n(t[r]),o=e[i];o||(o=e[i]=[]),o.push(t[r])}var a=[];for(var u in e)a.push(e[u]);return a}(t.values(this._layerConfigs));h<p.length;h+=1){var d=p[h].map(function(t){return i._layers[t.id]}),v=d[0];if("none"!==v.visibility){var m=v.source||"",y=this.familiesBySource[m];y||(y=this.familiesBySource[m]={});var g=v.sourceLayer||"_geojsonTileLayer",b=y[g];b||(b=y[g]=[]),b.push(d)}}};var c=function(e,n,r,i,o,a,u,s,l,c,f,h){var p=u.top*s-l,d=u.bottom*s+l,v=u.left*s-l,m=u.right*s+l;if(this.boxStartIndex=e.length,c){var y=d-p,g=m-v;y>0&&(y=Math.max(10*s,y),this._addLineCollisionCircles(e,n,r,r.segment,g,y,i,o,a,f))}else{if(h){var b=new t.Point(v,p),_=new t.Point(m,p),x=new t.Point(v,d),w=new t.Point(m,d),k=h*Math.PI/180;b._rotate(k),_._rotate(k),x._rotate(k),w._rotate(k),v=Math.min(b.x,_.x,x.x,w.x),m=Math.max(b.x,_.x,x.x,w.x),p=Math.min(b.y,_.y,x.y,w.y),d=Math.max(b.y,_.y,x.y,w.y)}e.emplaceBack(r.x,r.y,v,p,m,d,i,o,a,0,0)}this.boxEndIndex=e.length};c.prototype._addLineCollisionCircles=function(t,e,n,r,i,o,a,u,s,l){var c=o/2,f=Math.floor(i/c)||1,h=1+.4*Math.log(l)/Math.LN2,p=Math.floor(f*h/2),d=-o/2,v=n,m=r+1,y=d,g=-i/2,b=g-i/4;do{if(--m<0){if(y>g)return;m=0;break}y-=e[m].dist(v),v=e[m]}while(y>b);for(var _=e[m].dist(e[m+1]),x=-p;x<f+p;x++){var w=x*c,k=g+w;if(w<0&&(k+=w),w>i&&(k+=w-i),!(k<y)){for(;y+_<k;){if(y+=_,++m+1>=e.length)return;_=e[m].dist(e[m+1])}var E=k-y,S=e[m],O=e[m+1].sub(S)._unit()._mult(E)._add(S)._round(),A=Math.abs(k-d)<c?0:.8*(k-d);t.emplaceBack(O.x,O.y,-o/2,-o/2,o/2,o/2,a,u,s,o/2,A)}}};var f=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=h),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function h(t,e){return t<e?-1:t>e?1:0}function p(e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);for(var i=1/0,o=1/0,a=-1/0,u=-1/0,s=e[0],l=0;l<s.length;l++){var c=s[l];(!l||c.x<i)&&(i=c.x),(!l||c.y<o)&&(o=c.y),(!l||c.x>a)&&(a=c.x),(!l||c.y>u)&&(u=c.y)}var h=a-i,p=u-o,m=Math.min(h,p),y=m/2,g=new f([],d);if(0===m)return new t.Point(i,o);for(var b=i;b<a;b+=m)for(var _=o;_<u;_+=m)g.push(new v(b+y,_+y,y,e));for(var x=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,u=a-1;o<a;u=o++){var s=i[o],l=i[u],c=s.x*l.y-l.x*s.y;n+=(s.x+l.x)*c,r+=(s.y+l.y)*c,e+=3*c}return new v(n/e,r/e,0,t)}(e),w=g.length;g.length;){var k=g.pop();(k.d>x.d||!x.d)&&(x=k,r&&console.log("found best %d after %d probes",Math.round(1e4*k.d)/1e4,w)),k.max-x.d<=n||(y=k.h/2,g.push(new v(k.p.x-y,k.p.y-y,y,e)),g.push(new v(k.p.x+y,k.p.y-y,y,e)),g.push(new v(k.p.x-y,k.p.y+y,y,e)),g.push(new v(k.p.x+y,k.p.y+y,y,e)),w+=4)}return r&&(console.log("num probes: "+w),console.log("best distance: "+x.d)),x.p}function d(t,e){return e.max-t.max}function v(e,n,r,i){this.p=new t.Point(e,n),this.h=r,this.d=function(e,n){for(var r=!1,i=1/0,o=0;o<n.length;o++)for(var a=n[o],u=0,s=a.length,l=s-1;u<s;l=u++){var c=a[u],f=a[l];c.y>e.y!=f.y>e.y&&e.x<(f.x-c.x)*(e.y-c.y)/(f.y-c.y)+c.x&&(r=!r),i=Math.min(i,t.distToSegmentSquared(e,c,f))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}f.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},f.prototype.pop=function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},f.prototype.peek=function(){return this.data[0]},f.prototype._up=function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},f.prototype._down=function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],u=o+1;if(u<this.length&&n(e[u],a)<0&&(o=u,a=e[u]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i};var m=t.createCommonjsModule(function(t){t.exports=function(t,e){var n,r,i,o,a,u,s,l;for(n=3&t.length,r=t.length-n,i=e,a=3432918353,u=461845907,l=0;l<r;)s=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,i=27492+(65535&(o=5*(65535&(i=(i^=s=(65535&(s=(s=(65535&s)*a+(((s>>>16)*a&65535)<<16)&4294967295)<<15|s>>>17))*u+(((s>>>16)*u&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(s=0,n){case 3:s^=(255&t.charCodeAt(l+2))<<16;case 2:s^=(255&t.charCodeAt(l+1))<<8;case 1:i^=s=(65535&(s=(s=(65535&(s^=255&t.charCodeAt(l)))*a+(((s>>>16)*a&65535)<<16)&4294967295)<<15|s>>>17))*u+(((s>>>16)*u&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}}),y=t.createCommonjsModule(function(t){t.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}}),g=m,b=m,_=y;function x(e,n,r,i,o,a){e.createArrays();var u=512*e.overscaling;e.tilePixelRatio=t.EXTENT/u,e.compareText={},e.iconsNeedLinear=!1;var s=e.layers[0].layout,l=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var f=e.textSizeData.zoomRange,h=f.min,p=f.max;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new t.EvaluationParameters(h)),l["text-size"].possiblyEvaluate(new t.EvaluationParameters(p))]}if("composite"===e.iconSizeData.functionType){var d=e.iconSizeData.zoomRange,v=d.min,m=d.max;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new t.EvaluationParameters(v)),l["icon-size"].possiblyEvaluate(new t.EvaluationParameters(m))]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),c.textMaxSize=l["text-size"].possiblyEvaluate(new t.EvaluationParameters(18));for(var y=24*s.get("text-line-height"),g="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),b=s.get("text-keep-upright"),_=0,x=e.features;_<x.length;_+=1){var k=x[_],E=s.get("text-font").evaluate(k,{}).join(","),S=r,O={},A=k.text;if(A){var M=A.toString(),C=s.get("text-offset").evaluate(k,{}).map(function(t){return 24*t}),T=24*s.get("text-letter-spacing").evaluate(k,{}),j=t.allowsLetterSpacing(M)?T:0,D=s.get("text-anchor").evaluate(k,{}),P=s.get("text-justify").evaluate(k,{}),z="point"===s.get("symbol-placement")?24*s.get("text-max-width").evaluate(k,{}):0;O.horizontal=t.shapeText(A,n,E,z,y,D,P,j,C,24,t.WritingMode.horizontal),t.allowsVerticalWritingMode(M)&&g&&b&&(O.vertical=t.shapeText(A,n,E,z,y,D,P,j,C,24,t.WritingMode.vertical))}var R=void 0;if(k.icon){var I=i[k.icon];I&&(R=t.shapeIcon(o[k.icon],s.get("icon-offset").evaluate(k,{}),s.get("icon-anchor").evaluate(k,{})),void 0===e.sdfIcons?e.sdfIcons=I.sdf:e.sdfIcons!==I.sdf&&t.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),I.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==s.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(O.horizontal||R)&&w(e,k,O,R,S,c)}a&&e.generateCollisionDebugBuffers()}function w(e,n,r,i,o,a){var u=a.layoutTextSize.evaluate(n,{}),f=a.layoutIconSize.evaluate(n,{}),h=a.textMaxSize.evaluate(n,{});void 0===h&&(h=u);var d=e.layers[0].layout,v=d.get("text-offset").evaluate(n,{}),m=d.get("icon-offset").evaluate(n,{}),y=u/24,b=e.tilePixelRatio*y,_=e.tilePixelRatio*h/24,x=e.tilePixelRatio*f,w=e.tilePixelRatio*d.get("symbol-spacing"),O=d.get("text-padding")*e.tilePixelRatio,A=d.get("icon-padding")*e.tilePixelRatio,M=d.get("text-max-angle")/180*Math.PI,C="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),T="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),j=d.get("symbol-placement"),D=w/2,P=function(u,s){s.x<0||s.x>=t.EXTENT||s.y<0||s.y>=t.EXTENT||function(e,n,r,i,o,a,u,s,l,f,h,p,d,v,m,y,b,_,x,w,S){var O,A,M=e.addToLineVertexArray(n,r),C=0,T=0,j=0,D=g(i.horizontal?i.horizontal.text:""),P=[];if(i.horizontal){var z=a.layout.get("text-rotate").evaluate(x,{});O=new c(u,r,n,s,l,f,i.horizontal,h,p,d,e.overscaling,z),T+=E(e,n,i.horizontal,a,d,x,v,M,i.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,P,w,S),i.vertical&&(j+=E(e,n,i.vertical,a,d,x,v,M,t.WritingMode.vertical,P,w,S))}var R=O?O.boxStartIndex:e.collisionBoxArray.length,I=O?O.boxEndIndex:e.collisionBoxArray.length;if(o){var F=function(e,n,r,i,o,a){var u,s,l,c,f=n.image,h=r.layout,p=n.top-1/f.pixelRatio,d=n.left-1/f.pixelRatio,v=n.bottom+1/f.pixelRatio,m=n.right+1/f.pixelRatio;if("none"!==h.get("icon-text-fit")&&o){var y=m-d,g=v-p,b=h.get("text-size").evaluate(a,{})/24,_=o.left*b,x=o.right*b,w=o.top*b,k=x-_,E=o.bottom*b-w,S=h.get("icon-text-fit-padding")[0],O=h.get("icon-text-fit-padding")[1],A=h.get("icon-text-fit-padding")[2],M=h.get("icon-text-fit-padding")[3],C="width"===h.get("icon-text-fit")?.5*(E-g):0,T="height"===h.get("icon-text-fit")?.5*(k-y):0,j="width"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?k:y,D="height"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?E:g;u=new t.Point(_+T-M,w+C-S),s=new t.Point(_+T+O+j,w+C-S),l=new t.Point(_+T+O+j,w+C+A+D),c=new t.Point(_+T-M,w+C+A+D)}else u=new t.Point(d,p),s=new t.Point(m,p),l=new t.Point(m,v),c=new t.Point(d,v);var P=r.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(P){var z=Math.sin(P),R=Math.cos(P),I=[R,-z,z,R];u._matMult(I),s._matMult(I),c._matMult(I),l._matMult(I)}return[{tl:u,tr:s,bl:c,br:l,tex:f.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,o,a,0,i.horizontal,x),L=a.layout.get("icon-rotate").evaluate(x,{});A=new c(u,r,n,s,l,f,o,m,y,!1,e.overscaling,L),C=4*F.length;var N=e.iconSizeData,B=null;"source"===N.functionType?(B=[t.SIZE_PACK_FACTOR*a.layout.get("icon-size").evaluate(x,{})])[0]>k&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===N.functionType&&((B=[t.SIZE_PACK_FACTOR*S.compositeIconSizes[0].evaluate(x,{}),t.SIZE_PACK_FACTOR*S.compositeIconSizes[1].evaluate(x,{})])[0]>k||B[1]>k)&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),e.addSymbols(e.icon,F,B,_,b,x,!1,n,M.lineStartIndex,M.lineLength)}var U=A?A.boxStartIndex:e.collisionBoxArray.length,q=A?A.boxEndIndex:e.collisionBoxArray.length;e.glyphOffsetArray.length>=t.SymbolBucket.MAX_GLYPHS&&t.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),e.symbolInstances.emplaceBack(n.x,n.y,P.length>0?P[0]:-1,P.length>1?P[1]:-1,D,R,I,U,q,s,T,j,C,0)}(e,s,u,r,i,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,b,O,C,v,x,A,T,m,n,o,a)};if("line"===j)for(var z=0,R=function(e,n,r,i,o){for(var a=[],u=0;u<e.length;u++)for(var s=e[u],l=void 0,c=0;c<s.length-1;c++){var f=s[c],h=s[c+1];f.x<0&&h.x<0||(f.x<0?f=new t.Point(0,f.y+(h.y-f.y)*((0-f.x)/(h.x-f.x)))._round():h.x<0&&(h=new t.Point(0,f.y+(h.y-f.y)*((0-f.x)/(h.x-f.x)))._round()),f.y<0&&h.y<0||(f.y<0?f=new t.Point(f.x+(h.x-f.x)*((0-f.y)/(h.y-f.y)),0)._round():h.y<0&&(h=new t.Point(f.x+(h.x-f.x)*((0-f.y)/(h.y-f.y)),0)._round()),f.x>=i&&h.x>=i||(f.x>=i?f=new t.Point(i,f.y+(h.y-f.y)*((i-f.x)/(h.x-f.x)))._round():h.x>=i&&(h=new t.Point(i,f.y+(h.y-f.y)*((i-f.x)/(h.x-f.x)))._round()),f.y>=o&&h.y>=o||(f.y>=o?f=new t.Point(f.x+(h.x-f.x)*((o-f.y)/(h.y-f.y)),o)._round():h.y>=o&&(h=new t.Point(f.x+(h.x-f.x)*((o-f.y)/(h.y-f.y)),o)._round()),l&&f.equals(l[l.length-1])||(l=[f],a.push(l)),l.push(h)))))}return a}(n.geometry,0,0,t.EXTENT,t.EXTENT);z<R.length;z+=1)for(var I=R[z],F=0,L=l(I,w,M,r.vertical||r.horizontal,i,24,_,e.overscaling,t.EXTENT);F<L.length;F+=1){var N=L[F],B=r.horizontal;B&&S(e,B.text,D,N)||P(I,N)}else if("line-center"===j)for(var U=0,q=n.geometry;U<q.length;U+=1){var V=q[U];if(V.length>1){var W=s(V,M,r.vertical||r.horizontal,i,24,_);W&&P(V,W)}}else if("Polygon"===n.type)for(var H=0,G=t.classifyRings(n.geometry,0);H<G.length;H+=1){var X=G[H],Z=p(X,16);P(X[0],new t.Anchor(Z.x,Z.y,0))}else if("LineString"===n.type)for(var Y=0,$=n.geometry;Y<$.length;Y+=1){var K=$[Y];P(K,new t.Anchor(K[0].x,K[0].y,0))}else if("Point"===n.type)for(var J=0,Q=n.geometry;J<Q.length;J+=1)for(var tt=0,et=Q[J];tt<et.length;tt+=1){var nt=et[tt];P([nt],new t.Anchor(nt.x,nt.y,0))}}g.murmur3=b,g.murmur2=_;var k=65535;function E(e,n,r,i,o,a,u,s,l,c,f,h){var p=function(e,n,r,i,o,a){for(var u=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,s=r.layout.get("text-offset").evaluate(o,{}).map(function(t){return 24*t}),l=n.positionedGlyphs,c=[],f=0;f<l.length;f++){var h=l[f],p=a[h.fontStack],d=p&&p[h.glyph];if(d){var v=d.rect;if(v){var m=t.GLYPH_PBF_BORDER+1,y=d.metrics.advance*h.scale/2,g=i?[h.x+y,h.y]:[0,0],b=i?[0,0]:[h.x+y+s[0],h.y+s[1]],_=(d.metrics.left-m)*h.scale-y+b[0],x=(-d.metrics.top-m)*h.scale+b[1],w=_+v.w*h.scale,k=x+v.h*h.scale,E=new t.Point(_,x),S=new t.Point(w,x),O=new t.Point(_,k),A=new t.Point(w,k);if(i&&h.vertical){var M=new t.Point(-y,y),C=-Math.PI/2,T=new t.Point(5,0);E._rotateAround(C,M)._add(T),S._rotateAround(C,M)._add(T),O._rotateAround(C,M)._add(T),A._rotateAround(C,M)._add(T)}if(u){var j=Math.sin(u),D=Math.cos(u),P=[D,-j,j,D];E._matMult(P),S._matMult(P),O._matMult(P),A._matMult(P)}c.push({tl:E,tr:S,bl:O,br:A,tex:v,writingMode:n.writingMode,glyphOffset:g})}}}return c}(0,r,i,o,a,f),d=e.textSizeData,v=null;return"source"===d.functionType?(v=[t.SIZE_PACK_FACTOR*i.layout.get("text-size").evaluate(a,{})])[0]>k&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===d.functionType&&((v=[t.SIZE_PACK_FACTOR*h.compositeTextSizes[0].evaluate(a,{}),t.SIZE_PACK_FACTOR*h.compositeTextSizes[1].evaluate(a,{})])[0]>k||v[1]>k)&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),e.addSymbols(e.text,p,v,u,o,a,l,n,s.lineStartIndex,s.lineLength),c.push(e.text.placedSymbolArray.length-1),4*p.length}function S(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}var O=function(e){var n={},r=[];for(var i in e){var o=e[i],a=n[i]={};for(var u in o){var s=o[+u];if(s&&0!==s.bitmap.width&&0!==s.bitmap.height){var l={x:0,y:0,w:s.bitmap.width+2,h:s.bitmap.height+2};r.push(l),a[u]={rect:l,metrics:s.metrics}}}}var c=t.potpack(r),f=c.w,h=c.h,p=new t.AlphaImage({width:f||1,height:h||1});for(var d in e){var v=e[d];for(var m in v){var y=v[+m];if(y&&0!==y.bitmap.width&&0!==y.bitmap.height){var g=n[d][m].rect;t.AlphaImage.copy(y.bitmap,p,{x:0,y:0},{x:g.x+1,y:g.y+1},y.bitmap)}}}this.image=p,this.positions=n};t.register("GlyphAtlas",O);var A=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies};function M(e,n){for(var r=new t.EvaluationParameters(n),i=0,o=e;i<o.length;i+=1)o[i].recalculate(r)}A.prototype.parse=function(e,n,r,i){var o=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var a=new t.DictionaryCoder(Object.keys(e.layers).sort()),u=new t.FeatureIndex(this.tileID);u.bucketLayerIDs=[];var s,l,c,f,h={},p={featureIndex:u,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},d=n.familiesBySource[this.source];for(var v in d){var m=e.layers[v];if(m){1===m.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+v+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var y=a.encode(v),g=[],b=0;b<m.length;b++){var _=m.feature(b);g.push({feature:_,index:b,sourceLayerIndex:y})}for(var w=0,k=d[v];w<k.length;w+=1){var E=k[w],S=E[0];S.minzoom&&this.zoom<Math.floor(S.minzoom)||S.maxzoom&&this.zoom>=S.maxzoom||"none"!==S.visibility&&(M(E,this.zoom),(h[S.id]=S.createBucket({index:u.bucketLayerIDs.length,layers:E,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:y,sourceID:this.source})).populate(g,p),u.bucketLayerIDs.push(E.map(function(t){return t.id})))}}}var A=t.mapObject(p.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(A).length?r.send("getGlyphs",{uid:this.uid,stacks:A},function(t,e){s||(s=t,l=e,j.call(o))}):l={};var C=Object.keys(p.iconDependencies);C.length?r.send("getImages",{icons:C},function(t,e){s||(s=t,c=e,j.call(o))}):c={};var T=Object.keys(p.patternDependencies);function j(){if(s)return i(s);if(l&&c&&f){var e=new O(l),n=new t.ImageAtlas(c,f);for(var r in h){var o=h[r];o instanceof t.SymbolBucket?(M(o.layers,this.zoom),x(o,l,e.positions,c,n.iconPositions,this.showCollisionBoxes)):o.hasPattern&&(o instanceof t.LineBucket||o instanceof t.FillBucket||o instanceof t.FillExtrusionBucket)&&(M(o.layers,this.zoom),o.addFeatures(p,n.patternPositions))}this.status="done",i(null,{buckets:t.values(h).filter(function(t){return!t.isEmpty()}),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?l:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?e.positions:null})}}T.length?r.send("getImages",{icons:T},function(t,e){s||(s=t,f=e,j.call(o))}):f={},j.call(this)};var C="undefined"!=typeof performance,T={getEntriesByName:function(t){return!!(C&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(C&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,n){return!!(C&&performance&&performance.measure)&&performance.measure(t,e,n)},clearMarks:function(t){return!!(C&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(C&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},j=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},T.mark(this._marks.start)};function D(e,n){var r=t.getArrayBuffer(e.request,function(e,r,i,o){e?n(e):r&&n(null,{vectorTile:new t.mvt.VectorTile(new t.Protobuf(r)),rawData:r,cacheControl:i,expires:o})});return function(){r.cancel(),n()}}j.prototype.finish=function(){T.mark(this._marks.end);var t=T.getEntriesByName(this._marks.measure);return 0===t.length&&(T.measure(this._marks.measure,this._marks.start,this._marks.end),t=T.getEntriesByName(this._marks.measure),T.clearMarks(this._marks.start),T.clearMarks(this._marks.end),T.clearMeasures(this._marks.measure)),t},T.Performance=j;var P=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||D,this.loading={},this.loaded={}};P.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new T.Performance(e.request),a=this.loading[i]=new A(e);a.abort=this.loadVectorData(e,function(e,u){if(delete r.loading[i],e||!u)return a.status="done",r.loaded[i]=a,n(e);var s=u.rawData,l={};u.expires&&(l.expires=u.expires),u.cacheControl&&(l.cacheControl=u.cacheControl);var c={};if(o){var f=o.finish();f&&(c.resourceTiming=JSON.parse(JSON.stringify(f)))}a.vectorTile=u.vectorTile,a.parse(u.vectorTile,r.layerIndex,r.actor,function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:s.slice(0)},r,l,c))}),r.loaded=r.loaded||{},r.loaded[i]=a})},P.prototype.reloadTile=function(t,e){var n=this.loaded,r=t.uid,i=this;if(n&&n[r]){var o=n[r];o.showCollisionBoxes=t.showCollisionBoxes;var a=function(t,n){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.actor,a):a())}},P.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},P.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var z=function(){this.loaded={}};z.prototype.loadTile=function(e,n){var r=e.uid,i=e.encoding,o=e.rawImageData,a=new t.DEMData(r,o,i);this.loaded=this.loaded||{},this.loaded[r]=a,n(null,a)},z.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var R={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function I(t){var e=0;if(t&&t.length>0){e+=Math.abs(F(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(F(t[n]))}return e}function F(t){var e,n,r,i,o,a,u=0,s=t.length;if(s>2){for(a=0;a<s;a++)a===s-2?(r=s-2,i=s-1,o=0):a===s-1?(r=s-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],u+=(L(t[o][0])-L(e[0]))*Math.sin(L(n[1]));u=u*R.RADIUS*R.RADIUS/2}return u}function L(t){return t*Math.PI/180}var N={geometry:function t(e){var n,r=0;switch(e.type){case"Polygon":return I(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=I(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},ring:F};function B(t,e){return function(n){return t(n,e)}}function U(t,e){e=!!e,t[0]=q(t[0],e);for(var n=1;n<t.length;n++)t[n]=q(t[n],!e);return t}function q(t,e){return function(t){return N.ring(t)>=0}(t)===e?t:t.reverse()}var V=t.mvt.VectorTileFeature.prototype.toGeoJSON,W=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};W.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.Point(i[0],i[1])])}return e}for(var o=[],a=0,u=this._feature.geometry;a<u.length;a+=1){for(var s=[],l=0,c=u[a];l<c.length;l+=1){var f=c[l];s.push(new t.Point(f[0],f[1]))}o.push(s)}return o},W.prototype.toGeoJSON=function(t,e,n){return V.call(this,t,e,n)};var H=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};H.prototype.feature=function(t){return new W(this._features[t])};var G=t.vectorTile.VectorTileFeature,X=Z;function Z(t,e){this.options=e||{},this.features=t,this.length=t.length}function Y(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}Z.prototype.feature=function(t){return new Y(this.features[t],this.options.extent)},Y.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},Y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],u=0;u<a.length;u++){var s=a[u];e=Math.min(e,s.x),n=Math.max(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.y)}return[e,r,n,i]},Y.prototype.toGeoJSON=G.prototype.toGeoJSON;var $=Q,K=Q,J=X;function Q(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,tt,t.layers[n])}(e,n),n.finish()}function tt(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,et,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,at,o[n])}function et(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,nt,t),e.writeVarintField(3,n.type),e.writeMessage(4,ot,n)}function nt(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var u in n.properties){var s=o[u];void 0===s&&(r.push(u),s=r.length-1,o[u]=s),e.writeVarint(s);var l=n.properties[u],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var f=c+":"+l,h=a[f];void 0===h&&(i.push(l),h=i.length-1,a[f]=h),e.writeVarint(h)}}function rt(t,e){return(e<<3)+(7&t)}function it(t){return t<<1^t>>31}function ot(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,u=0;u<a;u++){var s=n[u],l=1;1===r&&(l=s.length),e.writeVarint(rt(1,l));for(var c=3===r?s.length-1:s.length,f=0;f<c;f++){1===f&&1!==r&&e.writeVarint(rt(2,c-1));var h=s[f].x-i,p=s[f].y-o;e.writeVarint(it(h)),e.writeVarint(it(p)),i+=h,o+=p}3===r&&e.writeVarint(rt(7,1))}}function at(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function ut(t,e,n,r){st(t,n,r),st(e,2*n,2*r),st(e,2*n+1,2*r+1)}function st(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function lt(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}$.fromVectorTileJs=K,$.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new X(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return Q({layers:n})},$.GeoJSONWrapper=J;var ct=function(t){return t[0]},ft=function(t){return t[1]},ht=function(t,e,n,r,i){void 0===e&&(e=ct),void 0===n&&(n=ft),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),u=this.coords=new i(2*t.length),s=0;s<t.length;s++)a[s]=s,u[2*s]=e(t[s]),u[2*s+1]=n(t[s]);!function t(e,n,r,i,o,a){if(!(o-i<=r)){var u=i+o>>1;!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var u=o-i+1,s=r-i+1,l=Math.log(u),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(u-c)/u)*(s-u/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-s*c/u+f)),Math.min(o,Math.floor(r+(u-s)*c/u+f)),a)}var h=n[2*r+a],p=i,d=o;for(ut(e,n,i,r),n[2*o+a]>h&&ut(e,n,i,o);p<d;){for(ut(e,n,p,d),p++,d--;n[2*p+a]<h;)p++;for(;n[2*d+a]>h;)d--}n[2*i+a]===h?ut(e,n,i,d):ut(e,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(e,n,u,i,o,a%2),t(e,n,r,i,u-1,a+1),t(e,n,r,u+1,o,a+1)}}(a,u,r,0,a.length-1,0)};ht.prototype.range=function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var u,s,l=[0,t.length-1,0],c=[];l.length;){var f=l.pop(),h=l.pop(),p=l.pop();if(h-p<=a)for(var d=p;d<=h;d++)u=e[2*d],s=e[2*d+1],u>=n&&u<=i&&s>=r&&s<=o&&c.push(t[d]);else{var v=Math.floor((p+h)/2);u=e[2*v],s=e[2*v+1],u>=n&&u<=i&&s>=r&&s<=o&&c.push(t[v]);var m=(f+1)%2;(0===f?n<=u:r<=s)&&(l.push(p),l.push(v-1),l.push(m)),(0===f?i>=u:o>=s)&&(l.push(v+1),l.push(h),l.push(m))}}return c}(this.ids,this.coords,t,e,n,r,this.nodeSize)},ht.prototype.within=function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],u=[],s=i*i;a.length;){var l=a.pop(),c=a.pop(),f=a.pop();if(c-f<=o)for(var h=f;h<=c;h++)lt(e[2*h],e[2*h+1],n,r)<=s&&u.push(t[h]);else{var p=Math.floor((f+c)/2),d=e[2*p],v=e[2*p+1];lt(d,v,n,r)<=s&&u.push(t[p]);var m=(l+1)%2;(0===l?n-i<=d:r-i<=v)&&(a.push(f),a.push(p-1),a.push(m)),(0===l?n+i>=d:r+i>=v)&&(a.push(p+1),a.push(c),a.push(m))}}return u}(this.ids,this.coords,t,e,n,this.nodeSize)};var pt={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(t){return t}},dt=function(t){this.options=xt(Object.create(pt),t),this.trees=new Array(this.options.maxZoom+1)};function vt(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function mt(t,e){var n=t.geometry.coordinates,r=n[0],i=n[1];return{x:bt(r),y:_t(i),zoom:1/0,index:e,parentId:-1}}function yt(t){return{type:"Feature",id:t.id,properties:gt(t),geometry:{type:"Point",coordinates:[(r=t.x,360*(r-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n,r}function gt(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return xt(xt({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function bt(t){return t/360+.5}function _t(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function xt(t,e){for(var n in e)t[n]=e[n];return t}function wt(t){return t.x}function kt(t){return t.y}function Et(t,e,n,r,i,o){var a=i-n,u=o-r;if(0!==a||0!==u){var s=((t-n)*a+(e-r)*u)/(a*a+u*u);s>1?(n=i,r=o):s>0&&(n+=a*s,r+=u*s)}return(a=t-n)*a+(u=e-r)*u}function St(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Ot(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)Ot(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)Ot(t,e[r][i])}(i),i}function Ot(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function At(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),u=[],s=e.id;if(n.promoteId?s=e.properties[n.promoteId]:n.generateId&&(s=r||0),"Point"===o)Mt(i,u);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)Mt(i[l],u);else if("LineString"===o)Ct(i,u,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<i.length;l++)u=[],Ct(i[l],u,a,!1),t.push(St(s,"LineString",u,e.properties));return}Tt(i,u,a,!1)}else if("Polygon"===o)Tt(i,u,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<e.geometry.geometries.length;l++)At(t,{id:s,geometry:e.geometry.geometries[l],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];Tt(i[l],c,a,!0),u.push(c)}}t.push(St(s,o,u,e.properties))}}function Mt(t,e){e.push(jt(t[0])),e.push(Dt(t[1])),e.push(0)}function Ct(t,e,n,r){for(var i,o,a=0,u=0;u<t.length;u++){var s=jt(t[u][0]),l=Dt(t[u][1]);e.push(s),e.push(l),e.push(0),u>0&&(a+=r?(i*l-s*o)/2:Math.sqrt(Math.pow(s-i,2)+Math.pow(l-o,2))),i=s,o=l}var c=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,u=r-n>>1,s=r-n,l=e[n],c=e[n+1],f=e[r],h=e[r+1],p=n+3;p<r;p+=3){var d=Et(e[p],e[p+1],l,c,f,h);if(d>a)o=p,a=d;else if(d===a){var v=Math.abs(p-u);v<s&&(o=p,s=v)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Tt(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];Ct(t[i],o,n,r),e.push(o)}}function jt(t){return t/360+.5}function Dt(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function Pt(t,e,n,r,i,o,a,u){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var s=[],l=0;l<t.length;l++){var c=t[l],f=c.geometry,h=c.type,p=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(p>=n&&d<r)s.push(c);else if(!(d<n||p>=r)){var v=[];if("Point"===h||"MultiPoint"===h)zt(f,v,n,r,i);else if("LineString"===h)Rt(f,v,n,r,i,!1,u.lineMetrics);else if("MultiLineString"===h)Ft(f,v,n,r,i,!1);else if("Polygon"===h)Ft(f,v,n,r,i,!0);else if("MultiPolygon"===h)for(var m=0;m<f.length;m++){var y=[];Ft(f[m],y,n,r,i,!0),y.length&&v.push(y)}if(v.length){if(u.lineMetrics&&"LineString"===h){for(m=0;m<v.length;m++)s.push(St(c.id,h,v[m],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===v.length?(h="LineString",v=v[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===v.length?"Point":"MultiPoint"),s.push(St(c.id,h,v,c.tags))}}}return s.length?s:null}function zt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function Rt(t,e,n,r,i,o,a){for(var u,s,l=It(t),c=0===i?Nt:Bt,f=t.start,h=0;h<t.length-3;h+=3){var p=t[h],d=t[h+1],v=t[h+2],m=t[h+3],y=t[h+4],g=0===i?p:d,b=0===i?m:y,_=!1;a&&(u=Math.sqrt(Math.pow(p-m,2)+Math.pow(d-y,2))),g<n?b>n&&(s=c(l,p,d,m,y,n),a&&(l.start=f+u*s)):g>r?b<r&&(s=c(l,p,d,m,y,r),a&&(l.start=f+u*s)):Lt(l,p,d,v),b<n&&g>=n&&(s=c(l,p,d,m,y,n),_=!0),b>r&&g<=r&&(s=c(l,p,d,m,y,r),_=!0),!o&&_&&(a&&(l.end=f+u*s),e.push(l),l=It(t)),a&&(f+=u)}var x=t.length-3;p=t[x],d=t[x+1],v=t[x+2],(g=0===i?p:d)>=n&&g<=r&&Lt(l,p,d,v),x=l.length-3,o&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&Lt(l,l[0],l[1],l[2]),l.length&&e.push(l)}function It(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function Ft(t,e,n,r,i,o){for(var a=0;a<t.length;a++)Rt(t[a],e,n,r,i,o,!1)}function Lt(t,e,n,r){t.push(e),t.push(n),t.push(r)}function Nt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function Bt(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function Ut(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=qt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var u=0;u<o.geometry.length;u++)i.push(qt(o.geometry[u],e))}else if("MultiPolygon"===a)for(i=[],u=0;u<o.geometry.length;u++){for(var s=[],l=0;l<o.geometry[u].length;l++)s.push(qt(o.geometry[u][l],e));i.push(s)}n.push(St(o.id,a,i,o.tags))}return n}function qt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function Vt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,u=t.y;for(n=0;n<t.features.length;n++){var s=t.features[n],l=s.geometry,c=s.type;if(s.geometry=[],1===c)for(r=0;r<l.length;r+=2)s.geometry.push(Wt(l[r],l[r+1],e,o,a,u));else for(r=0;r<l.length;r++){var f=[];for(i=0;i<l[r].length;i+=2)f.push(Wt(l[r][i],l[r][i+1],e,o,a,u));s.geometry.push(f)}}return t.transformed=!0,t}function Wt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function Ht(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u=0;u<t.length;u++){a.numFeatures++,Gt(a,t[u],o,i);var s=t[u].minX,l=t[u].minY,c=t[u].maxX,f=t[u].maxY;s<a.minX&&(a.minX=s),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),f>a.maxY&&(a.maxY=f)}return a}function Gt(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var u=0;u<i.length;u+=3)a.push(i[u]),a.push(i[u+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Xt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(u=0;u<i.length;u++)Xt(a,i[u],t,n,"Polygon"===o,0===u);else if("MultiPolygon"===o)for(var s=0;s<i.length;s++){var l=i[s];for(u=0;u<l.length;u++)Xt(a,l[u],t,n,!0,0===u)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var f in c={},e.tags)c[f]=e.tags[f];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(h.id=e.id),t.features.push(h)}}function Xt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var u=[],s=0;s<e.length;s+=3)(0===r||e[s+2]>a)&&(n.numSimplified++,u.push(e[s]),u.push(e[s+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],u=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=u}}(u,o),t.push(u)}}function Zt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)At(n,t.features[r],e,r);else"Feature"===t.type?At(n,t,e):At(n,{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=Pt(t,1,-1-n,n,0,-1,2,e),o=Pt(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=Pt(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=Ut(i,1).concat(r)),o&&(r=r.concat(Ut(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Yt(t,e,n){return 32*((1<<t)*n+e)+t}function $t(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new H(r.features),o=$(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}dt.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var u=[],s=0;s<t.length;s++)t[s].geometry&&u.push(mt(t[s],s));this.trees[i+1]=new ht(u,wt,kt,o,Float32Array),n&&console.timeEnd(a);for(var l=i;l>=r;l--){var c=+Date.now();u=this._cluster(u,l),this.trees[l]=new ht(u,wt,kt,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,u.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},dt.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),u=this.getClusters([-180,r,i,o],e);return a.concat(u)}for(var s=this.trees[this._limitZoom(e)],l=[],c=0,f=s.range(bt(n),_t(o),bt(i),_t(r));c<f.length;c+=1){var h=f[c],p=s.points[h];l.push(p.numPoints?yt(p):this.points[p.index])}return l},dt.prototype.getChildren=function(t){var e=t>>5,n=t%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),u=[],s=0,l=i.within(o.x,o.y,a);s<l.length;s+=1){var c=l[s],f=i.points[c];f.parentId===t&&u.push(f.numPoints?yt(f):this.points[f.index])}if(0===u.length)throw new Error(r);return u},dt.prototype.getLeaves=function(t,e,n){e=e||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,n,0),r},dt.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,u=o.radius/a,s=(n-u)/i,l=(n+1+u)/i,c={features:[]};return this._addTileFeatures(r.range((e-u)/i,s,(e+1+u)/i,l),r.points,e,n,i,c),0===e&&this._addTileFeatures(r.range(1-u/i,s,1,l),r.points,i,n,i,c),e===i-1&&this._addTileFeatures(r.range(0,s,u/i,l),r.points,-1,n,i,c),c.features.length?c:null},dt.prototype.getClusterExpansionZoom=function(t){for(var e=t%32-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},dt.prototype._appendLeaves=function(t,e,n,r,i){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var u=a[o],s=u.properties;if(s&&s.cluster?i+s.point_count<=r?i+=s.point_count:i=this._appendLeaves(t,s.cluster_id,n,r,i):i<r?i++:t.push(u),t.length===n)break}return i},dt.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,u=t;a<u.length;a+=1){var s=e[u[a]],l={type:1,geometry:[[Math.round(this.options.extent*(s.x*i-n)),Math.round(this.options.extent*(s.y*i-r))]],tags:s.numPoints?gt(s):this.points[s.index].properties},c=s.numPoints?s.id:this.points[s.index].id;void 0!==c&&(l.id=c),o.features.push(l)}},dt.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},dt.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,u=i/(o*Math.pow(2,e)),s=0;s<t.length;s++){var l=t[s];if(!(l.zoom<=e)){l.zoom=e;for(var c=this.trees[e+1],f=c.within(l.x,l.y,u),h=l.numPoints||1,p=l.x*h,d=l.y*h,v=a?this._map(l,!0):null,m=(s<<5)+(e+1),y=0,g=f;y<g.length;y+=1){var b=g[y],_=c.points[b];if(!(_.zoom<=e)){_.zoom=e;var x=_.numPoints||1;p+=_.x*x,d+=_.y*x,h+=x,_.parentId=m,a&&a(v,this._map(_))}}1===h?n.push(l):(l.parentId=m,n.push(vt(p/h,d/h,m,h,v)))}}return n},dt.prototype._map=function(t,e){if(t.numPoints)return e?xt({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?xt({},r):r},Zt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Zt.prototype.splitTile=function(t,e,n,r,i,o,a){for(var u=[t,e,n,r],s=this.options,l=s.debug;u.length;){r=u.pop(),n=u.pop(),e=u.pop(),t=u.pop();var c=1<<e,f=Yt(e,n,r),h=this.tiles[f];if(!h&&(l>1&&console.time("creation"),h=this.tiles[f]=Ht(t,e,n,r,s),this.tileCoords.push({z:e,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(h.source=t,i){if(e===s.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===s.indexMaxZoom||h.numPoints<=s.indexMaxPoints)continue;if(h.source=null,0!==t.length){l>1&&console.time("clipping");var v,m,y,g,b,_,x=.5*s.buffer/s.extent,w=.5-x,k=.5+x,E=1+x;v=m=y=g=null,b=Pt(t,c,n-x,n+k,0,h.minX,h.maxX,s),_=Pt(t,c,n+w,n+E,0,h.minX,h.maxX,s),t=null,b&&(v=Pt(b,c,r-x,r+k,1,h.minY,h.maxY,s),m=Pt(b,c,r+w,r+E,1,h.minY,h.maxY,s),b=null),_&&(y=Pt(_,c,r-x,r+k,1,h.minY,h.maxY,s),g=Pt(_,c,r+w,r+E,1,h.minY,h.maxY,s),_=null),l>1&&console.timeEnd("clipping"),u.push(v||[],e+1,2*n,2*r),u.push(m||[],e+1,2*n,2*r+1),u.push(y||[],e+1,2*n+1,2*r),u.push(g||[],e+1,2*n+1,2*r+1)}}},Zt.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,u=Yt(t,e=(e%a+a)%a,n);if(this.tiles[u])return Vt(this.tiles[u],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var s,l=t,c=e,f=n;!s&&l>0;)l--,c=Math.floor(c/2),f=Math.floor(f/2),s=this.tiles[Yt(l,c,f)];return s&&s.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,f),o>1&&console.time("drilling down"),this.splitTile(s.source,l,c,f,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[u]?Vt(this.tiles[u],i):null):null};var Kt=function(e){function n(t,n,r){e.call(this,t,n,$t),r&&(this.loadGeoJSON=r)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new T.Performance(r.request);this.loadGeoJSON(r,function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data is not a valid GeoJSON object."));!function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(B(t,n)),e;case"GeometryCollection":return e.geometries=e.geometries.map(B(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=U(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(B(U,e))),t}(e,n);default:return e}}(a,!0);try{e._geoJSONIndex=r.cluster?new dt(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},u={properties:null},s=Object.keys(r),l=0,c=s;l<c.length;l+=1){var f=c[l],h=r[f],p=h[0],d=h[1],v=t.createExpression(d),m=t.createExpression("string"==typeof p?[p,["accumulated"],["get",f]]:p);i[f]=v.value,o[f]=m.value}return n.map=function(t){u.properties=t;for(var e={},n=0,r=s;n<r.length;n+=1){var o=r[n];e[o]=i[o].evaluate(a,u)}return e},n.reduce=function(t,e){u.properties=e;for(var n=0,r=s;n<r.length;n+=1){var i=r[n];a.accumulated=t[i],t[i]=o[i].evaluate(a,u)}},n}(r)).load(a.features):new Zt(a,r.geojsonVtOptions)}catch(o){return n(o)}e.loaded={};var u={};if(i){var s=i.finish();s&&(u.resourceTiming={},u.resourceTiming[r.source]=JSON.parse(JSON.stringify(s)))}n(null,u)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded,i=t.uid;return r&&r[i]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},n.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},n.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},n}(P),Jt=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.workerSourceTypes={vector:P,geojson:Kt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isLoaded())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Jt.prototype.setReferrer=function(t,e){this.referrer=e},Jt.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Jt.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Jt.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Jt.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Jt.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Jt.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Jt.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Jt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Jt.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},Jt.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Jt.prototype.loadRTLTextPlugin=function(e,n,r){try{t.plugin.isLoaded()||(this.self.importScripts(n),r(t.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(t){r(t.toString())}},Jt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},Jt.prototype.getWorkerSource=function(t,e,n){var r=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){var i={send:function(e,n,i){r.actor.send(e,n,i,t)}};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.getLayerIndex(t))}return this.workerSources[t][e][n]},Jt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new z),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Jt(self)),Jt}),r(0,function(t){var e=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===n[t]&&(n[t]=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n={create:function(e,n,r){var i=t.window.document.createElement(e);return n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},r=t.window.document?t.window.document.documentElement.style:null;function i(t){if(!r)return null;for(var e=0;e<t.length;e++)if(t[e]in r)return t[e];return t[0]}var o,a=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&a&&(o=r[a],r[a]="none")},n.enableDrag=function(){r&&a&&(r[a]=o)};var u=i(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[u]=e};var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});t.window.addEventListener("test",l,l),t.window.removeEventListener("test",l,l)}catch(t){s=!1}n.addEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&s?t.addEventListener(e,n,r):t.addEventListener(e,n,r.capture)},n.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&s?t.removeEventListener(e,n,r):t.removeEventListener(e,n,r.capture)};var c=function e(n){n.preventDefault(),n.stopPropagation(),t.window.removeEventListener("click",e,!0)};n.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",c,!0)},0)},n.mousePos=function(e,n){var r=e.getBoundingClientRect();return n=n.touches?n.touches[0]:n,new t.Point(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},n.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)i.push(new t.Point(o[a].clientX-r.left-e.clientLeft,o[a].clientY-r.top-e.clientTop));return i},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var f=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0};f.prototype.isLoaded=function(){return this.loaded},f.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e],i=r.ids,o=r.callback;this._notify(i,o)}this.requestors=[]}},f.prototype.getImage=function(t){return this.images[t]},f.prototype.addImage=function(t,e){this.images[t]=e},f.prototype.removeImage=function(t){delete this.images[t],delete this.patterns[t]},f.prototype.listImages=function(){return Object.keys(this.images)},f.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1){var o=i[r];this.images[o]||(n=!1)}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},f.prototype._notify=function(t,e){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,n)},f.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},f.prototype.getPattern=function(e){var n=this.patterns[e];if(n)return n.position;var r=this.getImage(e);if(!r)return null;var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);return this.patterns[e]={bin:i,position:o},this._updatePatternAtlas(),o},f.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},f.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var u in a.resize({width:i||1,height:o||1}),this.patterns){var s=this.patterns[u].bin,l=s.x+1,c=s.y+1,f=this.images[u].data,h=f.width,p=f.height;t.RGBAImage.copy(f,a,{x:0,y:0},{x:l,y:c},{width:h,height:p}),t.RGBAImage.copy(f,a,{x:0,y:p-1},{x:l,y:c-1},{width:h,height:1}),t.RGBAImage.copy(f,a,{x:0,y:0},{x:l,y:c+p},{width:h,height:1}),t.RGBAImage.copy(f,a,{x:h-1,y:0},{x:l-1,y:c},{width:1,height:p}),t.RGBAImage.copy(f,a,{x:0,y:0},{x:l+h,y:c},{width:1,height:p})}this.dirty=!0};var h=d,p=1e20;function d(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function v(t,e,n,r,i,o,a){for(var u=0;u<e;u++){for(var s=0;s<n;s++)r[s]=t[s*e+u];for(m(r,i,o,a,n),s=0;s<n;s++)t[s*e+u]=i[s]}for(s=0;s<n;s++){for(u=0;u<e;u++)r[u]=t[s*e+u];for(m(r,i,o,a,e),u=0;u<e;u++)t[s*e+u]=Math.sqrt(i[u])}}function m(t,e,n,r,i){n[0]=0,r[0]=-p,r[1]=+p;for(var o=1,a=0;o<i;o++){for(var u=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);u<=r[a];)a--,u=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=u,r[a+1]=+p}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}d.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?p:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?p:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var o=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return n};var y=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};y.prototype.setURL=function(t){this.url=t},y.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,u=e[o];a<u.length;a+=1){var s=u[a];i.push({stack:o,id:s})}t.asyncAll(i,function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a)if(a=r._tinySDF(o,n,i))e(null,{stack:n,id:i,glyph:a});else{var u=Math.floor(i/256);if(256*u>65535)e(new Error("glyphs > 65535 not supported"));else{var s=o.requests[u];s||(s=o.requests[u]=[],y.loadGlyphRange(n,u,r.url,r.requestTransform,function(t,e){if(e)for(var n in e)o.glyphs[+n]=e[+n];for(var r=0,i=s;r<i.length;r+=1)(0,i[r])(t,e);delete o.requests[u]})),s.push(function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})})}}else e(null,{stack:n,id:i,glyph:a})},function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],u=a.stack,s=a.id,l=a.glyph;(r[u]||(r[u]={}))[s]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}})},y.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&(t.isChar["CJK Unified Ideographs"](r)||t.isChar["Hangul Syllables"](r))){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new y.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(e,n,r,i,o){var a=256*n,u=a+255,s=i(t.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",a+"-"+u),t.ResourceType.Glyphs);t.getArrayBuffer(s,function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.parseGlyphPBF(n);i<a.length;i+=1){var u=a[i];r[u.id]=u}o(null,r)}})},y.TinySDF=h;var g=function(){this.specification=t.styleSpec.light.position};g.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},g.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var b=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new g,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),_=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(b),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),x=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};x.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},x.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];for(var u=this.width/o,s=u/2,l=e.length%2==1,c=-r;c<=r;c++)for(var f=this.nextRow+r+c,h=this.width*f,p=l?-e[e.length-1]:0,d=e[0],v=1,m=0;m<this.width;m++){for(;d<m/u;)p=d,d+=e[v],l&&v===e.length-1&&(d+=e[0]),v++;var y=Math.abs(m-p*u),g=Math.abs(m-d*u),b=Math.min(y,g),_=v%2==1,x=void 0;if(n){var w=r?c/r*(s+1):0;if(_){var k=s-Math.abs(w);x=Math.sqrt(b*b+k*k)}else x=s-Math.sqrt(b*b+w*w)}else x=(_?1:-1)*b;this.data[3+4*(h+m)]=Math.max(0,Math.min(255,x+128))}var E={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,E},x.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var w=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=i[o],u=new e.Actor(a,r,this.id);u.name="Worker "+o,this.actors.push(u)}};function k(e,n,r){var i=function(n,i){if(n)return r(n);if(i){var o=t.pick(i,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map(function(t){return t.id})),e.url&&(o.tiles=t.canonicalizeTileset(o,e.url)),r(null,o)}};return e.url?t.getJSON(n(t.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame(function(){return i(null,e)})}w.prototype.broadcast=function(e,n,r){r=r||function(){},t.asyncAll(this.actors,function(t,r){t.send(e,n,r)},r)},w.prototype.send=function(t,e,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n),r},w.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},w.Actor=t.Actor;var E=function(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24};E.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},E.prototype.contains=function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a};var S=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(r,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new E(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){var r=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url),i={request:this.map._transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function o(t,r){return e.aborted?n(null):t&&404!==t.status?n(t):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",i,o.bind(this)):"loading"===e.state?e.reloadCallback=n:this.dispatcher.send("reloadTile",i,o.bind(this),e.workerID)},n.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),O=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new E(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,u=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,u.RGBA,{useMipmap:!0}),e.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",n(null)}})},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),A=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var r=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(r,t.ResourceType.Tile),function(r,i){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=t.browser.getImageData(i),a={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",a,function(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,u=n.x+1===r?e.wrap+1:e.wrap,s={};return s[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},s[new t.OverscaledTileID(e.overscaledZ,u,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(s[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},s[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},s[new t.OverscaledTileID(e.overscaledZ,u,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(s[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},s[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},s[new t.OverscaledTileID(e.overscaledZ,u,n.z,a,n.y+1).key]={backfilled:!1}),s},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},n}(O),M=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=i,this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution);var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(r.clusterRadius||50)*a,log:!1},clusterProperties:r.clusterProperties},r.workerOptions)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}}),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterLeaves=function(t,e,n,r){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r,this.workerID),this},n.prototype._updateWorkerData=function(e){var n=this,r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",r,function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:r.source},null,n.workerID),e(t))},this.workerID)},n.prototype.loadTile=function(e,n){var r=this,i=void 0===e.workerID?"loadTile":"reloadTile",o={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(i,o,function(t,o){return e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))},this.workerID)},n.prototype.abortTile=function(t){t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),C=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(e,n){var r=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(i,o){i?r.fire(new t.ErrorEvent(i)):o&&(r.image=o,e&&(r.coordinates=e),n&&n(),r._finishLoading())})},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,u=e;a<u.length;a+=1){var s=u[a];n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),o=Math.max(o,s.y)}var l=i-n,c=o-r,f=Math.max(l,c),h=Math.max(0,Math.floor(-Math.log(f)/Math.LN2)),p=Math.pow(2,h);return new t.CanonicalTileID(h,Math.floor((n+i)/2*p),Math.floor((r+o)/2*p))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map(function(t){return n.tileID.getTilePoint(t)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),T={vector:S,raster:O,"raster-dem":A,geojson:M,video:function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this,n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1){var o=i[r];this.urls.push(this.map._transformRequest(o,t.ResourceType.Source).url)}t.getVideo(this.urls,function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(C),image:C,canvas:function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(C)},j=function(e,n,r,i){var o=new T[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function D(e,n){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function P(t,e,n,r,i){var o=function(t,e,n){if(t)for(var r=0,i=t;r<i.length;r+=1){var o=e[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in e){var u=e[a];if(u.source===n&&"fill-extrusion"===u.type)return!0}return!1}(r&&r.layers,e,t.id),a=i.maxPitchScaleFactor(),u=t.tilesIn(n,a,o);u.sort(z);for(var s=[],l=0,c=u;l<c.length;l+=1){var f=c[l];s.push({wrappedTileID:f.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(e,t._state,f.queryGeometry,f.cameraQueryGeometry,f.scale,r,i,a,D(t.transform,f.tileID))})}var h=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,u=o.wrappedTileID,s=n[u]=n[u]||{};for(var l in a)for(var c=a[l],f=s[l]=s[l]||{},h=e[l]=e[l]||[],p=0,d=c;p<d.length;p+=1){var v=d[p];f[v.featureIndex]||(f[v.featureIndex]=!0,h.push(v))}}return e}(s);for(var p in h)h[p].forEach(function(e){var n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r});return h}function z(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var R=function(t,e){this.max=t,this.onRemove=e,this.reset()};R.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},R.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},R.prototype.has=function(t){return t.wrapped().key in this.data},R.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},R.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},R.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},R.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},R.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var I=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};I.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},I.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},I.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var F={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},L=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};L.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},L.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},L.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=e.attributes[r.name];void 0!==i&&t.enableVertexAttribArray(i)}},L.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[F[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},L.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var N=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};N.prototype.get=function(){return this.current},N.prototype.set=function(t){},N.prototype.getDefault=function(){return this.default},N.prototype.setDefault=function(){this.set(this.default)};var B=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(N),U=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(N),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(N),V=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(N),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(N),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(N),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(N),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(N),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(N),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(N),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(N),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(N),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(N),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(N),tt=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(N),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(N),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(N),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(N),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(N),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(N),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(N),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(N),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(N),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(N),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(N),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(N),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(N),pt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(N),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(N),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(N),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(N),yt=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e}(N),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(yt),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(yt),_t=function(t,e,n){this.context=t,this.width=e,this.height=n;var r=t.gl,i=this.framebuffer=r.createFramebuffer();this.colorAttachment=new gt(t,i),this.depthAttachment=new bt(t,i)};_t.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)};var xt=function(t,e,n){this.func=t,this.mask=e,this.range=n};xt.ReadOnly=!1,xt.ReadWrite=!0,xt.disabled=new xt(519,xt.ReadOnly,[0,1]);var wt=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};wt.disabled=new wt({func:519,mask:0},0,0,7680,7680,7680);var kt=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};kt.disabled=new kt(kt.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),kt.unblended=new kt(kt.Replace,t.Color.transparent,[!0,!0,!0,!0]),kt.alphaBlended=new kt([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Et=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};Et.disabled=new Et(!1,1029,2305),Et.backCCW=new Et(!0,1029,2305);var St=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new B(this),this.clearDepth=new U(this),this.clearStencil=new q(this),this.colorMask=new V(this),this.depthMask=new W(this),this.stencilMask=new H(this),this.stencilFunc=new G(this),this.stencilOp=new X(this),this.stencilTest=new Z(this),this.depthRange=new Y(this),this.depthTest=new $(this),this.depthFunc=new K(this),this.blend=new J(this),this.blendFunc=new Q(this),this.blendColor=new tt(this),this.blendEquation=new et(this),this.cullFace=new nt(this),this.cullFaceSide=new rt(this),this.frontFace=new it(this),this.program=new ot(this),this.activeTexture=new at(this),this.viewport=new ut(this),this.bindFramebuffer=new st(this),this.bindRenderbuffer=new lt(this),this.bindTexture=new ct(this),this.bindVertexBuffer=new ft(this),this.bindElementBuffer=new ht(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new pt(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new mt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};St.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},St.prototype.createIndexBuffer=function(t,e){return new I(this,t,e)},St.prototype.createVertexBuffer=function(t,e,n){return new L(this,t,e,n)},St.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},St.prototype.createFramebuffer=function(t,e){return new _t(this,t,e)},St.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},St.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},St.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},St.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},St.prototype.setColorMode=function(e){t.isEqual(e.blendFunction,kt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},St.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ot=function(e){function n(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=j(n,r,i,this),this._tiles={},this._cache=new R(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t)},n.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(At)},n.prototype.getRenderableIds=function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(+i,e)&&r.push(+i);return e?r.sort(function(e,r){var i=n._tiles[e].tileID,o=n._tiles[r].tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),u=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||u.y-a.y||u.x-a.x}):r.sort(At)},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){var i=this.getTileByID(r);o(t,i),o(i,t)}}function o(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},n.prototype._retainLoadedChildren=function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var u=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[u.key])&&o.hasData()&&(a=u)}for(var s=a;s.overscaledZ>e;)if(t[(s=s.scaledTo(s.overscaledZ-1)).key]){r[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){for(var n=t.overscaledZ-1;n>=e;n--){var r=t.scaledTo(n);if(!r)return;var i=String(r.key),o=this._tiles[i];if(o&&o.hasData())return o;if(this._cache.has(r))return this._cache.get(r)}},n.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),n=Math.floor(5*e),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,n=Math.round(e);if(this._prevLng=t,n){var r={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+n),r[o.tileID.key]=o}for(var a in this._tiles=r,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var u in this._tiles){var s=this._tiles[u];this._setTileReloadTimer(u,s)}}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return r._source.hasTile(t)}))):i=[];var o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(o-n.maxOverzooming,this._source.minzoom),u=Math.max(o+n.maxUnderzooming,this._source.minzoom),s=this._updateRetainedTiles(i,o);if(Mt(this._source.type)){for(var l={},c={},f=0,h=Object.keys(s);f<h.length;f+=1){var p=h[f],d=s[p],v=this._tiles[p];if(v&&!(v.fadeEndTime&&v.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(d,a);m&&(this._addTile(m.tileID),l[m.tileID.key]=m.tileID),c[p]=d}}for(var y in this._retainLoadedChildren(c,o,u,s),l)s[y]||(this._coveredTiles[y]=!0,s[y]=l[y])}for(var g in s)this._tiles[g].clearFadeHold();for(var b=0,_=t.keysDifference(this._tiles,s);b<_.length;b+=1){var x=_[b],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),u={},s=0,l=t;s<l.length;s+=1){var c=l[s],f=this._addTile(c);r[c.key]=c,f.hasData()||e<this._source.maxzoom&&(u[c.key]=c)}this._retainLoadedChildren(u,e,a,r);for(var h=0,p=t;h<p.length;h+=1){var d=p[h],v=this._tiles[d.key];if(!v.hasData()){if(e+1>this._source.maxzoom){var m=d.children(this._source.maxzoom)[0],y=this.getTile(m);if(y&&y.hasData()){r[m.key]=m;continue}}else{var g=d.children(this._source.maxzoom);if(r[g[0].key]&&r[g[1].key]&&r[g[2].key]&&r[g[3].key])continue}for(var b=v.wasRequested(),_=d.overscaledZ-1;_>=o;--_){var x=d.scaledTo(_);if(i[x.key])break;if(i[x.key]=!0,!(v=this.getTile(x))&&b&&(v=this._addTile(x)),v&&(r[x.key]=x,b=v.wasRequested(),v.hasData()))break}}}return r},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,r){var i=this,o=[],a=this.transform;if(!a)return o;for(var u=r?a.getCameraQueryGeometry(e):e,s=e.map(function(t){return a.pointCoordinate(t)}),l=u.map(function(t){return a.pointCoordinate(t)}),c=this.getIds(),f=1/0,h=1/0,p=-1/0,d=-1/0,v=0,m=l;v<m.length;v+=1){var y=m[v];f=Math.min(f,y.x),h=Math.min(h,y.y),p=Math.max(p,y.x),d=Math.max(d,y.y)}for(var g=function(e){var r=i._tiles[c[e]];if(!r.holdingForFade()){var u=r.tileID,v=Math.pow(2,a.zoom-r.tileID.overscaledZ),m=n*r.queryPadding*t.EXTENT/r.tileSize/v,y=[u.getTilePoint(new t.MercatorCoordinate(f,h)),u.getTilePoint(new t.MercatorCoordinate(p,d))];if(y[0].x-m<t.EXTENT&&y[0].y-m<t.EXTENT&&y[1].x+m>=0&&y[1].y+m>=0){var g=s.map(function(t){return u.getTilePoint(t)}),b=l.map(function(t){return u.getTilePoint(t)});o.push({tile:r,tileID:u,queryGeometry:g,cameraQueryGeometry:b,scale:v})}}},b=0;b<c.length;b++)g(b);return o},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Mt(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){t=t||"_geojsonTileLayer",this._state.updateState(t,e,n)},n.prototype.removeFeatureState=function(t,e,n){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,e,n)},n.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},n}(t.Evented);function At(t,e){return t%32-e%32||e-t}function Mt(t){return"raster"===t||"image"===t||"video"===t}function Ct(){return new t.window.Worker($r.workerUrl)}Ot.maxOverzooming=10,Ot.maxUnderzooming=3;var Tt=function(){this.active={}};Tt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Tt.workerCount;)this.workers.push(new Ct);return this.active[t]=!0,this.workers.slice()},Tt.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var jt,Dt=Math.floor(t.browser.hardwareConcurrency/2);function Pt(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach(function(t){t in n&&(r[t]=n[t])}),r}function zt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Pt(t[r],e[t[r].ref]));return t}Tt.workerCount=Math.max(Math.min(Dt,6),1);var Rt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function It(t,e,n){n.push({command:Rt.addSource,args:[t,e[t]]})}function Ft(t,e,n){e.push({command:Rt.removeSource,args:[t]}),n[t]=!0}function Lt(t,e,n,r){Ft(t,n,r),It(t,e,n)}function Nt(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[r][i],n[r][i]))return!1;return!0}function Bt(e,n,r,i,o,a){var u;for(u in n=n||{},e=e||{})e.hasOwnProperty(u)&&(t.isEqual(e[u],n[u])||r.push({command:a,args:[i,u,n[u],o]}));for(u in n)n.hasOwnProperty(u)&&!e.hasOwnProperty(u)&&(t.isEqual(e[u],n[u])||r.push({command:a,args:[i,u,n[u],o]}))}function Ut(t){return t.id}function qt(t,e){return t[e.id]=e,t}var Vt=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};Vt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Vt.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Vt.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},Vt.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},Vt.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},Vt.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var u=0;u<this.boxKeys.length;u++)a.push({key:this.boxKeys[u],x1:this.bboxes[4*u],y1:this.bboxes[4*u+1],x2:this.bboxes[4*u+2],y2:this.bboxes[4*u+3]});for(var s=0;s<this.circleKeys.length;s++){var l=this.circles[3*s],c=this.circles[3*s+1],f=this.circles[3*s+2];a.push({key:this.circleKeys[s],x1:l-f,y1:c-f,x2:l+f,y2:c+f})}return o?a.filter(o):a}var h={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,r,this._queryCell,a,h,o),i?a.length>0:a},Vt.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,u=e-n,s=e+n;if(a<0||o>this.width||s<0||u>this.height)return!r&&[];var l=[],c={hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,u,a,s,this._queryCellCircle,l,c,i),r?l.length>0:l},Vt.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},Vt.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},Vt.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},Vt.prototype._queryCell=function(t,e,n,r,i,o,a,u){var s=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,f=0,h=l;f<h.length;f+=1){var p=h[f];if(!s.box[p]){s.box[p]=!0;var d=4*p;if(t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]&&(!u||u(this.boxKeys[p]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var v=this.circleCells[i];if(null!==v)for(var m=this.circles,y=0,g=v;y<g.length;y+=1){var b=g[y];if(!s.circle[b]){s.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(m[_],m[_+1],m[_+2],t,e,n,r)&&(!u||u(this.circleKeys[b]))){if(a.hitTest)return o.push(!0),!0;var x=m[_],w=m[_+1],k=m[_+2];o.push({key:this.circleKeys[b],x1:x-k,y1:w-k,x2:x+k,y2:w+k})}}}},Vt.prototype._queryCellCircle=function(t,e,n,r,i,o,a,u){var s=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var f=this.bboxes,h=0,p=c;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var v=4*d;if(this._circleAndRectCollide(s.x,s.y,s.radius,f[v+0],f[v+1],f[v+2],f[v+3])&&(!u||u(this.boxKeys[d])))return o.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var y=this.circles,g=0,b=m;g<b.length;g+=1){var _=b[g];if(!l.circle[_]){l.circle[_]=!0;var x=3*_;if(this._circlesCollide(y[x],y[x+1],y[x+2],s.x,s.y,s.radius)&&(!u||u(this.circleKeys[_])))return o.push(!0),!0}}},Vt.prototype._forEachCell=function(t,e,n,r,i,o,a,u){for(var s=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r),h=s;h<=c;h++)for(var p=l;p<=f;p++){var d=this.xCellCount*p+h;if(i.call(this,t,e,n,r,d,o,a,u))return}},Vt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Vt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Vt.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,u=i-e,s=n+o;return s*s>a*a+u*u},Vt.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var u=(o-r)/2,s=Math.abs(t-(r+u));if(s>u+n)return!1;var l=(a-i)/2,c=Math.abs(e-(i+l));if(c>l+n)return!1;if(s<=u||c<=l)return!0;var f=s-u,h=c-l;return f*f+h*h<=n*n};var Wt=t.properties.layout;function Ht(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.identity(a),t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):(t.scale(a,a,[i.width/2,-i.height/2,1]),t.translate(a,a,[1,-1,0]),t.multiply(a,a,e)),a}function Gt(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.multiply(a,a,e),t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle)):(t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/i.width,2/i.height,1])),a}function Xt(e,n){var r=[e.x,e.y,0,1];re(r,r,n);var i=r[3];return{point:new t.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function Zt(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function Yt(e,n,r,i,o,a,u,s){var l=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,r.transform.zoom,Wt.properties[i?"text-size":"icon-size"]),f=[256/r.width*2+1,256/r.height*2+1],h=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var p=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,v=r.transform.width/r.transform.height,m=!1,y=0;y<d.length;y++){var g=d.get(y);if(g.hidden||g.writingMode===t.WritingMode.vertical&&!m)ne(g.numGlyphs,h);else{m=!1;var b=[g.anchorX,g.anchorY,0,1];if(t.transformMat4(b,b,n),Zt(b,f)){var _=.5+b[3]/r.transform.cameraToCenterDistance*.5,x=t.evaluateSizeForFeature(l,c,g),w=u?x*_:x/_,k=new t.Point(g.anchorX,g.anchorY),E=Xt(k,o).point,S={},O=Jt(g,w,!1,s,n,o,a,e.glyphOffsetArray,p,h,E,k,S,v);m=O.useVertical,(O.notEnoughRoom||m||O.needsFlipping&&Jt(g,w,!0,s,n,o,a,e.glyphOffsetArray,p,h,E,k,S,v).notEnoughRoom)&&ne(g.numGlyphs,h)}else ne(g.numGlyphs,h)}}i?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function $t(t,e,n,r,i,o,a,u,s,l,c,f){var h=u.glyphStartIndex+u.numGlyphs,p=u.lineStartIndex,d=u.lineStartIndex+u.lineLength,v=e.getoffsetX(u.glyphStartIndex),m=e.getoffsetX(h-1),y=te(t*v,n,r,i,o,a,u.segment,p,d,s,l,c,f);if(!y)return null;var g=te(t*m,n,r,i,o,a,u.segment,p,d,s,l,c,f);return g?{first:y,last:g}:null}function Kt(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function Jt(e,n,r,i,o,a,u,s,l,c,f,h,p,d){var v,m=n/24,y=e.lineOffsetX*n,g=e.lineOffsetY*n;if(e.numGlyphs>1){var b=e.glyphStartIndex+e.numGlyphs,_=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=$t(m,s,y,g,r,f,h,e,l,a,p,!1);if(!w)return{notEnoughRoom:!0};var k=Xt(w.first.point,u).point,E=Xt(w.last.point,u).point;if(i&&!r){var S=Kt(e.writingMode,k,E,d);if(S)return S}v=[w.first];for(var O=e.glyphStartIndex+1;O<b-1;O++)v.push(te(m*s.getoffsetX(O),y,g,r,f,h,e.segment,_,x,l,a,p,!1));v.push(w.last)}else{if(i&&!r){var A=Xt(h,o).point,M=e.lineStartIndex+e.segment+1,C=new t.Point(l.getx(M),l.gety(M)),T=Xt(C,o),j=T.signedDistanceFromCamera>0?T.point:Qt(h,C,A,1,o),D=Kt(e.writingMode,A,j,d);if(D)return D}var P=te(m*s.getoffsetX(e.glyphStartIndex),y,g,r,f,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,p,!1);if(!P)return{notEnoughRoom:!0};v=[P]}for(var z=0,R=v;z<R.length;z+=1){var I=R[z];t.addDynamicAttributes(c,I.point,I.angle)}return{}}function Qt(t,e,n,r,i){var o=Xt(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function te(e,n,r,i,o,a,u,s,l,c,f,h,p){var d=i?e-n:e+n,v=d>0?1:-1,m=0;i&&(v*=-1,m=Math.PI),v<0&&(m+=Math.PI);for(var y=v>0?s+u:s+u+1,g=y,b=o,_=o,x=0,w=0,k=Math.abs(d);x+w<=k;){if((y+=v)<s||y>=l)return null;if(_=b,void 0===(b=h[y])){var E=new t.Point(c.getx(y),c.gety(y)),S=Xt(E,f);if(S.signedDistanceFromCamera>0)b=h[y]=S.point;else{var O=y-v;b=Qt(0===x?a:new t.Point(c.getx(O),c.gety(O)),E,_,k-x+1,f)}}x+=w,w=_.dist(b)}var A=(k-x)/w,M=b.sub(_),C=M.mult(A)._add(_);return C._add(M._unit()._perp()._mult(r*v)),{point:C,angle:m+Math.atan2(b.y-_.y,b.x-_.x),tileDistance:p?{prevTileDistance:y-v===g?0:c.gettileUnitDistanceFromAnchor(y-v),lastSegmentViewportDistance:k-x}:null}}var ee=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ne(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(ee,3*r)}}function re(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}var ie=function(t,e,n){void 0===e&&(e=new Vt(t.width+200,t.height+200,25)),void 0===n&&(n=new Vt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function oe(t,e,n){t[e+4]=n?1:0}function ae(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}ie.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,u=t.x1*a+o.point.x,s=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(u,s,l,c)||!e&&this.grid.hitTest(u,s,l,c,i)?{box:[],offscreen:!1}:{box:[u,s,l,c],offscreen:this.isOffscreen(u,s,l,c)}},ie.prototype.approximateTileDistance=function(t,e,n,r,i){var o=i?1:r/this.pitchfactor,a=t.lastSegmentViewportDistance*n;return t.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(e))},ie.prototype.placeCollisionCircles=function(e,n,r,i,o,a,u,s,l,c,f,h,p){var d=[],v=this.projectAnchor(l,o.anchorX,o.anchorY),m=s/24,y=o.lineOffsetX*s,g=o.lineOffsetY*s,b=new t.Point(o.anchorX,o.anchorY),_=$t(m,u,y,g,!1,Xt(b,c).point,b,o,a,c,{},!0),x=!1,w=!1,k=!0,E=v.perspectiveRatio*i,S=1/(i*r),O=0,A=0;_&&(O=this.approximateTileDistance(_.first.tileDistance,_.first.angle,S,v.cameraDistance,h),A=this.approximateTileDistance(_.last.tileDistance,_.last.angle,S,v.cameraDistance,h));for(var M=0;M<e.length;M+=5){var C=e[M],T=e[M+1],j=e[M+2],D=e[M+3];if(!_||D<-O||D>A)oe(e,M,!1);else{var P=this.projectPoint(l,C,T),z=j*E;if(d.length>0){var R=P.x-d[d.length-4],I=P.y-d[d.length-3];if(z*z*2>R*R+I*I&&M+8<e.length){var F=e[M+8];if(F>-O&&F<A){oe(e,M,!1);continue}}}var L=M/5;d.push(P.x,P.y,z,L),oe(e,M,!0);var N=P.x-z,B=P.y-z,U=P.x+z,q=P.y+z;if(k=k&&this.isOffscreen(N,B,U,q),w=w||this.isInsideGrid(N,B,U,q),!n&&this.grid.hitTestCircle(P.x,P.y,z,p)){if(!f)return{circles:[],offscreen:!1};x=!0}}}return{circles:x||!w?[]:d,offscreen:k}},ie.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,u=0,s=e;u<s.length;u+=1){var l=s[u],c=new t.Point(l.x+100,l.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var f={},h={},p=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));p<d.length;p+=1){var v=d[p],m=v.key;if(void 0===f[m.bucketInstanceId]&&(f[m.bucketInstanceId]={}),!f[m.bucketInstanceId][m.featureIndex]){var y=[new t.Point(v.x1,v.y1),new t.Point(v.x2,v.y1),new t.Point(v.x2,v.y2),new t.Point(v.x1,v.y2)];t.polygonIntersectsPolygon(n,y)&&(f[m.bucketInstanceId][m.featureIndex]=!0,void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]=[]),h[m.bucketInstanceId].push(m.featureIndex))}}return h},ie.prototype.insertCollisionBox=function(t,e,n,r,i){var o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};(e?this.ignoredGrid:this.grid).insert(o,t[0],t[1],t[2],t[3])},ie.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},u=0;u<t.length;u+=4)o.insertCircle(a,t[u],t[u+1],t[u+2])},ie.prototype.projectAnchor=function(t,e,n){var r=[e,n,0,1];return re(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},ie.prototype.projectPoint=function(e,n,r){var i=[n,r,0,1];return re(i,i,e),new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},ie.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return re(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},ie.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},ie.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary};var ue=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};ue.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var se=function(t,e,n,r,i){this.text=new ue(t?t.text:null,e,n,i),this.icon=new ue(t?t.icon:null,e,r,i)};se.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var le=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},ce=function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},fe=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};fe.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var he=function(t,e,n){this.transform=t.clone(),this.collisionIndex=new ie(this.transform),this.placements={},this.opacities={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new fe(n)};function pe(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}he.prototype.placeLayerTile=function(e,n,r,i){var o=n.getBucket(e),a=n.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var u=n.collisionBoxArray,s=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/t.EXTENT,f=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),h=Ht(f,"map"===s.get("text-pitch-alignment"),"map"===s.get("text-rotation-alignment"),this.transform,ae(n,1,this.transform.zoom)),p=Ht(f,"map"===s.get("icon-pitch-alignment"),"map"===s.get("icon-rotation-alignment"),this.transform,ae(n,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new ce(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID),this.placeLayerBucket(o,f,h,p,l,c,r,n.holdingForFade(),i,u)}},he.prototype.placeLayerBucket=function(e,n,r,i,o,a,u,s,l,c){var f=e.layers[0].layout,h=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,t.properties.layout.properties["text-size"]),p=f.get("text-optional"),d=f.get("icon-optional"),v=f.get("text-allow-overlap"),m=f.get("icon-allow-overlap"),y=v&&(m||!e.hasIconData()||d),g=m&&(v||!e.hasTextData()||p),b=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&c&&e.deserializeCollisionBoxes(c);for(var _=0;_<e.symbolInstances.length;_++){var x=e.symbolInstances.get(_);if(!l[x.crossTileID]){if(s){this.placements[x.crossTileID]=new le(!1,!1,!1);continue}var w=!1,k=!1,E=!0,S=null,O=null,A=null,M=0,C=0,T=e.collisionArrays[_];T.textFeatureIndex&&(M=T.textFeatureIndex),T.textBox&&(w=(S=this.collisionIndex.placeCollisionBox(T.textBox,f.get("text-allow-overlap"),a,n,b.predicate)).box.length>0,E=E&&S.offscreen);var j=T.textCircles;if(j){var D=e.text.placedSymbolArray.get(x.horizontalPlacedTextSymbolIndex),P=t.evaluateSizeForFeature(e.textSizeData,h,D);O=this.collisionIndex.placeCollisionCircles(j,f.get("text-allow-overlap"),o,a,D,e.lineVertexArray,e.glyphOffsetArray,P,n,r,u,"map"===f.get("text-pitch-alignment"),b.predicate),w=f.get("text-allow-overlap")||O.circles.length>0,E=E&&O.offscreen}T.iconFeatureIndex&&(C=T.iconFeatureIndex),T.iconBox&&(k=(A=this.collisionIndex.placeCollisionBox(T.iconBox,f.get("icon-allow-overlap"),a,n,b.predicate)).box.length>0,E=E&&A.offscreen);var z=p||0===x.numGlyphVertices&&0===x.numVerticalGlyphVertices,R=d||0===x.numIconVertices;z||R?R?z||(k=k&&w):w=k&&w:k=w=k&&w,w&&S&&this.collisionIndex.insertCollisionBox(S.box,f.get("text-ignore-placement"),e.bucketInstanceId,M,b.ID),k&&A&&this.collisionIndex.insertCollisionBox(A.box,f.get("icon-ignore-placement"),e.bucketInstanceId,C,b.ID),w&&O&&this.collisionIndex.insertCollisionCircles(O.circles,f.get("text-ignore-placement"),e.bucketInstanceId,M,b.ID),this.placements[x.crossTileID]=new le(w||y,k||g,E||e.justReloaded),l[x.crossTileID]=!0}}e.justReloaded=!1},he.prototype.commit=function(t,e){this.commitTime=e;var n=!1,r=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,i=t?t.opacities:{};for(var o in this.placements){var a=this.placements[o],u=i[o];u?(this.opacities[o]=new se(u,r,a.text,a.icon),n=n||a.text!==u.text.placed||a.icon!==u.icon.placed):(this.opacities[o]=new se(null,r,a.text,a.icon,a.skipFade),n=n||a.text||a.icon)}for(var s in i){var l=i[s];if(!this.opacities[s]){var c=new se(l,r,!1,!1);c.isHidden()||(this.opacities[s]=c,n=n||l.text.placed||l.icon.placed)}}n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},he.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},he.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();var r=t.layers[0].layout,i=new se(null,0,!1,!1,!0),o=r.get("text-allow-overlap"),a=r.get("icon-allow-overlap"),u=new se(null,0,o&&(a||!t.hasIconData()||r.get("icon-optional")),a&&(o||!t.hasTextData()||r.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasCollisionBoxData()||t.hasCollisionCircleData())&&t.deserializeCollisionBoxes(n);for(var s=0;s<t.symbolInstances.length;s++){var l=t.symbolInstances.get(s),c=e[l.crossTileID],f=this.opacities[l.crossTileID];c?f=i:f||(f=u,this.opacities[l.crossTileID]=f),e[l.crossTileID]=!0;var h=l.numGlyphVertices>0||l.numVerticalGlyphVertices>0,p=l.numIconVertices>0;if(h){for(var d=xe(f.text),v=(l.numGlyphVertices+l.numVerticalGlyphVertices)/4,m=0;m<v;m++)t.text.opacityVertexArray.emplaceBack(d);t.text.placedSymbolArray.get(l.horizontalPlacedTextSymbolIndex).hidden=f.text.isHidden(),l.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(l.verticalPlacedTextSymbolIndex).hidden=f.text.isHidden())}if(p){for(var y=xe(f.icon),g=0;g<l.numIconVertices/4;g++)t.icon.opacityVertexArray.emplaceBack(y);t.icon.placedSymbolArray.get(s).hidden=f.icon.isHidden()}if(t.hasCollisionBoxData()||t.hasCollisionCircleData()){var b=t.collisionArrays[s];if(b){b.textBox&&pe(t.collisionBox.collisionVertexArray,f.text.placed,!1),b.iconBox&&pe(t.collisionBox.collisionVertexArray,f.icon.placed,!1);var _=b.textCircles;if(_&&t.hasCollisionCircleData())for(var x=0;x<_.length;x+=5){var w=c||0===_[x+4];pe(t.collisionCircle.collisionVertexArray,f.text.placed,w)}}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},he.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},he.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},he.prototype.stillRecent=function(t){return this.commitTime+this.fadeDuration>t},he.prototype.setStale=function(){this.stale=!0};var de=Math.pow(2,25),ve=Math.pow(2,24),me=Math.pow(2,17),ye=Math.pow(2,16),ge=Math.pow(2,9),be=Math.pow(2,8),_e=Math.pow(2,1);function xe(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*de+e*ve+n*me+e*ye+n*ge+e*be+n*_e+e}var we=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};we.prototype.continuePlacement=function(t,e,n,r,i){for(;this._currentTileIndex<t.length;){var o=t[this._currentTileIndex];if(e.placeLayerTile(r,o,n,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var ke=function(t,e,n,r,i,o){this.placement=new he(t,i,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};ke.prototype.isDone=function(){return this._done},ke.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var u=n[e[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===u.type&&(!u.minzoom||u.minzoom<=s)&&(!u.maxzoom||u.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new we),this._inProgressLayer.continuePlacement(r[u.source],this.placement,this._showCollisionBoxes,u,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ke.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var Ee=512/t.EXTENT/2,Se=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<e.length;r++){var i=e.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};Se.prototype.getScaledCoordinates=function(e,n){var r=n.canonical.z-this.tileID.canonical.z,i=Ee/Math.pow(2,r);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*i),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*i)}},Se.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var u=this.getScaledCoordinates(o,e),s=0,l=a;s<l.length;s+=1){var c=l[s];if(Math.abs(c.coord.x-u.x)<=r&&Math.abs(c.coord.y-u.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Oe=function(){this.maxCrossTileID=0};Oe.prototype.generate=function(){return++this.maxCrossTileID};var Ae=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ae.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},Ae.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var u in a){var s=a[u];s.tileID.isChildOf(t)&&s.findMatches(e.symbolInstances,t,i)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,i)}}for(var c=0;c<e.symbolInstances.length;c++){var f=e.symbolInstances.get(c);f.crossTileID||(f.crossTileID=n.generate(),i[f.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Se(t,e.symbolInstances,e.bucketInstanceId),!0},Ae.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1){var o=i[r];delete this.usedCrossTileIDs[t][o.crossTileID]}},Ae.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var Me=function(){this.layerIndexes={},this.crossTileIDs=new Oe,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Me.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Ae);var i=!1,o={};r.handleWrapJump(n);for(var a=0,u=e;a<u.length;a+=1){var s=u[a],l=s.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(s.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},Me.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var Ce=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},Te=t.pick(Rt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),je=t.pick(Rt,["setCenter","setZoom","setBearing","setPitch"]),De=function(e){function n(r,i){var o=this;void 0===i&&(i={}),e.call(this),this.map=r,this.dispatcher=new w((jt||(jt=new Tt),jt),this),this.imageManager=new f,this.glyphManager=new y(r._transformRequest,i.localIdeographFontFamily),this.lineAtlas=new x(256,512),this.crossTileSymbolIndex=new Me,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginAvailability(function(t){for(var e in a.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),a.sourceCaches)a.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=t.normalizeStyleURL(e,n.accessToken);var o=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,i)})},n.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){r._request=null,r._load(e,!1!==n.validate)})},n.prototype._load=function(e,n){var r=this;if(!n||!Ce(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(i,e.sources[i],{validate:!1});e.sprite?this._spriteRequest=function(e,n,r){var i,o,a,u=t.browser.devicePixelRatio>1?"@2x":"",s=t.getJSON(n(t.normalizeSpriteURL(e,u,".json"),t.ResourceType.SpriteJSON),function(t,e){s=null,a||(a=t,i=e,c())}),l=t.getImage(n(t.normalizeSpriteURL(e,u,".png"),t.ResourceType.SpriteImage),function(t,e){l=null,a||(a=t,o=e,c())});function c(){if(a)r(a);else if(i&&o){var e=t.browser.getImageData(o),n={};for(var u in i){var s=i[u],l=s.width,c=s.height,f=s.x,h=s.y,p=s.sdf,d=s.pixelRatio,v=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,v,{x:f,y:h},{x:0,y:0},{width:l,height:c}),n[u]={data:v,pixelRatio:d,sdf:p}}r(null,n)}}return{cancel:function(){s&&(s.cancel(),s=null),l&&(l.cancel(),l=null)}}}(e.sprite,this.map._transformRequest,function(e,n){if(r._spriteRequest=null,e)r.fire(new t.ErrorEvent(e));else if(n)for(var i in n)r.imageManager.addImage(i,n[i]);r.imageManager.setLoaded(!0),r.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=zt(this.stylesheet.layers);this._order=o.map(function(t){return t.id}),this._layers={};for(var a=0,u=o;a<u.length;a+=1){var s=u[a];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=r[n],o=this._layers[i];"custom"!==o.type&&e.push(o.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var u in this._updatedPaintProps)this._layers[u].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var l=0,c=this._order;l<c.length;l+=1){var f=c[l],h=this._layers[f];h.recalculate(e),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),Ce(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=zt(e.layers);var r=function(e,n){if(!e)return[{command:Rt.setStyle,args:[n]}];var r=[];try{if(!t.isEqual(e.version,n.version))return[{command:Rt.setStyle,args:[n]}];t.isEqual(e.center,n.center)||r.push({command:Rt.setCenter,args:[n.center]}),t.isEqual(e.zoom,n.zoom)||r.push({command:Rt.setZoom,args:[n.zoom]}),t.isEqual(e.bearing,n.bearing)||r.push({command:Rt.setBearing,args:[n.bearing]}),t.isEqual(e.pitch,n.pitch)||r.push({command:Rt.setPitch,args:[n.pitch]}),t.isEqual(e.sprite,n.sprite)||r.push({command:Rt.setSprite,args:[n.sprite]}),t.isEqual(e.glyphs,n.glyphs)||r.push({command:Rt.setGlyphs,args:[n.glyphs]}),t.isEqual(e.transition,n.transition)||r.push({command:Rt.setTransition,args:[n.transition]}),t.isEqual(e.light,n.light)||r.push({command:Rt.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Ft(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.isEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&Nt(e,n,o)?r.push({command:Rt.setGeoJSONSourceData,args:[o,n[o].data]}):Lt(o,n,r,i)):It(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(t){i[t.source]?r.push({command:Rt.removeLayer,args:[t.id]}):a.push(t)}),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,u,s,l,c,f=(e=e||[]).map(Ut),h=n.map(Ut),p=e.reduce(qt,{}),d=n.reduce(qt,{}),v=f.slice(),m=Object.create(null);for(i=0,o=0;i<f.length;i++)a=f[i],d.hasOwnProperty(a)?o++:(r.push({command:Rt.removeLayer,args:[a]}),v.splice(v.indexOf(a,o),1));for(i=0,o=0;i<h.length;i++)a=h[h.length-1-i],v[v.length-1-i]!==a&&(p.hasOwnProperty(a)?(r.push({command:Rt.removeLayer,args:[a]}),v.splice(v.lastIndexOf(a,v.length-o),1)):o++,l=v[v.length-i],r.push({command:Rt.addLayer,args:[d[a],l]}),v.splice(v.length-i,0,a),m[a]=!0);for(i=0;i<h.length;i++)if(u=p[a=h[i]],s=d[a],!m[a]&&!t.isEqual(u,s))if(t.isEqual(u.source,s.source)&&t.isEqual(u["source-layer"],s["source-layer"])&&t.isEqual(u.type,s.type)){for(c in Bt(u.layout,s.layout,r,a,null,Rt.setLayoutProperty),Bt(u.paint,s.paint,r,a,null,Rt.setPaintProperty),t.isEqual(u.filter,s.filter)||r.push({command:Rt.setFilter,args:[a,s.filter]}),t.isEqual(u.minzoom,s.minzoom)&&t.isEqual(u.maxzoom,s.maxzoom)||r.push({command:Rt.setLayerZoomRange,args:[a,s.minzoom,s.maxzoom]}),u)u.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Bt(u[c],s[c],r,a,c.slice(6),Rt.setPaintProperty):t.isEqual(u[c],s[c])||r.push({command:Rt.setLayerProperty,args:[a,c,s[c]]}));for(c in s)s.hasOwnProperty(c)&&!u.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Bt(u[c],s[c],r,a,c.slice(6),Rt.setPaintProperty):t.isEqual(u[c],s[c])||r.push({command:Rt.setLayerProperty,args:[a,c,s[c]]}))}else r.push({command:Rt.removeLayer,args:[a]}),l=v[v.lastIndexOf(a)+1],r.push({command:Rt.addLayer,args:[s,l]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Rt.setStyle,args:[n]}]}return r}(this.serialize(),e).filter(function(t){return!(t.command in je)});if(0===r.length)return!1;var i=r.filter(function(t){return!(t.command in Te)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0)||!this._validate(t.validateStyle.source,"sources."+e,n,null,r)){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Ot(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(Ce(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}})}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var u=this._removedLayers[i];delete this._removedLayers[i],u.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.isEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=t.clone(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.isEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.isEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r],a=parseInt(e.id,10);if(void 0!==o){var u=o.getSource().type;"geojson"===u&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==u||i?isNaN(a)||a<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):o.setFeatureState(i,a,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0,u=parseInt(e.id,10);"vector"!==o||a?e.id&&isNaN(u)||u<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):!n||e.id?i.removeFeatureState(a,u,n):this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n],o=parseInt(e.id,10);if(void 0!==i)if("vector"!==i.getSource().type||r){if(!(isNaN(o)||o<0))return i.getFeatureState(r,o);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;for(var u=0,s=t;u<s.length;u+=1){var l=s[u][a];if(l)for(var c=0,f=l;c<f.length;c+=1){var h=f[c];i.push(h)}}}}i.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var p=[],d=this._order.length-1;d>=0;d--){var v=this._order[d];if(n(v))for(var m=i.length-1;m>=0;m--){var y=i[m].feature;if(r[y.layer.id]<d)break;p.push(y),i.pop()}else for(var g=0,b=t;g<b.length;g+=1){var _=b[g][v];if(_)for(var x=0,w=_;x<w.length;x+=1){var k=w[x];p.push(k.feature)}}}return p},n.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var u=a[o],s=this._layers[u];if(!s)return this.fire(new t.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be queried for features."))),[];i[s.source]=!0}}var l=[];for(var c in this.sourceCaches)n.layers&&!i[c]||l.push(P(this.sourceCaches[c],this._layers,e,n,r));return this.placement&&l.push(function(t,e,n,r,i,o){for(var a={},u=i.queryRenderedSymbols(n),s=[],l=0,c=Object.keys(u).map(Number);l<c.length;l+=1){var f=c[l];s.push(o[f])}s.sort(z);for(var h=function(){var e=d[p],n=e.featureIndex.lookupSymbolFeatures(u[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,r.filter,r.layers,t);for(var i in n){var o=a[i]=a[i]||[],s=n[i];s.sort(function(t,n){var r=e.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(n.featureIndex)-i}return n.featureIndex-t.featureIndex});for(var l=0,c=s;l<c.length;l+=1){var f=c[l];o.push(f)}}},p=0,d=s;p<d.length;p+=1)h();var v=function(n){a[n].forEach(function(r){var i=r.feature,o=t[n],a=e[o.source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a})};for(var m in a)v(m);return a}(this._layers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],u=a.tileID.canonical.key;i[u]||(i[u]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},n.prototype.addSourceType=function(t,e,r){return n.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in e)if(!t.isEqual(e[o],r[o])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,r,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Ce(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.styleSpec},i)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,r,i){for(var o=!1,a=!1,u={},s=0,l=this._order;s<l.length;s+=1){var c=l[s],f=this._layers[c];if("symbol"===f.type){if(!u[f.source]){var h=this.sourceCaches[f.source];u[f.source]=h.getRenderableIds(!0).map(function(t){return h.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var p=this.crossTileSymbolIndex.addLayer(f,u[f.source],e.center.lng);o=o||p}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged||0===r;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now()))&&(this.pauseablePlacement=new ke(e,this._order,d,n,r,i),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var v=0,m=this._order;v<m.length;v+=1){var y=m[v],g=this._layers[y];"symbol"===g.type&&this.placement.updateLayerOpacities(g,u[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,r){return t.makeRequest(n,r)},n}(t.Evented);De.getSourceType=function(t){return T[t]},De.setSourceType=function(t,e){T[t]=e},De.registerForPluginAvailability=t.registerForPluginAvailability;var Pe=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),ze=un("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Re=un("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ie=un("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Fe=un("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Le=un("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ne=un("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Be=un("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ue=un("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=a_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),qe=un("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Ve=un("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),We=un("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),He=un("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Ge=un("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Xe=un("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ze=un("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}"),Ye=un("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}"),$e=un("uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor=texture2D(u_image,v_pos)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ke=un("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Je=un("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Qe=un("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),tn=un("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),en=un("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),nn=un("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),rn=un("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),on=un("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),an=un("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function un(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r={};return{fragmentSource:t=t.replace(n,function(t,e,n,i,o){return r[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),vertexSource:e=e.replace(n,function(t,e,n,i,o){var a="float"===i?"vec2":"vec4",u=o.match(/color/)?"color":a;return r[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===u?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+u+"(a_"+o+", a_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===u?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = unpack_mix_"+u+"(a_"+o+", a_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}}var sn=Object.freeze({prelude:ze,background:Re,backgroundPattern:Ie,circle:Fe,clippingMask:Le,heatmap:Ne,heatmapTexture:Be,collisionBox:Ue,collisionCircle:qe,debug:Ve,fill:We,fillOutline:He,fillOutlinePattern:Ge,fillPattern:Xe,fillExtrusion:Ze,fillExtrusionPattern:Ye,extrusionTexture:$e,hillshadePrepare:Ke,hillshade:Je,line:Qe,lineGradient:tn,linePattern:en,lineSDF:nn,raster:rn,symbolIcon:on,symbolSDF:an}),ln=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ln.prototype.bind=function(t,e,n,r,i,o,a,u){this.context=t;for(var s=this.boundPaintVertexBuffers.length!==r.length,l=0;!s&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(s=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||s||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==u;!t.extVertexArrayObject||c?this.freshBind(e,n,r,i,o,a,u):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),u&&u.bind())},ln.prototype.freshBind=function(t,e,n,r,i,o,a){var u,s=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),u=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{u=l.currentNumAttributes||0;for(var f=s;f<u;f++)c.disableVertexAttribArray(f)}e.enableAttributes(c,t);for(var h=0,p=n;h<p.length;h+=1)p[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,v=n;d<v.length;d+=1){var m=v[d];m.bind(),m.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),l.currentNumAttributes=s},ln.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var cn=function(e,n,r,i,o){var a=e.gl;this.program=a.createProgram();var u=r.defines().concat("#define DEVICE_PIXEL_RATIO "+t.browser.devicePixelRatio.toFixed(1));o&&u.push("#define OVERDRAW_INSPECTOR;");var s=u.concat(ze.fragmentSource,n.fragmentSource).join("\n"),l=u.concat(ze.vertexSource,n.vertexSource).join("\n"),c=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(c,s),a.compileShader(c),a.attachShader(this.program,c);var f=a.createShader(a.VERTEX_SHADER);a.shaderSource(f,l),a.compileShader(f),a.attachShader(this.program,f);for(var h=r.layoutAttributes||[],p=0;p<h.length;p++)a.bindAttribLocation(this.program,p,h[p].name);a.linkProgram(this.program),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},v=0;v<this.numAttributes;v++){var m=a.getActiveAttrib(this.program,v);m&&(this.attributes[m.name]=a.getAttribLocation(this.program,m.name))}for(var y=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),g=0;g<y;g++){var b=a.getActiveUniform(this.program,g);b&&(d[b.name]=a.getUniformLocation(this.program,b.name))}this.fixedUniforms=i(e,d),this.binderUniforms=r.getUniforms(e,d)};function fn(e,n,r){var i=1/ae(r,1,n.transform.tileZoom),o=Math.pow(2,r.tileID.overscaledZ),a=r.tileSize*Math.pow(2,n.transform.tileZoom)/o,u=a*(r.tileID.canonical.x+r.tileID.wrap*o),s=a*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[u>>16,s>>16],u_pixel_coord_lower:[65535&u,65535&s]}}cn.prototype.draw=function(t,e,n,r,i,o,a,u,s,l,c,f,h,p,d,v){var m,y=t.gl;for(var g in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[g].set(a[g]);p&&p.setUniforms(t,this.binderUniforms,f,{zoom:h});for(var b=(m={},m[y.LINES]=2,m[y.TRIANGLES]=3,m[y.LINE_STRIP]=1,m)[e],_=0,x=c.get();_<x.length;_+=1){var w=x[_],k=w.vaos||(w.vaos={});(k[u]||(k[u]=new ln)).bind(t,this,s,p?p.getPaintVertexBuffers():[],l,w.vertexOffset,d,v),y.drawElements(e,w.primitiveLength*b,y.UNSIGNED_SHORT,w.primitiveOffset*b*2)}};var hn=function(e,n,r){var i=n.style.light,o=i.properties.get("position"),a=[o.x,o.y,o.z],u=t.create();"viewport"===i.properties.get("anchor")&&t.fromRotation(u,-n.transform.angle),t.transformMat3(a,a,u);var s=i.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[s.r,s.g,s.b],u_vertical_gradient:+r}},pn=function(e,n,r,i,o,a){return t.extend(hn(e,n,r),fn(o,n,a),{u_height_factor:-Math.pow(2,i.overscaledZ)/a.tileSize/8})},dn=function(e,n,r){var i=t.create$1();t.ortho(i,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:r,u_opacity:n}},vn=function(t){return{u_matrix:t}},mn=function(e,n,r,i){return t.extend(vn(e),fn(r,n,i))},yn=function(t,e){return{u_matrix:t,u_world:e}},gn=function(e,n,r,i,o){return t.extend(mn(e,n,r,i),{u_world:o})},bn=function(t,e,n,r){var i,o,a=t.transform;if("map"===r.paint.get("circle-pitch-alignment")){var u=ae(n,1,a.zoom);i=!0,o=[u,u]}else i=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_extrude_scale:o}},_n=function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},xn=function(t,e,n){var r=ae(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},wn=function(t,e){return{u_matrix:t,u_color:e}},kn=function(t){return{u_matrix:t}},En=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:ae(e,1,n),u_intensity:r}},Sn=function(t,e,n){var r=n.paint.get("hillshade-shadow-color"),i=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var u=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),u),u_image:0,u_latrange:An(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:i,u_accent:o}},On=function(e,n){var r=e.dem.stride,i=t.create$1();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.tileID.overscaledZ,u_maxzoom:n}};function An(e,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}var Mn=function(t,e,n){var r=t.transform;return{u_matrix:Pn(t,e,n),u_ratio:1/ae(e,1,r.zoom),u_gl_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Cn=function(e,n,r){return t.extend(Mn(e,n,r),{u_image:0})},Tn=function(e,n,r,i){var o=e.transform,a=Dn(n,o);return{u_matrix:Pn(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/ae(n,1,o.zoom),u_image:0,u_scale:[t.browser.devicePixelRatio,a,i.fromScale,i.toScale],u_fade:i.t,u_gl_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},jn=function(e,n,r,i,o){var a=e.transform,u=e.lineAtlas,s=Dn(n,a),l="round"===r.layout.get("line-cap"),c=u.getDash(i.from,l),f=u.getDash(i.to,l),h=c.width*o.fromScale,p=f.width*o.toScale;return t.extend(Mn(e,n,r),{u_patternscale_a:[s/h,-c.height/2],u_patternscale_b:[s/p,-f.height/2],u_sdfgamma:u.width/(256*Math.min(h,p)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:f.y,u_mix:o.t})};function Dn(t,e){return 1/ae(t,1,e.tileZoom)}function Pn(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var zn=function(t,e,n,r,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Rn(i.paint.get("raster-hue-rotate"))};var o,a};function Rn(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var In=function(t,e,n,r,i,o,a,u,s,l){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_gl_coord_matrix:u,u_is_text:+s,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},Fn=function(e,n,r,i,o,a,u,s,l,c,f){var h=o.transform;return t.extend(In(e,n,r,i,o,a,u,s,l,c),{u_gamma_scale:i?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_is_halo:+f})},Ln=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Nn=function(e,n,r,i,o,a){return t.extend(function(t,e,n,r){var i=n.imageManager.getPattern(t.from),o=n.imageManager.getPattern(t.to),a=n.imageManager.getPixelSize(),u=a.width,s=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,f=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[u,s],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/ae(r,1,n.transform.tileZoom),u_pixel_coord_upper:[f>>16,h>>16],u_pixel_coord_lower:[65535&f,65535&h]}}(i,a,r,o),{u_matrix:e,u_opacity:n})},Bn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},extrusionTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:_n,collisionCircle:_n,debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_maxzoom:new t.Uniform1f(e,n.u_maxzoom)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_image:new t.Uniform1i(e,n.u_image),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_is_halo:new t.Uniform1f(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function Un(e,n){for(var r=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),i=0;i<r.length;i++){var o={},a=r[i],u=r.slice(i+1);qn(a.tileID.wrapped(),a.tileID,u,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,n)}}function qn(e,n,r,i,o){for(var a=0;a<r.length;a++){var u=r[a];if(i.isLessThan(u.tileID))break;if(n.key===u.tileID.key)return;if(u.tileID.isChildOf(n)){for(var s=n.children(1/0),l=0;l<s.length;l++)qn(e,s[l],r.slice(a),i,o);return}}var c=n.overscaledZ-e.overscaledZ,f=new t.CanonicalTileID(c,n.canonical.x-(e.canonical.x<<c),n.canonical.y-(e.canonical.y<<c));o[f.key]=o[f.key]||f}function Vn(t,e,n,r,i){for(var o=t.context,a=o.gl,u=i?t.useProgram("collisionCircle"):t.useProgram("collisionBox"),s=0;s<r.length;s++){var l=r[s],c=e.getTile(l),f=c.getBucket(n);if(f){var h=i?f.collisionCircle:f.collisionBox;h&&u.draw(o,i?a.TRIANGLES:a.LINES,xt.disabled,wt.disabled,t.colorModeForRenderPass(),Et.disabled,xn(l.posMatrix,t.transform,c),n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,null,t.transform.zoom,null,null,h.collisionVertexBuffer)}}}var Wn=t.identity(new Float32Array(16)),Hn=t.properties.layout;function Gn(e,n,r,i,o,a,u,s,l,c,f,h){for(var p,d,v=e.context,m=v.gl,y=e.transform,g="map"===s,b="map"===l,_=g&&"point"!==r.layout.get("symbol-placement"),x=g&&!b&&!_,w=void 0!==r.layout.get("symbol-sort-key").constantOr(1),k=e.depthModeForSublayer(0,xt.ReadOnly),E=[],S=0,O=i;S<O.length;S+=1){var A=O[S],M=n.getTile(A),C=M.getBucket(r);if(C){var T=o?C.text:C.icon;if(T&&T.segments.get().length){var j=T.programConfigurations.get(r.id),D=o||C.sdfIcons,P=o?C.textSizeData:C.iconSizeData;p||(p=e.useProgram(D?"symbolSDF":"symbolIcon",j),d=t.evaluateSizeForZoom(P,y.zoom,Hn.properties[o?"text-size":"icon-size"])),v.activeTexture.set(m.TEXTURE0);var z=void 0,R=void 0,I=void 0;if(o)R=M.glyphAtlasTexture,I=m.LINEAR,z=M.glyphAtlasTexture.size;else{var F=1!==r.layout.get("icon-size").constantOr(0)||C.iconsNeedLinear,L=b||0!==y.pitch;R=M.imageAtlasTexture,I=D||e.options.rotating||e.options.zooming||F||L?m.LINEAR:m.NEAREST,z=M.imageAtlasTexture.size}var N=ae(M,1,e.transform.zoom),B=Ht(A.posMatrix,b,g,e.transform,N),U=Gt(A.posMatrix,b,g,e.transform,N);_&&Yt(C,A.posMatrix,e,o,B,U,b,c);var q=e.translatePosMatrix(A.posMatrix,M,a,u),V=_?Wn:B,W=e.translatePosMatrix(U,M,a,u,!0),H=D&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),G={program:p,buffers:T,uniformValues:D?Fn(P.functionType,d,x,b,e,q,V,W,o,z,!0):In(P.functionType,d,x,b,e,q,V,W,o,z),atlasTexture:R,atlasInterpolation:I,isSDF:D,hasHalo:H};if(w)for(var X=0,Z=T.segments.get();X<Z.length;X+=1){var Y=Z[X];E.push({segments:new t.SegmentVector([Y]),sortKey:Y.sortKey,state:G})}else E.push({segments:T.segments,sortKey:0,state:G})}}}w&&E.sort(function(t,e){return t.sortKey-e.sortKey});for(var $=0,K=E;$<K.length;$+=1){var J=K[$],Q=J.state;if(Q.atlasTexture.bind(Q.atlasInterpolation,m.CLAMP_TO_EDGE),Q.isSDF){var tt=Q.uniformValues;Q.hasHalo&&(tt.u_is_halo=1,Xn(Q.buffers,J.segments,r,e,Q.program,k,f,h,tt)),tt.u_is_halo=0}Xn(Q.buffers,J.segments,r,e,Q.program,k,f,h,Q.uniformValues)}}function Xn(t,e,n,r,i,o,a,u,s){var l=r.context,c=l.gl;i.draw(l,c.TRIANGLES,o,a,u,Et.disabled,s,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Zn(t,e,n,r,i,o,a){var u,s,l,c,f,h=t.context.gl,p=n.paint.get("fill-pattern"),d=p&&p.constantOr(1),v=n.getCrossfadeParameters();a?(s=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",u=h.LINES):(s=d?"fillPattern":"fill",u=h.TRIANGLES);for(var m=0,y=r;m<y.length;m+=1){var g=y[m],b=e.getTile(g);if(!d||b.patternsLoaded()){var _=b.getBucket(n);if(_){var x=_.programConfigurations.get(n.id),w=t.useProgram(s,x);d&&(t.context.activeTexture.set(h.TEXTURE0),b.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),x.updatePatternPaintBuffers(v));var k=p.constantOr(null);if(k&&b.imageAtlas){var E=b.imageAtlas.patternPositions[k.to],S=b.imageAtlas.patternPositions[k.from];E&&S&&x.setConstantPatternPositions(E,S)}var O=t.translatePosMatrix(g.posMatrix,b,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=_.indexBuffer2,f=_.segments2;var A=[h.drawingBufferWidth,h.drawingBufferHeight];l="fillOutlinePattern"===s&&d?gn(O,t,v,b,A):yn(O,A)}else c=_.indexBuffer,f=_.segments,l=d?mn(O,t,v,b):vn(O);w.draw(t.context,u,i,t.stencilModeForClipping(g),o,Et.disabled,l,n.id,_.layoutVertexBuffer,c,f,n.paint,t.transform.zoom,x)}}}}function Yn(e,n){var r=e.context,i=r.gl,o=n.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!o){var a=new t.Texture(r,{width:e.width,height:e.height,data:null},i.RGBA);a.bind(i.LINEAR,i.CLAMP_TO_EDGE),(o=n.viewportFrame=r.createFramebuffer(e.width,e.height)).colorAttachment.set(a.texture)}r.bindFramebuffer.set(o.framebuffer),o.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(r.clear({depth:1}),e.depthRboNeedsClear=!1),r.clear({color:t.Color.transparent}),r.setStencilMode(wt.disabled),r.setDepthMode(new xt(i.LEQUAL,xt.ReadWrite,[0,1])),r.setColorMode(e.colorModeForRenderPass())}function $n(t,e,n){var r=e.viewportFrame;if(r){var i=t.context,o=i.gl;i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),t.useProgram("extrusionTexture").draw(i,o.TRIANGLES,xt.disabled,wt.disabled,t.colorModeForRenderPass(),Et.disabled,dn(t,n,0),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}function Kn(t,e,n,r,i,o){var a=t.context,u=a.gl,s=e.fbo;if(s){var l=t.useProgram("hillshade");a.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,s.colorAttachment.get());var c=Sn(t,e,n);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?l.draw(a,u.TRIANGLES,r,i,o,Et.disabled,c,n.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):l.draw(a,u.TRIANGLES,r,i,o,Et.disabled,c,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function Jn(e,n,r,i,o,a,u){var s=e.context,l=s.gl;if(n.dem&&n.dem.data){var c=n.dem.dim,f=n.dem.stride,h=n.dem.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(f),n.demTexture){var p=n.demTexture;p.update(h,{premultiply:!1}),p.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(s,h,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);var d=n.fbo;if(!d){var v=new t.Texture(s,{width:c,height:c,data:null},l.RGBA);v.bind(l.LINEAR,l.CLAMP_TO_EDGE),(d=n.fbo=s.createFramebuffer(c,c)).colorAttachment.set(v.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,o,a,u,Et.disabled,On(n,i),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Qn(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var u=t.browser.now(),s=(u-e.timeAdded)/a,l=n?(u-n.timeAdded)/a:-1,c=r.getSource(),f=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-f)>Math.abs(e.tileID.overscaledZ-f),p=h&&e.refreshedUponExpiration?1:t.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}function tr(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,u=e.useProgram("debug"),s=xt.disabled,l=wt.disabled,c=e.colorModeForRenderPass(),f="$debug";u.draw(i,o.LINE_STRIP,s,l,c,Et.disabled,wn(a,t.Color.red),f,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var h=function(t,e,n,r){r=r||1;var i,o,a,u,s,l,c,f,h=[];for(i=0,o=t.length;i<o;i++)if(s=er[t[i]]){for(f=null,a=0,u=s[1].length;a<u;a+=2)-1===s[1][a]&&-1===s[1][a+1]?f=null:(l=e+s[1][a]*r,c=200-s[1][a+1]*r,f&&h.push(f.x,f.y,l,c),f={x:l,y:c});e+=s[0]*r}return h}(r.toString(),50,0,5),p=new t.StructArrayLayout2i4,d=new t.StructArrayLayout2ui4,v=0;v<h.length;v+=2)p.emplaceBack(h[v],h[v+1]),d.emplaceBack(v,v+1);for(var m=i.createVertexBuffer(p,Pe.members),y=i.createIndexBuffer(d),g=t.SegmentVector.simpleSegment(0,0,p.length/2,p.length/2),b=n.getTile(r).tileSize,_=t.EXTENT/(Math.pow(2,e.transform.zoom-r.overscaledZ)*b),x=[[-1,-1],[-1,1],[1,-1],[1,1]],w=0;w<x.length;w++){var k=x[w];u.draw(i,o.LINES,s,l,c,Et.disabled,wn(t.translate([],a,[_*k[0],_*k[1],0]),t.Color.white),f,m,y,g)}u.draw(i,o.LINES,s,l,c,Et.disabled,wn(a,t.Color.black),f,m,y,g)}var er={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},nr={symbol:function(t,e,n,r){if("translucent"===t.renderPass){var i=wt.disabled,o=t.colorModeForRenderPass();0!==n.paint.get("icon-opacity").constantOr(1)&&Gn(t,e,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),i,o),0!==n.paint.get("text-opacity").constantOr(1)&&Gn(t,e,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),i,o),e.map.showCollisionBoxes&&function(t,e,n,r){Vn(t,e,n,r,!1),Vn(t,e,n,r,!0)}(t,e,n,r)}},circle:function(t,e,n,r){if("translucent"===t.renderPass){var i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1))for(var u=t.context,s=u.gl,l=t.depthModeForSublayer(0,xt.ReadOnly),c=wt.disabled,f=t.colorModeForRenderPass(),h=0;h<r.length;h++){var p=r[h],d=e.getTile(p),v=d.getBucket(n);if(v){var m=v.programConfigurations.get(n.id);t.useProgram("circle",m).draw(u,s.TRIANGLES,l,c,f,Et.disabled,bn(t,p,d,n),n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,n.paint,t.transform.zoom,m)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,u=e.depthModeForSublayer(0,xt.ReadOnly),s=wt.disabled,l=new kt([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,n,r,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,n,r,i))}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(var c=0;c<i.length;c++){var f=i[c];if(!n.hasRenderableParent(f)){var h=n.getTile(f),p=h.getBucket(r);if(p){var d=p.programConfigurations.get(r.id),v=e.useProgram("heatmap",d),m=e.transform.zoom;v.draw(o,a.TRIANGLES,u,s,l,Et.disabled,En(f.posMatrix,h,m,r.paint.get("heatmap-intensity")),r.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,r.paint,e.transform.zoom,d)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,xt.disabled,wt.disabled,e.colorModeForRenderPass(),Et.disabled,function(e,n,r,i){var o=t.create$1();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:r,u_color_ramp:i,u_opacity:n.paint.get("heatmap-opacity")}}(e,n,0,1),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var u=e.depthModeForSublayer(0,xt.ReadOnly),s=e.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),f=c.constantOr(1),h=r.paint.get("line-gradient"),p=r.getCrossfadeParameters(),d=l?"lineSDF":f?"linePattern":h?"lineGradient":"line",v=e.context,m=v.gl,y=!0;if(h){v.activeTexture.set(m.TEXTURE0);var g=r.gradientTexture;if(!r.gradient)return;g||(g=r.gradientTexture=new t.Texture(v,r.gradient,m.RGBA)),g.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var b=0,_=i;b<_.length;b+=1){var x=_[b],w=n.getTile(x);if(!f||w.patternsLoaded()){var k=w.getBucket(r);if(k){var E=k.programConfigurations.get(r.id),S=e.context.program.get(),O=e.useProgram(d,E),A=y||O.program!==S,M=c.constantOr(null);if(M&&w.imageAtlas){var C=w.imageAtlas.patternPositions[M.to],T=w.imageAtlas.patternPositions[M.from];C&&T&&E.setConstantPatternPositions(C,T)}var j=l?jn(e,w,r,l,p):f?Tn(e,w,r,p):h?Cn(e,w,r):Mn(e,w,r);l&&(A||e.lineAtlas.dirty)?(v.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(v)):f&&(v.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.updatePatternPaintBuffers(p)),O.draw(v,m.TRIANGLES,u,e.stencilModeForClipping(x),s,Et.disabled,j,r.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,r.paint,e.transform.zoom,E),y=!1}}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var u=e.colorModeForRenderPass(),s=r.paint.get("fill-pattern").constantOr(1)||1!==o.constantOr(t.Color.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";if(e.renderPass===s){var l=e.depthModeForSublayer(1,"opaque"===e.renderPass?xt.ReadWrite:xt.ReadOnly);Zn(e,n,r,i,l,u,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var c=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,xt.ReadOnly);Zn(e,n,r,i,c,u,!0)}}},"fill-extrusion":function(t,e,n,r){if(0!==n.paint.get("fill-extrusion-opacity"))if("offscreen"===t.renderPass){Yn(t,n);var i=new xt(t.context.gl.LEQUAL,xt.ReadWrite,[0,1]),o=wt.disabled,a=t.colorModeForRenderPass();!function(t,e,n,r,i,o,a){for(var u=t.context,s=u.gl,l=n.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),f=n.getCrossfadeParameters(),h=0,p=r;h<p.length;h+=1){var d=p[h],v=e.getTile(d),m=v.getBucket(n);if(m){var y=m.programConfigurations.get(n.id),g=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(t.context.activeTexture.set(s.TEXTURE0),v.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),y.updatePatternPaintBuffers(f));var b=l.constantOr(null);if(b&&v.imageAtlas){var _=v.imageAtlas.patternPositions[b.to],x=v.imageAtlas.patternPositions[b.from];_&&x&&y.setConstantPatternPositions(_,x)}var w=t.translatePosMatrix(d.posMatrix,v,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),k=n.paint.get("fill-extrusion-vertical-gradient"),E=c?pn(w,t,k,d,f,v):hn(w,t,k);g.draw(u,u.gl.TRIANGLES,i,o,a,Et.backCCW,E,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,t.transform.zoom,y)}}}(t,e,n,r,i,o,a)}else"translucent"===t.renderPass&&$n(t,n,n.paint.get("fill-extrusion-opacity"))},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,xt.ReadOnly),u=wt.disabled,s=t.colorModeForRenderPass(),l=0,c=r;l<c.length;l+=1){var f=c[l],h=e.getTile(f);h.needsHillshadePrepare&&"offscreen"===t.renderPass?Jn(t,h,n,o,a,u,s):"translucent"===t.renderPass&&Kn(t,h,n,a,u,s)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity"))for(var i=t.context,o=i.gl,a=e.getSource(),u=t.useProgram("raster"),s=wt.disabled,l=t.colorModeForRenderPass(),c=r.length&&r[0].overscaledZ,f=!t.options.moving,h=0,p=r;h<p.length;h+=1){var d=p[h],v=t.depthModeForSublayer(d.overscaledZ-c,1===n.paint.get("raster-opacity")?xt.ReadWrite:xt.ReadOnly,o.LESS),m=e.getTile(d),y=t.transform.calculatePosMatrix(d.toUnwrapped(),f);m.registerFadeDuration(n.paint.get("raster-fade-duration"));var g=e.findLoadedParent(d,0),b=Qn(m,g,e,n,t.transform),_=void 0,x=void 0,w="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),m.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),g?(g.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),_=Math.pow(2,g.tileID.overscaledZ-m.tileID.overscaledZ),x=[m.tileID.canonical.x*_%1,m.tileID.canonical.y*_%1]):m.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var k=zn(y,x||[0,0],_||1,b,n);a instanceof C?u.draw(i,o.TRIANGLES,v,s,l,Et.disabled,k,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?u.draw(i,o.TRIANGLES,v,s,l,Et.disabled,k,n.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,n.paint,t.transform.zoom):u.draw(i,o.TRIANGLES,v,s,l,Et.disabled,k,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,u=t.transform,s=u.tileSize,l=n.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=l||1!==r.a||1!==i?"translucent":"opaque";if(t.renderPass===c){var f=wt.disabled,h=t.depthModeForSublayer(0,"opaque"===c?xt.ReadWrite:xt.ReadOnly),p=t.colorModeForRenderPass(),d=t.useProgram(l?"backgroundPattern":"background"),v=u.coveringTiles({tileSize:s});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var m=n.getCrossfadeParameters(),y=0,g=v;y<g.length;y+=1){var b=g[y],_=t.transform.calculatePosMatrix(b.toUnwrapped()),x=l?Nn(_,i,t,l,{tileID:b,tileSize:s},m):Ln(_,i,r);d.draw(o,a.TRIANGLES,h,f,p,Et.disabled,x,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)tr(t,e,n[r])},custom:function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),o.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState()),"3d"===i.renderingMode&&(t.setCustomLayerDefaults(),Yn(t,n),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass)if("3d"===i.renderingMode)$n(t,n,1);else{t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(wt.disabled);var a=t.depthModeForSublayer(0,xt.ReadOnly);r.setDepthMode(a),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},rr=function(e,n){this.context=new St(e),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Ot.maxUnderzooming+Ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new Me};function ir(t,e){if(t.y>e.y){var n=t;t=e,e=n}return{x0:t.x,y0:t.y,x1:e.x,y1:e.y,dx:e.x-t.x,dy:e.y-t.y}}function or(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var u=t;t=e,e=u}for(var s=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,f=e.dx<0,h=o;h<a;h++){var p=s*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,h+f-e.y0))+e.x0;i(Math.floor(d),Math.ceil(p),h)}}function ar(t,e,n,r,i,o){var a,u=ir(t,e),s=ir(e,n),l=ir(n,t);u.dy>s.dy&&(a=u,u=s,s=a),u.dy>l.dy&&(a=u,u=l,l=a),s.dy>l.dy&&(a=s,s=l,l=a),u.dy&&or(l,u,r,i,o),s.dy&&or(l,s,r,i,o)}rr.prototype.resize=function(e,n){var r=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1){var a=o[i];this.style._layers[a].resize()}this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},rr.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,Pe.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,Pe.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Pe.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var u=new t.StructArrayLayout3ui6;u.emplaceBack(0,1,2),u.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(u);var s=this.context.gl;this.stencilClearMode=new wt({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)},rr.prototype.clearStencil=function(){var e=this.context,n=e.gl,r=t.create$1();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,xt.disabled,this.stencilClearMode,kt.disabled,Et.disabled,kn(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},rr.prototype._renderTileClippingMasks=function(t){var e=this.context,n=e.gl;e.setColorMode(kt.disabled),e.setDepthMode(xt.disabled);var r=this.useProgram("clippingMask"),i=1;this._tileClippingMaskIDs={};for(var o=0,a=t;o<a.length;o+=1){var u=a[o],s=this._tileClippingMaskIDs[u.key]=i++;r.draw(e,n.TRIANGLES,xt.disabled,new wt({func:n.ALWAYS,mask:0},s,255,n.KEEP,n.KEEP,n.REPLACE),kt.disabled,Et.disabled,kn(u.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},rr.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new wt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},rr.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new kt([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?kt.unblended:kt.alphaBlended},rr.prototype.depthModeForSublayer=function(t,e,n){var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new xt(n||this.context.gl.LEQUAL,e,[r,r])},rr.prototype.render=function(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now());var r=this.style._order,i=this.style.sourceCaches;for(var o in i){var a=i[o];a.used&&a.prepare(this.context)}var u,s={},l={},c={};for(var f in i){var h=i[f];s[f]=h.getVisibleCoordinates(),l[f]=s[f].slice().reverse(),c[f]=h.getVisibleCoordinates(!0).reverse()}for(var p in i){var d=i[p],v=d.getSource();if("raster"===v.type||"raster-dem"===v.type){for(var m=[],y=0,g=s[p];y<g.length;y+=1){var b=g[y];m.push(d.getTile(b))}Un(m,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var _=0,x=r;_<x.length;_+=1){var w=x[_],k=this.style._layers[w];if(k.hasOffscreenPass()&&!k.isHidden(this.transform.zoom)){var E=l[k.source];("custom"===k.type||E.length)&&this.renderLayer(this,i[k.source],k,E)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var S=this.style._layers[r[this.currentLayer]],O=i[S.source],A=s[S.source];S.source!==u&&O&&(this.clearStencil(),O.getSource().isTileClipped&&this._renderTileClippingMasks(A)),this.renderLayer(this,O,S,A),u=S.source}for(this.renderPass="translucent",this.currentLayer=0,u=null;this.currentLayer<r.length;this.currentLayer++){var M=this.style._layers[r[this.currentLayer]],C=i[M.source],T=("symbol"===M.type?c:l)[M.source];M.source!==u&&C&&(this.clearStencil(),C.getSource().isTileClipped&&this._renderTileClippingMasks(s[M.source])),this.renderLayer(this,C,M,T),u=M.source}if(this.options.showTileBoundaries)for(var j in i){nr.debug(this,i[j],s[j]);break}this.setCustomLayerDefaults()},rr.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},rr.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,nr[n.type](t,e,n,r))},rr.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var u=Math.sin(a),s=Math.cos(a);r=[r[0]*s-r[1]*u,r[0]*u+r[1]*s]}var l=[o?r[0]:ae(n,r[0],this.transform.zoom),o?r[1]:ae(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,l),c},rr.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},rr.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},rr.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from),n=this.imageManager.getPattern(t.to);return!e||!n},rr.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new cn(this.context,sn[t],e,Bn[t],this._showOverdrawInspector)),this.cache[n]},rr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},rr.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var ur=function(e,n,r){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===r||r,this._minZoom=e||0,this._maxZoom=n||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},sr={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ur.prototype.clone=function(){var t=new ur(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},sr.minZoom.get=function(){return this._minZoom},sr.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},sr.maxZoom.get=function(){return this._maxZoom},sr.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},sr.renderWorldCopies.get=function(){return this._renderWorldCopies},sr.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},sr.worldSize.get=function(){return this.tileSize*this.scale},sr.centerPoint.get=function(){return this.size._div(2)},sr.size.get=function(){return new t.Point(this.width,this.height)},sr.bearing.get=function(){return-this.angle/Math.PI*180},sr.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},sr.pitch.get=function(){return this._pitch/Math.PI*180},sr.pitch.set=function(e){var n=t.clamp(e,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},sr.fov.get=function(){return this._fov/Math.PI*180},sr.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},sr.zoom.get=function(){return this._zoom},sr.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},sr.center.get=function(){return this._center},sr.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},ur.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},ur.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),u=Math.floor(Math.min(r.x,i.x,o.x,a.x)),s=Math.floor(Math.max(r.x,i.x,o.x,a.x)),l=u-1;l<=s+1;l++)0!==l&&n.push(new t.UnwrappedTileID(l,e));return n},ur.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=new t.Point(o*i.x-.5,o*i.y-.5);return function(e,n,r,i){void 0===i&&(i=!0);var o=1<<e,a={};function u(n,u,s){var l,c,f,h;if(s>=0&&s<=o)for(l=n;l<u;l++)c=Math.floor(l/o),f=(l%o+o)%o,0!==c&&!0!==i||(h=new t.OverscaledTileID(r,c,e,f,s),a[h.key]=h)}var s=n.map(function(e){return new t.Point(e.x,e.y)._mult(o)});return ar(s[0],s[1],s[2],0,o,u),ar(s[2],s[3],s[0],0,o,u),Object.keys(a).map(function(t){return a[t]})}(n,[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))],e.reparseOverscaled?r:n,this._renderWorldCopies).sort(function(t,e){return a.dist(t.canonical)-a.dist(e.canonical)})},ur.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},sr.unmodified.get=function(){return this._unmodified},ur.prototype.zoomScale=function(t){return Math.pow(2,t)},ur.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},ur.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},ur.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},sr.point.get=function(){return this.project(this.center)},ur.prototype.setLocationAtPoint=function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},ur.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},ur.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},ur.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},ur.prototype.coordinateLocation=function(t){return t.toLngLat()},ur.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[0]/i,u=r[0]/o,s=n[1]/i,l=r[1]/o,c=n[2]/i,f=r[2]/o,h=c===f?0:(0-c)/(f-c);return new t.MercatorCoordinate(t.number(a,u,h)/this.worldSize,t.number(s,l,h)/this.worldSize)},ur.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},ur.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},ur.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ur.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ur.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),u=o.x+Math.pow(2,o.z)*e.wrap,s=t.identity(new Float64Array(16));return t.translate(s,s,[u*a,o.y*a,0]),t.scale(s,s,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(s,n?this.alignedProjMatrix:this.projMatrix,s),i[r]=new Float32Array(s),i[r]},ur.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ur.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,u=-180,s=180,l=this.size,c=this._unmodified;if(this.latRange){var f=this.latRange;o=t.mercatorYfromLat(f[1])*this.worldSize,e=(a=t.mercatorYfromLat(f[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var h=this.lngRange;u=t.mercatorXfromLng(h[0])*this.worldSize,n=(s=t.mercatorXfromLng(h[1])*this.worldSize)-u<l.x?l.x/(s-u):0}var p=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.Point(n?(s+u)/2:p.x,e?(a+o)/2:p.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var v=p.y,m=l.y/2;v-m<o&&(i=o+m),v+m>a&&(i=a-m)}if(this.lngRange){var y=p.x,g=l.x/2;y-g<u&&(r=u+g),y+g>s&&(r=s-g)}void 0===r&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==r?r:p.x,void 0!==i?i:p.y))),this._unmodified=c,this._constraining=!1}},ur.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,n=Math.PI/2+this._pitch,r=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-n-e),i=this.point,o=i.x,a=i.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),s=new Float64Array(16);t.perspective(s,this._fov,this.width/this.height,1,u),t.scale(s,s,[1,-1,1]),t.translate(s,s,[0,0,-this.cameraToCenterDistance]),t.rotateX(s,s,this._pitch),t.rotateZ(s,s,this.angle),t.translate(s,s,[-o,-a,0]),this.mercatorMatrix=t.scale([],s,[this.worldSize,this.worldSize,this.worldSize]),t.scale(s,s,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=s;var l=this.width%2/2,c=this.height%2/2,f=Math.cos(this.angle),h=Math.sin(this.angle),p=o-Math.round(o)+f*l+h*c,d=a-Math.round(a)+f*c+h*l,v=new Float64Array(s);if(t.translate(v,v,[p>.5?p-1:p,d>.5?d-1:d,0]),this.alignedProjMatrix=v,s=t.create$1(),t.scale(s,s,[this.width/2,-this.height/2,1]),t.translate(s,s,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),s,this.projMatrix),!(s=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ur.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},ur.prototype.getCameraPoint=function(){var e=this._pitch,n=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,n))},ur.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var r=n.x,i=n.y,o=n.x,a=n.y,u=0,s=e;u<s.length;u+=1){var l=s[u];r=Math.min(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}return[new t.Point(r,i),new t.Point(o,i),new t.Point(o,a),new t.Point(r,a),new t.Point(r,i)]},Object.defineProperties(ur.prototype,sr);var lr=function(){var e,n,r,i;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),n=!1,r=0,i=function(){r=0,n&&(e(),r=setTimeout(i,300),n=!1)},function(){return n=!0,r||i(),r})};lr.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},lr.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},lr.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,u=this._map.getBearing(),s=this._map.getPitch(),l="";return l+=t?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(u||s)&&(l+="/"+Math.round(10*u)/10),s&&(l+="/"+Math.round(s)),l},lr.prototype._onHashChange=function(){var e=t.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},lr.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var cr=function(e){function r(r,i,o,a){void 0===a&&(a={});var u=n.mousePos(i.getCanvasContainer(),o),s=i.unproject(u);e.call(this,r,t.extend({point:u,lngLat:s,originalEvent:o},a)),this._defaultPrevented=!1,this.target=i}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),fr=function(e){function r(r,i,o){var a=n.touchPos(i.getCanvasContainer(),o),u=a.map(function(t){return i.unproject(t)}),s=a.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new t.Point(0,0)),l=i.unproject(s);e.call(this,r,{points:a,point:s,lngLats:u,lngLat:l,originalEvent:o}),this._defaultPrevented=!1}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),hr=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),pr=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};pr.prototype.isEnabled=function(){return!!this._enabled},pr.prototype.isActive=function(){return!!this._active},pr.prototype.isZooming=function(){return!!this._zooming},pr.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},pr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},pr.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},pr.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},pr.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var r=n.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},pr.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,u=this._startZoom,s=this._easing,l=!1;if("wheel"===this._type&&u&&s){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),f=s(c);n.zoom=t.number(u,a,f),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else n.zoom=a,l=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},pr.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,u=Math.sqrt(.0729-a*a);n=t.bezier(a,u,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n};var dr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};dr.prototype.isEnabled=function(){return!!this._enabled},dr.prototype.isActive=function(){return!!this._active},dr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},dr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},dr.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),n.disableDrag(),this._startPos=this._lastPos=n.mousePos(this._el,e),this._active=!0)},dr.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=e,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(r.x,e.x),o=Math.max(r.x,e.x),a=Math.min(r.y,e.y),u=Math.max(r.y,e.y);n.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=u-a+"px"}},dr.prototype._onMouseUp=function(e){if(0===e.button){var r=this._startPos,i=n.mousePos(this._el,e);this._finish(),n.suppressClick(),r.x===i.x&&r.y===i.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},dr.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},dr.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},dr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var vr=t.bezier(0,0,.25,1),mr=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};mr.prototype.isEnabled=function(){return"disabled"!==this._state},mr.prototype.isActive=function(){return"active"===this._state},mr.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},mr.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},mr.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=n.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==n.mouseButton(e))return;this._eventButton=0}n.disableDrag(),t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=n.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},mr.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},mr.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,r=this._startPos,i=this._lastPos,o=.8*(r.x-i.x),a=-.5*(r.y-i.y),u=n.bearing-o,s=n.pitch-a,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([t.browser.now(),this._map._normalizeBearing(u,c[1])]),n.bearing=u,this._pitchWithRotate&&(this._fireEvent("pitch",e),n.pitch=s),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},mr.prototype._onMouseUp=function(t){if(n.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},mr.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},mr.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),n.enableDrag()},mr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},mr.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)o();else{var a=i[0],u=i[i.length-1],s=i[i.length-2],l=n._normalizeBearing(r,s[1]),c=u[1]-a[1],f=c<0?-1:1,h=(u[0]-a[0])/1e3;if(0!==c&&0!==h){var p=Math.abs(c*(.25/h));p>180&&(p=180);var d=p/180;l+=f*p*(d/2),Math.abs(n._normalizeBearing(l,0))<this._bearingSnap&&(l=n._normalizeBearing(0,l)),n.rotateTo(l,{duration:1e3*d,easing:vr,noMoveStart:!0},{originalEvent:t})}else o()}},mr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},mr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var yr=t.bezier(0,0,.3,1),gr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};gr.prototype.isEnabled=function(){return"disabled"!==this._state},gr.prototype.isActive=function(){return"active"===this._state},gr.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},gr.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},gr.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==n.mouseButton(e)||(n.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},gr.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(n.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},gr.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=n.mousePos(this._el,e),this._inertia=[[t.browser.now(),this._startPos]]},gr.prototype._onMove=function(e){e.preventDefault();var r=n.mousePos(this._el,e);this._lastPos.equals(r)||"pending"===this._state&&r.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=r,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},gr.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},gr.prototype._onMouseUp=function(t){if(0===n.mouseButton(t))switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},gr.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},gr.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},gr.prototype._unbind=function(){n.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onTouchEnd),n.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.removeEventListener(t.window.document,"mouseup",this._onMouseUp),n.removeEventListener(t.window,"blur",this._onBlur)},gr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},gr.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],r=e[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",t);else{var a=i.mult(.3/o),u=a.mag();u>1400&&(u=1400,a._unit()._mult(u));var s=u/750,l=a.mult(-s/2);this._map.panBy(l,{duration:1e3*s,easing:yr,noMoveStart:!0},{originalEvent:t})}}},gr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},gr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var br=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function _r(t){return t*(2-t)}br.prototype.isEnabled=function(){return!!this._enabled},br.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},br.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},br.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,u=a.getZoom(),s={duration:300,delayEndEvents:500,easing:_r,zoom:e?Math.round(u)+e*(t.shiftKey?2:1):u,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*r,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(s,{originalEvent:t})}};var xr=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};xr.prototype.isEnabled=function(){return!!this._enabled},xr.prototype.isActive=function(){return!!this._active},xr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},xr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},xr.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},xr.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},xr.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},xr.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var wr=t.bezier(0,0,.15,1),kr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};kr.prototype.isEnabled=function(){return!!this._enabled},kr.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},kr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},kr.prototype.disableRotation=function(){this._rotationDisabled=!0},kr.prototype.enableRotation=function(){this._rotationDisabled=!1},kr.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var r=n.mousePos(this._el,e.touches[0]),i=n.mousePos(this._el,e.touches[1]),o=r.add(i).div(2);this._startVec=r.sub(i),this._startAround=this._map.transform.pointLocation(o),this._gestureIntent=void 0,this._inertia=[],n.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.addEventListener(t.window.document,"touchend",this._onEnd)}},kr.prototype._getTouchEventData=function(t){var e=n.mousePos(this._el,t.touches[0]),r=n.mousePos(this._el,t.touches[1]),i=e.sub(r);return{vec:i,center:e.add(r).div(2),scale:i.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI}},kr.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),r=n.vec,i=n.scale,o=n.bearing;if(!this._gestureIntent){var a=this._rotationDisabled&&1!==i||Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=r)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},kr.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,o=r.bearing,a=r.scale,u=n.pointLocation(i),s=n.locationPoint(u);"rotate"===e&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(this._startAround,s),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,i])}},kr.prototype._onEnd=function(e){n.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onEnd);var r=this._gestureIntent,i=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,r){this._map.fire(new t.Event(r+"end",{originalEvent:e})),this._drainInertiaBuffer();var o=this._inertia,a=this._map;if(o.length<2)a.snapToNorth({},{originalEvent:e});else{var u=o[o.length-1],s=o[0],l=a.transform.scaleZoom(i*u[1]),c=a.transform.scaleZoom(i*s[1]),f=l-c,h=(u[0]-s[0])/1e3,p=u[2];if(0!==h&&l!==c){var d=.15*f/h;Math.abs(d)>2.5&&(d=d>0?2.5:-2.5);var v=1e3*Math.abs(d/(12*.15)),m=l+d*v/2e3;m<0&&(m=0),a.easeTo({zoom:m,duration:v,easing:wr,around:this._aroundCenter?a.getCenter():a.unproject(p),noMoveStart:!0},{originalEvent:e})}else a.snapToNorth({},{originalEvent:e})}}},kr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>2&&n-e[0][0]>160;)e.shift()};var Er={scrollZoom:pr,boxZoom:dr,dragRotate:mr,dragPan:gr,keyboard:br,doubleClickZoom:xr,touchZoomRotate:kr},Sr=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getCenter=function(){return this.transform.center},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(e,n,r,i){if("number"==typeof(i=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var o=i.padding;i.padding={top:o,bottom:o,right:o,left:o}}if(t.isEqual(Object.keys(i.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){var a=this.transform,u=a.project(t.LngLat.convert(e)),s=a.project(t.LngLat.convert(n)),l=u.rotate(-r*Math.PI/180),c=s.rotate(-r*Math.PI/180),f=new t.Point(Math.max(l.x,c.x),Math.max(l.y,c.y)),h=new t.Point(Math.min(l.x,c.x),Math.min(l.y,c.y)),p=f.sub(h),d=(a.width-i.padding.left-i.padding.right)/p.x,v=(a.height-i.padding.top-i.padding.bottom)/p.y;if(!(v<0||d<0)){var m=Math.min(a.scaleZoom(a.scale*Math.min(d,v)),i.maxZoom),y=t.Point.convert(i.offset),g=(i.padding.left-i.padding.right)/2,b=(i.padding.top-i.padding.bottom)/2,_=new t.Point(y.x+g,y.y+b).mult(a.scale/a.zoomScale(m));return{center:a.unproject(u.add(s).div(2).sub(_)),zoom:m,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),r,i),i,o)},n.prototype._fitInternal=function(e,n,r){return e?(n=t.extend(e,n)).linear?this.easeTo(n,r):this.flyTo(n,r):this},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),u=this.getPitch(),s="zoom"in e?+e.zoom:o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:u,f=i.centerPoint.add(t.Point.convert(e.offset)),h=i.pointLocation(f),p=t.LngLat.convert(e.center||h);this._normalizeCenter(p);var d,v,m=i.project(h),y=i.project(p).sub(m),g=i.zoomScale(s-o);return e.around&&(d=t.LngLat.convert(e.around),v=i.locationPoint(d)),this._zooming=s!==o,this._rotating=a!==l,this._pitching=c!==u,this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(r._zooming&&(i.zoom=t.number(o,s,e)),r._rotating&&(i.bearing=t.number(a,l,e)),r._pitching&&(i.pitch=t.number(u,c,e)),d)i.setLocationAtPoint(d,v);else{var h=i.zoomScale(i.zoom-o),p=s>o?Math.min(2,g):Math.max(.5,g),b=Math.pow(p,1-e),_=i.unproject(m.add(y.mult(e*b)).mult(h));i.setLocationAtPoint(i.renderWorldCopies?_.wrap():_,f)}r._fireMoveEvents(n)},function(){e.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(n)},e.delayEndEvents):r._afterEase(n)},e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){var r=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var i=this.transform,o=this.getZoom(),a=this.getBearing(),u=this.getPitch(),s="zoom"in e?t.clamp(+e.zoom,i.minZoom,i.maxZoom):o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:u,f=i.zoomScale(s-o),h=i.centerPoint.add(t.Point.convert(e.offset)),p=i.pointLocation(h),d=t.LngLat.convert(e.center||p);this._normalizeCenter(d);var v=i.project(p),m=i.project(d).sub(v),y=e.curve,g=Math.max(i.width,i.height),b=g/f,_=m.mag();if("minZoom"in e){var x=t.clamp(Math.min(e.minZoom,o,s),i.minZoom,i.maxZoom),w=g/i.zoomScale(x-o);y=Math.sqrt(w/_*2)}var k=y*y;function E(t){var e=(b*b-g*g+(t?-1:1)*k*k*_*_)/(2*(t?b:g)*k*_);return Math.log(Math.sqrt(e*e+1)-e)}function S(t){return(Math.exp(t)-Math.exp(-t))/2}function O(t){return(Math.exp(t)+Math.exp(-t))/2}var A=E(0),M=function(t){return O(A)/O(A+y*t)},C=function(t){return g*((O(A)*(S(e=A+y*t)/O(e))-S(A))/k)/_;var e},T=(E(1)-A)/y;if(Math.abs(_)<1e-6||!isFinite(T)){if(Math.abs(g-b)<1e-6)return this.easeTo(e,n);var j=b<g?-1:1;T=Math.abs(Math.log(b/g))/y,C=function(){return 0},M=function(t){return Math.exp(j*y*t)}}if("duration"in e)e.duration=+e.duration;else{var D="screenSpeed"in e?+e.screenSpeed/y:+e.speed;e.duration=1e3*T/D}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==l,this._pitching=c!==u,this._prepareEase(n,!1),this._ease(function(e){var f=e*T,p=1/M(f);i.zoom=1===e?s:o+i.scaleZoom(p),r._rotating&&(i.bearing=t.number(a,l,e)),r._pitching&&(i.pitch=t.number(u,c,e));var y=1===e?d:i.unproject(v.add(m.mult(C(f))).mult(p));i.setLocationAtPoint(i.renderWorldCopies?y.wrap():y,h),r._fireMoveEvents(n)},function(){return r._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),Or=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Or.prototype.getDefaultPosition=function(){return"bottom-right"},Or.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Or.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},Or.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:t.config.ACCESS_TOKEN}];if(e){var r=n.reduce(function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<n.length-1?"&":"")),t},"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):"")}},Or.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Or.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).length?(this._innerContainer.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},Or.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ar=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Ar.prototype.onAdd=function(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");var e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ar.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ar.prototype.getDefaultPosition=function(){return"bottom-left"},Ar.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Ar.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Ar.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Mr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Mr.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Mr.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},Mr.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Mr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Cr=t.window.HTMLImageElement,Tr=t.window.HTMLElement,jr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Dr=function(r){function i(e){var i=this;if(null!=(e=t.extend({},jr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var o=new ur(e.minZoom,e.maxZoom,e.renderWorldCopies);r.call(this,o,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Mr,this._controls=[],this._mapId=t.uniqueId();var a=e.transformRequest;if(this._transformRequest=a?function(t,e){return a(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Tr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return i._update(!1)}),this.on("moveend",function(){return i._update(!1)}),this.on("zoom",function(){return i._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var r=t.getCanvasContainer(),i=null,o=!1,a=null;for(var u in Er)t[u]=new Er[u](t,e),e.interactive&&e[u]&&t[u].enable(e[u]);n.addEventListener(r,"mouseout",function(e){t.fire(new cr("mouseout",t,e))}),n.addEventListener(r,"mousedown",function(i){o=!0,a=n.mousePos(r,i);var u=new cr("mousedown",t,i);t.fire(u),u.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(i),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(i),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(i))}),n.addEventListener(r,"mouseup",function(e){var n=t.dragRotate.isActive();i&&!n&&t.fire(new cr("contextmenu",t,i)),i=null,o=!1,t.fire(new cr("mouseup",t,e))}),n.addEventListener(r,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var n=e.target;n&&n!==r;)n=n.parentNode;n===r&&t.fire(new cr("mousemove",t,e))}}),n.addEventListener(r,"mouseover",function(e){for(var n=e.target;n&&n!==r;)n=n.parentNode;n===r&&t.fire(new cr("mouseover",t,e))}),n.addEventListener(r,"touchstart",function(n){var r=new fr("touchstart",t,n);t.fire(r),r.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(r))},{passive:!1}),n.addEventListener(r,"touchmove",function(e){t.fire(new fr("touchmove",t,e))},{passive:!1}),n.addEventListener(r,"touchend",function(e){t.fire(new fr("touchend",t,e))}),n.addEventListener(r,"touchcancel",function(e){t.fire(new fr("touchcancel",t,e))}),n.addEventListener(r,"click",function(i){var o=n.mousePos(r,i);(o.equals(a)||o.dist(a)<e.clickTolerance)&&t.fire(new cr("click",t,i))}),n.addEventListener(r,"dblclick",function(e){var n=new cr("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)}),n.addEventListener(r,"contextmenu",function(e){var n=t.dragRotate.isActive();o||n?o&&(i=e):t.fire(new cr("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()}),n.addEventListener(r,"wheel",function(n){e.interactive&&t.stop();var r=new hr("wheel",t,n);t.fire(r),r.defaultPrevented||t.scrollZoom.onWheel(n)},{passive:!1})}(this,e),this._hash=e.hash&&(new lr).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Or({customAttribution:e.customAttribution})),this.addControl(new Ar,e.logoPosition),this.on("style.load",function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)}),this.on("data",function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){i.fire(new t.Event(e.dataType+"dataloading",e))})}r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i;var o={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},i.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},i.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},i.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},i.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},i.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},i.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},i.prototype.on=function(t,e,n){var i=this;if(void 0===n)return r.prototype.on.call(this,t,e);var o=function(){var r;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){var a=i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(i,new cr(t,i,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){(i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(i,new cr(t,i,r.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(i,new cr(t,i,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(r={},r[t]=function(t){var r=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(i,t),delete t.features)},r)}}();for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(o),o.delegates)this.on(a,o.delegates[a]);return this},i.prototype.off=function(t,e,n){if(void 0===n)return r.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===e&&a.listener===n){for(var u in a.delegates)this.off(u,a.delegates[u]);return i.splice(o,1),this}}return this},i.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},i.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},i.prototype.setStyle=function(t,e){return(!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t?(this._diffStyle(t,e),this):this._updateStyle(t,e)},i.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new De(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},i.prototype._diffStyle=function(e,n){var r=this;if("string"==typeof e){var i=t.normalizeStyleURL(e),o=this._transformRequest(i,t.ResourceType.Style);t.getJSON(o,function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)})}else"object"==typeof e&&this._updateDiff(e,n)},i.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},i.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},i.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},i.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},i.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},i.prototype.getSource=function(t){return this.style.getSource(t)},i.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;if(void 0===o&&(o=!1),n instanceof Cr){var a=t.browser.getImageData(n),u=a.width,s=a.height,l=a.data;this.style.addImage(e,{data:new t.RGBAImage({width:u,height:s},l),pixelRatio:i,sdf:o})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n.width,f=n.height,h=n.data;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:f},new Uint8Array(h)),pixelRatio:i,sdf:o})}},i.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(t){this.style.removeImage(t)},i.prototype.loadImage=function(e,n){t.getImage(this._transformRequest(e,t.ResourceType.Image),n)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},i.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},i.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},i.prototype.getLayer=function(t){return this.style.getLayer(t)},i.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},i.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},i.prototype.getFilter=function(t){return this.style.getFilter(t)},i.prototype.setPaintProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,n,r),this._update(!0)},i.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},i.prototype.setLayoutProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,n,r),this._update(!0)},i.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},i.prototype.setLight=function(t,e){return void 0===e&&(e={}),this.style.setLight(t,e),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},i.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},i.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=n.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){o[t]=n.create("div","mapboxgl-ctrl-"+t,i)})},i.prototype._resizeCanvas=function(e,n){var r=t.window.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},i.prototype._setupPainter=function(){var n=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},e.webGLContextAttributes),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new rr(r,this.transform),t.webpSupported.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},i.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},i.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},i.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,r=t.browser.now();this.style.zoomHistory.update(n,r);var i=new t.EvaluationParameters(n,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(e=!0,this._crossFadingFactor=o),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Pr(this._canvasContainer),Pr(this._controlContainer),Pr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},i.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},Object.defineProperties(i.prototype,o),i}(Sr);function Pr(t){t.parentNode&&t.parentNode.removeChild(t)}var zr={showCompass:!0,showZoom:!0},Rr=function(e){var r=this;this.options=t.extend({},zr,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return r._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return r._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return r._map.resetNorth()}),this._compassArrow=n.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function Ir(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var u=r.locationPoint(e);if(u.x>=0&&u.y>=0&&u.x<=r.width&&u.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}Rr.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},Rr.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new mr(t,{button:"left",element:this._compass}),n.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Rr.prototype.onRemove=function(){n.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),n.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Rr.prototype._createButton=function(t,e,r){var i=n.create("button",t,this._container);return i.type="button",i.title=e,i.setAttribute("aria-label",e),i.addEventListener("click",r),i};var Fr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Lr(t,e,n){var r=t.classList;for(var i in Fr)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}var Nr,Br=function(e){function r(r,i){if(e.call(this),(r instanceof t.window.HTMLElement||i)&&(r=t.extend({element:r},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._draggable=r&&r.draggable||!1,this._state="inactive",r&&r.element)this._element=r.element,this._offset=t.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div");var o=n.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var a=n.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");var u=n.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill-rule","nonzero");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var l=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];l<c.length;l+=1){var f=c[l],h=n.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",f.rx),h.setAttributeNS(null,"ry",f.ry),s.appendChild(h)}var p=n.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var d=n.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(d);var v=n.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"fill","#000000");var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),v.appendChild(m);var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var _=n.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#FFFFFF"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962"),g.appendChild(b),g.appendChild(_),u.appendChild(s),u.appendChild(p),u.appendChild(v),u.appendChild(y),u.appendChild(g),o.appendChild(u),this._element.appendChild(o),this._offset=t.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},r.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},r.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Ir(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,Fr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),Lr(this._element,this._anchor,"marker"))},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},r.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r}(t.Evented),Ur={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},qr=function(e){function r(n){e.call(this),this.options=t.extend({},Ur,n),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.onAdd=function(e){var r;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Nr?r(Nr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){Nr="denied"!==t.state,r(Nr)}):(Nr=!!t.window.navigator.geolocation,r(Nr)),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),n.remove(this._container),this._map=void 0},r.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},r.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy;this._map.fitBounds(n.toBounds(r),this.options.fitBoundsOptions,{geolocateSource:!0})},r.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},r.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(e){var r=this;!1!==e?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Br(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==r._watchState||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},r.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(t.Evented),Vr={maxWidth:100,unit:"metric"},Wr=function(e){this.options=t.extend({},Vr,e),t.bindAll(["_onMove","setUnit"],this)};function Hr(t,e,n){var r,i,o,a,u,s,l=n&&n.maxWidth||100,c=t._container.clientHeight/2,f=(r=t.unproject([0,c]),i=t.unproject([l,c]),o=Math.PI/180,a=r.lat*o,u=i.lat*o,s=Math.sin(a)*Math.sin(u)+Math.cos(a)*Math.cos(u)*Math.cos((i.lng-r.lng)*o),6371e3*Math.acos(Math.min(s,1)));if(n&&"imperial"===n.unit){var h=3.2808*f;h>5280?Gr(e,l,h/5280,"mi"):Gr(e,l,h,"ft")}else n&&"nautical"===n.unit?Gr(e,l,f/1852,"nm"):Gr(e,l,f,"m")}function Gr(t,e,n,r){var i,o,a,u=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a))),s=u/n;"m"===r&&u>=1e3&&(u/=1e3,r="km"),t.style.width=e*s+"px",t.innerHTML=u+r}Wr.prototype.getDefaultPosition=function(){return"bottom-left"},Wr.prototype._onMove=function(){Hr(this._map,this._container,this.options)},Wr.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Wr.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Wr.prototype.setUnit=function(t){this.options.unit=t,Hr(this._map,this._container,this.options)};var Xr=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Xr.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Xr.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Xr.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Xr.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Xr.prototype._isFullscreen=function(){return this._fullscreen},Xr.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Xr.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Zr={closeButton:!0,closeOnClick:!0,className:""},Yr=function(e){function r(n){e.call(this),this.options=t.extend(Object.create(Zr),n),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this.fire(new t.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),delete this._map),this.fire(new t.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._update(),this},r.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},r.prototype.setHTML=function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},r.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},r.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},r.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=Ir(this._lngLat,this._pos,this._map.transform));var r=this._pos=this._map.project(this._lngLat),i=this.options.anchor,o=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-n),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var i=t.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!i){var a,u=this._container.offsetWidth,s=this._container.offsetHeight;a=r.y+o.bottom.y<s?["top"]:r.y>this._map.transform.height-s?["bottom"]:[],r.x<u/2?a.push("left"):r.x>this._map.transform.width-u/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}var l=r.add(o[i]).round();n.setTransform(this._container,Fr[i]+" translate("+l.x+"px,"+l.y+"px)"),Lr(this._container,i,"popup")}},r.prototype._onClickClose=function(){this.remove()},r}(t.Evented),$r={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,Map:Dr,NavigationControl:Rr,GeolocateControl:qr,AttributionControl:Or,ScaleControl:Wr,FullscreenControl:Xr,Popup:Yr,Marker:Br,Style:De,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Tt.workerCount},set workerCount(t){Tt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},workerUrl:""};return $r}),n}()},function(t,e,n){var r=n(63),i=n(184),o=n(185),a=n(186),u=n(187),s=n(188);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=u,l.prototype.set=s,t.exports=l},function(t,e,n){var r=n(65),i=n(59),o="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var e=r(t);return e==a||e==u||e==o||e==s}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(57))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e,n){var r=n(195),i=n(202),o=n(204),a=n(205),u=n(206);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=o,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(117),i=n(86),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(208);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(210),i=n(211),o=n(70),a=n(89),u=n(214),s=n(119),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&i(t),f=!n&&!c&&a(t),h=!n&&!c&&!f&&s(t),p=n||c||f||h,d=p?r(t.length,String):[],v=d.length;for(var m in t)!e&&!l.call(t,m)||p&&("length"==m||f&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||d.push(m);return d}},function(t,e,n){var r=n(215),i=n(90),o=n(91),a=o&&o.isTypedArray,u=a?i(a):r;t.exports=u},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(112),i=n(120);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(118),i=n(219),o=n(122);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(126),i=n(127),o=n(93),a=n(124),u=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=u},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(121)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(129),i=n(93),o=n(88);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(126),i=n(70);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e,n){var r=n(36).Uint8Array;t.exports=r},function(t,e,n){var r=n(245),i=n(248),o=n(249),a=1,u=2;t.exports=function(t,e,n,s,l,c){var f=n&a,h=t.length,p=e.length;if(h!=p&&!(f&&p>h))return!1;var d=c.get(t);if(d&&c.get(e))return d==e;var v=-1,m=!0,y=n&u?new r:void 0;for(c.set(t,e),c.set(e,t);++v<h;){var g=t[v],b=e[v];if(s)var _=f?s(b,g,v,e,t,c):s(g,b,v,t,e,c);if(void 0!==_){if(_)continue;m=!1;break}if(y){if(!i(e,function(t,e){if(!o(y,e)&&(g===t||l(g,t,n,s,c)))return y.push(e)})){m=!1;break}}else if(g!==b&&!l(g,b,n,s,c)){m=!1;break}}return c.delete(t),c.delete(e),m}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},,function(t,e,n){t.exports=!n(44)&&!n(52)(function(){return 7!=Object.defineProperty(n(135)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(51),i=n(40).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(45),i=n(46),o=n(653)(!1),a=n(101)("IE_PROTO");t.exports=function(t,e){var n,u=i(t),s=0,l=[];for(n in u)n!=a&&r(u,n)&&l.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var r=n(98);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(100),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){t.exports={default:n(655),__esModule:!0}},function(t,e,n){"use strict";var r=n(659)(!0);n(141)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(73),i=n(39),o=n(142),a=n(49),u=n(61),s=n(660),l=n(106),c=n(143),f=n(37)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,v,m,y){s(n,e,d);var g,b,_,x=function(t){if(!h&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",k="values"==v,E=!1,S=t.prototype,O=S[f]||S["@@iterator"]||v&&S[v],A=O||x(v),M=v?k?x("entries"):A:void 0,C="Array"==e&&S.entries||O;if(C&&(_=c(C.call(new t)))!==Object.prototype&&_.next&&(l(_,w,!0),r||"function"==typeof _[f]||a(_,f,p)),k&&O&&"values"!==O.name&&(E=!0,A=function(){return O.call(this)}),r&&!y||!h&&!E&&S[f]||a(S,f,A),u[e]=A,u[w]=p,v)if(g={values:k?A:x("values"),keys:m?A:x("keys"),entries:M},y)for(b in g)b in S||o(S,b,g[b]);else i(i.P+i.F*(h||E),e,g);return g}},function(t,e,n){t.exports=n(49)},function(t,e,n){var r=n(45),i=n(76),o=n(101)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(136),i=n(103).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(39),i=n(32),o=n(52);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e){t.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e,n){"use strict";(function(t){var r=n(702),i=n(703),o=n(704);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=h(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=u(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(s.isBuffer(e)){var n=0|p(e.length);return 0===(t=u(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?u(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(c(e),t=u(t,e<0?0:0|p(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(s.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"===typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=n;o<u;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===s)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+s>u&&(n=u-s),o=n;o>=0;o--){for(var f=!0,h=0;h<s;h++)if(l(t,o+h)!==l(e,h)){f=!1;break}if(f)return o}return-1}function g(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[n+a]=u}return a}function b(t,e,n,r){return q(B(e,t.length-n),t,n,r)}function _(t,e,n,r){return q(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return _(t,e,n,r)}function w(t,e,n,r){return q(U(e),t,n,r)}function k(t,e,n,r){return q(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,u,s,l=t[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128===(192&(o=t[i+1]))&&(s=(31&l)<<6|63&o)>127&&(c=s);break;case 3:o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(s=(15&l)<<12|(63&o)<<6|63&a)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:o=t[i+1],a=t[i+2],u=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&u)&&(s=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(c=s)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}e.Buffer=s,e.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return l(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?u(t,e):void 0!==n?"string"===typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},s.allocUnsafe=function(t){return f(null,t)},s.allocUnsafeSlow=function(t){return f(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,i){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(o,a),l=this.slice(r,i),c=t.slice(e,n),f=0;f<u;++f)if(l[f]!==c[f]){o=l[f],a=c[f];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=N(t[o]);return i}function T(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function z(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function R(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(t,e,n,r,o){return o||R(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||R(t,0,n,8),i.write(t,e,n,r,52,8),n+8}s.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=s.prototype;else{var i=e-t;n=new s(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},s.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),i.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),i.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):z(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=0,a=1,u=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):z(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return I(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return I(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},s.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:B(new s(t,r).toString()),u=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%u]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(L,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function q(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(57))},function(t){t.exports={}},function(t,e,n){var r=n(178),i=1,o=4;t.exports=function(t){return r(t,i|o)}},function(t,e,n){var r=n(243);t.exports=function(t,e){return r(t,e)}},function(t,e,n){(function(t){!function(n,r){var i=function(){var t=null,e={};l("monochrome",null,[[0,0],[100,0]]),l("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),l("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),l("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),l("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),l("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),l("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),l("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]);var n=[];function r(t){if(n.length>0){var r=function(t){if(isNaN(t)){if("string"===typeof t)if(e[t]){var n=e[t];if(n.hueRange)return n.hueRange}else if(t.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var r=f(t)[0];return u(r).hueRange}}else{var i=parseInt(t);if(i<360&&i>0)return u(t).hueRange}return[0,360]}(t.hue),i=s(r),o=(r[1]-r[0])/n.length,a=parseInt((i-r[0])/o);!0===n[a]?a=(a+2)%n.length:n[a]=!0;var l=(r[0]+a*o)%359,c=(r[0]+(a+1)*o)%359;return(i=s(r=[l,c]))<0&&(i=360+i),i}var r=function(t){if("number"===typeof parseInt(t)){var n=parseInt(t);if(n<360&&n>0)return[n,n]}if("string"===typeof t)if(e[t]){var r=e[t];if(r.hueRange)return r.hueRange}else if(t.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var i=f(t)[0];return[i,i]}return[0,360]}(t.hue);return(i=s(r))<0&&(i=360+i),i}function i(t,e){if("monochrome"===e.hue)return 0;if("random"===e.luminosity)return s([0,100]);var n=function(t){return u(t).saturationRange}(t),r=n[0],i=n[1];switch(e.luminosity){case"bright":r=55;break;case"dark":r=i-10;break;case"light":i=55}return s([r,i])}function o(t,e,n){var r=function(t,e){for(var n=u(t).lowerBounds,r=0;r<n.length-1;r++){var i=n[r][0],o=n[r][1],a=n[r+1][0],s=n[r+1][1];if(e>=i&&e<=a){var l=(s-o)/(a-i),c=o-l*i;return l*e+c}}return 0}(t,e),i=100;switch(n.luminosity){case"dark":i=r+20;break;case"light":r=(i+r)/2;break;case"random":r=0,i=100}return s([r,i])}function a(t,e){switch(e.format){case"hsvArray":return t;case"hslArray":return h(t);case"hsl":var n=h(t);return"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)";case"hsla":var r=h(t),i=e.alpha||Math.random();return"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+i+")";case"rgbArray":return c(t);case"rgb":var o=c(t);return"rgb("+o.join(", ")+")";case"rgba":var a=c(t),i=e.alpha||Math.random();return"rgba("+a.join(", ")+", "+i+")";default:return function(t){var e=c(t);function n(t){var e=t.toString(16);return 1==e.length?"0"+e:e}return"#"+n(e[0])+n(e[1])+n(e[2])}(t)}}function u(t){for(var n in t>=334&&t<=360&&(t-=360),e){var r=e[n];if(r.hueRange&&t>=r.hueRange[0]&&t<=r.hueRange[1])return e[n]}return"Color not found"}function s(e){if(null===t){var n=Math.random();return n+=.618033988749895,n%=1,Math.floor(e[0]+n*(e[1]+1-e[0]))}var r=e[1]||1,i=e[0]||0,o=(t=(9301*t+49297)%233280)/233280;return Math.floor(i+o*(r-i))}function l(t,n,r){var i=r[0][0],o=r[r.length-1][0],a=r[r.length-1][1],u=r[0][1];e[t]={hueRange:n,lowerBounds:r,saturationRange:[i,o],brightnessRange:[a,u]}}function c(t){var e=t[0];0===e&&(e=1),360===e&&(e=359),e/=360;var n=t[1]/100,r=t[2]/100,i=Math.floor(6*e),o=6*e-i,a=r*(1-n),u=r*(1-o*n),s=r*(1-(1-o)*n),l=256,c=256,f=256;switch(i){case 0:l=r,c=s,f=a;break;case 1:l=u,c=r,f=a;break;case 2:l=a,c=r,f=s;break;case 3:l=a,c=u,f=r;break;case 4:l=s,c=a,f=r;break;case 5:l=r,c=a,f=u}var h=[Math.floor(255*l),Math.floor(255*c),Math.floor(255*f)];return h}function f(t){t=3===(t=t.replace(/^#/,"")).length?t.replace(/(.)/g,"$1$1"):t;var e=parseInt(t.substr(0,2),16)/255,n=parseInt(t.substr(2,2),16)/255,r=parseInt(t.substr(4,2),16)/255,i=Math.max(e,n,r),o=i-Math.min(e,n,r),a=i?o/i:0;switch(i){case e:return[(n-r)/o%6*60||0,a,i];case n:return[60*((r-e)/o+2)||0,a,i];case r:return[60*((e-n)/o+4)||0,a,i]}}function h(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=(2-n)*r;return[e,Math.round(n*r/(i<1?i:2-i)*1e4)/100,i/2*100]}return function e(u){if(void 0!==(u=u||{}).seed&&null!==u.seed&&u.seed===parseInt(u.seed,10))t=u.seed;else if("string"===typeof u.seed)t=function(t){for(var e=0,n=0;n!==t.length&&!(e>=Number.MAX_SAFE_INTEGER);n++)e+=t.charCodeAt(n);return e}(u.seed);else{if(void 0!==u.seed&&null!==u.seed)throw new TypeError("The seed value must be an integer or string");t=null}var s,l,c;if(null!==u.count&&void 0!==u.count){for(var f=u.count,h=[],p=0;p<u.count;p++)n.push(!1);for(u.count=null;f>h.length;)t&&u.seed&&(u.seed+=1),h.push(e(u));return u.count=f,h}return s=r(u),l=i(s,u),c=o(s,l,u),a([s,l,c],u)}}();t&&t.exports&&(e=t.exports=i),e.randomColor=i}()}).call(this,n(58)(t))},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(256));e.default=i.default},function(t,e,n){"use strict";(function(t){var n=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,r){return t[0]===e&&(n=r,!0)}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i="undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),o="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},a=2;var u=20,s=["top","right","bottom","left","width","height","size","weight"],l="undefined"!==typeof MutationObserver,c=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function u(){n&&(n=!1,t()),r&&l()}function s(){o(u)}function l(){var t=Date.now();if(n){if(t-i<a)return;r=!0}else n=!0,r=!1,setTimeout(s,e);i=t}return l}(this.refresh.bind(this),u)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;s.some(function(t){return!!~n.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),f=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},h=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||i},p=b(0,0,0,0);function d(t){return parseFloat(t)||0}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(e,n){return e+d(t["border-"+n+"-width"])},0)}function m(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return p;var r=h(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=d(o)}return e}(r),o=i.left+i.right,a=i.top+i.bottom,u=d(r.width),s=d(r.height);if("border-box"===r.boxSizing&&(Math.round(u+o)!==e&&(u-=v(r,"left","right")+o),Math.round(s+a)!==n&&(s-=v(r,"top","bottom")+a)),!function(t){return t===h(t).document.documentElement}(t)){var l=Math.round(u+o)-e,c=Math.round(s+a)-n;1!==Math.abs(l)&&(u-=l),1!==Math.abs(c)&&(s-=c)}return b(i.left,i.top,u,s)}var y="undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof h(t).SVGGraphicsElement}:function(t){return t instanceof h(t).SVGElement&&"function"===typeof t.getBBox};function g(t){return r?y(t)?function(t){var e=t.getBBox();return b(0,0,e.width,e.height)}(t):m(t):p}function b(t,e,n,r){return{x:t,y:e,width:n,height:r}}var _=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=g(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),x=function(){return function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return f(a,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),a}(e);f(this,{target:t,contentRect:n})}}(),w=function(){function t(t,e,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=r}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof h(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new _(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof h(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new x(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),k="undefined"!==typeof WeakMap?new WeakMap:new n,E=function(){return function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new w(e,n,this);k.set(this,r)}}();["observe","unobserve","disconnect"].forEach(function(t){E.prototype[t]=function(){var e;return(e=k.get(this))[t].apply(e,arguments)}});var S="undefined"!==typeof i.ResizeObserver?i.ResizeObserver:E;e.a=S}).call(this,n(57))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r){function i(e){var r=new o.default(e);n.call(t,r)}if(t.addEventListener){var a=function(){var n=!1;return"object"===typeof r?n=r.capture||!1:"boolean"===typeof r&&(n=r),t.addEventListener(e,i,r||!1),{v:{remove:function(){t.removeEventListener(e,i,n)}}}}();if("object"===typeof a)return a.v}else if(t.attachEvent)return t.attachEvent("on"+e,i),{remove:function(){t.detachEvent("on"+e,i)}}};var r,i=n(690),o=(r=i)&&r.__esModule?r:{default:r};t.exports=e.default},function(t,e){t.exports=function(t,e,n,r){var i=n?n.call(r,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!==typeof t||!t||"object"!==typeof e||!e)return!1;var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(e),s=0;s<o.length;s++){var l=o[s];if(!u(l))return!1;var c=t[l],f=e[l];if(!1===(i=n?n.call(r,c,f,l):void 0)||void 0===i&&c!==f)return!1}return!0}},function(t,e,n){try{var r=n(146)}catch(u){r=n(146)}var i=/\s+/,o=Object.prototype.toString;function a(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}t.exports=function(t){return new a(t)},a.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~r(e,t)||e.push(t),this.el.className=e.join(" "),this},a.prototype.remove=function(t){if("[object RegExp]"==o.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=r(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},a.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},a.prototype.toggle=function(t,e){return this.list?("undefined"!==typeof e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):("undefined"!==typeof e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},a.prototype.array=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(i);return""===t[0]&&t.shift(),t},a.prototype.has=a.prototype.contains=function(t){return this.list?this.list.contains(t):!!~r(this.array(),t)}},,,,,,,function(t){t.exports={name:"vega-lite",author:'Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',version:"3.2.1",collaborators:["Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)","Dominik Moritz <domoritz@cs.washington.edu> (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com/)","Jeffrey Heer (https://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-Lite is a concise high-level language for interactive visualization.",main:"build/vega-lite.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",module:"build/src/index",types:"build/src/index.d.ts",bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},directories:{test:"test"},scripts:{build:"npm run build:only","build:only":"tsc -b src && rollup -c",postbuild:"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && npm run schema","build:examples":"npm run build:only","postbuild:examples":"npm run data && TZ=America/Los_Angeles scripts/build-examples.sh","build:examples-full":"npm run build:only","postbuild:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"npm run data && bundle exec jekyll build -q && scripts/generate-toc","build:site":"tsc -b site && rollup -c site/rollup.config.js","build:versions":"scripts/update-version.sh",clean:"rm -rf build && rm -f examples/compiled/*.png && find site/examples ! -name 'index.md' -type f -delete",data:"rsync -r node_modules/vega-datasets/data/* data",deploy:"scripts/deploy.sh","deploy:gh":"scripts/deploy-gh.sh","deploy:schema":"scripts/deploy-schema.sh",schema:"mkdir -p build && node --stack-size=5000 ./node_modules/.bin/ts-json-schema-generator --no-type-check --path src/index.ts --type TopLevelSpec > build/vega-lite-schema.json && npm run renameschema && cp build/vega-lite-schema.json _data/",renameschema:"scripts/rename-schema.sh",presite:"npm run data && npm run build:site && npm run build:toc && npm run build:versions && scripts/create-example-pages",site:"bundle exec jekyll serve --incremental",prettierbase:"prettier '{src,test,test-runtime,site,typings}/**/*.{ts,md,css}'",format:"tslint -p . --fix && npm run prettierbase -- --write",lint:"tslint -p . && npm run prettierbase -- --check",test:"jest test/ && npm run lint && npm run schema && jest examples/ && npm run test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true npm run test:runtime","watch:build":"npm run build:only && concurrently --kill-others -n Typescript,Rollup 'tsc -b src -w' 'rollup -c -w'","watch:site":"concurrently --kill-others -n Typescript,Rollup 'tsc -b site --watch' 'rollup -c site/rollup.config.js --watch'","watch:test":"jest --watch"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@types/chai":"^4.1.7","@types/d3":"^5.7.2","@types/highlight.js":"^9.12.3","@types/jest":"^24.0.11","@types/jest-environment-puppeteer":"^4.0.0","@types/mkdirp":"^0.5.2","@types/node":"^11.13.4","@types/puppeteer":"^1.12.3",ajv:"^6.10.0",chai:"^4.2.0",cheerio:"^1.0.0-rc.2",codecov:"^3.3.0",concurrently:"^4.1.0",d3:"^5.9.2","highlight.js":"^9.15.6","http-server":"^0.11.1",jest:"^24.7.1","jest-puppeteer":"^4.1.1",mkdirp:"^0.5.1",prettier:"^1.17.0",puppeteer:"^1.14.0",rollup:"^1.10.0","rollup-plugin-commonjs":"^9.3.4","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^4.2.3","rollup-plugin-sourcemaps":"^0.4.2","rollup-plugin-terser":"^4.0.4","svg2png-many":"^0.0.7",terser:"^3.17.0","ts-jest":"^24.0.2","ts-json-schema-generator":"^0.40.0",tslint:"5.15.0","tslint-config-prettier":"^1.18.0",typescript:"^3.4.3","vega-cli":"^5.3.5","vega-datasets":"^1.24.5","vega-embed":"^4.0.0","vega-tooltip":"^0.17.0","yaml-front-matter":"^4.0.0"},dependencies:{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0",clone:"~2.1.2","fast-deep-equal":"~2.0.1","fast-json-stable-stringify":"~2.0.0","json-stringify-pretty-compact":"~2.0.0",tslib:"~1.9.3","vega-event-selector":"~2.0.0","vega-expression":"~2.6.0","vega-typings":"0.6.2","vega-util":"~1.10.0",yargs:"~13.2.2"},peerDependencies:{vega:"^5.3.3"},jest:{preset:"jest-puppeteer",transform:{"^.+\\.tsx?$":"ts-jest"},testRegex:"(/__tests__/.*|(\\.|/)(test|spec))\\.(jsx?|tsx?)$",moduleFileExtensions:["ts","tsx","js","jsx","json","node"],testPathIgnorePatterns:["node_modules","<rootDir>/build","_site","src"],coverageDirectory:"./coverage/",collectCoverage:!1}}},function(t,e,n){(function(e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var n,r,i;try{n=Map}catch(s){n=function(){}}try{r=Set}catch(s){r=function(){}}try{i=Promise}catch(s){i=function(){}}function o(a,s,l,c,f){"object"===typeof s&&(l=s.depth,c=s.prototype,f=s.includeNonEnumerable,s=s.circular);var h=[],p=[],d="undefined"!=typeof e;return"undefined"==typeof s&&(s=!0),"undefined"==typeof l&&(l=1/0),function a(l,v){if(null===l)return null;if(0===v)return l;var m,y;if("object"!=typeof l)return l;if(t(l,n))m=new n;else if(t(l,r))m=new r;else if(t(l,i))m=new i(function(t,e){l.then(function(e){t(a(e,v-1))},function(t){e(a(t,v-1))})});else if(o.__isArray(l))m=[];else if(o.__isRegExp(l))m=new RegExp(l.source,u(l)),l.lastIndex&&(m.lastIndex=l.lastIndex);else if(o.__isDate(l))m=new Date(l.getTime());else{if(d&&e.isBuffer(l))return m=e.allocUnsafe?e.allocUnsafe(l.length):new e(l.length),l.copy(m),m;t(l,Error)?m=Object.create(l):"undefined"==typeof c?(y=Object.getPrototypeOf(l),m=Object.create(y)):(m=Object.create(c),y=c)}if(s){var g=h.indexOf(l);if(-1!=g)return p[g];h.push(l),p.push(m)}for(var b in t(l,n)&&l.forEach(function(t,e){var n=a(e,v-1),r=a(t,v-1);m.set(n,r)}),t(l,r)&&l.forEach(function(t){var e=a(t,v-1);m.add(e)}),l){var _;y&&(_=Object.getOwnPropertyDescriptor(y,b)),_&&null==_.set||(m[b]=a(l[b],v-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(b=0;b<x.length;b++){var w=x[b];(!(E=Object.getOwnPropertyDescriptor(l,w))||E.enumerable||f)&&(m[w]=a(l[w],v-1),E.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(f){var k=Object.getOwnPropertyNames(l);for(b=0;b<k.length;b++){var E,S=k[b];(E=Object.getOwnPropertyDescriptor(l,S))&&E.enumerable||(m[S]=a(l[S],v-1),Object.defineProperty(m,S,{enumerable:!1}))}}return m}(a,l)}function a(t){return Object.prototype.toString.call(t)}function u(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return o.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},o.__objToStr=a,o.__isDate=function(t){return"object"===typeof t&&"[object Date]"===a(t)},o.__isArray=function(t){return"object"===typeof t&&"[object Array]"===a(t)},o.__isRegExp=function(t){return"object"===typeof t&&"[object RegExp]"===a(t)},o.__getRegExpFlags=u,o}();t.exports&&(t.exports=n)}).call(this,n(147).Buffer)},function(t,e,n){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var a,u,s,l=r(e),c=r(n);if(l&&c){if((u=e.length)!=n.length)return!1;for(a=u;0!==a--;)if(!t(e[a],n[a]))return!1;return!0}if(l!=c)return!1;var f=e instanceof Date,h=n instanceof Date;if(f!=h)return!1;if(f&&h)return e.getTime()==n.getTime();var p=e instanceof RegExp,d=n instanceof RegExp;if(p!=d)return!1;if(p&&d)return e.toString()==n.toString();var v=i(e);if((u=v.length)!==i(n).length)return!1;for(a=u;0!==a--;)if(!o.call(n,v[a]))return!1;for(a=u;0!==a--;)if(!t(e[s=v[a]],n[s]))return!1;return!0}return e!==e&&n!==n}},function(t,e,n){"use strict";var r=n(13),i=n.n(r),o=n(18),a=n.n(o),u=n(28),s=n.n(u),l=n(15),c=n.n(l),f=n(19),h=n.n(f),p=n(2),d=n.n(p),v=n(1),m=n.n(v),y=n(47),g=n.n(y),b=function(t){var e=t.className,n=t.included,r=t.vertical,o=t.offset,a=t.length,u=t.style,s=r?{bottom:o+"%",height:a+"%"}:{left:o+"%",width:a+"%"},l=i()({},u,s);return n?d.a.createElement("div",{className:e,style:l}):null},_=n(35),x=n.n(_),w=n(27),k=n.n(w),E=n(82),S=n.n(E),O=n(154),A=n.n(O),M=n(24),C=n.n(M);function T(t,e,n,r){var i=C.a.unstable_batchedUpdates?function(t){C.a.unstable_batchedUpdates(n,t)}:n;return A()(t,e,i,r)}var j=n(33),D=n.n(j),P=function(t){var e=t.prefixCls,n=t.vertical,r=t.marks,o=t.dots,a=t.step,u=t.included,s=t.lowerBound,l=t.upperBound,c=t.max,f=t.min,h=t.dotStyle,p=t.activeDotStyle,v=c-f,m=function(t,e,n,r,i,o){g()(!n||r>0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var a=Object.keys(e).map(parseFloat).sort(function(t,e){return t-e});if(n)for(var u=i;u<=o;u+=r)-1===a.indexOf(u)&&a.push(u);return a}(0,r,o,a,f,c).map(function(t){var r,o=Math.abs(t-f)/v*100+"%",a=!u&&t===l||u&&t<=l&&t>=s,c=n?i()({bottom:o},h):i()({left:o},h);a&&(c=i()({},c,p));var m=D()((r={},k()(r,e+"-dot",!0),k()(r,e+"-dot-active",a),r));return d.a.createElement("span",{className:m,style:c,key:t})});return d.a.createElement("div",{className:e+"-step"},m)};P.propTypes={prefixCls:m.a.string,activeDotStyle:m.a.object,dotStyle:m.a.object,min:m.a.number,max:m.a.number,upperBound:m.a.number,lowerBound:m.a.number,included:m.a.bool,dots:m.a.bool,step:m.a.number,marks:m.a.object,vertical:m.a.bool};var z=P,R=function(t){var e=t.className,n=t.vertical,r=t.marks,o=t.included,a=t.upperBound,u=t.lowerBound,s=t.max,l=t.min,c=t.onClickLabel,f=Object.keys(r),h=s-l,p=f.map(parseFloat).sort(function(t,e){return t-e}).map(function(t){var s,f=r[t],p="object"===typeof f&&!d.a.isValidElement(f),v=p?f.label:f;if(!v&&0!==v)return null;var m=!o&&t===a||o&&t<=a&&t>=u,y=D()((s={},k()(s,e+"-text",!0),k()(s,e+"-text-active",m),s)),g=n?{marginBottom:"-50%",bottom:(t-l)/h*100+"%"}:{left:(t-l)/h*100+"%",transform:"translateX(-50%)",msTransform:"translateX(-50%)"},b=p?i()({},g,f.style):g;return d.a.createElement("span",{className:y,style:b,key:t,onMouseDown:function(e){return c(e,t)},onTouchStart:function(e){return c(e,t)}},v)});return d.a.createElement("div",{className:e},p)};R.propTypes={className:m.a.string,vertical:m.a.bool,marks:m.a.object,included:m.a.bool,upperBound:m.a.number,lowerBound:m.a.number,max:m.a.number,min:m.a.number,onClickLabel:m.a.func};var I=R,F=function(t){function e(){var t,n,r,i;a()(this,e);for(var o=arguments.length,u=Array(o),s=0;s<o;s++)u[s]=arguments[s];return n=r=c()(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.state={clickFocused:!1},r.setHandleRef=function(t){r.handle=t},r.handleMouseUp=function(){document.activeElement===r.handle&&r.setClickFocus(!0)},r.handleMouseDown=function(){r.focus()},r.handleBlur=function(){r.setClickFocus(!1)},r.handleKeyDown=function(){r.setClickFocus(!1)},i=n,c()(r,i)}return h()(e,t),s()(e,[{key:"componentDidMount",value:function(){this.onMouseUpListener=T(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(t){this.setState({clickFocused:t})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var t=this.props,e=t.prefixCls,n=t.vertical,r=t.offset,o=t.style,a=t.disabled,u=t.min,s=t.max,l=t.value,c=t.tabIndex,f=x()(t,["prefixCls","vertical","offset","style","disabled","min","max","value","tabIndex"]),h=D()(this.props.className,k()({},e+"-handle-click-focused",this.state.clickFocused)),p=n?{bottom:r+"%"}:{left:r+"%"},v=i()({},o,p),m=c||0;return(a||null===c)&&(m=null),d.a.createElement("div",i()({ref:this.setHandleRef,tabIndex:m},f,{className:h,style:v,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":u,"aria-valuemax":s,"aria-valuenow":l,"aria-disabled":!!a}))}}]),e}(d.a.Component),L=F;F.propTypes={prefixCls:m.a.string,className:m.a.string,vertical:m.a.bool,offset:m.a.number,style:m.a.object,disabled:m.a.bool,min:m.a.number,max:m.a.number,value:m.a.number,tabIndex:m.a.number};var N=n(54),B=n.n(N),U={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var e=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||e>=U.F1&&e<=U.F12)return!1;switch(e){case U.ALT:case U.CAPS_LOCK:case U.CONTEXT_MENU:case U.CTRL:case U.DOWN:case U.END:case U.ESC:case U.HOME:case U.INSERT:case U.LEFT:case U.MAC_FF_META:case U.META:case U.NUMLOCK:case U.NUM_CENTER:case U.PAGE_DOWN:case U.PAGE_UP:case U.PAUSE:case U.PRINT_SCREEN:case U.RIGHT:case U.SHIFT:case U.UP:case U.WIN_KEY:case U.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=U.ZERO&&t<=U.NINE)return!0;if(t>=U.NUM_ZERO&&t<=U.NUM_MULTIPLY)return!0;if(t>=U.A&&t<=U.Z)return!0;if(-1!==window.navigation.userAgent.indexOf("WebKit")&&0===t)return!0;switch(t){case U.SPACE:case U.QUESTION_MARK:case U.NUM_PLUS:case U.NUM_MINUS:case U.NUM_PERIOD:case U.NUM_DIVISION:case U.SEMICOLON:case U.DASH:case U.EQUALS:case U.COMMA:case U.PERIOD:case U.SLASH:case U.APOSTROPHE:case U.SINGLE_QUOTE:case U.OPEN_SQUARE_BRACKET:case U.BACKSLASH:case U.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},q=U;function V(t,e){try{return Object.keys(e).some(function(n){return t.target===Object(M.findDOMNode)(e[n])})}catch(n){return!1}}function W(t,e){var n=e.min,r=e.max;return t<n||t>r}function H(t){return t.touches.length>1||"touchend"===t.type.toLowerCase()&&t.touches.length>0}function G(t,e){var n=e.marks,r=e.step,i=e.min,o=e.max,a=Object.keys(n).map(parseFloat);if(null!==r){var u=Math.floor((o-i)/r),s=Math.min((t-i)/r,u),l=Math.round(s)*r+i;a.push(l)}var c=a.map(function(e){return Math.abs(t-e)});return a[c.indexOf(Math.min.apply(Math,B()(c)))]}function X(t,e){return t?e.clientY:e.pageX}function Z(t,e){return t?e.touches[0].clientY:e.touches[0].pageX}function Y(t,e){var n=e.getBoundingClientRect();return t?n.top+.5*n.height:window.pageXOffset+n.left+.5*n.width}function $(t,e){var n=e.max,r=e.min;return t<=r?r:t>=n?n:t}function K(t,e){var n=e.step,r=isFinite(G(t,e))?G(t,e):0;return null===n?r:parseFloat(r.toFixed(function(t){var e=t.toString(),n=0;return e.indexOf(".")>=0&&(n=e.length-e.indexOf(".")-1),n}(n)))}function J(t){t.stopPropagation(),t.preventDefault()}function Q(t,e,n){var r={increase:function(t,e){return t+e},decrease:function(t,e){return t-e}},i=r[t](Object.keys(n.marks).indexOf(JSON.stringify(e)),1),o=Object.keys(n.marks)[i];return n.step?r[t](e,n.step):Object.keys(n.marks).length&&n.marks[o]?n.marks[o]:e}function tt(t){switch(t.keyCode){case q.UP:case q.RIGHT:return function(t,e){return Q("increase",t,e)};case q.DOWN:case q.LEFT:return function(t,e){return Q("decrease",t,e)};case q.END:return function(t,e){return e.max};case q.HOME:return function(t,e){return e.min};case q.PAGE_UP:return function(t,e){return t+2*e.step};case q.PAGE_DOWN:return function(t,e){return t-2*e.step};default:return}}function et(){}function nt(t){var e,n;return n=e=function(t){function e(t){a()(this,e);var n=c()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.onMouseDown=function(t){if(0===t.button){var e=n.props.vertical,r=X(e,t);if(V(t,n.handlesRefs)){var i=Y(e,t.target);n.dragOffset=r-i,r=i}else n.dragOffset=0;n.removeDocumentEvents(),n.onStart(r),n.addDocumentMouseEvents()}},n.onTouchStart=function(t){if(!H(t)){var e=n.props.vertical,r=Z(e,t);if(V(t,n.handlesRefs)){var i=Y(e,t.target);n.dragOffset=r-i,r=i}else n.dragOffset=0;n.onStart(r),n.addDocumentTouchEvents(),J(t)}},n.onFocus=function(t){var e=n.props,r=e.onFocus,i=e.vertical;if(V(t,n.handlesRefs)){var o=Y(i,t.target);n.dragOffset=0,n.onStart(o),J(t),r&&r(t)}},n.onBlur=function(t){var e=n.props.onBlur;n.onEnd(),e&&e(t)},n.onMouseUp=function(){n.handlesRefs[n.prevMovedHandleIndex]&&n.handlesRefs[n.prevMovedHandleIndex].clickFocus()},n.onMouseMove=function(t){if(n.sliderRef){var e=X(n.props.vertical,t);n.onMove(t,e-n.dragOffset)}else n.onEnd()},n.onTouchMove=function(t){if(!H(t)&&n.sliderRef){var e=Z(n.props.vertical,t);n.onMove(t,e-n.dragOffset)}else n.onEnd()},n.onKeyDown=function(t){n.sliderRef&&V(t,n.handlesRefs)&&n.onKeyboard(t)},n.onClickMarkLabel=function(t,e){t.stopPropagation(),n.onChange({value:e}),n.setState({value:e},function(){return n.onEnd(!0)})},n.saveSlider=function(t){n.sliderRef=t},n.handlesRefs={},n}return h()(e,t),s()(e,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument}},{key:"componentWillUnmount",value:function(){S()(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentWillUnmount",this)&&S()(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var t=this.sliderRef.getBoundingClientRect();return this.props.vertical?t.top:t.left+window.pageXOffset}},{key:"getSliderLength",value:function(){var t=this.sliderRef;if(!t)return 0;var e=t.getBoundingClientRect();return this.props.vertical?e.height:e.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=T(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=T(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=T(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=T(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){this.props.disabled||this.handlesRefs[0].focus()}},{key:"blur",value:function(){var t=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(e){t.handlesRefs[e]&&t.handlesRefs[e].blur&&t.handlesRefs[e].blur()})}},{key:"calcValue",value:function(t){var e=this.props,n=e.vertical,r=e.min,i=e.max,o=Math.abs(Math.max(t,0)/this.getSliderLength());return n?(1-o)*(i-r)+r:o*(i-r)+r}},{key:"calcValueByPos",value:function(t){var e=t-this.getSliderStart();return this.trimAlignValue(this.calcValue(e))}},{key:"calcOffset",value:function(t){var e=this.props,n=e.min;return 100*((t-n)/(e.max-n))}},{key:"saveHandle",value:function(t,e){this.handlesRefs[t]=e}},{key:"render",value:function(){var t,n=this.props,r=n.prefixCls,o=n.className,a=n.marks,u=n.dots,s=n.step,l=n.included,c=n.disabled,f=n.vertical,h=n.min,p=n.max,v=n.children,m=n.maximumTrackStyle,y=n.style,g=n.railStyle,b=n.dotStyle,_=n.activeDotStyle,x=S()(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this),w=x.tracks,E=x.handles,O=D()(r,(t={},k()(t,r+"-with-marks",Object.keys(a).length),k()(t,r+"-disabled",c),k()(t,r+"-vertical",f),k()(t,o,o),t));return d.a.createElement("div",{ref:this.saveSlider,className:O,onTouchStart:c?et:this.onTouchStart,onMouseDown:c?et:this.onMouseDown,onMouseUp:c?et:this.onMouseUp,onKeyDown:c?et:this.onKeyDown,onFocus:c?et:this.onFocus,onBlur:c?et:this.onBlur,style:y},d.a.createElement("div",{className:r+"-rail",style:i()({},m,g)}),w,d.a.createElement(z,{prefixCls:r,vertical:f,marks:a,dots:u,step:s,included:l,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:p,min:h,dotStyle:b,activeDotStyle:_}),E,d.a.createElement(I,{className:r+"-mark",onClickLabel:c?et:this.onClickMarkLabel,vertical:f,marks:a,included:l,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:p,min:h}),v)}}]),e}(t),e.displayName="ComponentEnhancer("+t.displayName+")",e.propTypes=i()({},t.propTypes,{min:m.a.number,max:m.a.number,step:m.a.number,marks:m.a.object,included:m.a.bool,className:m.a.string,prefixCls:m.a.string,disabled:m.a.bool,children:m.a.any,onBeforeChange:m.a.func,onChange:m.a.func,onAfterChange:m.a.func,handle:m.a.func,dots:m.a.bool,vertical:m.a.bool,style:m.a.object,minimumTrackStyle:m.a.object,maximumTrackStyle:m.a.object,handleStyle:m.a.oneOfType([m.a.object,m.a.arrayOf(m.a.object)]),trackStyle:m.a.oneOfType([m.a.object,m.a.arrayOf(m.a.object)]),railStyle:m.a.object,dotStyle:m.a.object,activeDotStyle:m.a.object,autoFocus:m.a.bool,onFocus:m.a.func,onBlur:m.a.func}),e.defaultProps=i()({},t.defaultProps,{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(t){var e=t.index,n=x()(t,["index"]);return delete n.dragging,null===n.value?null:d.a.createElement(L,i()({},n,{key:e}))},onBeforeChange:et,onChange:et,onAfterChange:et,included:!0,disabled:!1,dots:!1,vertical:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),n}var rt=function(t){function e(t){a()(this,e);var n=c()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.onEnd=function(t){var e=n.state.dragging;n.removeDocumentEvents(),(e||t)&&n.props.onAfterChange(n.getValue()),n.setState({dragging:!1})};var r=void 0!==t.defaultValue?t.defaultValue:t.min,i=void 0!==t.value?t.value:r;return n.state={value:n.trimAlignValue(i),dragging:!1},n}return h()(e,t),s()(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.autoFocus,n=t.disabled;e&&!n&&this.focus()}},{key:"componentWillReceiveProps",value:function(t){if("value"in t||"min"in t||"max"in t){var e=this.state.value,n=void 0!==t.value?t.value:e,r=this.trimAlignValue(n,t);r!==e&&(this.setState({value:r}),W(n,t)&&this.props.onChange(r))}}},{key:"onChange",value:function(t){var e=this.props,n=!("value"in e),r=t.value>this.props.max?i()({},t,{value:this.props.max}):t;n&&this.setState(r);var o=r.value;e.onChange(o)}},{key:"onStart",value:function(t){this.setState({dragging:!0});var e=this.props,n=this.getValue();e.onBeforeChange(n);var r=this.calcValueByPos(t);this.startValue=r,this.startPosition=t,r!==n&&(this.prevMovedHandleIndex=0,this.onChange({value:r}))}},{key:"onMove",value:function(t,e){J(t);var n=this.state.value,r=this.calcValueByPos(e);r!==n&&this.onChange({value:r})}},{key:"onKeyboard",value:function(t){var e=tt(t);if(e){J(t);var n=this.state.value,r=e(n,this.props),i=this.trimAlignValue(r);if(i===n)return;this.onChange({value:i}),this.props.onAfterChange(i),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){return this.props.min}},{key:"getUpperBound",value:function(){return this.state.value}},{key:"trimAlignValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t)return null;var n=i()({},this.props,e);return K($(t,n),n)}},{key:"render",value:function(){var t=this,e=this.props,n=e.prefixCls,r=e.vertical,o=e.included,a=e.disabled,u=e.minimumTrackStyle,s=e.trackStyle,l=e.handleStyle,c=e.tabIndex,f=e.min,h=e.max,p=e.handle,v=this.state,m=v.value,y=v.dragging,g=this.calcOffset(m),_=p({className:n+"-handle",prefixCls:n,vertical:r,offset:g,value:m,dragging:y,disabled:a,min:f,max:h,index:0,tabIndex:c,style:l[0]||l,ref:function(e){return t.saveHandle(0,e)}}),x=s[0]||s;return{tracks:d.a.createElement(b,{className:n+"-track",vertical:r,included:o,offset:0,length:g,style:i()({},u,x)}),handles:_}}}]),e}(d.a.Component);rt.propTypes={defaultValue:m.a.number,value:m.a.number,disabled:m.a.bool,autoFocus:m.a.bool,tabIndex:m.a.number,min:m.a.number,max:m.a.number};var it=nt(rt),ot=n(155),at=n.n(ot),ut=function(t){function e(t){a()(this,e);var n=c()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.onEnd=function(t){var e=n.state.handle;n.removeDocumentEvents(),(null!==e||t)&&n.props.onAfterChange(n.getValue()),n.setState({handle:null})};var r=t.count,i=t.min,o=t.max,u=Array.apply(void 0,B()(Array(r+1))).map(function(){return i}),s="defaultValue"in t?t.defaultValue:u,l=(void 0!==t.value?t.value:s).map(function(t,e){return n.trimAlignValue(t,e)}),f=l[0]===o?0:l.length-1;return n.state={handle:null,recent:f,bounds:l},n}return h()(e,t),s()(e,[{key:"componentWillReceiveProps",value:function(t){var e=this;if(("value"in t||"min"in t||"max"in t)&&(this.props.min!==t.min||this.props.max!==t.max||!at()(this.props.value,t.value))){var n=this.state.bounds,r=t.value||n,i=r.map(function(n,r){return e.trimAlignValue(n,r,t)});if((i.length!==n.length||!i.every(function(t,e){return t===n[e]}))&&(this.setState({bounds:i}),r.some(function(e){return W(e,t)}))){var o=r.map(function(e){return $(e,t)});this.props.onChange(o)}}}},{key:"onChange",value:function(t){var e=this.props;!("value"in e)?this.setState(t):void 0!==t.handle&&this.setState({handle:t.handle});var n=i()({},this.state,t).bounds;e.onChange(n)}},{key:"onStart",value:function(t){var e=this.props,n=this.state,r=this.getValue();e.onBeforeChange(r);var i=this.calcValueByPos(t);this.startValue=i,this.startPosition=t;var o=this.getClosestBound(i);if(this.prevMovedHandleIndex=this.getBoundNeedMoving(i,o),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex}),i!==r[this.prevMovedHandleIndex]){var a=[].concat(B()(n.bounds));a[this.prevMovedHandleIndex]=i,this.onChange({bounds:a})}}},{key:"onMove",value:function(t,e){J(t);var n=this.state,r=this.calcValueByPos(e);r!==n.bounds[n.handle]&&this.moveTo(r)}},{key:"onKeyboard",value:function(t){var e=tt(t);if(e){J(t);var n=this.state,r=this.props,i=n.bounds,o=n.handle,a=i[null===o?n.recent:o],u=e(a,r),s=this.trimAlignValue(u);if(s===a)return;this.moveTo(s,!0)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(t){for(var e=this.state.bounds,n=0,r=1;r<e.length-1;++r)t>e[r]&&(n=r);return Math.abs(e[n+1]-t)<Math.abs(e[n]-t)&&(n+=1),n}},{key:"getBoundNeedMoving",value:function(t,e){var n=this.state,r=n.bounds,i=n.recent,o=e,a=r[e+1]===r[e];return a&&r[i]===r[e]&&(o=i),a&&t!==r[e+1]&&(o=t<r[e+1]?e:e+1),o}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var t=this.state.bounds;return t[t.length-1]}},{key:"getPoints",value:function(){var t=this.props,e=t.marks,n=t.step,r=t.min,o=t.max,a=this._getPointsCache;if(!a||a.marks!==e||a.step!==n){var u=i()({},e);if(null!==n)for(var s=r;s<=o;s+=n)u[s]=s;var l=Object.keys(u).map(parseFloat);l.sort(function(t,e){return t-e}),this._getPointsCache={marks:e,step:n,points:l}}return this._getPointsCache.points}},{key:"moveTo",value:function(t,e){var n=this,r=this.state,i=this.props,o=[].concat(B()(r.bounds)),a=null===r.handle?r.recent:r.handle;o[a]=t;var u=a;!1!==i.pushable?this.pushSurroundingHandles(o,u):i.allowCross&&(o.sort(function(t,e){return t-e}),u=o.indexOf(t)),this.onChange({handle:u,bounds:o}),e&&(this.props.onAfterChange(o),this.setState({},function(){n.handlesRefs[u].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(t,e){var n=t[e],r=this.props.pushable;r=Number(r);var i=0;if(t[e+1]-n<r&&(i=1),n-t[e-1]<r&&(i=-1),0!==i){var o=e+i,a=i*(t[o]-n);this.pushHandle(t,o,i,r-a)||(t[e]=t[o]-i*r)}}},{key:"pushHandle",value:function(t,e,n,r){for(var i=t[e],o=t[e];n*(o-i)<r;){if(!this.pushHandleOnePoint(t,e,n))return t[e]=i,!1;o=t[e]}return!0}},{key:"pushHandleOnePoint",value:function(t,e,n){var r=this.getPoints(),i=r.indexOf(t[e])+n;if(i>=r.length||i<0)return!1;var o=e+n,a=r[i],u=this.props.pushable,s=n*(t[o]-a);return!!this.pushHandle(t,o,n,u-s)&&(t[e]=a,!0)}},{key:"trimAlignValue",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i()({},this.props,n),o=$(t,r);return K(this.ensureValueNotConflict(e,o,r),r)}},{key:"ensureValueNotConflict",value:function(t,e,n){var r=n.allowCross,i=n.pushable,o=this.state||{},a=o.bounds;if(t=void 0===t?o.handle:t,i=Number(i),!r&&null!=t&&void 0!==a){if(t>0&&e<=a[t-1]+i)return a[t-1]+i;if(t<a.length-1&&e>=a[t+1]-i)return a[t+1]-i}return e}},{key:"render",value:function(){var t=this,e=this.state,n=e.handle,r=e.bounds,i=this.props,o=i.prefixCls,a=i.vertical,u=i.included,s=i.disabled,l=i.min,c=i.max,f=i.handle,h=i.trackStyle,p=i.handleStyle,v=i.tabIndex,m=r.map(function(e){return t.calcOffset(e)}),y=o+"-handle",g=r.map(function(e,r){var i,u=v[r]||0;return(s||null===v[r])&&(u=null),f({className:D()((i={},k()(i,y,!0),k()(i,y+"-"+(r+1),!0),i)),prefixCls:o,vertical:a,offset:m[r],value:e,dragging:n===r,index:r,tabIndex:u,min:l,max:c,disabled:s,style:p[r],ref:function(e){return t.saveHandle(r,e)}})});return{tracks:r.slice(0,-1).map(function(t,e){var n,r=e+1,i=D()((n={},k()(n,o+"-track",!0),k()(n,o+"-track-"+r,!0),n));return d.a.createElement(b,{className:i,vertical:a,included:u,offset:m[r-1],length:m[r]-m[r-1],style:h[e],key:r})}),handles:g}}}]),e}(d.a.Component);ut.displayName="Range",ut.propTypes={defaultValue:m.a.arrayOf(m.a.number),value:m.a.arrayOf(m.a.number),count:m.a.number,pushable:m.a.oneOfType([m.a.bool,m.a.number]),allowCross:m.a.bool,disabled:m.a.bool,tabIndex:m.a.arrayOf(m.a.number),min:m.a.number,max:m.a.number},ut.defaultProps={count:1,allowCross:!0,pushable:!1,tabIndex:[]};var st=nt(ut);function lt(t,e){for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}var ct=function(t){function e(){var t,n,r,i;a()(this,e);for(var o=arguments.length,u=Array(o),s=0;s<o;s++)u[s]=arguments[s];return n=r=c()(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.removeContainer=function(){r.container&&(C.a.unmountComponentAtNode(r.container),r.container.parentNode.removeChild(r.container),r.container=null)},r.renderComponent=function(t,e){var n=r.props,i=n.visible,o=n.getComponent,a=n.forceRender,u=n.getContainer,s=n.parent;(i||s._component||a)&&(r.container||(r.container=u()),C.a.unstable_renderSubtreeIntoContainer(s,o(t),r.container,function(){e&&e.call(this)}))},i=n,c()(r,i)}return h()(e,t),s()(e,[{key:"componentDidMount",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentDidUpdate",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentWillUnmount",value:function(){this.props.autoDestroy&&this.removeContainer()}},{key:"render",value:function(){return this.props.children({renderComponent:this.renderComponent,removeContainer:this.removeContainer})}}]),e}(d.a.Component);ct.propTypes={autoMount:m.a.bool,autoDestroy:m.a.bool,visible:m.a.bool,forceRender:m.a.bool,parent:m.a.any,getComponent:m.a.func.isRequired,getContainer:m.a.func.isRequired,children:m.a.func.isRequired},ct.defaultProps={autoMount:!0,autoDestroy:!0,forceRender:!1};var ft=ct,ht=function(t){function e(){return a()(this,e),c()(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return h()(e,t),s()(e,[{key:"componentDidMount",value:function(){this.createContainer()}},{key:"componentDidUpdate",value:function(t){var e=this.props.didUpdate;e&&e(t)}},{key:"componentWillUnmount",value:function(){this.removeContainer()}},{key:"createContainer",value:function(){this._container=this.props.getContainer(),this.forceUpdate()}},{key:"removeContainer",value:function(){this._container&&this._container.parentNode.removeChild(this._container)}},{key:"render",value:function(){return this._container?C.a.createPortal(this.props.children,this._container):null}}]),e}(d.a.Component);ht.propTypes={getContainer:m.a.func.isRequired,children:m.a.node.isRequired,didUpdate:m.a.func};var pt=ht;function dt(t,e,n){return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function vt(t,e){this[t]=e}var mt=void 0,yt={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function gt(){if(void 0!==mt)return mt;mt="";var t=document.createElement("p").style;for(var e in yt)e+"Transform"in t&&(mt=e);return mt}function bt(){return gt()?gt()+"TransitionProperty":"transitionProperty"}function _t(){return gt()?gt()+"Transform":"transform"}function xt(t,e){var n=bt();n&&(t.style[n]=e,"transitionProperty"!==n&&(t.style.transitionProperty=e))}function wt(t,e){var n=_t();n&&(t.style[n]=e,"transform"!==n&&(t.style.transform=e))}var kt=/matrix\((.*)\)/,Et=/matrix3d\((.*)\)/;var St="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot=void 0;function At(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function Mt(t,e,n){var r=n;if("object"!==("undefined"===typeof e?"undefined":St(e)))return"undefined"!==typeof r?("number"===typeof r&&(r+="px"),void(t.style[e]=r)):Ot(t,e);for(var i in e)e.hasOwnProperty(i)&&Mt(t,i,e[i])}function Ct(t,e){var n=t["page"+(e?"Y":"X")+"Offset"],r="scroll"+(e?"Top":"Left");if("number"!==typeof n){var i=t.document;"number"!==typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function Tt(t){return Ct(t)}function jt(t){return Ct(t,!0)}function Dt(t){var e=function(t){var e,n=void 0,r=void 0,i=t.ownerDocument,o=i.body,a=i&&i.documentElement;return n=(e=t.getBoundingClientRect()).left,r=e.top,{left:n-=a.clientLeft||o.clientLeft||0,top:r-=a.clientTop||o.clientTop||0}}(t),n=t.ownerDocument,r=n.defaultView||n.parentWindow;return e.left+=Tt(r),e.top+=jt(r),e}function Pt(t){return null!==t&&void 0!==t&&t==t.window}function zt(t){return Pt(t)?t.document:9===t.nodeType?t:t.ownerDocument}var Rt=new RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i"),It=/^(top|right|bottom|left)$/,Ft="currentStyle",Lt="runtimeStyle",Nt="left",Bt="px";function Ut(t,e){return"left"===t?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function qt(t){return"left"===t?"right":"right"===t?"left":"top"===t?"bottom":"bottom"===t?"top":void 0}function Vt(t,e,n){"static"===Mt(t,"position")&&(t.style.position="relative");var r=-999,i=-999,o=Ut("left",n),a=Ut("top",n),u=qt(o),s=qt(a);"left"!==o&&(r=999),"top"!==a&&(i=999);var l,c="",f=Dt(t);("left"in e||"top"in e)&&(c=(l=t).style.transitionProperty||l.style[bt()]||"",xt(t,"none")),"left"in e&&(t.style[u]="",t.style[o]=r+"px"),"top"in e&&(t.style[s]="",t.style[a]=i+"px"),At(t);var h=Dt(t),p={};for(var d in e)if(e.hasOwnProperty(d)){var v=Ut(d,n),m="left"===d?r:i,y=f[d]-h[d];p[v]=v===d?m+y:m-y}Mt(t,p),At(t),("left"in e||"top"in e)&&xt(t,c);var g={};for(var b in e)if(e.hasOwnProperty(b)){var _=Ut(b,n),x=e[b]-f[b];g[_]=b===_?p[_]+x:p[_]-x}Mt(t,g)}function Wt(t,e){var n=Dt(t),r=function(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("transform")||e.getPropertyValue(_t());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(t),i={x:r.x,y:r.y};"left"in e&&(i.x=r.x+e.left-n.left),"top"in e&&(i.y=r.y+e.top-n.top),function(t,e){var n=window.getComputedStyle(t,null),r=n.getPropertyValue("transform")||n.getPropertyValue(_t());if(r&&"none"!==r){var i=void 0,o=r.match(kt);o?((i=(o=o[1]).split(",").map(function(t){return parseFloat(t,10)}))[4]=e.x,i[5]=e.y,wt(t,"matrix("+i.join(",")+")")):((i=r.match(Et)[1].split(",").map(function(t){return parseFloat(t,10)}))[12]=e.x,i[13]=e.y,wt(t,"matrix3d("+i.join(",")+")"))}else wt(t,"translateX("+e.x+"px) translateY("+e.y+"px) translateZ(0)")}(t,i)}function Ht(t,e){for(var n=0;n<t.length;n++)e(t[n])}function Gt(t){return"border-box"===Ot(t,"boxSizing")}"undefined"!==typeof window&&(Ot=window.getComputedStyle?function(t,e,n){var r=n,i="",o=zt(t);return(r=r||o.defaultView.getComputedStyle(t,null))&&(i=r.getPropertyValue(e)||r[e]),i}:function(t,e){var n=t[Ft]&&t[Ft][e];if(Rt.test(n)&&!It.test(e)){var r=t.style,i=r[Nt],o=t[Lt][Nt];t[Lt][Nt]=t[Ft][Nt],r[Nt]="fontSize"===e?"1em":n||0,n=r.pixelLeft+Bt,r[Nt]=i,t[Lt][Nt]=o}return""===n?"auto":n});var Xt=["margin","border","padding"],Zt=-1,Yt=2,$t=1;function Kt(t,e,n){var r=0,i=void 0,o=void 0,a=void 0;for(o=0;o<e.length;o++)if(i=e[o])for(a=0;a<n.length;a++){var u=void 0;u="border"===i?""+i+n[a]+"Width":i+n[a],r+=parseFloat(Ot(t,u))||0}return r}var Jt={};function Qt(t,e,n){var r=n;if(Pt(t))return"width"===e?Jt.viewportWidth(t):Jt.viewportHeight(t);if(9===t.nodeType)return"width"===e?Jt.docWidth(t):Jt.docHeight(t);var i="width"===e?["Left","Right"]:["Top","Bottom"],o="width"===e?t.getBoundingClientRect().width:t.getBoundingClientRect().height,a=(Ot(t),Gt(t)),u=0;(null===o||void 0===o||o<=0)&&(o=void 0,(null===(u=Ot(t,e))||void 0===u||Number(u)<0)&&(u=t.style[e]||0),u=parseFloat(u)||0),void 0===r&&(r=a?$t:Zt);var s=void 0!==o||a,l=o||u;return r===Zt?s?l-Kt(t,["border","padding"],i):u:s?r===$t?l:l+(r===Yt?-Kt(t,["border"],i):Kt(t,["margin"],i)):u+Kt(t,Xt.slice(r),i)}Ht(["Width","Height"],function(t){Jt["doc"+t]=function(e){var n=e.document;return Math.max(n.documentElement["scroll"+t],n.body["scroll"+t],Jt["viewport"+t](n))},Jt["viewport"+t]=function(e){var n="client"+t,r=e.document,i=r.body,o=r.documentElement[n];return"CSS1Compat"===r.compatMode&&o||i&&i[n]||o}});var te={position:"absolute",visibility:"hidden",display:"block"};function ee(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=void 0,i=e[0];return 0!==i.offsetWidth?r=Qt.apply(void 0,e):function(t,e,n){var r={},i=t.style,o=void 0;for(o in e)e.hasOwnProperty(o)&&(r[o]=i[o],i[o]=e[o]);for(o in n.call(t),e)e.hasOwnProperty(o)&&(i[o]=r[o])}(i,te,function(){r=Qt.apply(void 0,e)}),r}function ne(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Ht(["width","height"],function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);Jt["outer"+e]=function(e,n){return e&&ee(e,t,n?0:$t)};var n="width"===t?["Left","Right"]:["Top","Bottom"];Jt[t]=function(e,r){var i=r;if(void 0===i)return e&&ee(e,t,Zt);if(e){Ot(e);return Gt(e)&&(i+=Kt(e,["padding","border"],n)),Mt(e,t,i)}}});var re={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var e=t.ownerDocument||t;return e.defaultView||e.parentWindow},getDocument:zt,offset:function(t,e,n){if("undefined"===typeof e)return Dt(t);!function(t,e,n){if(n.ignoreShake){var r=Dt(t),i=r.left.toFixed(0),o=r.top.toFixed(0),a=e.left.toFixed(0),u=e.top.toFixed(0);if(i===a&&o===u)return}n.useCssRight||n.useCssBottom?Vt(t,e,n):n.useCssTransform&&_t()in document.body.style?Wt(t,e):Vt(t,e,n)}(t,e,n||{})},isWindow:Pt,each:Ht,css:Mt,clone:function(t){var e=void 0,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);if(t.overflow)for(e in t)t.hasOwnProperty(e)&&(n.overflow[e]=t.overflow[e]);return n},mix:ne,getWindowScrollLeft:function(t){return Tt(t)},getWindowScrollTop:function(t){return jt(t)},merge:function(){for(var t={},e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++)re.mix(t,n[i]);return t},viewportWidth:0,viewportHeight:0};ne(re,Jt);var ie=re;var oe=function(t){if(ie.isWindow(t)||9===t.nodeType)return null;var e=ie.getDocument(t).body,n=void 0,r=ie.css(t,"position");if("fixed"!==r&&"absolute"!==r)return"html"===t.nodeName.toLowerCase()?null:t.parentNode;for(n=t.parentNode;n&&n!==e;n=n.parentNode)if("static"!==(r=ie.css(n,"position")))return n;return null};var ae=function(t){for(var e={left:0,right:1/0,top:0,bottom:1/0},n=oe(t),r=ie.getDocument(t),i=r.defaultView||r.parentWindow,o=r.body,a=r.documentElement;n;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===n.clientWidth||n===o||n===a||"visible"===ie.css(n,"overflow")){if(n===o||n===a)break}else{var u=ie.offset(n);u.left+=n.clientLeft,u.top+=n.clientTop,e.top=Math.max(e.top,u.top),e.right=Math.min(e.right,u.left+n.clientWidth),e.bottom=Math.min(e.bottom,u.top+n.clientHeight),e.left=Math.max(e.left,u.left)}n=oe(n)}var s=null;ie.isWindow(t)||9===t.nodeType||(s=t.style.position,"absolute"===ie.css(t,"position")&&(t.style.position="fixed"));var l=ie.getWindowScrollLeft(i),c=ie.getWindowScrollTop(i),f=ie.viewportWidth(i),h=ie.viewportHeight(i),p=a.scrollWidth,d=a.scrollHeight,v=window.getComputedStyle(o);if("hidden"===v.overflowX&&(p=i.innerWidth),"hidden"===v.overflowY&&(d=i.innerHeight),t.style&&(t.style.position=s),function(t){if(ie.isWindow(t)||9===t.nodeType)return!1;var e=ie.getDocument(t).body,n=null;for(n=t.parentNode;n&&n!==e;n=n.parentNode)if("fixed"===ie.css(n,"position"))return!0;return!1}(t))e.left=Math.max(e.left,l),e.top=Math.max(e.top,c),e.right=Math.min(e.right,l+f),e.bottom=Math.min(e.bottom,c+h);else{var m=Math.max(p,l+f);e.right=Math.min(e.right,m);var y=Math.max(d,c+h);e.bottom=Math.min(e.bottom,y)}return e.top>=0&&e.left>=0&&e.bottom>e.top&&e.right>e.left?e:null};var ue=function(t,e,n,r){var i=ie.clone(t),o={width:e.width,height:e.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),ie.mix(i,o)};var se=function(t){var e=void 0,n=void 0,r=void 0;if(ie.isWindow(t)||9===t.nodeType){var i=ie.getWindow(t);e={left:ie.getWindowScrollLeft(i),top:ie.getWindowScrollTop(i)},n=ie.viewportWidth(i),r=ie.viewportHeight(i)}else e=ie.offset(t),n=ie.outerWidth(t),r=ie.outerHeight(t);return e.width=n,e.height=r,e};var le=function(t,e){var n=e.charAt(0),r=e.charAt(1),i=t.width,o=t.height,a=t.left,u=t.top;return"c"===n?u+=o/2:"b"===n&&(u+=o),"c"===r?a+=i/2:"r"===r&&(a+=i),{left:a,top:u}};var ce=function(t,e,n,r,i){var o=le(e,n[1]),a=le(t,n[0]),u=[a.left-o.left,a.top-o.top];return{left:t.left-u[0]+r[0]-i[0],top:t.top-u[1]+r[1]-i[1]}};function fe(t,e,n){return t.left<n.left||t.left+e.width>n.right}function he(t,e,n){return t.top<n.top||t.top+e.height>n.bottom}function pe(t,e,n){var r=[];return ie.each(t,function(t){r.push(t.replace(e,function(t){return n[t]}))}),r}function de(t,e){return t[e]=-t[e],t}function ve(t,e){return(/%$/.test(t)?parseInt(t.substring(0,t.length-1),10)/100*e:parseInt(t,10))||0}function me(t,e){t[0]=ve(t[0],e.width),t[1]=ve(t[1],e.height)}var ye=function(t,e,n,r){var i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],u=n.overflow,s=n.source||t;o=[].concat(o),a=[].concat(a),u=u||{};var l={},c=0,f=ae(s),h=se(s);me(o,h),me(a,e);var p=ce(h,e,i,o,a),d=ie.merge(h,p);if(f&&(u.adjustX||u.adjustY)&&r){if(u.adjustX&&fe(p,h,f)){var v=pe(i,/[lr]/gi,{l:"r",r:"l"}),m=de(o,0),y=de(a,0);(function(t,e,n){return t.left>n.right||t.left+e.width<n.left})(ce(h,e,v,m,y),h,f)||(c=1,i=v,o=m,a=y)}if(u.adjustY&&he(p,h,f)){var g=pe(i,/[tb]/gi,{t:"b",b:"t"}),b=de(o,1),_=de(a,1);(function(t,e,n){return t.top>n.bottom||t.top+e.height<n.top})(ce(h,e,g,b,_),h,f)||(c=1,i=g,o=b,a=_)}c&&(p=ce(h,e,i,o,a),ie.mix(d,p));var x=fe(p,h,f),w=he(p,h,f);(x||w)&&(i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0]),l.adjustX=u.adjustX&&x,l.adjustY=u.adjustY&&w,(l.adjustX||l.adjustY)&&(d=ue(p,h,f,l))}return d.width!==h.width&&ie.css(s,"width",ie.width(s)+d.width-h.width),d.height!==h.height&&ie.css(s,"height",ie.height(s)+d.height-h.height),ie.offset(s,{left:d.left,top:d.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:l}};function ge(t,e,n){var r=n.target||e,i=se(r),o=!function(t){var e=ae(t),n=se(t);return!e||n.left+n.width<=e.left||n.top+n.height<=e.top||n.left>=e.right||n.top>=e.bottom}(r);return ye(t,i,n,o)}ge.__getOffsetParent=oe,ge.__getVisibleRectForElement=ae;var be=ge,_e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var xe=function(t,e,n){var r=void 0,i=void 0,o=ie.getDocument(t),a=o.defaultView||o.parentWindow,u=ie.getWindowScrollLeft(a),s=ie.getWindowScrollTop(a),l=ie.viewportWidth(a),c=ie.viewportHeight(a),f={left:r="pageX"in e?e.pageX:u+e.clientX,top:i="pageY"in e?e.pageY:s+e.clientY,width:0,height:0},h=r>=0&&r<=u+l&&i>=0&&i<=s+c,p=[n.points[0],"cc"];return ye(t,f,_e({},n,{points:p}),h)};function we(t){return t&&"object"===typeof t&&t.window===t}function ke(t,e){var n=Math.floor(t),r=Math.floor(e);return Math.abs(n-r)<=1}function Ee(t){return"function"===typeof t&&t?t():null}function Se(t){return"object"===typeof t&&t?t:null}var Oe=function(t){function e(){var t,n,r,i;a()(this,e);for(var o=arguments.length,u=Array(o),s=0;s<o;s++)u[s]=arguments[s];return n=r=c()(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.forceAlign=function(){var t=r.props,e=t.disabled,n=t.target,i=t.align,o=t.onAlign;if(!e&&n){var a=C.a.findDOMNode(r),u=void 0,s=Ee(n),l=Se(n),c=document.activeElement;s?u=be(a,s,i):l&&(u=xe(a,l,i)),function(t,e){t!==document.activeElement&&lt(e,t)&&t.focus()}(c,a),o&&o(a,u)}},i=n,c()(r,i)}return h()(e,t),s()(e,[{key:"componentDidMount",value:function(){var t=this.props;this.forceAlign(),!t.disabled&&t.monitorWindowResize&&this.startMonitorWindowResize()}},{key:"componentDidUpdate",value:function(t){var e,n,r=!1,i=this.props;if(!i.disabled){var o=C.a.findDOMNode(this),a=o?o.getBoundingClientRect():null;if(t.disabled)r=!0;else{var u=Ee(t.target),s=Ee(i.target),l=Se(t.target),c=Se(i.target);we(u)&&we(s)?r=!1:(u!==s||u&&!s&&c||l&&c&&s||c&&!((e=l)===(n=c)||e&&n&&("pageX"in n&&"pageY"in n?e.pageX===n.pageX&&e.pageY===n.pageY:"clientX"in n&&"clientY"in n&&e.clientX===n.clientX&&e.clientY===n.clientY)))&&(r=!0);var f=this.sourceRect||{};r||!o||ke(f.width,a.width)&&ke(f.height,a.height)||(r=!0)}this.sourceRect=a}r&&this.forceAlign(),i.monitorWindowResize&&!i.disabled?this.startMonitorWindowResize():this.stopMonitorWindowResize()}},{key:"componentWillUnmount",value:function(){this.stopMonitorWindowResize()}},{key:"startMonitorWindowResize",value:function(){this.resizeHandler||(this.bufferMonitor=function(t,e){var n=void 0;function r(){n&&(clearTimeout(n),n=null)}function i(){r(),n=setTimeout(t,e)}return i.clear=r,i}(this.forceAlign,this.props.monitorBufferTime),this.resizeHandler=T(window,"resize",this.bufferMonitor))}},{key:"stopMonitorWindowResize",value:function(){this.resizeHandler&&(this.bufferMonitor.clear(),this.resizeHandler.remove(),this.resizeHandler=null)}},{key:"render",value:function(){var t=this,e=this.props,n=e.childrenProps,r=e.children,i=d.a.Children.only(r);if(n){var o={};return Object.keys(n).forEach(function(e){o[e]=t.props[n[e]]}),d.a.cloneElement(i,o)}return i}}]),e}(p.Component);Oe.propTypes={childrenProps:m.a.object,align:m.a.object.isRequired,target:m.a.oneOfType([m.a.func,m.a.shape({clientX:m.a.number,clientY:m.a.number,pageX:m.a.number,pageY:m.a.number})]),onAlign:m.a.func,monitorBufferTime:m.a.number,monitorWindowResize:m.a.bool,disabled:m.a.bool,children:m.a.any},Oe.defaultProps={target:function(){return window},monitorBufferTime:50,monitorWindowResize:!1,disabled:!1};var Ae=Oe;function Me(t){var e=[];return d.a.Children.forEach(t,function(t){e.push(t)}),e}function Ce(t,e){var n=null;return t&&t.forEach(function(t){n||t&&t.key===e&&(n=t)}),n}function Te(t,e,n){var r=null;return t&&t.forEach(function(t){if(t&&t.key===e&&t.props[n]){if(r)throw new Error("two child with same key for <rc-animate> children");r=t}}),r}var je=n(77),De=n.n(je),Pe={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},ze={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},Re=[],Ie=[];function Fe(t,e,n){t.addEventListener(e,n,!1)}function Le(t,e,n){t.removeEventListener(e,n,!1)}"undefined"!==typeof window&&"undefined"!==typeof document&&function(){var t=document.createElement("div").style;function e(e,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];for(var o in i)if(o in t){n.push(i[o]);break}}}"AnimationEvent"in window||(delete Pe.animationstart.animation,delete ze.animationend.animation),"TransitionEvent"in window||(delete Pe.transitionstart.transition,delete ze.transitionend.transition),e(Pe,Re),e(ze,Ie)}();var Ne={startEvents:Re,addStartEventListener:function(t,e){0!==Re.length?Re.forEach(function(n){Fe(t,n,e)}):window.setTimeout(e,0)},removeStartEventListener:function(t,e){0!==Re.length&&Re.forEach(function(n){Le(t,n,e)})},endEvents:Ie,addEndEventListener:function(t,e){0!==Ie.length?Ie.forEach(function(n){Fe(t,n,e)}):window.setTimeout(e,0)},removeEndEventListener:function(t,e){0!==Ie.length&&Ie.forEach(function(n){Le(t,n,e)})}},Be=n(156),Ue=n.n(Be),qe=0!==Ne.endEvents.length,Ve=["Webkit","Moz","O","ms"],We=["-webkit-","-moz-","-o-","ms-",""];function He(t,e){for(var n=window.getComputedStyle(t,null),r="",i=0;i<We.length&&!(r=n.getPropertyValue(We[i]+e));i++);return r}function Ge(t){if(qe){var e=parseFloat(He(t,"transition-delay"))||0,n=parseFloat(He(t,"transition-duration"))||0,r=parseFloat(He(t,"animation-delay"))||0,i=parseFloat(He(t,"animation-duration"))||0,o=Math.max(n+e,i+r);t.rcEndAnimTimeout=setTimeout(function(){t.rcEndAnimTimeout=null,t.rcEndListener&&t.rcEndListener()},1e3*o+200)}}function Xe(t){t.rcEndAnimTimeout&&(clearTimeout(t.rcEndAnimTimeout),t.rcEndAnimTimeout=null)}var Ze=function(t,e,n){var r="object"===("undefined"===typeof e?"undefined":De()(e)),i=r?e.name:e,o=r?e.active:e+"-active",a=n,u=void 0,s=void 0,l=Ue()(t);return n&&"[object Object]"===Object.prototype.toString.call(n)&&(a=n.end,u=n.start,s=n.active),t.rcEndListener&&t.rcEndListener(),t.rcEndListener=function(e){e&&e.target!==t||(t.rcAnimTimeout&&(clearTimeout(t.rcAnimTimeout),t.rcAnimTimeout=null),Xe(t),l.remove(i),l.remove(o),Ne.removeEndEventListener(t,t.rcEndListener),t.rcEndListener=null,a&&a())},Ne.addEndEventListener(t,t.rcEndListener),u&&u(),l.add(i),t.rcAnimTimeout=setTimeout(function(){t.rcAnimTimeout=null,l.add(o),s&&setTimeout(s,0),Ge(t)},30),{stop:function(){t.rcEndListener&&t.rcEndListener()}}};Ze.style=function(t,e,n){t.rcEndListener&&t.rcEndListener(),t.rcEndListener=function(e){e&&e.target!==t||(t.rcAnimTimeout&&(clearTimeout(t.rcAnimTimeout),t.rcAnimTimeout=null),Xe(t),Ne.removeEndEventListener(t,t.rcEndListener),t.rcEndListener=null,n&&n())},Ne.addEndEventListener(t,t.rcEndListener),t.rcAnimTimeout=setTimeout(function(){for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);t.rcAnimTimeout=null,Ge(t)},0)},Ze.setTransition=function(t,e,n){var r=e,i=n;void 0===n&&(i=r,r=""),r=r||"",Ve.forEach(function(e){t.style[e+"Transition"+r]=i})},Ze.isCssAnimationSupported=qe;var Ye=Ze,$e={isAppearSupported:function(t){return t.transitionName&&t.transitionAppear||t.animation.appear},isEnterSupported:function(t){return t.transitionName&&t.transitionEnter||t.animation.enter},isLeaveSupported:function(t){return t.transitionName&&t.transitionLeave||t.animation.leave},allowAppearCallback:function(t){return t.transitionAppear||t.animation.appear},allowEnterCallback:function(t){return t.transitionEnter||t.animation.enter},allowLeaveCallback:function(t){return t.transitionLeave||t.animation.leave}},Ke={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},Je=function(t){function e(){return a()(this,e),c()(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return h()(e,t),s()(e,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(t){$e.isEnterSupported(this.props)?this.transition("enter",t):t()}},{key:"componentWillAppear",value:function(t){$e.isAppearSupported(this.props)?this.transition("appear",t):t()}},{key:"componentWillLeave",value:function(t){$e.isLeaveSupported(this.props)?this.transition("leave",t):t()}},{key:"transition",value:function(t,e){var n=this,r=C.a.findDOMNode(this),i=this.props,o=i.transitionName,a="object"===typeof o;this.stop();var u=function(){n.stopper=null,e()};if((qe||!i.animation[t])&&o&&i[Ke[t]]){var s=a?o[t]:o+"-"+t,l=s+"-active";a&&o[t+"Active"]&&(l=o[t+"Active"]),this.stopper=Ye(r,{name:s,active:l},u)}else this.stopper=i.animation[t](r,u)}},{key:"stop",value:function(){var t=this.stopper;t&&(this.stopper=null,t.stop())}},{key:"render",value:function(){return this.props.children}}]),e}(d.a.Component);Je.propTypes={children:m.a.any};var Qe=Je,tn="rc_animate_"+Date.now();function en(t){var e=t.children;return d.a.isValidElement(e)&&!e.key?d.a.cloneElement(e,{key:tn}):e}function nn(){}var rn=function(t){function e(t){a()(this,e);var n=c()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return on.call(n),n.currentlyAnimatingKeys={},n.keysToEnter=[],n.keysToLeave=[],n.state={children:Me(en(t))},n.childrenRefs={},n}return h()(e,t),s()(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props.showProp,n=this.state.children;e&&(n=n.filter(function(t){return!!t.props[e]})),n.forEach(function(e){e&&t.performAppear(e.key)})}},{key:"componentWillReceiveProps",value:function(t){var e=this;this.nextProps=t;var n=Me(en(t)),r=this.props;r.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach(function(t){e.stop(t)});var i=r.showProp,o=this.currentlyAnimatingKeys,a=r.exclusive?Me(en(r)):this.state.children,u=[];i?(a.forEach(function(t){var e=t&&Ce(n,t.key),r=void 0;(r=e&&e.props[i]||!t.props[i]?e:d.a.cloneElement(e||t,k()({},i,!0)))&&u.push(r)}),n.forEach(function(t){t&&Ce(a,t.key)||u.push(t)})):u=function(t,e){var n=[],r={},i=[];return t.forEach(function(t){t&&Ce(e,t.key)?i.length&&(r[t.key]=i,i=[]):i.push(t)}),e.forEach(function(t){t&&Object.prototype.hasOwnProperty.call(r,t.key)&&(n=n.concat(r[t.key])),n.push(t)}),n=n.concat(i)}(a,n),this.setState({children:u}),n.forEach(function(t){var n=t&&t.key;if(!t||!o[n]){var r=t&&Ce(a,n);if(i){var u=t.props[i];if(r)!Te(a,n,i)&&u&&e.keysToEnter.push(n);else u&&e.keysToEnter.push(n)}else r||e.keysToEnter.push(n)}}),a.forEach(function(t){var r=t&&t.key;if(!t||!o[r]){var a=t&&Ce(n,r);if(i){var u=t.props[i];if(a)!Te(n,r,i)&&u&&e.keysToLeave.push(r);else u&&e.keysToLeave.push(r)}else a||e.keysToLeave.push(r)}})}},{key:"componentDidUpdate",value:function(){var t=this.keysToEnter;this.keysToEnter=[],t.forEach(this.performEnter);var e=this.keysToLeave;this.keysToLeave=[],e.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(t,e){var n=this.props.showProp;return n?Te(t,e,n):Ce(t,e)}},{key:"stop",value:function(t){delete this.currentlyAnimatingKeys[t];var e=this.childrenRefs[t];e&&e.stop()}},{key:"render",value:function(){var t=this,e=this.props;this.nextProps=e;var n=this.state.children,r=null;n&&(r=n.map(function(n){if(null===n||void 0===n)return n;if(!n.key)throw new Error("must set key for <rc-animate> children");return d.a.createElement(Qe,{key:n.key,ref:function(e){t.childrenRefs[n.key]=e},animation:e.animation,transitionName:e.transitionName,transitionEnter:e.transitionEnter,transitionAppear:e.transitionAppear,transitionLeave:e.transitionLeave},n)}));var o=e.component;if(o){var a=e;return"string"===typeof o&&(a=i()({className:e.className,style:e.style},e.componentProps)),d.a.createElement(o,a,r)}return r[0]||null}}]),e}(d.a.Component);rn.isAnimate=!0,rn.propTypes={component:m.a.any,componentProps:m.a.object,animation:m.a.object,transitionName:m.a.oneOfType([m.a.string,m.a.object]),transitionEnter:m.a.bool,transitionAppear:m.a.bool,exclusive:m.a.bool,transitionLeave:m.a.bool,onEnd:m.a.func,onEnter:m.a.func,onLeave:m.a.func,onAppear:m.a.func,showProp:m.a.string,children:m.a.node},rn.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:nn,onEnter:nn,onLeave:nn,onAppear:nn};var on=function(){var t=this;this.performEnter=function(e){t.childrenRefs[e]&&(t.currentlyAnimatingKeys[e]=!0,t.childrenRefs[e].componentWillEnter(t.handleDoneAdding.bind(t,e,"enter")))},this.performAppear=function(e){t.childrenRefs[e]&&(t.currentlyAnimatingKeys[e]=!0,t.childrenRefs[e].componentWillAppear(t.handleDoneAdding.bind(t,e,"appear")))},this.handleDoneAdding=function(e,n){var r=t.props;if(delete t.currentlyAnimatingKeys[e],!r.exclusive||r===t.nextProps){var i=Me(en(r));t.isValidChildByKey(i,e)?"appear"===n?$e.allowAppearCallback(r)&&(r.onAppear(e),r.onEnd(e,!0)):$e.allowEnterCallback(r)&&(r.onEnter(e),r.onEnd(e,!0)):t.performLeave(e)}},this.performLeave=function(e){t.childrenRefs[e]&&(t.currentlyAnimatingKeys[e]=!0,t.childrenRefs[e].componentWillLeave(t.handleDoneLeaving.bind(t,e)))},this.handleDoneLeaving=function(e){var n=t.props;if(delete t.currentlyAnimatingKeys[e],!n.exclusive||n===t.nextProps){var r=Me(en(n));if(t.isValidChildByKey(r,e))t.performEnter(e);else{var i=function(){$e.allowLeaveCallback(n)&&(n.onLeave(e),n.onEnd(e,!1))};!function(t,e,n){var r=t.length===e.length;return r&&t.forEach(function(t,i){var o=e[i];t&&o&&(t&&!o||!t&&o?r=!1:t.key!==o.key?r=!1:n&&t.props[n]!==o.props[n]&&(r=!1))}),r}(t.state.children,r,n.showProp)?t.setState({children:r},i):i()}}}},an=rn,un=function(t){function e(){return a()(this,e),c()(this,t.apply(this,arguments))}return h()(e,t),e.prototype.shouldComponentUpdate=function(t){return t.hiddenClassName||t.visible},e.prototype.render=function(){var t=this.props,e=t.hiddenClassName,n=t.visible,r=x()(t,["hiddenClassName","visible"]);return e||d.a.Children.count(r.children)>1?(!n&&e&&(r.className+=" "+e),d.a.createElement("div",r)):d.a.Children.only(r.children)},e}(p.Component);un.propTypes={children:m.a.any,className:m.a.string,visible:m.a.bool,hiddenClassName:m.a.string};var sn=un,ln=function(t){function e(){return a()(this,e),c()(this,t.apply(this,arguments))}return h()(e,t),e.prototype.render=function(){var t=this.props,e=t.className;return t.visible||(e+=" "+t.hiddenClassName),d.a.createElement("div",{className:e,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:t.style},d.a.createElement(sn,{className:t.prefixCls+"-content",visible:t.visible},t.children))},e}(p.Component);ln.propTypes={hiddenClassName:m.a.string,className:m.a.string,prefixCls:m.a.string,onMouseEnter:m.a.func,onMouseLeave:m.a.func,onMouseDown:m.a.func,onTouchStart:m.a.func,children:m.a.any};var cn=ln,fn=function(t){function e(n){a()(this,e);var r=c()(this,t.call(this,n));return hn.call(r),r.state={stretchChecked:!1,targetWidth:void 0,targetHeight:void 0},r.savePopupRef=vt.bind(r,"popupInstance"),r.saveAlignRef=vt.bind(r,"alignInstance"),r}return h()(e,t),e.prototype.componentDidMount=function(){this.rootNode=this.getPopupDomNode(),this.setStretchSize()},e.prototype.componentDidUpdate=function(){this.setStretchSize()},e.prototype.getPopupDomNode=function(){return C.a.findDOMNode(this.popupInstance)},e.prototype.getMaskTransitionName=function(){var t=this.props,e=t.maskTransitionName,n=t.maskAnimation;return!e&&n&&(e=t.prefixCls+"-"+n),e},e.prototype.getTransitionName=function(){var t=this.props,e=t.transitionName;return!e&&t.animation&&(e=t.prefixCls+"-"+t.animation),e},e.prototype.getClassName=function(t){return this.props.prefixCls+" "+this.props.className+" "+t},e.prototype.getPopupElement=function(){var t=this,e=this.savePopupRef,n=this.state,r=n.stretchChecked,o=n.targetHeight,a=n.targetWidth,u=this.props,s=u.align,l=u.visible,c=u.prefixCls,f=u.style,h=u.getClassNameFromAlign,p=u.destroyPopupOnHide,v=u.stretch,m=u.children,y=u.onMouseEnter,g=u.onMouseLeave,b=u.onMouseDown,_=u.onTouchStart,x=this.getClassName(this.currentAlignClassName||h(s)),w=c+"-hidden";l||(this.currentAlignClassName=null);var k={};v&&(-1!==v.indexOf("height")?k.height=o:-1!==v.indexOf("minHeight")&&(k.minHeight=o),-1!==v.indexOf("width")?k.width=a:-1!==v.indexOf("minWidth")&&(k.minWidth=a),r||(k.visibility="hidden",setTimeout(function(){t.alignInstance&&t.alignInstance.forceAlign()},0)));var E={className:x,prefixCls:c,ref:e,onMouseEnter:y,onMouseLeave:g,onMouseDown:b,onTouchStart:_,style:i()({},k,f,this.getZIndexStyle())};return p?d.a.createElement(an,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName()},l?d.a.createElement(Ae,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,align:s,onAlign:this.onAlign},d.a.createElement(cn,i()({visible:!0},E),m)):null):d.a.createElement(an,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName(),showProp:"xVisible"},d.a.createElement(Ae,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,xVisible:l,childrenProps:{visible:"xVisible"},disabled:!l,align:s,onAlign:this.onAlign},d.a.createElement(cn,i()({hiddenClassName:w},E),m)))},e.prototype.getZIndexStyle=function(){var t={},e=this.props;return void 0!==e.zIndex&&(t.zIndex=e.zIndex),t},e.prototype.getMaskElement=function(){var t=this.props,e=void 0;if(t.mask){var n=this.getMaskTransitionName();e=d.a.createElement(sn,{style:this.getZIndexStyle(),key:"mask",className:t.prefixCls+"-mask",hiddenClassName:t.prefixCls+"-mask-hidden",visible:t.visible}),n&&(e=d.a.createElement(an,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:n},e))}return e},e.prototype.render=function(){return d.a.createElement("div",null,this.getMaskElement(),this.getPopupElement())},e}(p.Component);fn.propTypes={visible:m.a.bool,style:m.a.object,getClassNameFromAlign:m.a.func,onAlign:m.a.func,getRootDomNode:m.a.func,align:m.a.any,destroyPopupOnHide:m.a.bool,className:m.a.string,prefixCls:m.a.string,onMouseEnter:m.a.func,onMouseLeave:m.a.func,onMouseDown:m.a.func,onTouchStart:m.a.func,stretch:m.a.string,children:m.a.node,point:m.a.shape({pageX:m.a.number,pageY:m.a.number})};var hn=function(){var t=this;this.onAlign=function(e,n){var r=t.props,i=r.getClassNameFromAlign(n);t.currentAlignClassName!==i&&(t.currentAlignClassName=i,e.className=t.getClassName(i)),r.onAlign(e,n)},this.setStretchSize=function(){var e=t.props,n=e.stretch,r=e.getRootDomNode,i=e.visible,o=t.state,a=o.stretchChecked,u=o.targetHeight,s=o.targetWidth;if(n&&i){var l=r();if(l){var c=l.offsetHeight,f=l.offsetWidth;u===c&&s===f&&a||t.setState({stretchChecked:!0,targetHeight:c,targetWidth:f})}}else a&&t.setState({stretchChecked:!1})},this.getTargetElement=function(){return t.props.getRootDomNode()},this.getAlignTarget=function(){var e=t.props.point;return e||t.getTargetElement}},pn=fn;function dn(){}var vn=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"],mn=!!M.createPortal,yn={rcTrigger:m.a.shape({onPopupMouseDown:m.a.func})},gn=function(t){function e(n){a()(this,e);var r=c()(this,t.call(this,n));bn.call(r);var i=void 0;return i="popupVisible"in n?!!n.popupVisible:!!n.defaultPopupVisible,r.prevPopupVisible=i,r.state={popupVisible:i},r}return h()(e,t),e.prototype.getChildContext=function(){return{rcTrigger:{onPopupMouseDown:this.onPopupMouseDown}}},e.prototype.componentWillMount=function(){var t=this;vn.forEach(function(e){t["fire"+e]=function(n){t.fireEvents(e,n)}})},e.prototype.componentDidMount=function(){this.componentDidUpdate({},{popupVisible:this.state.popupVisible})},e.prototype.componentWillReceiveProps=function(t){var e=t.popupVisible;void 0!==e&&this.setState({popupVisible:e})},e.prototype.componentDidUpdate=function(t,e){var n=this.props,r=this.state;if(mn||this.renderComponent(null,function(){e.popupVisible!==r.popupVisible&&n.afterPopupVisibleChange(r.popupVisible)}),this.prevPopupVisible=e.popupVisible,r.popupVisible){var i=void 0;return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(i=n.getDocument(),this.clickOutsideHandler=T(i,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(i=i||n.getDocument(),this.touchOutsideHandler=T(i,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(i=i||n.getDocument(),this.contextMenuOutsideHandler1=T(i,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=T(window,"blur",this.onContextMenuClose)))}this.clearOutsideHandler()},e.prototype.componentWillUnmount=function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout)},e.prototype.getPopupDomNode=function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null},e.prototype.getPopupAlign=function(){var t=this.props,e=t.popupPlacement,n=t.popupAlign,r=t.builtinPlacements;return e&&r?function(t,e,n){var r=t[e]||{};return i()({},r,n)}(r,e,n):n},e.prototype.setPopupVisible=function(t,e){var n=this.props.alignPoint;this.clearDelayTimer(),this.state.popupVisible!==t&&("popupVisible"in this.props||this.setState({popupVisible:t}),this.props.onPopupVisibleChange(t)),n&&e&&this.setPoint(e)},e.prototype.delaySetPopupVisible=function(t,e,n){var r=this,i=1e3*e;if(this.clearDelayTimer(),i){var o=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=setTimeout(function(){r.setPopupVisible(t,o),r.clearDelayTimer()},i)}else this.setPopupVisible(t,n)},e.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},e.prototype.clearOutsideHandler=function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},e.prototype.createTwoChains=function(t){var e=this.props.children.props,n=this.props;return e[t]&&n[t]?this["fire"+t]:e[t]||n[t]},e.prototype.isClickToShow=function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("click")||-1!==n.indexOf("click")},e.prototype.isContextMenuToShow=function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")},e.prototype.isClickToHide=function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("click")||-1!==n.indexOf("click")},e.prototype.isMouseEnterToShow=function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("hover")||-1!==n.indexOf("mouseEnter")},e.prototype.isMouseLeaveToHide=function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("hover")||-1!==n.indexOf("mouseLeave")},e.prototype.isFocusToShow=function(){var t=this.props,e=t.action,n=t.showAction;return-1!==e.indexOf("focus")||-1!==n.indexOf("focus")},e.prototype.isBlurToHide=function(){var t=this.props,e=t.action,n=t.hideAction;return-1!==e.indexOf("focus")||-1!==n.indexOf("blur")},e.prototype.forcePopupAlign=function(){this.state.popupVisible&&this._component&&this._component.alignInstance&&this._component.alignInstance.forceAlign()},e.prototype.fireEvents=function(t,e){var n=this.props.children.props[t];n&&n(e);var r=this.props[t];r&&r(e)},e.prototype.close=function(){this.setPopupVisible(!1)},e.prototype.render=function(){var t=this,e=this.state.popupVisible,n=this.props,r=n.children,i=n.forceRender,o=n.alignPoint,a=n.className,u=d.a.Children.only(r),s={key:"trigger"};this.isContextMenuToShow()?s.onContextMenu=this.onContextMenu:s.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(s.onClick=this.onClick,s.onMouseDown=this.onMouseDown,s.onTouchStart=this.onTouchStart):(s.onClick=this.createTwoChains("onClick"),s.onMouseDown=this.createTwoChains("onMouseDown"),s.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(s.onMouseEnter=this.onMouseEnter,o&&(s.onMouseMove=this.onMouseMove)):s.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?s.onMouseLeave=this.onMouseLeave:s.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(s.onFocus=this.onFocus,s.onBlur=this.onBlur):(s.onFocus=this.createTwoChains("onFocus"),s.onBlur=this.createTwoChains("onBlur"));var l=D()(u&&u.props&&u.props.className,a);l&&(s.className=l);var c=d.a.cloneElement(u,s);if(!mn)return d.a.createElement(ft,{parent:this,visible:e,autoMount:!1,forceRender:i,getComponent:this.getComponent,getContainer:this.getContainer},function(e){var n=e.renderComponent;return t.renderComponent=n,c});var f=void 0;return(e||this._component||i)&&(f=d.a.createElement(pt,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),[c,f]},e}(d.a.Component);gn.propTypes={children:m.a.any,action:m.a.oneOfType([m.a.string,m.a.arrayOf(m.a.string)]),showAction:m.a.any,hideAction:m.a.any,getPopupClassNameFromAlign:m.a.any,onPopupVisibleChange:m.a.func,afterPopupVisibleChange:m.a.func,popup:m.a.oneOfType([m.a.node,m.a.func]).isRequired,popupStyle:m.a.object,prefixCls:m.a.string,popupClassName:m.a.string,className:m.a.string,popupPlacement:m.a.string,builtinPlacements:m.a.object,popupTransitionName:m.a.oneOfType([m.a.string,m.a.object]),popupAnimation:m.a.any,mouseEnterDelay:m.a.number,mouseLeaveDelay:m.a.number,zIndex:m.a.number,focusDelay:m.a.number,blurDelay:m.a.number,getPopupContainer:m.a.func,getDocument:m.a.func,forceRender:m.a.bool,destroyPopupOnHide:m.a.bool,mask:m.a.bool,maskClosable:m.a.bool,onPopupAlign:m.a.func,popupAlign:m.a.object,popupVisible:m.a.bool,defaultPopupVisible:m.a.bool,maskTransitionName:m.a.oneOfType([m.a.string,m.a.object]),maskAnimation:m.a.string,stretch:m.a.string,alignPoint:m.a.bool},gn.contextTypes=yn,gn.childContextTypes=yn,gn.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(){return window.document},onPopupVisibleChange:dn,afterPopupVisibleChange:dn,onPopupAlign:dn,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[]};var bn=function(){var t=this;this.onMouseEnter=function(e){var n=t.props.mouseEnterDelay;t.fireEvents("onMouseEnter",e),t.delaySetPopupVisible(!0,n,n?null:e)},this.onMouseMove=function(e){t.fireEvents("onMouseMove",e),t.setPoint(e)},this.onMouseLeave=function(e){t.fireEvents("onMouseLeave",e),t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},this.onPopupMouseEnter=function(){t.clearDelayTimer()},this.onPopupMouseLeave=function(e){e.relatedTarget&&!e.relatedTarget.setTimeout&&t._component&&t._component.getPopupDomNode&&lt(t._component.getPopupDomNode(),e.relatedTarget)||t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},this.onFocus=function(e){t.fireEvents("onFocus",e),t.clearDelayTimer(),t.isFocusToShow()&&(t.focusTime=Date.now(),t.delaySetPopupVisible(!0,t.props.focusDelay))},this.onMouseDown=function(e){t.fireEvents("onMouseDown",e),t.preClickTime=Date.now()},this.onTouchStart=function(e){t.fireEvents("onTouchStart",e),t.preTouchTime=Date.now()},this.onBlur=function(e){t.fireEvents("onBlur",e),t.clearDelayTimer(),t.isBlurToHide()&&t.delaySetPopupVisible(!1,t.props.blurDelay)},this.onContextMenu=function(e){e.preventDefault(),t.fireEvents("onContextMenu",e),t.setPopupVisible(!0,e)},this.onContextMenuClose=function(){t.isContextMenuToShow()&&t.close()},this.onClick=function(e){if(t.fireEvents("onClick",e),t.focusTime){var n=void 0;if(t.preClickTime&&t.preTouchTime?n=Math.min(t.preClickTime,t.preTouchTime):t.preClickTime?n=t.preClickTime:t.preTouchTime&&(n=t.preTouchTime),Math.abs(n-t.focusTime)<20)return;t.focusTime=0}t.preClickTime=0,t.preTouchTime=0,e&&e.preventDefault&&e.preventDefault();var r=!t.state.popupVisible;(t.isClickToHide()&&!r||r&&t.isClickToShow())&&t.setPopupVisible(!t.state.popupVisible,e)},this.onPopupMouseDown=function(){var e=t.context.rcTrigger,n=void 0===e?{}:e;t.hasPopupMouseDown=!0,clearTimeout(t.mouseDownTimeout),t.mouseDownTimeout=setTimeout(function(){t.hasPopupMouseDown=!1},0),n.onPopupMouseDown&&n.onPopupMouseDown.apply(n,arguments)},this.onDocumentClick=function(e){if(!t.props.mask||t.props.maskClosable){var n=e.target;lt(Object(M.findDOMNode)(t),n)||t.hasPopupMouseDown||t.close()}},this.getRootDomNode=function(){return Object(M.findDOMNode)(t)},this.getPopupClassNameFromAlign=function(e){var n=[],r=t.props,i=r.popupPlacement,o=r.builtinPlacements,a=r.prefixCls,u=r.alignPoint,s=r.getPopupClassNameFromAlign;return i&&o&&n.push(function(t,e,n,r){var i=n.points;for(var o in t)if(t.hasOwnProperty(o)&&dt(t[o].points,i,r))return e+"-placement-"+o;return""}(o,a,e,u)),s&&n.push(s(e)),n.join(" ")},this.getComponent=function(){var e=t.props,n=e.prefixCls,r=e.destroyPopupOnHide,o=e.popupClassName,a=e.action,u=e.onPopupAlign,s=e.popupAnimation,l=e.popupTransitionName,c=e.popupStyle,f=e.mask,h=e.maskAnimation,p=e.maskTransitionName,v=e.zIndex,m=e.popup,y=e.stretch,g=e.alignPoint,b=t.state,_=b.popupVisible,x=b.point,w=t.getPopupAlign(),k={};return t.isMouseEnterToShow()&&(k.onMouseEnter=t.onPopupMouseEnter),t.isMouseLeaveToHide()&&(k.onMouseLeave=t.onPopupMouseLeave),k.onMouseDown=t.onPopupMouseDown,k.onTouchStart=t.onPopupMouseDown,d.a.createElement(pn,i()({prefixCls:n,destroyPopupOnHide:r,visible:_,point:g&&x,className:o,action:a,align:w,onAlign:u,animation:s,getClassNameFromAlign:t.getPopupClassNameFromAlign},k,{stretch:y,getRootDomNode:t.getRootDomNode,style:c,mask:f,zIndex:v,transitionName:l,maskAnimation:h,maskTransitionName:p,ref:t.savePopup}),"function"===typeof m?m():m)},this.getContainer=function(){var e=t.props,n=document.createElement("div");return n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",(e.getPopupContainer?e.getPopupContainer(Object(M.findDOMNode)(t)):e.getDocument().body).appendChild(n),n},this.setPoint=function(e){t.props.alignPoint&&e&&t.setState({point:{pageX:e.pageX,pageY:e.pageY}})},this.handlePortalUpdate=function(){t.prevPopupVisible!==t.state.popupVisible&&t.props.afterPopupVisibleChange(t.state.popupVisible)},this.savePopup=function(e){t._component=e}},_n=gn,xn={adjustX:1,adjustY:1},wn=[0,0],kn={left:{points:["cr","cl"],overflow:xn,offset:[-4,0],targetOffset:wn},right:{points:["cl","cr"],overflow:xn,offset:[4,0],targetOffset:wn},top:{points:["bc","tc"],overflow:xn,offset:[0,-4],targetOffset:wn},bottom:{points:["tc","bc"],overflow:xn,offset:[0,4],targetOffset:wn},topLeft:{points:["bl","tl"],overflow:xn,offset:[0,-4],targetOffset:wn},leftTop:{points:["tr","tl"],overflow:xn,offset:[-4,0],targetOffset:wn},topRight:{points:["br","tr"],overflow:xn,offset:[0,-4],targetOffset:wn},rightTop:{points:["tl","tr"],overflow:xn,offset:[4,0],targetOffset:wn},bottomRight:{points:["tr","br"],overflow:xn,offset:[0,4],targetOffset:wn},rightBottom:{points:["bl","br"],overflow:xn,offset:[4,0],targetOffset:wn},bottomLeft:{points:["tl","bl"],overflow:xn,offset:[0,4],targetOffset:wn},leftBottom:{points:["br","bl"],overflow:xn,offset:[-4,0],targetOffset:wn}},En=function(t){function e(){return a()(this,e),c()(this,t.apply(this,arguments))}return h()(e,t),e.prototype.componentDidUpdate=function(){var t=this.props.trigger;t&&t.forcePopupAlign()},e.prototype.render=function(){var t=this.props,e=t.overlay,n=t.prefixCls,r=t.id;return d.a.createElement("div",{className:n+"-inner",id:r,role:"tooltip"},"function"===typeof e?e():e)},e}(d.a.Component);En.propTypes={prefixCls:m.a.string,overlay:m.a.oneOfType([m.a.node,m.a.func]).isRequired,id:m.a.string,trigger:m.a.any};var Sn=En,On=function(t){function e(){var n,r,i;a()(this,e);for(var o=arguments.length,u=Array(o),s=0;s<o;s++)u[s]=arguments[s];return n=r=c()(this,t.call.apply(t,[this].concat(u))),r.getPopupElement=function(){var t=r.props,e=t.arrowContent,n=t.overlay,i=t.prefixCls,o=t.id;return[d.a.createElement("div",{className:i+"-arrow",key:"arrow"},e),d.a.createElement(Sn,{key:"content",trigger:r.trigger,prefixCls:i,id:o,overlay:n})]},r.saveTrigger=function(t){r.trigger=t},i=n,c()(r,i)}return h()(e,t),e.prototype.getPopupDomNode=function(){return this.trigger.getPopupDomNode()},e.prototype.render=function(){var t=this.props,e=t.overlayClassName,n=t.trigger,r=t.mouseEnterDelay,o=t.mouseLeaveDelay,a=t.overlayStyle,u=t.prefixCls,s=t.children,l=t.onVisibleChange,c=t.afterVisibleChange,f=t.transitionName,h=t.animation,p=t.placement,v=t.align,m=t.destroyTooltipOnHide,y=t.defaultVisible,g=t.getTooltipContainer,b=x()(t,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]),_=i()({},b);return"visible"in this.props&&(_.popupVisible=this.props.visible),d.a.createElement(_n,i()({popupClassName:e,ref:this.saveTrigger,prefixCls:u,popup:this.getPopupElement,action:n,builtinPlacements:kn,popupPlacement:p,popupAlign:v,getPopupContainer:g,onPopupVisibleChange:l,afterPopupVisibleChange:c,popupTransitionName:f,popupAnimation:h,defaultPopupVisible:y,destroyPopupOnHide:m,mouseLeaveDelay:o,popupStyle:a,mouseEnterDelay:r},_),s)},e}(p.Component);On.propTypes={trigger:m.a.any,children:m.a.any,defaultVisible:m.a.bool,visible:m.a.bool,placement:m.a.string,transitionName:m.a.oneOfType([m.a.string,m.a.object]),animation:m.a.any,onVisibleChange:m.a.func,afterVisibleChange:m.a.func,overlay:m.a.oneOfType([m.a.node,m.a.func]).isRequired,overlayStyle:m.a.object,overlayClassName:m.a.string,prefixCls:m.a.string,mouseEnterDelay:m.a.number,mouseLeaveDelay:m.a.number,getTooltipContainer:m.a.func,destroyTooltipOnHide:m.a.bool,align:m.a.object,arrowContent:m.a.any,id:m.a.string},On.defaultProps={prefixCls:"rc-tooltip",mouseEnterDelay:0,destroyTooltipOnHide:!1,mouseLeaveDelay:.1,align:{},placement:"right",trigger:["hover"],arrowContent:null};var An=On;it.Range=st,it.Handle=L,it.createSliderWithTooltip=function(t){var e,n;return n=e=function(e){function n(t){a()(this,n);var e=c()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.handleTooltipVisibleChange=function(t,n){e.setState(function(e){return{visibles:i()({},e.visibles,k()({},t,n))}})},e.handleWithTooltip=function(t){var n=t.value,r=t.dragging,o=t.index,a=t.disabled,u=x()(t,["value","dragging","index","disabled"]),s=e.props,l=s.tipFormatter,c=s.tipProps,f=s.handleStyle,h=c.prefixCls,p=void 0===h?"rc-slider-tooltip":h,v=c.overlay,m=void 0===v?l(n):v,y=c.placement,g=void 0===y?"top":y,b=c.visible,_=void 0!==b&&b,w=x()(c,["prefixCls","overlay","placement","visible"]),k=void 0;return k=Array.isArray(f)?f[o]||f[0]:f,d.a.createElement(An,i()({},w,{prefixCls:p,overlay:m,placement:g,visible:!a&&(e.state.visibles[o]||r)||_,key:o}),d.a.createElement(L,i()({},u,{style:i()({},k),value:n,onMouseEnter:function(){return e.handleTooltipVisibleChange(o,!0)},onMouseLeave:function(){return e.handleTooltipVisibleChange(o,!1)}})))},e.state={visibles:{}},e}return h()(n,e),s()(n,[{key:"render",value:function(){return d.a.createElement(t,i()({},this.props,{handle:this.handleWithTooltip}))}}]),n}(d.a.Component),e.propTypes={tipFormatter:m.a.func,handleStyle:m.a.oneOfType([m.a.object,m.a.arrayOf(m.a.object)]),tipProps:m.a.object},e.defaultProps={tipFormatter:function(t){return t},handleStyle:[{}],tipProps:{}},n};e.a=it},function(t,e,n){"use strict";var r=n(2),i=n.n(r),o=n(1),a=n.n(o),u=n(80);u.parcoords=function(t){var e={data:[],highlighted:[],dimensions:{},dimensionTitleRotation:0,brushed:!1,brushedColor:null,alphaOnBrushed:0,mode:"default",rate:20,width:600,height:300,margin:{top:24,right:0,bottom:12,left:0},nullValueSeparator:"undefined",nullValueSeparatorPadding:{top:8,right:0,bottom:8,left:0},color:"#069",composite:"source-over",alpha:.7,bundlingStrength:.5,bundleDimension:null,smoothness:0,showControlPoints:!1,hideAxis:[],flipAxes:[],animationTime:1100,rotateLabels:!1};!function(t,e){for(var n in e)t[n]=e[n]}(e,t),t&&t.dimensionTitles&&(console.warn("dimensionTitles passed in config is deprecated. Add title to dimension object."),u.entries(t.dimensionTitles).forEach(function(t){e.dimensions[t.key]?e.dimensions[t.key].title=e.dimensions[t.key].title?e.dimensions[t.key].title:t.value:e.dimensions[t.key]={title:t.value}}));var n,r=function t(n){return n=t.selection=u.select(n),e.width=n[0][0].clientWidth,e.height=n[0][0].clientHeight,["marks","foreground","brushed","highlight"].forEach(function(t){p[t]=n.append("canvas").attr("class",t)[0][0],h[t]=p[t].getContext("2d")}),t.svg=n.append("svg").attr("width",e.width).attr("height",e.height).style("font","14px sans-serif").style("position","absolute").append("svg:g").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),t},i=u.dispatch.apply(this,["render","resize","highlight","brush","brushend","brushstart","axesreorder"].concat(u.keys(e))),o=function(){return e.width-e.margin.right-e.margin.left},a=function(){return e.height-e.margin.top-e.margin.bottom},s={brushable:!1,reorderable:!1,axes:!1,interactive:!1,debug:!1},l=u.scale.ordinal(),c={},f=(u.svg.line(),u.svg.axis().orient("left").ticks(5)),h={},p={},d=u.dispatch.apply(this,u.keys(e)).on("composite",function(t){h.foreground.globalCompositeOperation=t.value,h.brushed.globalCompositeOperation=t.value}).on("alpha",function(t){h.foreground.globalAlpha=t.value,h.brushed.globalAlpha=t.value}).on("brushedColor",function(t){h.brushed.strokeStyle=t.value}).on("width",function(t){r.resize()}).on("height",function(t){r.resize()}).on("margin",function(t){r.resize()}).on("rate",function(t){g.rate(t.value),y.rate(t.value)}).on("dimensions",function(t){e.dimensions=r.applyDimensionDefaults(u.keys(t.value)),l.domain(r.getOrderedDimensionKeys()),r.sortDimensions(),s.interactive&&r.render().updateAxes()}).on("bundleDimension",function(t){u.keys(e.dimensions).length||r.detectDimensions(),r.autoscale(),"number"===typeof t.value?t.value<u.keys(e.dimensions).length?e.bundleDimension=e.dimensions[t.value]:t.value<e.hideAxis.length&&(e.bundleDimension=e.hideAxis[t.value]):e.bundleDimension=t.value,e.clusterCentroids=function(t){var n=u.map(),r=u.map();return e.data.forEach(function(n){var i=e.dimensions[t].yscale(n[t]);r.has(i)||r.set(i,0);var o=r.get(i);r.set(i,o+1)}),e.data.forEach(function(i){u.keys(e.dimensions).map(function(o,a){var s=e.dimensions[t].yscale(i[t]);if(!n.has(s)){var l=u.map();n.set(s,l)}n.get(s).has(o)||n.get(s).set(o,0);var c=n.get(s).get(o);c+=e.dimensions[o].yscale(i[o])/r.get(s),n.get(s).set(o,c)})}),n}(e.bundleDimension),s.interactive&&r.render()}).on("hideAxis",function(t){var n;r.dimensions(r.applyDimensionDefaults()),r.dimensions((n=e.dimensions,t.value.forEach(function(t){delete n[t]}),n))}).on("flipAxes",function(t){t.value&&t.value.length&&(t.value.forEach(function(t){A(t)}),r.updateAxes(0))});function v(){return"bottom"==e.nullValueSeparator?[a()+1-e.nullValueSeparatorPadding.bottom-e.nullValueSeparatorPadding.top,1]:"top"==e.nullValueSeparator?[a()+1,1+e.nullValueSeparatorPadding.bottom+e.nullValueSeparatorPadding.top]:[a()+1,1]}function m(){if(e.brushed&&e.brushed.length!==e.data.length)return!0;var t=T.currentMode().brushState();for(var n in t)if(t.hasOwnProperty(n))return!0;return!1}r.state=e,r.flags=s,function(t,e,n){u.keys(e).forEach(function(i){t[i]=function(o){if(!arguments.length)return e[i];"dimensions"===i&&"[object Array]"===Object.prototype.toString.call(o)&&(console.warn("pc.dimensions([]) is deprecated, use pc.dimensions({})"),o=r.applyDimensionDefaults(o));var a=e[i];return e[i]=o,d[i].call(r,{value:o,previous:a}),n[i].call(r,{value:o,previous:a}),t}})}(r,e,i),u.rebind(r,i,"on"),r.autoscale=function(){var t={date:function(t){var n=u.extent(e.data,function(e){return e[t]?e[t].getTime():null});return n[0]===n[1]?u.scale.ordinal().domain([n[0]]).rangePoints(v()):u.time.scale().domain(n).range(v())},number:function(t){var n=u.extent(e.data,function(e){return+e[t]});return n[0]===n[1]?u.scale.ordinal().domain([n[0]]).rangePoints(v()):u.scale.linear().domain(n).range(v())},string:function(t){var n,r={};return e.data.map(function(n){void 0===n[t]&&"undefined"!==e.nullValueSeparator||(void 0===r[n[t]]?r[n[t]]=1:r[n[t]]=r[n[t]]+1)}),n=Object.getOwnPropertyNames(r).sort(function(t,e){return r[t]-r[e]}),u.scale.ordinal().domain(n).rangePoints(v())}};u.keys(e.dimensions).forEach(function(n){e.dimensions[n].yscale||(e.dimensions[n].yscale=t[e.dimensions[n].type](n))}),l.rangePoints([0,o()],1);var n=window.devicePixelRatio||1;return r.selection.selectAll("canvas").style("margin-top",e.margin.top+"px").style("margin-left",e.margin.left+"px").style("width",o()+2+"px").style("height",a()+2+"px").attr("width",(o()+2)*n).attr("height",(a()+2)*n),h.foreground.strokeStyle=e.color,h.foreground.lineWidth=1.4,h.foreground.globalCompositeOperation=e.composite,h.foreground.globalAlpha=e.alpha,h.foreground.scale(n,n),h.brushed.strokeStyle=e.brushedColor,h.brushed.lineWidth=1.4,h.brushed.globalCompositeOperation=e.composite,h.brushed.globalAlpha=e.alpha,h.brushed.scale(n,n),h.highlight.lineWidth=3,h.highlight.scale(n,n),this},r.scale=function(t,n){return e.dimensions[t].yscale.domain(n),this},r.flip=function(t){return e.dimensions[t].yscale.domain(e.dimensions[t].yscale.domain().reverse()),this},r.commonScale=function(t,n){var i=n||"number";"undefined"===typeof t&&(t=!0),u.keys(e.dimensions).length||r.detectDimensions(),r.autoscale();var o=u.keys(e.dimensions).filter(function(t){return e.dimensions[t].type==i});if(t){var a=u.extent(o.map(function(t,n){return e.dimensions[t].yscale.domain()}).reduce(function(t,e){return t.concat(e)}));o.forEach(function(t){e.dimensions[t].yscale.domain(a)})}else o.forEach(function(t){e.dimensions[t].yscale.domain(u.extent(e.data,function(t){return+t[k]}))});return null!==e.bundleDimension&&r.bundleDimension(e.bundleDimension),this},r.detectDimensions=function(){return r.dimensions(r.applyDimensionDefaults()),this},r.applyDimensionDefaults=function(t){var n=r.detectDimensionTypes(e.data);t=t||u.keys(n);var i={},o=0;return t.forEach(function(t){i[t]=e.dimensions[t]?e.dimensions[t]:{},i[t].orient=i[t].orient?i[t].orient:"left",i[t].ticks=null!=i[t].ticks?i[t].ticks:5,i[t].innerTickSize=null!=i[t].innerTickSize?i[t].innerTickSize:6,i[t].outerTickSize=null!=i[t].outerTickSize?i[t].outerTickSize:0,i[t].tickPadding=null!=i[t].tickPadding?i[t].tickPadding:3,i[t].type=i[t].type?i[t].type:n[t],i[t].index=null!=i[t].index?i[t].index:o,o++}),i},r.getOrderedDimensionKeys=function(){return u.keys(e.dimensions).sort(function(t,n){return u.ascending(e.dimensions[t].index,e.dimensions[n].index)})},r.toType=function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},r.toTypeCoerceNumbers=function(t){return parseFloat(t)==t&&null!=t?"number":r.toType(t)},r.detectDimensionTypes=function(t){var e={};return t[0]?(u.keys(t[0]).forEach(function(n){e[isNaN(Number(n))?n:parseInt(n)]=r.toTypeCoerceNumbers(t[0][n])}),e):e},r.render=function(){return u.keys(e.dimensions).length||r.detectDimensions(),r.autoscale(),r.render[e.mode](),i.render.call(this),this},r.renderBrushed=function(){return u.keys(e.dimensions).length||r.detectDimensions(),r.renderBrushed[e.mode](),i.render.call(this),this},r.render.default=function(){r.clear("foreground"),r.clear("highlight"),r.renderBrushed.default(),e.data.forEach(S)};var y=u.renderQueue(S).rate(50).clear(function(){r.clear("foreground"),r.clear("highlight")});r.render.queue=function(){r.renderBrushed.queue(),y(e.data)},r.renderBrushed.default=function(){r.clear("brushed"),m()&&e.brushed.forEach(E)};var g=u.renderQueue(E).rate(50).clear(function(){r.clear("brushed")});function b(t,n){var r=function(t){var n=t.length,r=e.smoothness,i=[];i.push(t[0]),i.push($V([t[0].e(1)+2*r*(t[1].e(1)-t[0].e(1)),t[0].e(2)]));for(var o=1;o<n-1;++o){var a=t[o],u=t[o-1],s=t[o+1],l=u.subtract(s);i.push(a.add(l.x(r))),i.push(a),i.push(a.subtract(l.x(r)))}return i.push($V([t[n-1].e(1)+2*r*(t[n-2].e(1)-t[n-1].e(1)),t[n-1].e(2)])),i.push(t[n-1]),i}(function(t){for(var n=[],r=u.keys(e.dimensions),i=r.length,o=0;o<i;++o){var a=P(r[o]),s=e.dimensions[r[o]].yscale(t[r[o]]);if(n.push($V([a,s])),o<i-1){var l=a+.5*(P(r[o+1])-a),c=s+.5*(e.dimensions[r[o+1]].yscale(t[r[o+1]])-s);if(null!==e.bundleDimension){var f=.5*(e.clusterCentroids.get(e.dimensions[e.bundleDimension].yscale(t[e.bundleDimension])).get(r[o])+e.clusterCentroids.get(e.dimensions[e.bundleDimension].yscale(t[e.bundleDimension])).get(r[o+1]));c=f+(1-e.bundlingStrength)*(c-f)}n.push($V([l,c]))}}return n}(t));n.moveTo(r[0].e(1),r[0].e(2));for(var i=1;i<r.length;i+=3){if(e.showControlPoints)for(var o=0;o<3;o++)n.fillRect(r[i+o].e(1),r[i+o].e(2),2,2);n.bezierCurveTo(r[i].e(1),r[i].e(2),r[i+1].e(1),r[i+1].e(2),r[i+2].e(1),r[i+2].e(2))}}function _(t,n){n.beginPath(),null!==e.bundleDimension&&e.bundlingStrength>0||e.smoothness>0?b(t,n):w(t,n),n.stroke()}function x(){return"bottom"==e.nullValueSeparator?a()+1:"top"==e.nullValueSeparator?1:(console.log("A value is NULL, but nullValueSeparator is not set; set it to 'bottom' or 'top'."),a()+1)}function w(t,n){u.entries(e.dimensions).forEach(function(r,i){0==i?n.moveTo(P(r.key),"undefined"==typeof t[r.key]?x():e.dimensions[r.key].yscale(t[r.key])):n.lineTo(P(r.key),"undefined"==typeof t[r.key]?x():e.dimensions[r.key].yscale(t[r.key]))})}function E(t,n){return null!==e.brushedColor?h.brushed.strokeStyle=u.functor(e.brushedColor)(t,n):h.brushed.strokeStyle=u.functor(e.color)(t,n),_(t,h.brushed)}function S(t,n){return h.foreground.strokeStyle=u.functor(e.color)(t,n),_(t,h.foreground)}function O(t,n){return h.highlight.strokeStyle=u.functor(e.color)(t,n),_(t,h.highlight)}function A(t){r.svg.selectAll(".dimension");r.flip(t),u.select(this.parentElement).transition().duration(e.animationTime).call(f.scale(e.dimensions[t].yscale)).call(f.orient(e.dimensions[t].orient)).call(f.ticks(e.dimensions[t].ticks)).call(f.innerTickSize(e.dimensions[t].innerTickSize)).call(f.outerTickSize(e.dimensions[t].outerTickSize)).call(f.tickPadding(e.dimensions[t].tickPadding)).call(f.tickFormat(e.dimensions[t].tickFormat)),r.render()}function M(){if(e.rotateLabels){var t=u.event.deltaY;t=(t=t<0?-5:t)>0?5:t,e.dimensionTitleRotation+=t,r.svg.selectAll("text.label").attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")"),u.event.preventDefault()}}function C(t){return e.dimensions[t].title?e.dimensions[t].title:t}r.renderBrushed.queue=function(){m()?g(e.brushed):g([])},r.compute_real_centroids=function(t){for(var n=[],r=u.keys(e.dimensions),i=r.length,o=0;o<i;++o){var a=P(r[o]),s=e.dimensions[r[o]].yscale(t[r[o]]);n.push([a,s])}return n},r.shadows=function(){return s.shadows=!0,r.alphaOnBrushed(.1),r.render(),this},r.axisDots=function(t){t=t||.1;var n=r.ctx.marks,i=2*Math.PI;return n.globalAlpha=u.min([1/Math.pow(e.data.length,.5),1]),e.data.forEach(function(r){u.entries(e.dimensions).forEach(function(o,a){n.beginPath(),n.arc(P(o),e.dimensions[o.key].yscale(r[o]),t,0,i),n.stroke(),n.fill()})}),this},r.clear=function(t){return h[t].clearRect(0,0,o()+2,a()+2),"brushed"===t&&m()&&(h.brushed.fillStyle=r.selection.style("background-color"),h.brushed.globalAlpha=1-e.alphaOnBrushed,h.brushed.fillRect(0,0,o()+2,a()+2),h.brushed.globalAlpha=e.alpha),this},u.rebind(r,f,"ticks","orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),r.createAxes=function(){return n&&r.removeAxes(),(n=r.svg.selectAll(".dimension").data(r.getOrderedDimensionKeys(),function(t){return t}).enter().append("svg:g").attr("class","dimension").attr("transform",function(t){return"translate("+l(t)+")"})).append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(t){var n=u.select(this).call(r.applyAxisConfig(f,e.dimensions[t]));n.selectAll("path").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges"),n.selectAll("line").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges")}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-5) rotate("+e.dimensionTitleRotation+")",x:0,class:"label"}).text(C).on("dblclick",A).on("wheel",M),"top"==e.nullValueSeparator?r.svg.append("line").attr("x1",0).attr("y1",1+e.nullValueSeparatorPadding.top).attr("x2",o()).attr("y2",1+e.nullValueSeparatorPadding.top).attr("stroke-width",1).attr("stroke","#777").attr("fill","none").attr("shape-rendering","crispEdges"):"bottom"==e.nullValueSeparator&&r.svg.append("line").attr("x1",0).attr("y1",a()+1-e.nullValueSeparatorPadding.bottom).attr("x2",o()).attr("y2",a()+1-e.nullValueSeparatorPadding.bottom).attr("stroke-width",1).attr("stroke","#777").attr("fill","none").attr("shape-rendering","crispEdges"),s.axes=!0,this},r.removeAxes=function(){return n.remove(),n=void 0,this},r.updateAxes=function(t){"undefined"===typeof t&&(t=e.animationTime);var i=r.svg.selectAll(".dimension").data(r.getOrderedDimensionKeys());if(i.enter().append("svg:g").attr("class","dimension").attr("transform",function(t){return"translate("+P(t)+")"}).style("opacity",0).append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(t){var n=u.select(this).call(r.applyAxisConfig(f,e.dimensions[t]));n.selectAll("path").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges"),n.selectAll("line").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges")}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-5) rotate("+e.dimensionTitleRotation+")",x:0,class:"label"}).text(C).on("dblclick",A).on("wheel",M),i.attr("opacity",0),i.select(".axis").transition().duration(t).each(function(t){u.select(this).call(r.applyAxisConfig(f,e.dimensions[t]))}),i.select(".label").transition().duration(t).text(C).attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")"),i.exit().remove(),(n=r.svg.selectAll(".dimension")).transition().duration(t).attr("transform",function(t){return"translate("+P(t)+")"}).style("opacity",1),r.svg.selectAll(".axis").transition().duration(t).each(function(t){u.select(this).call(r.applyAxisConfig(f,e.dimensions[t]))}),s.brushable&&r.brushable(),s.reorderable&&r.reorderable(),"None"!==r.brushMode()){var o=r.brushMode();r.brushMode("None"),r.brushMode(o)}return this},r.applyAxisConfig=function(t,e){return t.scale(e.yscale).orient(e.orient).ticks(e.ticks).tickValues(e.tickValues).innerTickSize(e.innerTickSize).outerTickSize(e.outerTickSize).tickPadding(e.tickPadding).tickFormat(e.tickFormat)},r.reorderable=function(){return n||r.createAxes(),n.style("cursor","move").call(u.behavior.drag().on("dragstart",function(t){c[t]=this.__origin__=l(t)}).on("drag",function(t){c[t]=Math.min(o(),Math.max(0,this.__origin__+=u.event.dx)),r.sortDimensions(),l.domain(r.getOrderedDimensionKeys()),r.render(),n.attr("transform",function(t){return"translate("+P(t)+")"})}).on("dragend",function(t){for(var n=0,o=e.dimensions[t].index,a=this,s=this.parentElement;null!=(a=a.previousElementSibling);)++n;n!==o&&(i.axesreorder.call(r,r.getOrderedDimensionKeys()),n>o?s.insertBefore(this,s.children[o-1]):o+1<s.children.length?s.insertBefore(this,s.children[o+1]):s.appendChild(this)),delete this.__origin__,delete c[t],u.select(this).transition().attr("transform","translate("+l(t)+")"),r.render()})),s.reorderable=!0,this},r.reorder=function(t){var i=r.getOrderedDimensionKeys()[0];r.sortDimensionsByRowData(t);if(i!==r.getOrderedDimensionKeys()[0]){l.domain(r.getOrderedDimensionKeys());var o=e.highlighted.slice(0);r.unhighlight(),n.transition().duration(1500).attr("transform",function(t){return"translate("+l(t)+")"}),r.render(),0!==o.length&&r.highlight(o)}},r.sortDimensionsByRowData=function(t){var n=e.dimensions,r=u.keys(e.dimensions).sort(function(n,r){var i=e.dimensions[n].yscale(t[n])-e.dimensions[r].yscale(t[r]);return 0===i?n.localeCompare(r):i});e.dimensions={},r.forEach(function(t,r){e.dimensions[t]=n[t],e.dimensions[t].index=r})},r.sortDimensions=function(){var t=e.dimensions,n=u.keys(e.dimensions).sort(function(t,e){return P(t)-P(e)});e.dimensions={},n.forEach(function(n,r){e.dimensions[n]=t[n],e.dimensions[n].index=r})},r.adjacent_pairs=function(t){for(var e=[],n=0;n<t.length-1;n++)e.push([t[n],t[n+1]]);return e};var T={modes:{None:{install:function(t){},uninstall:function(t){},selected:function(){return[]},brushState:function(){return{}}}},mode:"None",predicate:"AND",currentMode:function(){return this.modes[this.mode]}};function j(t){e.brushed=t,i.brush.call(r,e.brushed),r.renderBrushed()}function D(t){if(!arguments.length)return T.predicate;if("AND"!==(t=String(t).toUpperCase())&&"OR"!==t)throw new Error("Invalid predicate "+t);return T.predicate=t,e.brushed=T.currentMode().selected(),r.renderBrushed(),r}function P(t){0===l.range().length&&l.rangePoints([0,o()],1);var e=c[t];return null==e?l(t):e}return r.brushModes=function(){return Object.getOwnPropertyNames(T.modes)},r.brushMode=function(t){if(0===arguments.length)return T.mode;if(-1===r.brushModes().indexOf(t))throw new Error("pc.brushmode: Unsupported brush mode: "+t);return t!==T.mode&&("None"!==T.mode&&r.brushReset(),T.modes[T.mode].uninstall(r),T.mode=t,T.modes[T.mode].install(),"None"===t?delete r.brushPredicate:r.brushPredicate=D),r},function(){var t={};function o(e){return!t[e].empty()}function a(){var n=u.keys(e.dimensions).filter(o),r=n.map(function(e){return t[e].extent()});if(0===n.length)return e.data;var i={date:function(t,n,i){return"function"===typeof e.dimensions[n].yscale.rangePoints?r[i][0]<=e.dimensions[n].yscale(t[n])&&e.dimensions[n].yscale(t[n])<=r[i][1]:r[i][0]<=t[n]&&t[n]<=r[i][1]},number:function(t,n,i){return"function"===typeof e.dimensions[n].yscale.rangePoints?r[i][0]<=e.dimensions[n].yscale(t[n])&&e.dimensions[n].yscale(t[n])<=r[i][1]:r[i][0]<=t[n]&&t[n]<=r[i][1]},string:function(t,n,i){return r[i][0]<=e.dimensions[n].yscale(t[n])&&e.dimensions[n].yscale(t[n])<=r[i][1]}};return e.data.filter(function(t){switch(T.predicate){case"AND":return n.every(function(n,r){return i[e.dimensions[n].type](t,n,r)});case"OR":return n.some(function(n,r){return i[e.dimensions[n].type](t,n,r)});default:throw new Error("Unknown brush predicate "+e.brushPredicate)}})}function s(i){if("undefined"===typeof i){i={};return u.keys(e.dimensions).forEach(function(e){var n=t[e];if(void 0!==n&&!n.empty()){var r=n.extent();r.sort(u.ascending),i[e]=r}}),i}var o={};return n.selectAll(".brush").each(function(t){o[t]=u.select(this)}),u.keys(e.dimensions).forEach(function(e){if(void 0!==i[e]){var n=t[e];void 0!==n&&(n.extent(i[e]),o[e].transition().duration(0).call(n),n.event(o[e]))}}),r.renderBrushed(),r}function l(i){return void 0===i?(e.brushed=!1,n&&(n.selectAll(".brush").each(function(e){u.select(this).transition().duration(0).call(t[e].clear())}),r.renderBrushed())):n&&(n.selectAll(".brush").each(function(e){e==i&&(u.select(this).transition().duration(0).call(t[e].clear()),t[e].event(u.select(this)))}),r.renderBrushed()),this}T.modes["1D-axes"]={install:function(){n||r.createAxes();var o=n.append("svg:g").attr("class","brush").each(function(n){u.select(this).call(function(n){var o=u.svg.brush();return o.y(e.dimensions[n].yscale).on("brushstart",function(){null!==u.event.sourceEvent&&(i.brushstart.call(r,e.brushed),u.event.sourceEvent.stopPropagation())}).on("brush",function(){j(a())}).on("brushend",function(){i.brushend.call(r,e.brushed)}),t[n]=o,o}(n))});return o.selectAll("rect").style("visibility",null).attr("x",-15).attr("width",30),o.selectAll("rect.background").style("fill","transparent"),o.selectAll("rect.extent").style("fill","rgba(255,255,255,0.25)").style("stroke","rgba(0,0,0,0.6)"),o.selectAll(".resize rect").style("fill","rgba(0,0,0,0.1)"),r.brushExtents=s,r.brushReset=l,r},uninstall:function(){n.selectAll(".brush").remove(),t={},delete r.brushExtents,delete r.brushReset},selected:a,brushState:s}}(),function(){var t,n={};function s(){return function(){var i,o,s=u.mouse(t[0][0]);s[0]=s[0]-e.margin.left,s[1]=s[1]-e.margin.top,o={p1:s,dims:i=function(t){var n={i:-1,left:void 0,right:void 0};return u.keys(e.dimensions).some(function(i,o){if(l(i)<t[0]){var a=u.keys(e.dimensions)[r.getOrderedDimensionKeys().indexOf(i)+1];return n.i=o,n.left=i,n.right=a,!1}return!0}),void 0===n.left?(n.i=0,n.left=r.getOrderedDimensionKeys()[0],n.right=r.getOrderedDimensionKeys()[1]):void 0===n.right&&(n.i=u.keys(e.dimensions).length-1,n.right=n.left,n.left=r.getOrderedDimensionKeys()[u.keys(e.dimensions).length-2]),n}(s),minX:l(i.left),maxX:l(i.right),minY:0,maxY:a()},n[i.i]=o,n.active=i.i,o.p1[0]=Math.min(Math.max(o.minX,s[0]),o.maxX),o.p2=o.p1.slice()}}function c(){return function(){var t=u.event,i=n[n.active];i.p2[0]=Math.min(Math.max(i.minX+1,t.x-e.margin.left),i.maxX),i.p2[1]=Math.min(Math.max(i.minY,t.y-e.margin.top),i.maxY),function t(e,n){var i=r.selection.select("svg").select("g#strums"),o=e.dims.i,a=[e.p1,e.p2],s=i.selectAll("line#strum-"+o).data([e]),l=i.selectAll("circle#strum-"+o).data(a),c=u.behavior.drag();s.enter().append("line").attr("id","strum-"+o).attr("class","strum"),s.attr("x1",function(t){return t.p1[0]}).attr("y1",function(t){return t.p1[1]}).attr("x2",function(t){return t.p2[0]}).attr("y2",function(t){return t.p2[1]}).attr("stroke","black").attr("stroke-width",2),c.on("drag",function(n,r){var i=u.event;e["p"+(r+=1)][0]=Math.min(Math.max(e.minX+1,i.x),e.maxX),e["p"+r][1]=Math.min(Math.max(e.minY,i.y),e.maxY),t(e,r-1)}).on("dragend",p()),l.enter().append("circle").attr("id","strum-"+o).attr("class","strum"),l.attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",5).style("opacity",function(t,e){return void 0!==n&&e===n?.8:0}).on("mouseover",function(){u.select(this).style("opacity",.8)}).on("mouseout",function(){u.select(this).style("opacity",0)}).call(c)}(i,1)}}function f(){var t=Object.getOwnPropertyNames(n),r=e.data;function i(t,r){var i=n[r],o=function(t,e){var n=[t.p1[0]-t.minX,t.p1[1]-t.minX],r=[t.p2[0]-t.minX,t.p2[1]-t.minX],i=1-e/n[0],o=n[1]*(1-i),a=1-e/r[0],u=r[1]*(1-a);return function(t){var e=t[0],n=t[1],r=i*e+o,s=a*e+u;return n>Math.min(r,s)&&n<Math.max(r,s)}}(i,n.width(r)),a=i.dims.left,u=i.dims.right,s=e.dimensions[a].yscale,l=e.dimensions[u].yscale;return o([s(t[a])-i.minX,l(t[u])-i.minX])}return 0===(t=t.filter(function(t){return!isNaN(t)})).length?r:r.filter(function(n){switch(T.predicate){case"AND":return t.every(function(t){return i(n,t)});case"OR":return t.some(function(t){return i(n,t)});default:throw new Error("Unknown brush predicate "+e.brushPredicate)}})}function h(){var t=n[n.active],e=r.selection.select("svg").select("g#strums");delete n[n.active],n.active=void 0,e.selectAll("line#strum-"+t.dims.i).remove(),e.selectAll("circle#strum-"+t.dims.i).remove()}function p(){return function(){var t=e.data,o=n[n.active];o&&o.p1[0]===o.p2[0]&&o.p1[1]===o.p2[1]&&h(),t=f(),n.active=void 0,e.brushed=t,r.renderBrushed(),i.brushend.call(r,e.brushed)}}T.modes["2D-strums"]={install:function(){var i=u.behavior.drag();n.active=void 0,n.width=function(t){var e=n[t];if(void 0!==e)return e.maxX-e.minX},r.on("axesreorder.strums",function(){var t=Object.getOwnPropertyNames(n).filter(function(t){return!isNaN(t)});t.length>0&&(t.forEach(function(t){var r=n[t].dims;n.active=t,function(t,n){var r=u.keys(e.dimensions).length;return u.keys(e.dimensions).some(function(i,o){return i===t&&o+o<r&&e.dimensions[o+1]===n})}(r.left,r.right)||h()}),p()())}),r.selection.select("svg").append("g").attr("id","strums").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),r.brushReset=function(t){return function(){Object.getOwnPropertyNames(t).filter(function(t){return!isNaN(t)}).forEach(function(e){t.active=e,h()}),p()()}}(n),i.on("dragstart",s()).on("drag",c()).on("dragend",p()),t=r.selection.select("svg").insert("rect","g#strums").attr("id","strum-events").attr("x",e.margin.left).attr("y",e.margin.top).attr("width",o()).attr("height",a()+2).style("opacity",0).call(i)},uninstall:function(){r.selection.select("svg").select("g#strums").remove(),r.selection.select("svg").select("rect#strum-events").remove(),r.on("axesreorder.strums",void 0),delete r.brushReset,t=void 0},selected:f,brushState:function(){return n}}}(),function(){if("function"===typeof u.svg.multibrush){var t={};T.modes["1D-axes-multi"]={install:function(){n||r.createAxes();var o=n.append("svg:g").attr("class","brush").each(function(n){u.select(this).call(function(n){var o=u.svg.multibrush();return o.y(e.dimensions[n].yscale).on("brushstart",function(){null!==u.event.sourceEvent&&(i.brushstart.call(r,e.brushed),u.event.sourceEvent.stopPropagation())}).on("brush",function(){j(a())}).on("brushend",function(){j(a()),i.brushend.call(r,e.brushed)}).extentAdaption(function(t){t.style("visibility",null).attr("x",-15).attr("width",30).style("fill","rgba(255,255,255,0.25)").style("stroke","rgba(0,0,0,0.6)")}).resizeAdaption(function(t){t.selectAll("rect").attr("x",-15).attr("width",30).style("visibility",null).style("fill","rgba(0,0,0,0.1)")}),t[n]=o,o}(n))});return o.selectAll("rect").style("visibility",null).attr("x",-15).attr("width",30),o.selectAll("rect.background").style("fill","transparent"),o.selectAll("rect.extent").style("fill","rgba(255,255,255,0.25)").style("stroke","rgba(0,0,0,0.6)"),o.selectAll(".resize rect").style("fill","rgba(0,0,0,0.1)"),r.brushExtents=s,r.brushReset=l,r},uninstall:function(){n.selectAll(".brush").remove(),t={},delete r.brushExtents,delete r.brushReset},selected:a,brushState:s}}function o(e){return!t[e].empty()}function a(){var n=u.keys(e.dimensions).filter(o),r=n.map(function(e){return t[e].extent()});if(0===n.length)return e.data;var i={date:function(t,n,r,i){return"function"===typeof e.dimensions[n].yscale.rangePoints?i[0]<=e.dimensions[n].yscale(t[n])&&e.dimensions[n].yscale(t[n])<=i[1]:i[0]<=t[n]&&t[n]<=i[1]},number:function(t,n,r,i){return"function"===typeof e.dimensions[n].yscale.rangePoints?i[0]<=e.dimensions[n].yscale(t[n])&&e.dimensions[n].yscale(t[n])<=i[1]:i[0]<=t[n]&&t[n]<=i[1]},string:function(t,n,r,i){return i[0]<=e.dimensions[n].yscale(t[n])&&e.dimensions[n].yscale(t[n])<=i[1]}};return e.data.filter(function(t){switch(T.predicate){case"AND":return n.every(function(n,o){return r[o].some(function(r){return i[e.dimensions[n].type](t,n,o,r)})});case"OR":return n.some(function(n,o){return r[o].some(function(r){return i[e.dimensions[n].type](t,n,o,r)})});default:throw new Error("Unknown brush predicate "+e.brushPredicate)}})}function s(i){if("undefined"===typeof i)return i={},u.keys(e.dimensions).forEach(function(e){var n=t[e];if(void 0!==n&&!n.empty()){var r=n.extent();i[e]=r}}),i;var o={};return n.selectAll(".brush").each(function(t){o[t]=u.select(this)}),u.keys(e.dimensions).forEach(function(e){if(void 0!==i[e]){var n=t[e];void 0!==n&&(n.extent(i[e]),o[e].transition().duration(0).call(n),n.event(o[e]))}}),r.renderBrushed(),r}function l(i){return e.brushed=!1,n&&(n.selectAll(".brush").each(function(e){u.select(this).call(t[e].clear())}),r.renderBrushed()),this}}(),function(){var t,n={};function s(){return function(){var i,o,s=u.mouse(t[0][0]);s[0]=s[0]-e.margin.left,s[1]=s[1]-e.margin.top,o={p1:s,dims:i=function(t){var n={i:-1,left:void 0,right:void 0};return u.keys(e.dimensions).some(function(i,o){if(l(i)<t[0]){var a=u.keys(e.dimensions)[r.getOrderedDimensionKeys().indexOf(i)+1];return n.i=o,n.left=i,n.right=a,!1}return!0}),void 0===n.left?(n.i=0,n.left=r.getOrderedDimensionKeys()[0],n.right=r.getOrderedDimensionKeys()[1]):void 0===n.right&&(n.i=u.keys(e.dimensions).length-1,n.right=n.left,n.left=r.getOrderedDimensionKeys()[u.keys(e.dimensions).length-2]),n}(s),minX:l(i.left),maxX:l(i.right),minY:0,maxY:a(),startAngle:void 0,endAngle:void 0,arc:u.svg.arc().innerRadius(0)},n[i.i]=o,n.active=i.i,o.p1[0]=Math.min(Math.max(o.minX,s[0]),o.maxX),o.p2=o.p1.slice(),o.p3=o.p1.slice()}}function c(){return function(){var t=u.event,i=n[n.active];i.p2[0]=Math.min(Math.max(i.minX+1,t.x-e.margin.left),i.maxX),i.p2[1]=Math.min(Math.max(i.minY,t.y-e.margin.top),i.maxY),i.p3=i.p2.slice(),function t(e,i){var o=r.selection.select("svg").select("g#arcs"),a=e.dims.i,s=[e.p2,e.p3],l=o.selectAll("line#arc-"+a).data([{p1:e.p1,p2:e.p2},{p1:e.p1,p2:e.p3}]),c=o.selectAll("circle#arc-"+a).data(s),f=u.behavior.drag(),h=o.selectAll("path#arc-"+a).data([e]);h.enter().append("path").attr("id","arc-"+a).attr("class","arc").style("fill","orange").style("opacity",.5),h.attr("d",e.arc).attr("transform","translate("+e.p1[0]+","+e.p1[1]+")"),l.enter().append("line").attr("id","arc-"+a).attr("class","arc"),l.attr("x1",function(t){return t.p1[0]}).attr("y1",function(t){return t.p1[1]}).attr("x2",function(t){return t.p2[0]}).attr("y2",function(t){return t.p2[1]}).attr("stroke","black").attr("stroke-width",2),f.on("drag",function(r,i){var o,s=u.event;e["p"+(i+=2)][0]=Math.min(Math.max(e.minX+1,s.x),e.maxX),e["p"+i][1]=Math.min(Math.max(e.minY,s.y),e.maxY),o=3===i?n.startAngle(a):n.endAngle(a),(e.startAngle<Math.PI&&e.endAngle<Math.PI&&o<Math.PI||e.startAngle>=Math.PI&&e.endAngle>=Math.PI&&o>=Math.PI)&&(2===i?(e.endAngle=o,e.arc.endAngle(o)):3===i&&(e.startAngle=o,e.arc.startAngle(o))),t(e,i-2)}).on("dragend",v()),c.enter().append("circle").attr("id","arc-"+a).attr("class","arc"),c.attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",5).style("opacity",function(t,e){return void 0!==i&&e===i?.8:0}).on("mouseover",function(){u.select(this).style("opacity",.8)}).on("mouseout",function(){u.select(this).style("opacity",0)}).call(f)}(i,1)}}function f(t,e){return Math.sqrt(t*t+e*e)}(function(){var t=Math.PI/180})(),function(){var t=180/Math.PI}();var h=function(t){var e=t;return t>Math.PI?(e=t-1.5*Math.PI,e=t-1.5*Math.PI):(e=t-.5*Math.PI,e=t-.5*Math.PI),-e};function p(){var t=Object.getOwnPropertyNames(n),r=e.data;function i(t,r){var i=n[r],o=function(t){var e=h(t.startAngle),n=h(t.endAngle);if(e>n){var r=e;e=n,n=r}return function(t){return t>=e&&t<=n}}(i),a=i.dims.left,u=i.dims.right,s=e.dimensions[a].yscale,l=e.dimensions[u].yscale,c=n.width(r),p=s(t[a])-l(t[u]),d=f(c,p);return o(Math.asin(p/d))}return 0===(t=t.filter(function(t){return!isNaN(t)})).length?r:r.filter(function(n){switch(T.predicate){case"AND":return t.every(function(t){return i(n,t)});case"OR":return t.some(function(t){return i(n,t)});default:throw new Error("Unknown brush predicate "+e.brushPredicate)}})}function d(){var t=n[n.active],e=r.selection.select("svg").select("g#arcs");delete n[n.active],n.active=void 0,e.selectAll("line#arc-"+t.dims.i).remove(),e.selectAll("circle#arc-"+t.dims.i).remove(),e.selectAll("path#arc-"+t.dims.i).remove()}function v(){return function(){var t=e.data,o=n[n.active];if(o&&o.p1[0]===o.p2[0]&&o.p1[1]===o.p2[1]&&d(),o){var a=n.startAngle(n.active);o.startAngle=a,o.endAngle=a,o.arc.outerRadius(n.length(n.active)).startAngle(a).endAngle(a)}t=p(),n.active=void 0,e.brushed=t,r.renderBrushed(),i.brushend.call(r,e.brushed)}}T.modes.angular={install:function(){var i=u.behavior.drag();n.active=void 0,n.width=function(t){var e=n[t];if(void 0!==e)return e.maxX-e.minX},angle=function(t,e){var n=t[0]-e[0],r=t[1]-e[1],i=f(n,r);return Math.asin(r/i)},n.endAngle=function(t){var e=n[t];if(void 0!==e){var r=-angle(e.p1,e.p2)+Math.PI/2;return e.p1[0]>e.p2[0]&&(r=2*Math.PI-r),r}},n.startAngle=function(t){var e=n[t];if(void 0!==e){var r=-angle(e.p1,e.p3)+Math.PI/2;return e.p1[0]>e.p3[0]&&(r=2*Math.PI-r),r}},n.length=function(t){var e=n[t];if(void 0!==e)return f(e.p1[0]-e.p2[0],e.p1[1]-e.p2[1])},r.on("axesreorder.arcs",function(){var t=Object.getOwnPropertyNames(n).filter(function(t){return!isNaN(t)});t.length>0&&(t.forEach(function(t){var r=n[t].dims;n.active=t,function(t,n){var r=u.keys(e.dimensions).length;return u.keys(e.dimensions).some(function(i,o){return i===t&&o+o<r&&e.dimensions[o+1]===n})}(r.left,r.right)||d()}),v()())}),r.selection.select("svg").append("g").attr("id","arcs").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),r.brushReset=function(t){return function(){Object.getOwnPropertyNames(t).filter(function(t){return!isNaN(t)}).forEach(function(e){t.active=e,d()}),v()()}}(n),i.on("dragstart",s()).on("drag",c()).on("dragend",v()),t=r.selection.select("svg").insert("rect","g#arcs").attr("id","arc-events").attr("x",e.margin.left).attr("y",e.margin.top).attr("width",o()).attr("height",a()+2).style("opacity",0).call(i)},uninstall:function(){r.selection.select("svg").select("g#arcs").remove(),r.selection.select("svg").select("rect#arc-events").remove(),r.on("axesreorder.arcs",void 0),delete r.brushReset,t=void 0},selected:p,brushState:function(){return n}}}(),r.interactive=function(){return s.interactive=!0,this},r.xscale=l,r.ctx=h,r.canvas=p,r.g=function(){return n},r.resize=function(){return r.selection.select("svg").attr("width",e.width).attr("height",e.height),r.svg.attr("transform","translate("+e.margin.left+","+e.margin.top+")"),s.brushable&&r.brushReset(),r.autoscale(),n&&r.createAxes(),s.brushable&&r.brushable(),s.reorderable&&r.reorderable(),i.resize.call(this,{width:e.width,height:e.height,margin:e.margin}),this},r.highlight=function(t){return 0===arguments.length?e.highlighted:(e.highlighted=t,r.clear("highlight"),u.selectAll([p.foreground,p.brushed]).classed("faded",!0),t.forEach(O),i.highlight.call(this,t),this)},r.unhighlight=function(){return e.highlighted=[],r.clear("highlight"),u.selectAll([p.foreground,p.brushed]).classed("faded",!1),this},r.intersection=function(t,e,n,r){return{x:((t.x*e.y-t.y*e.x)*(n.x-r.x)-(t.x-e.x)*(n.x*r.y-n.y*r.x))/((t.x-e.x)*(n.y-r.y)-(t.y-e.y)*(n.x-r.x)),y:((t.x*e.y-t.y*e.x)*(n.y-r.y)-(t.y-e.y)*(n.x*r.y-n.y*r.x))/((t.x-e.x)*(n.y-r.y)-(t.y-e.y)*(n.x-r.x))}},r.mergeParcoords=function(t){var e=window.devicePixelRatio||1,n=document.createElement("canvas");n.width=r.canvas.foreground.clientWidth*e,n.height=(r.canvas.foreground.clientHeight+30)*e,n.style.width=n.width/e+"px",n.style.height=n.height/e+"px";var i=n.getContext("2d");for(var o in i.fillStyle="#ffffff",i.fillRect(0,0,n.width,n.height),r.canvas)i.drawImage(r.canvas[o],0,24*e,n.width,n.height-30*e);window.URL||window.webkitURL||window;var a=(new XMLSerializer).serializeToString(r.selection.select("svg")[0][0]),u="data:image/svg+xml;base64,"+window.btoa(a),s=new Image;s.onload=function(){i.drawImage(s,0,0,s.width*e,s.height*e),"function"===typeof t&&t(n)},s.src=u},r.version="0.7.0",r.toString=function(){return"Parallel Coordinates: "+u.keys(e.dimensions).length+" dimensions ("+u.keys(e.data[0]).length+" total) , "+e.data.length+" rows"},r},u.renderQueue=function(t){var e=[],n=10,r=function(){},i=0,o=function t(e){e&&t.data(e),t.invalidate(),r(),t.render()};return o.render=function(){i=0;var r=!0;o.invalidate=function(){r=!1},u.timer(function(){if(!r)return!0;if(i>e.length)return!0;for(var o=Math.min(i+n,e.length),a=i;a<o;a++)t(e[a],a);i+=n})},o.data=function(t){return o.invalidate(),e=t.slice(0),o},o.rate=function(t){return arguments.length?(n=t,o):n},o.remaining=function(){return e.length-i},o.clear=function(t){return arguments.length?(r=t,o):(r(),o)},o.invalidate=function(){},o};var s=u.parcoords,l=n(80),c=n.n(l),f=n(149),h=n.n(f),p=n(150),d=n.n(p),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var m=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.lastHoveredLine=null,n.changed=[],n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r["Component"]),v(e,[{key:"componentDidMount",value:function(){var t=this.refs.parcoords;this.createPC();var e=this;c.a.select(t).select("svg").on("mousemove",function(){var t=c.a.mouse(this);t[1]=t[1]-20,e.hoverLine(t)})}},{key:"shouldComponentUpdate",value:function(t){var e=this;return this.changed=["data","dimensions","color","filter","highlights","width","height"].filter(function(n){return e.props[n]!==t[n]}),this.changed.length>0}},{key:"componentDidUpdate",value:function(){1===this.changed.length&&"highlights"===this.changed[0]?this.setHighlights():this.updatePC()}},{key:"resetBrush",value:function(){this.pc.brushReset(),this.activeData=this.props.data}},{key:"onBrushEnd",value:function(t){this.isBrushing=!1,this.activeData=t;var e=this.pc.brushExtents();this.props.onBrushEnd({data:t,extents:e}),this.changedExtents(e)}},{key:"changedExtents",value:function(t){var e={},n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(t)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;this.lastExtents&&d()(t[u],this.lastExtents[u])||(e[u]=t[u])}}catch(v){r=!0,i=v}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}if(this.lastExtents){var s=!0,l=!1,c=void 0;try{for(var f,h=Object.keys(this.lastExtents)[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;t[p]||(e[p]=null)}}catch(v){l=!0,c=v}finally{try{!s&&h.return&&h.return()}finally{if(l)throw c}}}this.props.onExtentsChanged&&this.props.onExtentsChanged(e),this.lastExtents=t}},{key:"onBrush",value:function(t){this.isBrushing=!0,this.props.onBrush({data:t,extents:this.pc.brushExtents()})}},{key:"isOverLine",value:function(t,e,n,r){var i=n[0],o=n[1],a=t[0],u=t[1],s=e[0],l=e[1],c=s-a,f=l-u;return Math.abs(f*i-c*o-a*l+s*u)/Math.sqrt(Math.pow(c,2)+Math.pow(f,2))<=r}},{key:"findAxeIdx",value:function(t,e){var n=t[0];if(e[0][0]>n)return-1;if(e[e.length-1][0]<n)return-1;for(var r=0;r<e.length;r++)if(e[r][0]>n)return r;return-1}},{key:"getLines",value:function(t){var e=[],n=[];if(0===this.activeCentroids.length)return null;var r=this.findAxeIdx(t,this.activeCentroids[0]);return r<0?null:(this.activeCentroids.forEach(function(i,o){this.isOverLine(i[r-1],i[r],t,2)&&(e.push(this.activeData[o]),n.push(this.activeCentroids[o]))}.bind(this)),{data:e,centroids:n})}},{key:"hoverLine",value:function(t){if(!this.isBrushing){var e=this.getLines(t);null!==e?this.lastHoveredLine!==e.data[0]&&(this.lastHoveredLine=e.data[0],this.props.onLineHover(this.lastHoveredLine),this.props.onLinesHover(e.data)):this.lastHoveredLine=null}}},{key:"checkPropsSanity",value:function(){if(!this.props.data)throw new Error("Data is required")}},{key:"createPC",value:function(){var t=this;this.pc=s({margin:{top:20,right:0,bottom:12,left:0}})(this.refs.parcoords),this.updatePC(),this.pc.on("brushend",function(e){t.onBrushEnd(e)}).on("brush",function(e){t.onBrush(e)})}},{key:"updatePC",value:function(){var t=h()(this.props.dimensions);this.checkPropsSanity(),this.refs.parcoords.style.width=this.props.width,this.refs.parcoords.style.height=this.props.height,this.pc.width(this.props.width).height(this.props.height).data(this.props.data).dimensions(t).color(this.props.color).mode("queue").composite("darken").shadows().createAxes().reorderable().brushMode("None").brushMode("1D-axes"),this.resetActiveData(),this.pc.render(),this.setHighlights()}},{key:"resetActiveData",value:function(){this.props.brushExtents?(this.pc.brushExtents(this.props.brushExtents),this.activeData=this.pc.brushed()):this.resetBrush()}},{key:"setHighlights",value:function(){this.props.highlights&&this.props.highlights.length?this.pc.highlight(this.props.highlights):this.pc.unhighlight()}},{key:"render",value:function(){var t={width:this.props.width,height:this.props.height};return i.a.createElement("div",{ref:"parcoords",className:"parcoords",style:t})}},{key:"activeData",set:function(t){this._activeData=t,this.activeCentroids=this._activeData.map(this.pc.compute_real_centroids)},get:function(){return this._activeData}}]),e}();function y(){}m.defaultProps={onLineHover:y,onLinesHover:y,onBrush:y,onBrushEnd:y,data:[],width:800,height:300},m.propTypes={data:a.a.array.isRequired,highlights:a.a.array,width:a.a.number,height:a.a.number,onBrush:a.a.func,onBrushEnd:a.a.func,onLineHover:a.a.func,onLinesHover:a.a.func};var g=m;n.d(e,"a",function(){return g})},,function(t,e,n){"use strict";var r=n(85),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.concurrent_mode"):60111,p=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,v=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function g(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,a,u){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,i,o,a,u],l=0;(t=Error(e.replace(/%s/g,function(){return s[l++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function x(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}function w(){}function k(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}x.prototype.isReactComponent={},x.prototype.setState=function(t,e){"object"!==typeof t&&"function"!==typeof t&&null!=t&&g("85"),this.updater.enqueueSetState(this,t,e,"setState")},x.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=x.prototype;var E=k.prototype=new w;E.constructor=k,r(E,x.prototype),E.isPureReactComponent=!0;var S={current:null},O={current:null},A=Object.prototype.hasOwnProperty,M={key:!0,ref:!0,__self:!0,__source:!0};function C(t,e,n){var r=void 0,i={},a=null,u=null;if(null!=e)for(r in void 0!==e.ref&&(u=e.ref),void 0!==e.key&&(a=""+e.key),e)A.call(e,r)&&!M.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:o,type:t,key:a,ref:u,props:i,_owner:O.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var j=/\/+/g,D=[];function P(t,e,n,r){if(D.length){var i=D.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function z(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>D.length&&D.push(t)}function R(t,e,n){return null==t?0:function t(e,n,r,i){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case a:s=!0}}if(s)return r(i,e,""===n?"."+I(e,0):n),1;if(s=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+I(u=e[l],l);s+=t(u,c,r,i)}else if(c=null===e||"object"!==typeof e?null:"function"===typeof(c=y&&e[y]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(u=e.next()).done;)s+=t(u=u.value,c=n+I(u,l++),r,i);else"object"===u&&g("31","[object Object]"===(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return s}(t,"",e,n)}function I(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function F(t,e){t.func.call(t.context,e,t.count++)}function L(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?N(t,r,n,function(t){return t}):null!=t&&(T(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(j,"$&/")+"/")+n)),r.push(t))}function N(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(j,"$&/")+"/"),R(t,L,e=P(e,o,r,i)),z(e)}function B(){var t=S.current;return null===t&&g("321"),t}var U={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return N(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;R(t,F,e=P(null,null,e,n)),z(e)},count:function(t){return R(t,function(){return null},null)},toArray:function(t){var e=[];return N(t,e,null,function(t){return t}),e},only:function(t){return T(t)||g("143"),t}},createRef:function(){return{current:null}},Component:x,PureComponent:k,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:f,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:p,render:t}},lazy:function(t){return{$$typeof:m,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:v,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return B().useCallback(t,e)},useContext:function(t,e){return B().useContext(t,e)},useEffect:function(t,e){return B().useEffect(t,e)},useImperativeHandle:function(t,e,n){return B().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return B().useLayoutEffect(t,e)},useMemo:function(t,e){return B().useMemo(t,e)},useReducer:function(t,e,n){return B().useReducer(t,e,n)},useRef:function(t){return B().useRef(t)},useState:function(t){return B().useState(t)},Fragment:u,StrictMode:s,Suspense:d,createElement:C,cloneElement:function(t,e,n){(null===t||void 0===t)&&g("267",t);var i=void 0,a=r({},t.props),u=t.key,s=t.ref,l=t._owner;if(null!=e){void 0!==e.ref&&(s=e.ref,l=O.current),void 0!==e.key&&(u=""+e.key);var c=void 0;for(i in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),e)A.call(e,i)&&!M.hasOwnProperty(i)&&(a[i]=void 0===e[i]&&void 0!==c?c[i]:e[i])}if(1===(i=arguments.length-2))a.children=n;else if(1<i){c=Array(i);for(var f=0;f<i;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:o,type:t.type,key:u,ref:s,props:a,_owner:l}},createFactory:function(t){var e=C.bind(null,t);return e.type=t,e},isValidElement:T,version:"16.8.6",unstable_ConcurrentMode:h,unstable_Profiler:l,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:S,ReactCurrentOwner:O,assign:r}},q={default:U},V=q&&U||q;t.exports=V.default||V},function(t,e,n){"use strict";var r=n(2),i=n(85),o=n(171);function a(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,a,u){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,i,o,a,u],l=0;(t=Error(e.replace(/%s/g,function(){return s[l++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||a("227");var u=!1,s=null,l=!1,c=null,f={onError:function(t){u=!0,s=t}};function h(t,e,n,r,i,o,a,l,c){u=!1,s=null,function(t,e,n,r,i,o,a,u,s){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}.apply(f,arguments)}var p=null,d={};function v(){if(p)for(var t in d){var e=d[t],n=p.indexOf(t);if(-1<n||a("96",t),!y[n])for(var r in e.extractEvents||a("97",t),y[n]=e,n=e.eventTypes){var i=void 0,o=n[r],u=e,s=r;g.hasOwnProperty(s)&&a("99",s),g[s]=o;var l=o.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&m(l[i],u,s);i=!0}else o.registrationName?(m(o.registrationName,u,s),i=!0):i=!1;i||a("98",r,t)}}}function m(t,e,n){b[t]&&a("100",t),b[t]=e,_[t]=e.eventTypes[n].dependencies}var y=[],g={},b={},_={},x=null,w=null,k=null;function E(t,e,n){var r=t.type||"unknown-event";t.currentTarget=k(n),function(t,e,n,r,i,o,f,p,d){if(h.apply(this,arguments),u){if(u){var v=s;u=!1,s=null}else a("198"),v=void 0;l||(l=!0,c=v)}}(r,e,void 0,t),t.currentTarget=null}function S(t,e){return null==e&&a("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function O(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var A=null;function M(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)E(t,e[r],n[r]);else e&&E(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}var C={injectEventPluginOrder:function(t){p&&a("101"),p=Array.prototype.slice.call(t),v()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];d.hasOwnProperty(e)&&d[e]===r||(d[e]&&a("102",e),d[e]=r,n=!0)}n&&v()}};function T(t,e){var n=t.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}return t?null:(n&&"function"!==typeof n&&a("231",e,typeof n),n)}function j(t){if(null!==t&&(A=S(A,t)),t=A,A=null,t&&(O(t,M),A&&a("95"),l))throw t=c,l=!1,c=null,t}var D=Math.random().toString(36).slice(2),P="__reactInternalInstance$"+D,z="__reactEventHandlers$"+D;function R(t){if(t[P])return t[P];for(;!t[P];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[P]).tag||6===t.tag?t:null}function I(t){return!(t=t[P])||5!==t.tag&&6!==t.tag?null:t}function F(t){if(5===t.tag||6===t.tag)return t.stateNode;a("33")}function L(t){return t[z]||null}function N(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function B(t,e,n){(e=T(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=S(n._dispatchListeners,e),n._dispatchInstances=S(n._dispatchInstances,t))}function U(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=N(e);for(e=n.length;0<e--;)B(n[e],"captured",t);for(e=0;e<n.length;e++)B(n[e],"bubbled",t)}}function q(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=T(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=S(n._dispatchListeners,e),n._dispatchInstances=S(n._dispatchInstances,t))}function V(t){t&&t.dispatchConfig.registrationName&&q(t._targetInst,null,t)}function W(t){O(t,U)}var H=!("undefined"===typeof window||!window.document||!window.document.createElement);function G(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var X={animationend:G("Animation","AnimationEnd"),animationiteration:G("Animation","AnimationIteration"),animationstart:G("Animation","AnimationStart"),transitionend:G("Transition","TransitionEnd")},Z={},Y={};function $(t){if(Z[t])return Z[t];if(!X[t])return t;var e,n=X[t];for(e in n)if(n.hasOwnProperty(e)&&e in Y)return Z[t]=n[e];return t}H&&(Y=document.createElement("div").style,"AnimationEvent"in window||(delete X.animationend.animation,delete X.animationiteration.animation,delete X.animationstart.animation),"TransitionEvent"in window||delete X.transitionend.transition);var K=$("animationend"),J=$("animationiteration"),Q=$("animationstart"),tt=$("transitionend"),et="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nt=null,rt=null,it=null;function ot(){if(it)return it;var t,e,n=rt,r=n.length,i="value"in nt?nt.value:nt.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return it=i.slice(t,1<e?1-e:void 0)}function at(){return!0}function ut(){return!1}function st(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?at:ut,this.isPropagationStopped=ut,this}function lt(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function ct(t){t instanceof this||a("279"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function ft(t){t.eventPool=[],t.getPooled=lt,t.release=ct}i(st.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=at)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=at)},persist:function(){this.isPersistent=at},isPersistent:ut,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ut,this._dispatchInstances=this._dispatchListeners=null}}),st.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},st.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,ft(n),n},ft(st);var ht=st.extend({data:null}),pt=st.extend({data:null}),dt=[9,13,27,32],vt=H&&"CompositionEvent"in window,mt=null;H&&"documentMode"in document&&(mt=document.documentMode);var yt=H&&"TextEvent"in window&&!mt,gt=H&&(!vt||mt&&8<mt&&11>=mt),bt=String.fromCharCode(32),_t={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},xt=!1;function wt(t,e){switch(t){case"keyup":return-1!==dt.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function kt(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Et=!1;var St={eventTypes:_t,extractEvents:function(t,e,n,r){var i=void 0,o=void 0;if(vt)t:{switch(t){case"compositionstart":i=_t.compositionStart;break t;case"compositionend":i=_t.compositionEnd;break t;case"compositionupdate":i=_t.compositionUpdate;break t}i=void 0}else Et?wt(t,n)&&(i=_t.compositionEnd):"keydown"===t&&229===n.keyCode&&(i=_t.compositionStart);return i?(gt&&"ko"!==n.locale&&(Et||i!==_t.compositionStart?i===_t.compositionEnd&&Et&&(o=ot()):(rt="value"in(nt=r)?nt.value:nt.textContent,Et=!0)),i=ht.getPooled(i,e,n,r),o?i.data=o:null!==(o=kt(n))&&(i.data=o),W(i),o=i):o=null,(t=yt?function(t,e){switch(t){case"compositionend":return kt(e);case"keypress":return 32!==e.which?null:(xt=!0,bt);case"textInput":return(t=e.data)===bt&&xt?null:t;default:return null}}(t,n):function(t,e){if(Et)return"compositionend"===t||!vt&&wt(t,e)?(t=ot(),it=rt=nt=null,Et=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gt&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=pt.getPooled(_t.beforeInput,e,n,r)).data=t,W(e)):e=null,null===o?e:null===e?o:[o,e]}},Ot=null,At=null,Mt=null;function Ct(t){if(t=w(t)){"function"!==typeof Ot&&a("280");var e=x(t.stateNode);Ot(t.stateNode,t.type,e)}}function Tt(t){At?Mt?Mt.push(t):Mt=[t]:At=t}function jt(){if(At){var t=At,e=Mt;if(Mt=At=null,Ct(t),e)for(t=0;t<e.length;t++)Ct(e[t])}}function Dt(t,e){return t(e)}function Pt(t,e,n){return t(e,n)}function zt(){}var Rt=!1;function It(t,e){if(Rt)return t(e);Rt=!0;try{return Dt(t,e)}finally{Rt=!1,(null!==At||null!==Mt)&&(zt(),jt())}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Ft[t.type]:"textarea"===e}function Nt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Bt(t){if(!H)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}function Ut(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function qt(t){t._valueTracker||(t._valueTracker=function(t){var e=Ut(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Vt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ut(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}var Wt=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wt.hasOwnProperty("ReactCurrentDispatcher")||(Wt.ReactCurrentDispatcher={current:null});var Ht=/^(.*)[\\\/]/,Gt="function"===typeof Symbol&&Symbol.for,Xt=Gt?Symbol.for("react.element"):60103,Zt=Gt?Symbol.for("react.portal"):60106,Yt=Gt?Symbol.for("react.fragment"):60107,$t=Gt?Symbol.for("react.strict_mode"):60108,Kt=Gt?Symbol.for("react.profiler"):60114,Jt=Gt?Symbol.for("react.provider"):60109,Qt=Gt?Symbol.for("react.context"):60110,te=Gt?Symbol.for("react.concurrent_mode"):60111,ee=Gt?Symbol.for("react.forward_ref"):60112,ne=Gt?Symbol.for("react.suspense"):60113,re=Gt?Symbol.for("react.memo"):60115,ie=Gt?Symbol.for("react.lazy"):60116,oe="function"===typeof Symbol&&Symbol.iterator;function ae(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=oe&&t[oe]||t["@@iterator"])?t:null}function ue(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case te:return"ConcurrentMode";case Yt:return"Fragment";case Zt:return"Portal";case Kt:return"Profiler";case $t:return"StrictMode";case ne:return"Suspense"}if("object"===typeof t)switch(t.$$typeof){case Qt:return"Context.Consumer";case Jt:return"Context.Provider";case ee:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case re:return ue(t.type);case ie:if(t=1===t._status?t._result:null)return ue(t)}return null}function se(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=ue(t.type);n=null,r&&(n=ue(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Ht,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}var le=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ce=Object.prototype.hasOwnProperty,fe={},he={};function pe(t,e,n,r,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e}var de={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){de[t]=new pe(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];de[e]=new pe(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){de[t]=new pe(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){de[t]=new pe(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){de[t]=new pe(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){de[t]=new pe(t,3,!0,t,null)}),["capture","download"].forEach(function(t){de[t]=new pe(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){de[t]=new pe(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){de[t]=new pe(t,5,!1,t.toLowerCase(),null)});var ve=/[\-:]([a-z])/g;function me(t){return t[1].toUpperCase()}function ye(t,e,n,r){var i=de.hasOwnProperty(e)?de[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!ce.call(he,t)||!ce.call(fe,t)&&(le.test(t)?he[t]=!0:(fe[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function ge(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function be(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function _e(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=ge(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function xe(t,e){null!=(e=e.checked)&&ye(t,"checked",e,!1)}function we(t,e){xe(t,e);var n=ge(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Ee(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ee(t,e.type,ge(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function ke(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Ee(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ve,me);de[e]=new pe(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ve,me);de[e]=new pe(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ve,me);de[e]=new pe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(t){de[t]=new pe(t,1,!1,t.toLowerCase(),null)});var Se={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Oe(t,e,n){return(t=st.getPooled(Se.change,t,e,n)).type="change",Tt(n),W(t),t}var Ae=null,Me=null;function Ce(t){j(t)}function Te(t){if(Vt(F(t)))return t}function je(t,e){if("change"===t)return e}var De=!1;function Pe(){Ae&&(Ae.detachEvent("onpropertychange",ze),Me=Ae=null)}function ze(t){"value"===t.propertyName&&Te(Me)&&It(Ce,t=Oe(Me,t,Nt(t)))}function Re(t,e,n){"focus"===t?(Pe(),Me=n,(Ae=e).attachEvent("onpropertychange",ze)):"blur"===t&&Pe()}function Ie(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Te(Me)}function Fe(t,e){if("click"===t)return Te(e)}function Le(t,e){if("input"===t||"change"===t)return Te(e)}H&&(De=Bt("input")&&(!document.documentMode||9<document.documentMode));var Ne={eventTypes:Se,_isInputEventSupported:De,extractEvents:function(t,e,n,r){var i=e?F(e):window,o=void 0,a=void 0,u=i.nodeName&&i.nodeName.toLowerCase();if("select"===u||"input"===u&&"file"===i.type?o=je:Lt(i)?De?o=Le:(o=Ie,a=Re):(u=i.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Fe),o&&(o=o(t,e)))return Oe(o,n,r);a&&a(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Ee(i,"number",i.value)}},Be=st.extend({view:null,detail:null}),Ue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ue[t])&&!!e[t]}function Ve(){return qe}var We=0,He=0,Ge=!1,Xe=!1,Ze=Be.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ve,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=We;return We=t.screenX,Ge?"mousemove"===t.type?t.screenX-e:0:(Ge=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=He;return He=t.screenY,Xe?"mousemove"===t.type?t.screenY-e:0:(Xe=!0,0)}}),Ye=Ze.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),$e={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ke={eventTypes:$e,extractEvents:function(t,e,n,r){var i="mouseover"===t||"pointerover"===t,o="mouseout"===t||"pointerout"===t;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=e,e=(e=n.relatedTarget||n.toElement)?R(e):null):o=null,o===e)return null;var a=void 0,u=void 0,s=void 0,l=void 0;"mouseout"===t||"mouseover"===t?(a=Ze,u=$e.mouseLeave,s=$e.mouseEnter,l="mouse"):"pointerout"!==t&&"pointerover"!==t||(a=Ye,u=$e.pointerLeave,s=$e.pointerEnter,l="pointer");var c=null==o?i:F(o);if(i=null==e?i:F(e),(t=a.getPooled(u,o,n,r)).type=l+"leave",t.target=c,t.relatedTarget=i,(n=a.getPooled(s,e,n,r)).type=l+"enter",n.target=i,n.relatedTarget=c,r=e,o&&r)t:{for(i=r,l=0,a=e=o;a;a=N(a))l++;for(a=0,s=i;s;s=N(s))a++;for(;0<l-a;)e=N(e),l--;for(;0<a-l;)i=N(i),a--;for(;l--;){if(e===i||e===i.alternate)break t;e=N(e),i=N(i)}e=null}else e=null;for(i=e,e=[];o&&o!==i&&(null===(l=o.alternate)||l!==i);)e.push(o),o=N(o);for(o=[];r&&r!==i&&(null===(l=r.alternate)||l!==i);)o.push(r),r=N(r);for(r=0;r<e.length;r++)q(e[r],"bubbled",t);for(r=o.length;0<r--;)q(o[r],"captured",n);return[t,n]}};function Je(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e}var Qe=Object.prototype.hasOwnProperty;function tn(t,e){if(Je(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Qe.call(e,n[r])||!Je(t[n[r]],e[n[r]]))return!1;return!0}function en(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!==(2&e.effectTag))return 1;for(;e.return;)if(0!==(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function nn(t){2!==en(t)&&a("188")}function rn(t){if(!(t=function(t){var e=t.alternate;if(!e)return 3===(e=en(t))&&a("188"),1===e?null:t;for(var n=t,r=e;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var u=i.child;u;){if(u===n)return nn(i),t;if(u===r)return nn(i),e;u=u.sibling}a("188")}if(n.return!==r.return)n=i,r=o;else{u=!1;for(var s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}u||a("189")}}n.alternate!==r&&a("190")}return 3!==n.tag&&a("188"),n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var on=st.extend({animationName:null,elapsedTime:null,pseudoElement:null}),an=st.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),un=Be.extend({relatedTarget:null});function sn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn=Be.extend({key:function(t){if(t.key){var e=ln[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=sn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?cn[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ve,charCode:function(t){return"keypress"===t.type?sn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?sn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),hn=Ze.extend({dataTransfer:null}),pn=Be.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ve}),dn=st.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vn=Ze.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),mn=[["abort","abort"],[K,"animationEnd"],[J,"animationIteration"],[Q,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[tt,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],yn={},gn={};function bn(t,e){var n=t[0],r="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:e},yn[t]=e,gn[n]=e}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){bn(t,!0)}),mn.forEach(function(t){bn(t,!1)});var _n={eventTypes:yn,isInteractiveTopLevelEventType:function(t){return void 0!==(t=gn[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,r){var i=gn[t];if(!i)return null;switch(t){case"keypress":if(0===sn(n))return null;case"keydown":case"keyup":t=fn;break;case"blur":case"focus":t=un;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ze;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=pn;break;case K:case J:case Q:t=on;break;case tt:t=dn;break;case"scroll":t=Be;break;case"wheel":t=vn;break;case"copy":case"cut":case"paste":t=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Ye;break;default:t=st}return W(e=t.getPooled(i,e,n,r)),e}},xn=_n.isInteractiveTopLevelEventType,wn=[];function kn(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;t.ancestors.push(n),n=R(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=Nt(t.nativeEvent);r=t.topLevelType;for(var o=t.nativeEvent,a=null,u=0;u<y.length;u++){var s=y[u];s&&(s=s.extractEvents(r,e,o,i))&&(a=S(a,s))}j(a)}}var En=!0;function Sn(t,e){if(!e)return null;var n=(xn(t)?An:Mn).bind(null,t);e.addEventListener(t,n,!1)}function On(t,e){if(!e)return null;var n=(xn(t)?An:Mn).bind(null,t);e.addEventListener(t,n,!0)}function An(t,e){Pt(Mn,t,e)}function Mn(t,e){if(En){var n=Nt(e);if(null===(n=R(n))||"number"!==typeof n.tag||2===en(n)||(n=null),wn.length){var r=wn.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{It(kn,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>wn.length&&wn.push(t)}}}var Cn={},Tn=0,jn="_reactListenersID"+(""+Math.random()).slice(2);function Dn(t){return Object.prototype.hasOwnProperty.call(t,jn)||(t[jn]=Tn++,Cn[t[jn]]={}),Cn[t[jn]]}function Pn(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function zn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rn(t,e){var n,r=zn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=zn(r)}}function In(){for(var t=window,e=Pn();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=Pn((t=e.contentWindow).document)}return e}function Fn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function Ln(t){var e=In(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&Fn(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Rn(n,o);var a=Rn(n,r);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Nn=H&&"documentMode"in document&&11>=document.documentMode,Bn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Un=null,qn=null,Vn=null,Wn=!1;function Hn(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Wn||null==Un||Un!==Pn(n)?null:("selectionStart"in(n=Un)&&Fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Vn&&tn(Vn,n)?null:(Vn=n,(t=st.getPooled(Bn.select,qn,t,e)).type="select",t.target=Un,W(t),t))}var Gn={eventTypes:Bn,extractEvents:function(t,e,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){t:{o=Dn(o),i=_.onSelect;for(var a=0;a<i.length;a++){var u=i[a];if(!o.hasOwnProperty(u)||!o[u]){o=!1;break t}}o=!0}i=!o}if(i)return null;switch(o=e?F(e):window,t){case"focus":(Lt(o)||"true"===o.contentEditable)&&(Un=o,qn=e,Vn=null);break;case"blur":Vn=qn=Un=null;break;case"mousedown":Wn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wn=!1,Hn(n,r);case"selectionchange":if(Nn)break;case"keydown":case"keyup":return Hn(n,r)}return null}};function Xn(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}(e.children))&&(t.children=e),t}function Zn(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ge(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Yn(t,e){return null!=e.dangerouslySetInnerHTML&&a("91"),i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $n(t,e){var n=e.value;null==n&&(n=e.defaultValue,null!=(e=e.children)&&(null!=n&&a("92"),Array.isArray(e)&&(1>=e.length||a("93"),e=e[0]),n=e),null==n&&(n="")),t._wrapperState={initialValue:ge(n)}}function Kn(t,e){var n=ge(e.value),r=ge(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Jn(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}C.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=L,w=I,k=F,C.injectEventPluginsByName({SimpleEventPlugin:_n,EnterLeaveEventPlugin:Ke,ChangeEventPlugin:Ne,SelectEventPlugin:Gn,BeforeInputEventPlugin:St});var Qn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function tr(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function er(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?tr(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var nr,rr=void 0,ir=(nr=function(t,e){if(t.namespaceURI!==Qn.svg||"innerHTML"in t)t.innerHTML=e;else{for((rr=rr||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=rr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction(function(){return nr(t,e)})}:nr);function or(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ar={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ur=["Webkit","ms","Moz","O"];function sr(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ar.hasOwnProperty(t)&&ar[t]?(""+e).trim():e+"px"}function lr(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=sr(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ar).forEach(function(t){ur.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ar[e]=ar[t]})});var cr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fr(t,e){e&&(cr[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&a("137",t,""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&a("60"),"object"===typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||a("61")),null!=e.style&&"object"!==typeof e.style&&a("62",""))}function hr(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function pr(t,e){var n=Dn(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=_[e];for(var r=0;r<e.length;r++){var i=e[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":On("scroll",t);break;case"focus":case"blur":On("focus",t),On("blur",t),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Bt(i)&&On(i,t);break;case"invalid":case"submit":case"reset":break;default:-1===et.indexOf(i)&&Sn(i,t)}n[i]=!0}}}function dr(){}var vr=null,mr=null;function yr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function gr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var br="function"===typeof setTimeout?setTimeout:void 0,_r="function"===typeof clearTimeout?clearTimeout:void 0,xr=o.unstable_scheduleCallback,wr=o.unstable_cancelCallback;function kr(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function Er(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}new Set;var Sr=[],Or=-1;function Ar(t){0>Or||(t.current=Sr[Or],Sr[Or]=null,Or--)}function Mr(t,e){Sr[++Or]=t.current,t.current=e}var Cr={},Tr={current:Cr},jr={current:!1},Dr=Cr;function Pr(t,e){var n=t.type.contextTypes;if(!n)return Cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function zr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Rr(t){Ar(jr),Ar(Tr)}function Ir(t){Ar(jr),Ar(Tr)}function Fr(t,e,n){Tr.current!==Cr&&a("168"),Mr(Tr,e),Mr(jr,n)}function Lr(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())o in t||a("108",ue(e)||"Unknown",o);return i({},n,r)}function Nr(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Cr,Dr=Tr.current,Mr(Tr,e),Mr(jr,jr.current),!0}function Br(t,e,n){var r=t.stateNode;r||a("169"),n?(e=Lr(t,e,Dr),r.__reactInternalMemoizedMergedChildContext=e,Ar(jr),Ar(Tr),Mr(Tr,e)):Ar(jr),Mr(jr,n)}var Ur=null,qr=null;function Vr(t){return function(e){try{return t(e)}catch(n){}}}function Wr(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Hr(t,e,n,r){return new Wr(t,e,n,r)}function Gr(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Xr(t,e){var n=t.alternate;return null===n?((n=Hr(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,n.contextDependencies=t.contextDependencies,n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zr(t,e,n,r,i,o){var u=2;if(r=t,"function"===typeof t)Gr(t)&&(u=1);else if("string"===typeof t)u=5;else t:switch(t){case Yt:return Yr(n.children,i,o,e);case te:return $r(n,3|i,o,e);case $t:return $r(n,2|i,o,e);case Kt:return(t=Hr(12,n,e,4|i)).elementType=Kt,t.type=Kt,t.expirationTime=o,t;case ne:return(t=Hr(13,n,e,i)).elementType=ne,t.type=ne,t.expirationTime=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case Jt:u=10;break t;case Qt:u=9;break t;case ee:u=11;break t;case re:u=14;break t;case ie:u=16,r=null;break t}a("130",null==t?t:typeof t,"")}return(e=Hr(u,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Yr(t,e,n,r){return(t=Hr(7,t,r,e)).expirationTime=n,t}function $r(t,e,n,r){return t=Hr(8,t,r,e),e=0===(1&e)?$t:te,t.elementType=e,t.type=e,t.expirationTime=n,t}function Kr(t,e,n){return(t=Hr(6,t,null,e)).expirationTime=n,t}function Jr(t,e,n){return(e=Hr(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Qr(t,e){t.didError=!1;var n=t.earliestPendingTime;0===n?t.earliestPendingTime=t.latestPendingTime=e:n<e?t.earliestPendingTime=e:t.latestPendingTime>e&&(t.latestPendingTime=e),ni(e,t)}function ti(t,e){t.didError=!1,t.latestPingedTime>=e&&(t.latestPingedTime=0);var n=t.earliestPendingTime,r=t.latestPendingTime;n===e?t.earliestPendingTime=r===e?t.latestPendingTime=0:r:r===e&&(t.latestPendingTime=n),n=t.earliestSuspendedTime,r=t.latestSuspendedTime,0===n?t.earliestSuspendedTime=t.latestSuspendedTime=e:n<e?t.earliestSuspendedTime=e:r>e&&(t.latestSuspendedTime=e),ni(e,t)}function ei(t,e){var n=t.earliestPendingTime;return n>e&&(e=n),(t=t.earliestSuspendedTime)>e&&(e=t),e}function ni(t,e){var n=e.earliestSuspendedTime,r=e.latestSuspendedTime,i=e.earliestPendingTime,o=e.latestPingedTime;0===(i=0!==i?i:o)&&(0===t||r<t)&&(i=r),0!==(t=i)&&n>t&&(t=n),e.nextExpirationTimeToWorkOn=i,e.expirationTime=t}function ri(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var ii=(new r.Component).refs;function oi(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=n)}var ai={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===en(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=wu(),i=$o(r=Ya(r,t));i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Va(),Jo(t,i),Ja(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=wu(),i=$o(r=Ya(r,t));i.tag=Wo,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Va(),Jo(t,i),Ja(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=wu(),r=$o(n=Ya(n,t));r.tag=Ho,void 0!==e&&null!==e&&(r.callback=e),Va(),Jo(t,r),Ja(t,n)}};function ui(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!tn(n,r)||!tn(i,o))}function si(t,e,n){var r=!1,i=Cr,o=e.contextType;return"object"===typeof o&&null!==o?o=qo(o):(i=zr(e)?Dr:Tr.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Pr(t,i):Cr),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ai,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function li(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ai.enqueueReplaceState(e,e.state,null)}function ci(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=ii;var o=e.contextType;"object"===typeof o&&null!==o?i.context=qo(o):(o=zr(e)?Dr:Tr.current,i.context=Pr(t,o)),null!==(o=t.updateQueue)&&(na(t,o,n,i,r),i.state=t.memoizedState),"function"===typeof(o=e.getDerivedStateFromProps)&&(oi(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&ai.enqueueReplaceState(i,i.state,null),null!==(o=t.updateQueue)&&(na(t,o,n,i,r),i.state=t.memoizedState)),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var fi=Array.isArray;function hi(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&a("309"),r=n.stateNode),r||a("147",t);var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===ii&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}"string"!==typeof t&&a("284"),n._owner||a("290",t)}return t}function pi(t,e){"textarea"!==t.type&&a("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function di(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e,n){return(t=Xr(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function u(e){return t&&null===e.alternate&&(e.effectTag=2),e}function s(t,e,n,r){return null===e||6!==e.tag?((e=Kr(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=hi(t,e,n),r.return=t,r):((r=Zr(n.type,n.key,n.props,null,t.mode,r)).ref=hi(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Jr(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function f(t,e,n,r,o){return null===e||7!==e.tag?((e=Yr(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function h(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Kr(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case Xt:return(n=Zr(e.type,e.key,e.props,null,t.mode,n)).ref=hi(t,null,e),n.return=t,n;case Zt:return(e=Jr(e,t.mode,n)).return=t,e}if(fi(e)||ae(e))return(e=Yr(e,t.mode,n,null)).return=t,e;pi(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Xt:return n.key===i?n.type===Yt?f(t,e,n.props.children,r,i):l(t,e,n,r):null;case Zt:return n.key===i?c(t,e,n,r):null}if(fi(n)||ae(n))return null!==i?null:f(t,e,n,r,null);pi(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return s(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Xt:return t=t.get(null===r.key?n:r.key)||null,r.type===Yt?f(e,t,r.props.children,i,r.key):l(e,t,r,i);case Zt:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(fi(r)||ae(r))return f(e,t=t.get(n)||null,r,i,null);pi(e,r)}return null}function v(i,a,u,s){for(var l=null,c=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=p(i,f,u[v],s);if(null===y){null===f&&(f=m);break}t&&f&&null===y.alternate&&e(i,f),a=o(y,a,v),null===c?l=y:c.sibling=y,c=y,f=m}if(v===u.length)return n(i,f),l;if(null===f){for(;v<u.length;v++)(f=h(i,u[v],s))&&(a=o(f,a,v),null===c?l=f:c.sibling=f,c=f);return l}for(f=r(i,f);v<u.length;v++)(m=d(f,i,v,u[v],s))&&(t&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m);return t&&f.forEach(function(t){return e(i,t)}),l}function m(i,u,s,l){var c=ae(s);"function"!==typeof c&&a("150"),null==(s=c.call(s))&&a("151");for(var f=c=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=p(i,v,g.value,l);if(null===b){v||(v=y);break}t&&v&&null===b.alternate&&e(i,v),u=o(b,u,m),null===f?c=b:f.sibling=b,f=b,v=y}if(g.done)return n(i,v),c;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,l))&&(u=o(g,u,m),null===f?c=g:f.sibling=g,f=g);return c}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=d(v,i,m,g.value,l))&&(t&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?c=g:f.sibling=g,f=g);return t&&v.forEach(function(t){return e(i,t)}),c}return function(t,r,o,s){var l="object"===typeof o&&null!==o&&o.type===Yt&&null===o.key;l&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case Xt:t:{for(c=o.key,l=r;null!==l;){if(l.key===c){if(7===l.tag?o.type===Yt:l.elementType===o.type){n(t,l.sibling),(r=i(l,o.type===Yt?o.props.children:o.props)).ref=hi(t,l,o),r.return=t,t=r;break t}n(t,l);break}e(t,l),l=l.sibling}o.type===Yt?((r=Yr(o.props.children,t.mode,s,o.key)).return=t,t=r):((s=Zr(o.type,o.key,o.props,null,t.mode,s)).ref=hi(t,r,o),s.return=t,t=s)}return u(t);case Zt:t:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Jr(o,t.mode,s)).return=t,t=r}return u(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Kr(o,t.mode,s)).return=t,t=r),u(t);if(fi(o))return v(t,r,o,s);if(ae(o))return m(t,r,o,s);if(c&&pi(t,o),"undefined"===typeof o&&!l)switch(t.tag){case 1:case 0:a("152",(s=t.type).displayName||s.name||"Component")}return n(t,r)}}var vi=di(!0),mi=di(!1),yi={},gi={current:yi},bi={current:yi},_i={current:yi};function xi(t){return t===yi&&a("174"),t}function wi(t,e){Mr(_i,e),Mr(bi,t),Mr(gi,yi);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:er(null,"");break;default:e=er(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}Ar(gi),Mr(gi,e)}function ki(t){Ar(gi),Ar(bi),Ar(_i)}function Ei(t){xi(_i.current);var e=xi(gi.current),n=er(e,t.type);e!==n&&(Mr(bi,t),Mr(gi,n))}function Si(t){bi.current===t&&(Ar(gi),Ar(bi))}var Oi=0,Ai=2,Mi=4,Ci=8,Ti=16,ji=32,Di=64,Pi=128,zi=Wt.ReactCurrentDispatcher,Ri=0,Ii=null,Fi=null,Li=null,Ni=null,Bi=null,Ui=null,qi=0,Vi=null,Wi=0,Hi=!1,Gi=null,Xi=0;function Zi(){a("321")}function Yi(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Je(t[n],e[n]))return!1;return!0}function $i(t,e,n,r,i,o){if(Ri=o,Ii=e,Li=null!==t?t.memoizedState:null,zi.current=null===Li?lo:co,e=n(r,i),Hi){do{Hi=!1,Xi+=1,Li=null!==t?t.memoizedState:null,Ui=Ni,Vi=Bi=Fi=null,zi.current=co,e=n(r,i)}while(Hi);Gi=null,Xi=0}return zi.current=so,(t=Ii).memoizedState=Ni,t.expirationTime=qi,t.updateQueue=Vi,t.effectTag|=Wi,t=null!==Fi&&null!==Fi.next,Ri=0,Ui=Bi=Ni=Li=Fi=Ii=null,qi=0,Vi=null,Wi=0,t&&a("300"),e}function Ki(){zi.current=so,Ri=0,Ui=Bi=Ni=Li=Fi=Ii=null,qi=0,Vi=null,Wi=0,Hi=!1,Gi=null,Xi=0}function Ji(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Bi?Ni=Bi=t:Bi=Bi.next=t,Bi}function Qi(){if(null!==Ui)Ui=(Bi=Ui).next,Li=null!==(Fi=Li)?Fi.next:null;else{null===Li&&a("310");var t={memoizedState:(Fi=Li).memoizedState,baseState:Fi.baseState,queue:Fi.queue,baseUpdate:Fi.baseUpdate,next:null};Bi=null===Bi?Ni=t:Bi.next=t,Li=Fi.next}return Bi}function to(t,e){return"function"===typeof e?e(t):e}function eo(t){var e=Qi(),n=e.queue;if(null===n&&a("311"),n.lastRenderedReducer=t,0<Xi){var r=n.dispatch;if(null!==Gi){var i=Gi.get(n);if(void 0!==i){Gi.delete(n);var o=e.memoizedState;do{o=t(o,i.action),i=i.next}while(null!==i);return Je(o,e.memoizedState)||(wo=!0),e.memoizedState=o,e.baseUpdate===n.last&&(e.baseState=o),n.lastRenderedState=o,[o,r]}}return[e.memoizedState,r]}r=n.last;var u=e.baseUpdate;if(o=e.baseState,null!==u?(null!==r&&(r.next=null),r=u.next):r=null!==r?r.next:null,null!==r){var s=i=null,l=r,c=!1;do{var f=l.expirationTime;f<Ri?(c||(c=!0,s=u,i=o),f>qi&&(qi=f)):o=l.eagerReducer===t?l.eagerState:t(o,l.action),u=l,l=l.next}while(null!==l&&l!==r);c||(s=u,i=o),Je(o,e.memoizedState)||(wo=!0),e.memoizedState=o,e.baseUpdate=s,e.baseState=i,n.lastRenderedState=o}return[e.memoizedState,n.dispatch]}function no(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===Vi?(Vi={lastEffect:null}).lastEffect=t.next=t:null===(e=Vi.lastEffect)?Vi.lastEffect=t.next=t:(n=e.next,e.next=t,t.next=n,Vi.lastEffect=t),t}function ro(t,e,n,r){var i=Ji();Wi|=t,i.memoizedState=no(e,n,void 0,void 0===r?null:r)}function io(t,e,n,r){var i=Qi();r=void 0===r?null:r;var o=void 0;if(null!==Fi){var a=Fi.memoizedState;if(o=a.destroy,null!==r&&Yi(r,a.deps))return void no(Oi,n,o,r)}Wi|=t,i.memoizedState=no(e,n,o,r)}function oo(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ao(){}function uo(t,e,n){25>Xi||a("301");var r=t.alternate;if(t===Ii||null!==r&&r===Ii)if(Hi=!0,t={expirationTime:Ri,action:n,eagerReducer:null,eagerState:null,next:null},null===Gi&&(Gi=new Map),void 0===(n=Gi.get(e)))Gi.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}else{Va();var i=wu(),o={expirationTime:i=Ya(i,t),action:n,eagerReducer:null,eagerState:null,next:null},u=e.last;if(null===u)o.next=o;else{var s=u.next;null!==s&&(o.next=s),u.next=o}if(e.last=o,0===t.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=e.lastRenderedReducer))try{var l=e.lastRenderedState,c=r(l,n);if(o.eagerReducer=r,o.eagerState=c,Je(c,l))return}catch(f){}Ja(t,i)}}var so={readContext:qo,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useLayoutEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi},lo={readContext:qo,useCallback:function(t,e){return Ji().memoizedState=[t,void 0===e?null:e],t},useContext:qo,useEffect:function(t,e){return ro(516,Pi|Di,t,e)},useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ro(4,Mi|ji,oo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ro(4,Mi|ji,t,e)},useMemo:function(t,e){var n=Ji();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ji();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=uo.bind(null,Ii,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Ji().memoizedState=t},useState:function(t){var e=Ji();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={last:null,dispatch:null,lastRenderedReducer:to,lastRenderedState:t}).dispatch=uo.bind(null,Ii,t),[e.memoizedState,t]},useDebugValue:ao},co={readContext:qo,useCallback:function(t,e){var n=Qi();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Yi(e,r[1])?r[0]:(n.memoizedState=[t,e],t)},useContext:qo,useEffect:function(t,e){return io(516,Pi|Di,t,e)},useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,io(4,Mi|ji,oo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return io(4,Mi|ji,t,e)},useMemo:function(t,e){var n=Qi();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Yi(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)},useReducer:eo,useRef:function(){return Qi().memoizedState},useState:function(t){return eo(to)},useDebugValue:ao},fo=null,ho=null,po=!1;function vo(t,e){var n=Hr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function mo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function yo(t){if(po){var e=ho;if(e){var n=e;if(!mo(t,e)){if(!(e=kr(n))||!mo(t,e))return t.effectTag|=2,po=!1,void(fo=t);vo(fo,n)}fo=t,ho=Er(e)}else t.effectTag|=2,po=!1,fo=t}}function go(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&18!==t.tag;)t=t.return;fo=t}function bo(t){if(t!==fo)return!1;if(!po)return go(t),po=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!gr(e,t.memoizedProps))for(e=ho;e;)vo(t,e),e=kr(e);return go(t),ho=fo?kr(t.stateNode):null,!0}function _o(){ho=fo=null,po=!1}var xo=Wt.ReactCurrentOwner,wo=!1;function ko(t,e,n,r){e.child=null===t?mi(e,null,n,r):vi(e,t.child,n,r)}function Eo(t,e,n,r,i){n=n.render;var o=e.ref;return Uo(e,i),r=$i(t,e,n,r,o,i),null===t||wo?(e.effectTag|=1,ko(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Po(t,e,i))}function So(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||Gr(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Zr(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Oo(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:tn)(i,r)&&t.ref===e.ref)?Po(t,e,o):(e.effectTag|=1,(t=Xr(a,r)).ref=e.ref,t.return=e,e.child=t)}function Oo(t,e,n,r,i,o){return null!==t&&tn(t.memoizedProps,r)&&t.ref===e.ref&&(wo=!1,i<o)?Po(t,e,o):Mo(t,e,n,r,o)}function Ao(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Mo(t,e,n,r,i){var o=zr(n)?Dr:Tr.current;return o=Pr(e,o),Uo(e,i),n=$i(t,e,n,r,o,i),null===t||wo?(e.effectTag|=1,ko(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Po(t,e,i))}function Co(t,e,n,r,i){if(zr(n)){var o=!0;Nr(e)}else o=!1;if(Uo(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),si(e,n,r),ci(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,u=e.memoizedProps;a.props=u;var s=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=qo(l):l=Pr(e,l=zr(n)?Dr:Tr.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(u!==r||s!==l)&&li(e,a,r,l),Xo=!1;var h=e.memoizedState;s=a.state=h;var p=e.updateQueue;null!==p&&(na(e,p,r,a,i),s=e.memoizedState),u!==r||h!==s||jr.current||Xo?("function"===typeof c&&(oi(e,n,c,r),s=e.memoizedState),(u=Xo||ui(e,n,u,r,h,s,l))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.effectTag|=4)):("function"===typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=s),a.props=r,a.state=s,a.context=l,r=u):("function"===typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,u=e.memoizedProps,a.props=e.type===e.elementType?u:ri(e.type,u),s=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=qo(l):l=Pr(e,l=zr(n)?Dr:Tr.current),(f="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(u!==r||s!==l)&&li(e,a,r,l),Xo=!1,s=e.memoizedState,h=a.state=s,null!==(p=e.updateQueue)&&(na(e,p,r,a,i),h=e.memoizedState),u!==r||s!==h||jr.current||Xo?("function"===typeof c&&(oi(e,n,c,r),h=e.memoizedState),(c=Xo||ui(e,n,u,r,s,h,l))?(f||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,l)),"function"===typeof a.componentDidUpdate&&(e.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof a.componentDidUpdate||u===t.memoizedProps&&s===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||u===t.memoizedProps&&s===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||u===t.memoizedProps&&s===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||u===t.memoizedProps&&s===t.memoizedState||(e.effectTag|=256),r=!1);return To(t,e,n,r,o,i)}function To(t,e,n,r,i,o){Ao(t,e);var a=0!==(64&e.effectTag);if(!r&&!a)return i&&Br(e,n,!1),Po(t,e,o);r=e.stateNode,xo.current=e;var u=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=vi(e,t.child,null,o),e.child=vi(e,null,u,o)):ko(t,e,u,o),e.memoizedState=r.state,i&&Br(e,n,!0),e.child}function jo(t){var e=t.stateNode;e.pendingContext?Fr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Fr(0,e.context,!1),wi(t,e.containerInfo)}function Do(t,e,n){var r=e.mode,i=e.pendingProps,o=e.memoizedState;if(0===(64&e.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,e.effectTag&=-65;if(null===t)if(a){var u=i.fallback;t=Yr(null,r,0,null),0===(1&e.mode)&&(t.child=null!==e.memoizedState?e.child.child:e.child),r=Yr(u,r,n,null),t.sibling=r,(n=t).return=r.return=e}else n=r=mi(e,null,i.children,n);else null!==t.memoizedState?(u=(r=t.child).sibling,a?(n=i.fallback,i=Xr(r,r.pendingProps),0===(1&e.mode)&&((a=null!==e.memoizedState?e.child.child:e.child)!==r.child&&(i.child=a)),r=i.sibling=Xr(u,n,u.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=e):n=r=vi(e,r.child,i.children,n)):(u=t.child,a?(a=i.fallback,(i=Yr(null,r,0,null)).child=u,0===(1&e.mode)&&(i.child=null!==e.memoizedState?e.child.child:e.child),(r=i.sibling=Yr(a,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=e):r=n=vi(e,u,i.children,n)),e.stateNode=t.stateNode;return e.memoizedState=o,e.child=n,r}function Po(t,e,n){if(null!==t&&(e.contextDependencies=t.contextDependencies),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child&&a("153"),null!==e.child){for(n=Xr(t=e.child,t.pendingProps,t.expirationTime),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Xr(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function zo(t,e,n){var r=e.expirationTime;if(null!==t){if(t.memoizedProps!==e.pendingProps||jr.current)wo=!0;else if(r<n){switch(wo=!1,e.tag){case 3:jo(e),_o();break;case 5:Ei(e);break;case 1:zr(e.type)&&Nr(e);break;case 4:wi(e,e.stateNode.containerInfo);break;case 10:No(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?Do(t,e,n):null!==(e=Po(t,e,n))?e.sibling:null}return Po(t,e,n)}}else wo=!1;switch(e.expirationTime=0,e.tag){case 2:r=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps;var i=Pr(e,Tr.current);if(Uo(e,n),i=$i(null,e,r,t,i,n),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,Ki(),zr(r)){var o=!0;Nr(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var u=r.getDerivedStateFromProps;"function"===typeof u&&oi(e,r,u,t),i.updater=ai,e.stateNode=i,i._reactInternalFiber=e,ci(e,r,t,n),e=To(null,e,r,!0,o,n)}else e.tag=0,ko(null,e,i,n),e=e.child;return e;case 16:switch(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),o=e.pendingProps,t=function(t){var e=t._result;switch(t._status){case 1:return e;case 2:case 0:throw e;default:switch(t._status=0,(e=(e=t._ctor)()).then(function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)},function(e){0===t._status&&(t._status=2,t._result=e)}),t._status){case 1:return t._result;case 2:throw t._result}throw t._result=e,e}}(i),e.type=t,i=e.tag=function(t){if("function"===typeof t)return Gr(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===ee)return 11;if(t===re)return 14}return 2}(t),o=ri(t,o),u=void 0,i){case 0:u=Mo(null,e,t,o,n);break;case 1:u=Co(null,e,t,o,n);break;case 11:u=Eo(null,e,t,o,n);break;case 14:u=So(null,e,t,ri(t.type,o),r,n);break;default:a("306",t,"")}return u;case 0:return r=e.type,i=e.pendingProps,Mo(t,e,r,i=e.elementType===r?i:ri(r,i),n);case 1:return r=e.type,i=e.pendingProps,Co(t,e,r,i=e.elementType===r?i:ri(r,i),n);case 3:return jo(e),null===(r=e.updateQueue)&&a("282"),i=null!==(i=e.memoizedState)?i.element:null,na(e,r,e.pendingProps,null,n),(r=e.memoizedState.element)===i?(_o(),e=Po(t,e,n)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(ho=Er(e.stateNode.containerInfo),fo=e,i=po=!0),i?(e.effectTag|=2,e.child=mi(e,null,r,n)):(ko(t,e,r,n),_o()),e=e.child),e;case 5:return Ei(e),null===t&&yo(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,u=i.children,gr(r,i)?u=null:null!==o&&gr(r,o)&&(e.effectTag|=16),Ao(t,e),1!==n&&1&e.mode&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(ko(t,e,u,n),e=e.child),e;case 6:return null===t&&yo(e),null;case 13:return Do(t,e,n);case 4:return wi(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=vi(e,null,r,n):ko(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Eo(t,e,r,i=e.elementType===r?i:ri(r,i),n);case 7:return ko(t,e,e.pendingProps,n),e.child;case 8:case 12:return ko(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,u=e.memoizedProps,No(e,o=i.value),null!==u){var s=u.value;if(0===(o=Je(s,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(u.children===i.children&&!jr.current){e=Po(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.contextDependencies;if(null!==l){u=s.child;for(var c=l.first;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===s.tag&&((c=$o(n)).tag=Ho,Jo(s,c)),s.expirationTime<n&&(s.expirationTime=n),null!==(c=s.alternate)&&c.expirationTime<n&&(c.expirationTime=n),c=n;for(var f=s.return;null!==f;){var h=f.alternate;if(f.childExpirationTime<c)f.childExpirationTime=c,null!==h&&h.childExpirationTime<c&&(h.childExpirationTime=c);else{if(!(null!==h&&h.childExpirationTime<c))break;h.childExpirationTime=c}f=f.return}l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else u=10===s.tag&&s.type===e.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===e){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}}ko(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,Uo(e,n),r=r(i=qo(i,o.unstable_observedBits)),e.effectTag|=1,ko(t,e,r,n),e.child;case 14:return o=ri(i=e.type,e.pendingProps),So(t,e,i,o=ri(i.type,o),r,n);case 15:return Oo(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ri(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,zr(r)?(t=!0,Nr(e)):t=!1,Uo(e,n),si(e,r,i),ci(e,r,i,n),To(null,e,r,!0,t,n)}a("156")}var Ro={current:null},Io=null,Fo=null,Lo=null;function No(t,e){var n=t.type._context;Mr(Ro,n._currentValue),n._currentValue=e}function Bo(t){var e=Ro.current;Ar(Ro),t.type._context._currentValue=e}function Uo(t,e){Io=t,Lo=Fo=null;var n=t.contextDependencies;null!==n&&n.expirationTime>=e&&(wo=!0),t.contextDependencies=null}function qo(t,e){return Lo!==t&&!1!==e&&0!==e&&("number"===typeof e&&1073741823!==e||(Lo=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Fo?(null===Io&&a("308"),Fo=e,Io.contextDependencies={first:e,expirationTime:0}):Fo=Fo.next=e),t._currentValue}var Vo=0,Wo=1,Ho=2,Go=3,Xo=!1;function Zo(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Yo(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function $o(t){return{expirationTime:t,tag:Vo,payload:null,callback:null,next:null,nextEffect:null}}function Ko(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function Jo(t,e){var n=t.alternate;if(null===n){var r=t.updateQueue,i=null;null===r&&(r=t.updateQueue=Zo(t.memoizedState))}else r=t.updateQueue,i=n.updateQueue,null===r?null===i?(r=t.updateQueue=Zo(t.memoizedState),i=n.updateQueue=Zo(n.memoizedState)):r=t.updateQueue=Yo(i):null===i&&(i=n.updateQueue=Yo(r));null===i||r===i?Ko(r,e):null===r.lastUpdate||null===i.lastUpdate?(Ko(r,e),Ko(i,e)):(Ko(r,e),i.lastUpdate=e)}function Qo(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=Zo(t.memoizedState):ta(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function ta(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=Yo(e)),e}function ea(t,e,n,r,o,a){switch(n.tag){case Wo:return"function"===typeof(t=n.payload)?t.call(a,r,o):t;case Go:t.effectTag=-2049&t.effectTag|64;case Vo:if(null===(o="function"===typeof(t=n.payload)?t.call(a,r,o):t)||void 0===o)break;return i({},r,o);case Ho:Xo=!0}return r}function na(t,e,n,r,i){Xo=!1;for(var o=(e=ta(t,e)).baseState,a=null,u=0,s=e.firstUpdate,l=o;null!==s;){var c=s.expirationTime;c<i?(null===a&&(a=s,o=l),u<c&&(u=c)):(l=ea(t,0,s,l,n,r),null!==s.callback&&(t.effectTag|=32,s.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=s:(e.lastEffect.nextEffect=s,e.lastEffect=s))),s=s.next}for(c=null,s=e.firstCapturedUpdate;null!==s;){var f=s.expirationTime;f<i?(null===c&&(c=s,null===a&&(o=l)),u<f&&(u=f)):(l=ea(t,0,s,l,n,r),null!==s.callback&&(t.effectTag|=32,s.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=s:(e.lastCapturedEffect.nextEffect=s,e.lastCapturedEffect=s))),s=s.next}null===a&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===a&&null===c&&(o=l),e.baseState=o,e.firstUpdate=a,e.firstCapturedUpdate=c,t.expirationTime=u,t.memoizedState=l}function ra(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),ia(e.firstEffect,n),e.firstEffect=e.lastEffect=null,ia(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function ia(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var r=e;"function"!==typeof n&&a("191",n),n.call(r)}t=t.nextEffect}}function oa(t,e){return{value:t,source:e,stack:se(e)}}function aa(t){t.effectTag|=4}var ua=void 0,sa=void 0,la=void 0,ca=void 0;ua=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},sa=function(){},la=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var u=e.stateNode;switch(xi(gi.current),t=null,n){case"input":a=be(u,a),r=be(u,r),t=[];break;case"option":a=Xn(u,a),r=Xn(u,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=Yn(u,a),r=Yn(u,r),t=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(u.onclick=dr)}fr(n,r),u=n=void 0;var s=null;for(n in a)if(!r.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if("style"===n){var l=a[n];for(u in l)l.hasOwnProperty(u)&&(s||(s={}),s[u]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?t||(t=[]):(t=t||[]).push(n,null));for(n in r){var c=r[n];if(l=null!=a?a[n]:void 0,r.hasOwnProperty(n)&&c!==l&&(null!=c||null!=l))if("style"===n)if(l){for(u in l)!l.hasOwnProperty(u)||c&&c.hasOwnProperty(u)||(s||(s={}),s[u]="");for(u in c)c.hasOwnProperty(u)&&l[u]!==c[u]&&(s||(s={}),s[u]=c[u])}else s||(t||(t=[]),t.push(n,s)),s=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(t=t||[]).push(n,""+c)):"children"===n?l===c||"string"!==typeof c&&"number"!==typeof c||(t=t||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=c&&pr(o,n),t||l===c||(t=[])):(t=t||[]).push(n,c))}s&&(t=t||[]).push("style",s),o=t,(e.updateQueue=o)&&aa(e)}},ca=function(t,e,n,r){n!==r&&aa(e)};var fa="function"===typeof WeakSet?WeakSet:Set;function ha(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=se(n)),null!==n&&ue(n.type),e=e.value,null!==t&&1===t.tag&&ue(t.type);try{console.error(e)}catch(i){setTimeout(function(){throw i})}}function pa(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Za(t,n)}else e.current=null}function da(t,e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&t)!==Oi){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&e)!==Oi&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function va(t){switch("function"===typeof qr&&qr(t),t.tag){case 0:case 11:case 14:case 15:var e=t.updateQueue;if(null!==e&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n.destroy;if(void 0!==r){var i=t;try{r()}catch(o){Za(i,o)}}n=n.next}while(n!==e)}break;case 1:if(pa(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Za(t,o)}break;case 5:pa(t);break;case 4:ga(t)}}function ma(t){return 5===t.tag||3===t.tag||4===t.tag}function ya(t){t:{for(var e=t.return;null!==e;){if(ma(e)){var n=e;break t}e=e.return}a("160"),n=void 0}var r=e=void 0;switch(n.tag){case 5:e=n.stateNode,r=!1;break;case 3:case 4:e=n.stateNode.containerInfo,r=!0;break;default:a("161")}16&n.effectTag&&(or(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var i=t;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=e,u=i.stateNode,s=n;8===o.nodeType?o.parentNode.insertBefore(u,s):o.insertBefore(u,s)}else e.insertBefore(i.stateNode,n);else r?(u=e,s=i.stateNode,8===u.nodeType?(o=u.parentNode).insertBefore(s,u):(o=u).appendChild(s),null!==(u=u._reactRootContainer)&&void 0!==u||null!==o.onclick||(o.onclick=dr)):e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ga(t){for(var e=t,n=!1,r=void 0,i=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&a("160"),n.tag){case 5:r=n.stateNode,i=!1;break t;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag){t:for(var o=e,u=o;;)if(va(u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===o)break;for(;null===u.sibling;){if(null===u.return||u.return===o)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}i?(o=r,u=e.stateNode,8===o.nodeType?o.parentNode.removeChild(u):o.removeChild(u)):r.removeChild(e.stateNode)}else if(4===e.tag){if(null!==e.child){r=e.stateNode.containerInfo,i=!0,e.child.return=e,e=e.child;continue}}else if(va(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;4===(e=e.return).tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}function ba(t,e){switch(e.tag){case 0:case 11:case 14:case 15:da(Mi,Ci,e);break;case 1:break;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps;t=null!==t?t.memoizedProps:r;var i=e.type,o=e.updateQueue;e.updateQueue=null,null!==o&&function(t,e,n,r,i){t[z]=i,"input"===n&&"radio"===i.type&&null!=i.name&&xe(t,i),hr(n,r),r=hr(n,i);for(var o=0;o<e.length;o+=2){var a=e[o],u=e[o+1];"style"===a?lr(t,u):"dangerouslySetInnerHTML"===a?ir(t,u):"children"===a?or(t,u):ye(t,a,u,r)}switch(n){case"input":we(t,i);break;case"textarea":Kn(t,i);break;case"select":e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Zn(t,!!i.multiple,n,!1):e!==!!i.multiple&&(null!=i.defaultValue?Zn(t,!!i.multiple,i.defaultValue,!0):Zn(t,!!i.multiple,i.multiple?[]:"",!1))}}(n,o,i,t,r)}break;case 6:null===e.stateNode&&a("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 12:break;case 13:if(n=e.memoizedState,r=void 0,t=e,null===n?r=!1:(r=!0,t=e.child,0===n.timedOutAt&&(n.timedOutAt=wu())),null!==t&&function(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=sr("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(t,r),null!==(n=e.updateQueue)){e.updateQueue=null;var u=e.stateNode;null===u&&(u=e.stateNode=new fa),n.forEach(function(t){var n=function(t,e){var n=t.stateNode;null!==n&&n.delete(e),e=Ya(e=wu(),t),null!==(t=Ka(t,e))&&(Qr(t,e),0!==(e=t.expirationTime)&&ku(t,e))}.bind(null,e,t);u.has(t)||(u.add(t),t.then(n,n))})}break;case 17:break;default:a("163")}}var _a="function"===typeof WeakMap?WeakMap:Map;function xa(t,e,n){(n=$o(n)).tag=Go,n.payload={element:null};var r=e.value;return n.callback=function(){Du(r),ha(t,e)},n}function wa(t,e,n){(n=$o(n)).tag=Go;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===La?La=new Set([this]):La.add(this));var n=e.value,i=e.stack;ha(t,e),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function ka(t){switch(t.tag){case 1:zr(t.type)&&Rr();var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:return ki(),Ir(),0!==(64&(e=t.effectTag))&&a("285"),t.effectTag=-2049&e|64,t;case 5:return Si(t),null;case 13:return 2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 18:return null;case 4:return ki(),null;case 10:return Bo(t),null;default:return null}}var Ea=Wt.ReactCurrentDispatcher,Sa=Wt.ReactCurrentOwner,Oa=1073741822,Aa=!1,Ma=null,Ca=null,Ta=0,ja=-1,Da=!1,Pa=null,za=!1,Ra=null,Ia=null,Fa=null,La=null;function Na(){if(null!==Ma)for(var t=Ma.return;null!==t;){var e=t;switch(e.tag){case 1:var n=e.type.childContextTypes;null!==n&&void 0!==n&&Rr();break;case 3:ki(),Ir();break;case 5:Si(e);break;case 4:ki();break;case 10:Bo(e)}t=t.return}Ca=null,Ta=0,ja=-1,Da=!1,Ma=null}function Ba(){for(;null!==Pa;){var t=Pa.effectTag;if(16&t&&or(Pa.stateNode,""),128&t){var e=Pa.alternate;null!==e&&(null!==(e=e.ref)&&("function"===typeof e?e(null):e.current=null))}switch(14&t){case 2:ya(Pa),Pa.effectTag&=-3;break;case 6:ya(Pa),Pa.effectTag&=-3,ba(Pa.alternate,Pa);break;case 4:ba(Pa.alternate,Pa);break;case 8:ga(t=Pa),t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,null!==(t=t.alternate)&&(t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null)}Pa=Pa.nextEffect}}function Ua(){for(;null!==Pa;){if(256&Pa.effectTag)t:{var t=Pa.alternate,e=Pa;switch(e.tag){case 0:case 11:case 15:da(Ai,Oi,e);break t;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:ri(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}break t;case 3:case 5:case 6:case 4:case 17:break t;default:a("163")}}Pa=Pa.nextEffect}}function qa(t,e){for(;null!==Pa;){var n=Pa.effectTag;if(36&n){var r=Pa.alternate,i=Pa,o=e;switch(i.tag){case 0:case 11:case 15:da(Ti,ji,i);break;case 1:var u=i.stateNode;if(4&i.effectTag)if(null===r)u.componentDidMount();else{var s=i.elementType===i.type?r.memoizedProps:ri(i.type,r.memoizedProps);u.componentDidUpdate(s,r.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&ra(0,r,u);break;case 3:if(null!==(r=i.updateQueue)){if(u=null,null!==i.child)switch(i.child.tag){case 5:u=i.child.stateNode;break;case 1:u=i.child.stateNode}ra(0,r,u)}break;case 5:o=i.stateNode,null===r&&4&i.effectTag&&yr(i.type,i.memoizedProps)&&o.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}128&n&&(null!==(i=Pa.ref)&&(o=Pa.stateNode,"function"===typeof i?i(o):i.current=o)),512&n&&(Ra=t),Pa=Pa.nextEffect}}function Va(){null!==Ia&&wr(Ia),null!==Fa&&Fa()}function Wa(t,e){za=Aa=!0,t.current===e&&a("177");var n=t.pendingCommitExpirationTime;0===n&&a("261"),t.pendingCommitExpirationTime=0;var r=e.expirationTime,i=e.childExpirationTime;for(function(t,e){if(t.didError=!1,0===e)t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0;else{e<t.latestPingedTime&&(t.latestPingedTime=0);var n=t.latestPendingTime;0!==n&&(n>e?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime>e&&(t.earliestPendingTime=t.latestPendingTime)),0===(n=t.earliestSuspendedTime)?Qr(t,e):e<t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,Qr(t,e)):e>n&&Qr(t,e)}ni(0,t)}(t,i>r?i:r),Sa.current=null,r=void 0,1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e,r=e.firstEffect):r=e:r=e.firstEffect,vr=En,mr=function(){var t=In();if(Fn(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else t:{var n=(e=(e=t.ownerDocument)&&e.defaultView||window).getSelection&&e.getSelection();if(n&&0!==n.rangeCount){e=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{e.nodeType,i.nodeType}catch(p){e=null;break t}var o=0,a=-1,u=-1,s=0,l=0,c=t,f=null;e:for(;;){for(var h;c!==e||0!==r&&3!==c.nodeType||(a=o+r),c!==i||0!==n&&3!==c.nodeType||(u=o+n),3===c.nodeType&&(o+=c.nodeValue.length),null!==(h=c.firstChild);)f=c,c=h;for(;;){if(c===t)break e;if(f===e&&++s===r&&(a=o),f===i&&++l===n&&(u=o),null!==(h=c.nextSibling))break;f=(c=f).parentNode}c=h}e=-1===a||-1===u?null:{start:a,end:u}}else e=null}e=e||{start:0,end:0}}else e=null;return{focusedElem:t,selectionRange:e}}(),En=!1,Pa=r;null!==Pa;){i=!1;var u=void 0;try{Ua()}catch(l){i=!0,u=l}i&&(null===Pa&&a("178"),Za(Pa,u),null!==Pa&&(Pa=Pa.nextEffect))}for(Pa=r;null!==Pa;){i=!1,u=void 0;try{Ba()}catch(l){i=!0,u=l}i&&(null===Pa&&a("178"),Za(Pa,u),null!==Pa&&(Pa=Pa.nextEffect))}for(Ln(mr),mr=null,En=!!vr,vr=null,t.current=e,Pa=r;null!==Pa;){i=!1,u=void 0;try{qa(t,n)}catch(l){i=!0,u=l}i&&(null===Pa&&a("178"),Za(Pa,u),null!==Pa&&(Pa=Pa.nextEffect))}if(null!==r&&null!==Ra){var s=function(t,e){Fa=Ia=Ra=null;var n=iu;iu=!0;do{if(512&e.effectTag){var r=!1,i=void 0;try{var o=e;da(Pi,Oi,o),da(Oi,Di,o)}catch(s){r=!0,i=s}r&&Za(e,i)}e=e.nextEffect}while(null!==e);iu=n,0!==(n=t.expirationTime)&&ku(t,n),cu||iu||Mu(1073741823,!1)}.bind(null,t,r);Ia=o.unstable_runWithPriority(o.unstable_NormalPriority,function(){return xr(s)}),Fa=s}Aa=za=!1,"function"===typeof Ur&&Ur(e.stateNode),n=e.expirationTime,0===(e=(e=e.childExpirationTime)>n?e:n)&&(La=null),function(t,e){t.expirationTime=e,t.finishedWork=null}(t,e)}function Ha(t){for(;;){var e=t.alternate,n=t.return,r=t.sibling;if(0===(1024&t.effectTag)){Ma=t;t:{var o=e,u=Ta,s=(e=t).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:zr(e.type)&&Rr();break;case 3:ki(),Ir(),(s=e.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==o&&null!==o.child||(bo(e),e.effectTag&=-3),sa(e);break;case 5:Si(e);var l=xi(_i.current);if(u=e.type,null!==o&&null!=e.stateNode)la(o,e,u,s,l),o.ref!==e.ref&&(e.effectTag|=128);else if(s){var c=xi(gi.current);if(bo(e)){o=(s=e).stateNode;var f=s.type,h=s.memoizedProps,p=l;switch(o[P]=s,o[z]=h,u=void 0,l=f){case"iframe":case"object":Sn("load",o);break;case"video":case"audio":for(f=0;f<et.length;f++)Sn(et[f],o);break;case"source":Sn("error",o);break;case"img":case"image":case"link":Sn("error",o),Sn("load",o);break;case"form":Sn("reset",o),Sn("submit",o);break;case"details":Sn("toggle",o);break;case"input":_e(o,h),Sn("invalid",o),pr(p,"onChange");break;case"select":o._wrapperState={wasMultiple:!!h.multiple},Sn("invalid",o),pr(p,"onChange");break;case"textarea":$n(o,h),Sn("invalid",o),pr(p,"onChange")}for(u in fr(l,h),f=null,h)h.hasOwnProperty(u)&&(c=h[u],"children"===u?"string"===typeof c?o.textContent!==c&&(f=["children",c]):"number"===typeof c&&o.textContent!==""+c&&(f=["children",""+c]):b.hasOwnProperty(u)&&null!=c&&pr(p,u));switch(l){case"input":qt(o),ke(o,h,!0);break;case"textarea":qt(o),Jn(o);break;case"select":case"option":break;default:"function"===typeof h.onClick&&(o.onclick=dr)}u=f,s.updateQueue=u,(s=null!==u)&&aa(e)}else{h=e,p=u,o=s,f=9===l.nodeType?l:l.ownerDocument,c===Qn.html&&(c=tr(p)),c===Qn.html?"script"===p?((o=f.createElement("div")).innerHTML="<script><\/script>",f=o.removeChild(o.firstChild)):"string"===typeof o.is?f=f.createElement(p,{is:o.is}):(f=f.createElement(p),"select"===p&&(p=f,o.multiple?p.multiple=!0:o.size&&(p.size=o.size))):f=f.createElementNS(c,p),(o=f)[P]=h,o[z]=s,ua(o,e,!1,!1),p=o;var d=l,v=hr(f=u,h=s);switch(f){case"iframe":case"object":Sn("load",p),l=h;break;case"video":case"audio":for(l=0;l<et.length;l++)Sn(et[l],p);l=h;break;case"source":Sn("error",p),l=h;break;case"img":case"image":case"link":Sn("error",p),Sn("load",p),l=h;break;case"form":Sn("reset",p),Sn("submit",p),l=h;break;case"details":Sn("toggle",p),l=h;break;case"input":_e(p,h),l=be(p,h),Sn("invalid",p),pr(d,"onChange");break;case"option":l=Xn(p,h);break;case"select":p._wrapperState={wasMultiple:!!h.multiple},l=i({},h,{value:void 0}),Sn("invalid",p),pr(d,"onChange");break;case"textarea":$n(p,h),l=Yn(p,h),Sn("invalid",p),pr(d,"onChange");break;default:l=h}fr(f,l),c=void 0;var m=f,y=p,g=l;for(c in g)if(g.hasOwnProperty(c)){var _=g[c];"style"===c?lr(y,_):"dangerouslySetInnerHTML"===c?null!=(_=_?_.__html:void 0)&&ir(y,_):"children"===c?"string"===typeof _?("textarea"!==m||""!==_)&&or(y,_):"number"===typeof _&&or(y,""+_):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(b.hasOwnProperty(c)?null!=_&&pr(d,c):null!=_&&ye(y,c,_,v))}switch(f){case"input":qt(p),ke(p,h,!1);break;case"textarea":qt(p),Jn(p);break;case"option":null!=h.value&&p.setAttribute("value",""+ge(h.value));break;case"select":(l=p).multiple=!!h.multiple,null!=(p=h.value)?Zn(l,!!h.multiple,p,!1):null!=h.defaultValue&&Zn(l,!!h.multiple,h.defaultValue,!0);break;default:"function"===typeof l.onClick&&(p.onclick=dr)}(s=yr(u,s))&&aa(e),e.stateNode=o}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&a("166");break;case 6:o&&null!=e.stateNode?ca(o,e,o.memoizedProps,s):("string"!==typeof s&&(null===e.stateNode&&a("166")),o=xi(_i.current),xi(gi.current),bo(e)?(u=(s=e).stateNode,o=s.memoizedProps,u[P]=s,(s=u.nodeValue!==o)&&aa(e)):(u=e,(s=(9===o.nodeType?o:o.ownerDocument).createTextNode(s))[P]=e,u.stateNode=s));break;case 11:break;case 13:if(s=e.memoizedState,0!==(64&e.effectTag)){e.expirationTime=u,Ma=e;break t}s=null!==s,u=null!==o&&null!==o.memoizedState,null!==o&&!s&&u&&(null!==(o=o.child.sibling)&&(null!==(l=e.firstEffect)?(e.firstEffect=o,o.nextEffect=l):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),(s||u)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:ki(),sa(e);break;case 10:Bo(e);break;case 9:case 14:break;case 17:zr(e.type)&&Rr();break;case 18:break;default:a("156")}Ma=null}if(e=t,1===Ta||1!==e.childExpirationTime){for(s=0,u=e.child;null!==u;)(o=u.expirationTime)>s&&(s=o),(l=u.childExpirationTime)>s&&(s=l),u=u.sibling;e.childExpirationTime=s}if(null!==Ma)return Ma;null!==n&&0===(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t))}else{if(null!==(t=ka(t)))return t.effectTag&=1023,t;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;t=n}return null}function Ga(t){var e=zo(t.alternate,t,Ta);return t.memoizedProps=t.pendingProps,null===e&&(e=Ha(t)),Sa.current=null,e}function Xa(t,e){Aa&&a("243"),Va(),Aa=!0;var n=Ea.current;Ea.current=so;var r=t.nextExpirationTimeToWorkOn;r===Ta&&t===Ca&&null!==Ma||(Na(),Ta=r,Ma=Xr((Ca=t).current,null),t.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(e)for(;null!==Ma&&!Ou();)Ma=Ga(Ma);else for(;null!==Ma;)Ma=Ga(Ma)}catch(y){if(Lo=Fo=Io=null,Ki(),null===Ma)i=!0,Du(y);else{null===Ma&&a("271");var o=Ma,u=o.return;if(null!==u){t:{var s=t,l=u,c=o,f=y;if(u=Ta,c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==f&&"object"===typeof f&&"function"===typeof f.then){var h=f;f=l;var p=-1,d=-1;do{if(13===f.tag){var v=f.alternate;if(null!==v&&null!==(v=v.memoizedState)){d=10*(1073741822-v.timedOutAt);break}"number"===typeof(v=f.pendingProps.maxDuration)&&(0>=v?p=0:(-1===p||v<p)&&(p=v))}f=f.return}while(null!==f);f=l;do{if((v=13===f.tag)&&(v=void 0!==f.memoizedProps.fallback&&null===f.memoizedState),v){if(null===(l=f.updateQueue)?((l=new Set).add(h),f.updateQueue=l):l.add(h),0===(1&f.mode)){f.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:((u=$o(1073741823)).tag=Ho,Jo(c,u))),c.expirationTime=1073741823;break t}l=u;var m=(c=s).pingCache;null===m?(m=c.pingCache=new _a,v=new Set,m.set(h,v)):void 0===(v=m.get(h))&&(v=new Set,m.set(h,v)),v.has(l)||(v.add(l),c=$a.bind(null,c,h,l),h.then(c,c)),-1===p?s=1073741823:(-1===d&&(d=10*(1073741822-ei(s,u))-5e3),s=d+p),0<=s&&ja<s&&(ja=s),f.effectTag|=2048,f.expirationTime=u;break t}f=f.return}while(null!==f);f=Error((ue(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+se(c))}Da=!0,f=oa(f,c),s=l;do{switch(s.tag){case 3:s.effectTag|=2048,s.expirationTime=u,Qo(s,u=xa(s,f,u));break t;case 1:if(p=f,d=s.type,c=s.stateNode,0===(64&s.effectTag)&&("function"===typeof d.getDerivedStateFromError||null!==c&&"function"===typeof c.componentDidCatch&&(null===La||!La.has(c)))){s.effectTag|=2048,s.expirationTime=u,Qo(s,u=wa(s,p,u));break t}}s=s.return}while(null!==s)}Ma=Ha(o);continue}i=!0,Du(y)}}break}if(Aa=!1,Ea.current=n,Lo=Fo=Io=null,Ki(),i)Ca=null,t.finishedWork=null;else if(null!==Ma)t.finishedWork=null;else{if(null===(n=t.current.alternate)&&a("281"),Ca=null,Da){if(i=t.latestPendingTime,o=t.latestSuspendedTime,u=t.latestPingedTime,0!==i&&i<r||0!==o&&o<r||0!==u&&u<r)return ti(t,r),void xu(t,n,r,t.expirationTime,-1);if(!t.didError&&e)return t.didError=!0,r=t.nextExpirationTimeToWorkOn=r,e=t.expirationTime=1073741823,void xu(t,n,r,e,-1)}e&&-1!==ja?(ti(t,r),(e=10*(1073741822-ei(t,r)))<ja&&(ja=e),e=10*(1073741822-wu()),e=ja-e,xu(t,n,r,t.expirationTime,0>e?0:e)):(t.pendingCommitExpirationTime=r,t.finishedWork=n)}}function Za(t,e){for(var n=t.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===La||!La.has(r)))return Jo(n,t=wa(n,t=oa(e,t),1073741823)),void Ja(n,1073741823);break;case 3:return Jo(n,t=xa(n,t=oa(e,t),1073741823)),void Ja(n,1073741823)}n=n.return}3===t.tag&&(Jo(t,n=xa(t,n=oa(e,t),1073741823)),Ja(t,1073741823))}function Ya(t,e){var n=o.unstable_getCurrentPriorityLevel(),r=void 0;if(0===(1&e.mode))r=1073741823;else if(Aa&&!za)r=Ta;else{switch(n){case o.unstable_ImmediatePriority:r=1073741823;break;case o.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-t+15)/10|0));break;case o.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-t+500)/25|0));break;case o.unstable_LowPriority:case o.unstable_IdlePriority:r=1;break;default:a("313")}null!==Ca&&r===Ta&&--r}return n===o.unstable_UserBlockingPriority&&(0===uu||r<uu)&&(uu=r),r}function $a(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),null!==Ca&&Ta===n?Ca=null:(e=t.earliestSuspendedTime,r=t.latestSuspendedTime,0!==e&&n<=e&&n>=r&&(t.didError=!1,(0===(e=t.latestPingedTime)||e>n)&&(t.latestPingedTime=n),ni(n,t),0!==(n=t.expirationTime)&&ku(t,n)))}function Ka(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Ja(t,e){null!==(t=Ka(t,e))&&(!Aa&&0!==Ta&&e>Ta&&Na(),Qr(t,e),Aa&&!za&&Ca===t||ku(t,t.expirationTime),yu>mu&&(yu=0,a("185")))}function Qa(t,e,n,r,i){return o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){return t(e,n,r,i)})}var tu=null,eu=null,nu=0,ru=void 0,iu=!1,ou=null,au=0,uu=0,su=!1,lu=null,cu=!1,fu=!1,hu=null,pu=o.unstable_now(),du=1073741822-(pu/10|0),vu=du,mu=50,yu=0,gu=null;function bu(){du=1073741822-((o.unstable_now()-pu)/10|0)}function _u(t,e){if(0!==nu){if(e<nu)return;null!==ru&&o.unstable_cancelCallback(ru)}nu=e,t=o.unstable_now()-pu,ru=o.unstable_scheduleCallback(Au,{timeout:10*(1073741822-e)-t})}function xu(t,e,n,r,i){t.expirationTime=r,0!==i||Ou()?0<i&&(t.timeoutHandle=br(function(t,e,n){t.pendingCommitExpirationTime=n,t.finishedWork=e,bu(),vu=du,Cu(t,n)}.bind(null,t,e,n),i)):(t.pendingCommitExpirationTime=n,t.finishedWork=e)}function wu(){return iu?vu:(Eu(),0!==au&&1!==au||(bu(),vu=du),vu)}function ku(t,e){null===t.nextScheduledRoot?(t.expirationTime=e,null===eu?(tu=eu=t,t.nextScheduledRoot=t):(eu=eu.nextScheduledRoot=t).nextScheduledRoot=tu):e>t.expirationTime&&(t.expirationTime=e),iu||(cu?fu&&(ou=t,au=1073741823,Tu(t,1073741823,!1)):1073741823===e?Mu(1073741823,!1):_u(t,e))}function Eu(){var t=0,e=null;if(null!==eu)for(var n=eu,r=tu;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===eu)&&a("244"),r===r.nextScheduledRoot){tu=eu=r.nextScheduledRoot=null;break}if(r===tu)tu=i=r.nextScheduledRoot,eu.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===eu){(eu=n).nextScheduledRoot=tu,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>t&&(t=i,e=r),r===eu)break;if(1073741823===t)break;n=r,r=r.nextScheduledRoot}}ou=e,au=t}var Su=!1;function Ou(){return!!Su||!!o.unstable_shouldYield()&&(Su=!0)}function Au(){try{if(!Ou()&&null!==tu){bu();var t=tu;do{var e=t.expirationTime;0!==e&&du<=e&&(t.nextExpirationTimeToWorkOn=du),t=t.nextScheduledRoot}while(t!==tu)}Mu(0,!0)}finally{Su=!1}}function Mu(t,e){if(Eu(),e)for(bu(),vu=du;null!==ou&&0!==au&&t<=au&&!(Su&&du>au);)Tu(ou,au,du>au),Eu(),bu(),vu=du;else for(;null!==ou&&0!==au&&t<=au;)Tu(ou,au,!1),Eu();if(e&&(nu=0,ru=null),0!==au&&_u(ou,au),yu=0,gu=null,null!==hu)for(t=hu,hu=null,e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(r){su||(su=!0,lu=r)}}if(su)throw t=lu,lu=null,su=!1,t}function Cu(t,e){iu&&a("253"),ou=t,au=e,Tu(t,e,!1),Mu(1073741823,!1)}function Tu(t,e,n){if(iu&&a("245"),iu=!0,n){var r=t.finishedWork;null!==r?ju(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,_r(r)),Xa(t,n),null!==(r=t.finishedWork)&&(Ou()?t.finishedWork=r:ju(t,r,e)))}else null!==(r=t.finishedWork)?ju(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,_r(r)),Xa(t,n),null!==(r=t.finishedWork)&&ju(t,r,e));iu=!1}function ju(t,e,n){var r=t.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===hu?hu=[r]:hu.push(r),r._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===gu?yu++:(gu=t,yu=0),o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){Wa(t,e)})}function Du(t){null===ou&&a("246"),ou.expirationTime=0,su||(su=!0,lu=t)}function Pu(t,e){var n=cu;cu=!0;try{return t(e)}finally{(cu=n)||iu||Mu(1073741823,!1)}}function zu(t,e){if(cu&&!fu){fu=!0;try{return t(e)}finally{fu=!1}}return t(e)}function Ru(t,e,n){cu||iu||0===uu||(Mu(uu,!1),uu=0);var r=cu;cu=!0;try{return o.unstable_runWithPriority(o.unstable_UserBlockingPriority,function(){return t(e,n)})}finally{(cu=r)||iu||Mu(1073741823,!1)}}function Iu(t,e,n,r,i){var o=e.current;t:if(n){e:{2===en(n=n._reactInternalFiber)&&1===n.tag||a("170");var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(zr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);a("171"),u=void 0}if(1===n.tag){var s=n.type;if(zr(s)){n=Lr(n,s,u);break t}}n=u}else n=Cr;return null===e.context?e.context=n:e.pendingContext=n,e=i,(i=$o(r)).payload={element:t},null!==(e=void 0===e?null:e)&&(i.callback=e),Va(),Jo(o,i),Ja(o,r),r}function Fu(t,e,n,r){var i=e.current;return Iu(t,e,n,i=Ya(wu(),i),r)}function Lu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Nu(t){var e=1073741822-25*(1+((1073741822-wu()+500)/25|0));e>=Oa&&(e=Oa-1),this._expirationTime=Oa=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Bu(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Uu(t,e,n){t={current:e=Hr(3,null,null,e?3:0),containerInfo:t,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Vu(t,e,n,r,i){var o=n._reactRootContainer;if(o){if("function"===typeof i){var a=i;i=function(){var t=Lu(o._internalRoot);a.call(t)}}null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Uu(t,!1,e)}(n,r),"function"===typeof i){var u=i;i=function(){var t=Lu(o._internalRoot);u.call(t)}}zu(function(){null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)})}return Lu(o._internalRoot)}function Wu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return qu(e)||a("200"),function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Zt,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}Ot=function(t,e,n){switch(e){case"input":if(we(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=L(r);i||a("90"),Vt(r),we(r,i)}}}break;case"textarea":Kn(t,n);break;case"select":null!=(e=n.value)&&Zn(t,!!n.multiple,e,!1)}},Nu.prototype.render=function(t){this._defer||a("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,r=new Bu;return Iu(t,e,null,n,r._onCommit),r},Nu.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Nu.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||a("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,i=e;i!==this;)r=i,i=i._next;null===r&&a("251"),r._next=i._next,this._next=e,t.firstBatch=this}this._defer=!1,Cu(t,n),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},Nu.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},Bu.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Bu.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!==typeof n&&a("191",n),n()}}},Uu.prototype.render=function(t,e){var n=this._internalRoot,r=new Bu;return null!==(e=void 0===e?null:e)&&r.then(e),Fu(t,n,null,r._onCommit),r},Uu.prototype.unmount=function(t){var e=this._internalRoot,n=new Bu;return null!==(t=void 0===t?null:t)&&n.then(t),Fu(null,e,null,n._onCommit),n},Uu.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var r=this._internalRoot,i=new Bu;return null!==(n=void 0===n?null:n)&&i.then(n),Fu(e,r,t,i._onCommit),i},Uu.prototype.createBatch=function(){var t=new Nu(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=t,t._next=null;else{for(n=null;null!==r&&r._expirationTime>=e;)n=r,r=r._next;t._next=r,null!==n&&(n._next=t)}return t},Dt=Pu,Pt=Ru,zt=function(){iu||0===uu||(Mu(uu,!1),uu=0)};var Hu={createPortal:Wu,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"===typeof t.render?a("188"):a("268",Object.keys(t))),t=null===(t=rn(e))?null:t.stateNode},hydrate:function(t,e,n){return qu(e)||a("200"),Vu(null,t,e,!0,n)},render:function(t,e,n){return qu(e)||a("200"),Vu(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,r){return qu(n)||a("200"),(null==t||void 0===t._reactInternalFiber)&&a("38"),Vu(t,e,n,!1,r)},unmountComponentAtNode:function(t){return qu(t)||a("40"),!!t._reactRootContainer&&(zu(function(){Vu(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Wu.apply(void 0,arguments)},unstable_batchedUpdates:Pu,unstable_interactiveUpdates:Ru,flushSync:function(t,e){iu&&a("187");var n=cu;cu=!0;try{return Qa(t,e)}finally{cu=n,Mu(1073741823,!1)}},unstable_createRoot:function(t,e){return qu(t)||a("299","unstable_createRoot"),new Uu(t,!0,null!=e&&!0===e.hydrate)},unstable_flushControlled:function(t){var e=cu;cu=!0;try{Qa(t)}finally{(cu=e)||iu||Mu(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[I,F,L,C.injectEventPluginsByName,g,W,function(t){O(t,V)},Tt,jt,Mn,j]}};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Ur=Vr(function(t){return e.onCommitFiberRoot(n,t)}),qr=Vr(function(t){return e.onCommitFiberUnmount(n,t)})}catch(r){}})(i({},t,{overrideProps:null,currentDispatcherRef:Wt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=rn(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}({findFiberByHostInstance:R,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var Gu={default:Hu},Xu=Gu&&Hu||Gu;t.exports=Xu.default||Xu},function(t,e,n){"use strict";t.exports=n(172)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=null,r=!1,i=3,o=-1,a=-1,u=!1,s=!1;function l(){if(!u){var t=n.expirationTime;s?k():s=!0,w(h,t)}}function c(){var t=n,e=n.next;if(n===e)n=null;else{var r=n.previous;n=r.next=e,e.previous=r}t.next=t.previous=null,r=t.callback,e=t.expirationTime,t=t.priorityLevel;var o=i,u=a;i=t,a=e;try{var s=r()}finally{i=o,a=u}if("function"===typeof s)if(s={callback:s,priorityLevel:t,expirationTime:e,next:null,previous:null},null===n)n=s.next=s.previous=s;else{r=null,t=n;do{if(t.expirationTime>=e){r=t;break}t=t.next}while(t!==n);null===r?r=n:r===n&&(n=s,l()),(e=r.previous).next=r.previous=s,s.next=r,s.previous=e}}function f(){if(-1===o&&null!==n&&1===n.priorityLevel){u=!0;try{do{c()}while(null!==n&&1===n.priorityLevel)}finally{u=!1,null!==n?l():s=!1}}}function h(t){u=!0;var i=r;r=t;try{if(t)for(;null!==n;){var o=e.unstable_now();if(!(n.expirationTime<=o))break;do{c()}while(null!==n&&n.expirationTime<=o)}else if(null!==n)do{c()}while(null!==n&&!E())}finally{u=!1,r=i,null!==n?l():s=!1,f()}}var p,d,v=Date,m="function"===typeof setTimeout?setTimeout:void 0,y="function"===typeof clearTimeout?clearTimeout:void 0,g="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function _(t){p=g(function(e){y(d),t(e)}),d=m(function(){b(p),t(e.unstable_now())},100)}if("object"===typeof performance&&"function"===typeof performance.now){var x=performance;e.unstable_now=function(){return x.now()}}else e.unstable_now=function(){return v.now()};var w,k,E,S=null;if("undefined"!==typeof window?S=window:"undefined"!==typeof t&&(S=t),S&&S._schedMock){var O=S._schedMock;w=O[0],k=O[1],E=O[2],e.unstable_now=O[3]}else if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,M=function(t){if(null!==A)try{A(t)}finally{A=null}};w=function(t){null!==A?setTimeout(w,0,t):(A=t,setTimeout(M,0,!1))},k=function(){A=null},E=function(){return!1}}else{"undefined"!==typeof console&&("function"!==typeof g&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var C=null,T=!1,j=-1,D=!1,P=!1,z=0,R=33,I=33;E=function(){return z<=e.unstable_now()};var F=new MessageChannel,L=F.port2;F.port1.onmessage=function(){T=!1;var t=C,n=j;C=null,j=-1;var r=e.unstable_now(),i=!1;if(0>=z-r){if(!(-1!==n&&n<=r))return D||(D=!0,_(N)),C=t,void(j=n);i=!0}if(null!==t){P=!0;try{t(i)}finally{P=!1}}};var N=function t(e){if(null!==C){_(t);var n=e-z+I;n<I&&R<I?(8>n&&(n=8),I=n<R?R:n):R=n,z=e+I,T||(T=!0,L.postMessage(void 0))}else D=!1};w=function(t,e){C=t,j=e,P||0>e?L.postMessage(void 0):D||(D=!0,_(N))},k=function(){C=null,T=!1,j=-1}}e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=5,e.unstable_LowPriority=4,e.unstable_runWithPriority=function(t,n){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=i,a=o;i=t,o=e.unstable_now();try{return n()}finally{i=r,o=a,f()}},e.unstable_next=function(t){switch(i){case 1:case 2:case 3:var n=3;break;default:n=i}var r=i,a=o;i=n,o=e.unstable_now();try{return t()}finally{i=r,o=a,f()}},e.unstable_scheduleCallback=function(t,r){var a=-1!==o?o:e.unstable_now();if("object"===typeof r&&null!==r&&"number"===typeof r.timeout)r=a+r.timeout;else switch(i){case 1:r=a+-1;break;case 2:r=a+250;break;case 5:r=a+1073741823;break;case 4:r=a+1e4;break;default:r=a+5e3}if(t={callback:t,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=t.next=t.previous=t,l();else{a=null;var u=n;do{if(u.expirationTime>r){a=u;break}u=u.next}while(u!==n);null===a?a=n:a===n&&(n=t,l()),(r=a.previous).next=a.previous=t,t.next=a,t.previous=r}return t},e.unstable_cancelCallback=function(t){var e=t.next;if(null!==e){if(e===t)n=null;else{t===n&&(n=e);var r=t.previous;r.next=e,e.previous=r}t.next=t.previous=null}},e.unstable_wrapCallback=function(t){var n=i;return function(){var r=i,a=o;i=n,o=e.unstable_now();try{return t.apply(this,arguments)}finally{i=r,o=a,f()}}},e.unstable_getCurrentPriorityLevel=function(){return i},e.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<a||E())},e.unstable_continueExecution=function(){null!==n&&l()},e.unstable_pauseExecution=function(){},e.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(57))},,,function(t,e,n){(function(t,r){var i;(function(){var o,a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",h=1,p=2,d=4,v=1,m=2,y=1,g=2,b=4,_=8,x=16,w=32,k=64,E=128,S=256,O=512,A=30,M="...",C=800,T=16,j=1,D=2,P=1/0,z=9007199254740991,R=1.7976931348623157e308,I=NaN,F=4294967295,L=F-1,N=F>>>1,B=[["ary",E],["bind",y],["bindKey",g],["curry",_],["curryRight",x],["flip",O],["partial",w],["partialRight",k],["rearg",S]],U="[object Arguments]",q="[object Array]",V="[object AsyncFunction]",W="[object Boolean]",H="[object Date]",G="[object DOMException]",X="[object Error]",Z="[object Function]",Y="[object GeneratorFunction]",$="[object Map]",K="[object Number]",J="[object Null]",Q="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",rt="[object String]",it="[object Symbol]",ot="[object Undefined]",at="[object WeakMap]",ut="[object WeakSet]",st="[object ArrayBuffer]",lt="[object DataView]",ct="[object Float32Array]",ft="[object Float64Array]",ht="[object Int8Array]",pt="[object Int16Array]",dt="[object Int32Array]",vt="[object Uint8Array]",mt="[object Uint8ClampedArray]",yt="[object Uint16Array]",gt="[object Uint32Array]",bt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,xt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wt=/&(?:amp|lt|gt|quot|#39);/g,kt=/[&<>"']/g,Et=RegExp(wt.source),St=RegExp(kt.source),Ot=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,Mt=/<%=([\s\S]+?)%>/g,Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tt=/^\w*$/,jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,Pt=RegExp(Dt.source),zt=/^\s+|\s+$/g,Rt=/^\s+/,It=/\s+$/,Ft=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Lt=/\{\n\/\* \[wrapped with (.+)\] \*/,Nt=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ut=/\\(\\)?/g,qt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vt=/\w*$/,Wt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,Gt=/^\[object .+?Constructor\]$/,Xt=/^0o[0-7]+$/i,Zt=/^(?:0|[1-9]\d*)$/,Yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$t=/($^)/,Kt=/['\n\r\u2028\u2029\\]/g,Jt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Qt+"]",ne="["+Jt+"]",re="\\d+",ie="[\\u2700-\\u27bf]",oe="[a-z\\xdf-\\xf6\\xf8-\\xff]",ae="[^\\ud800-\\udfff"+Qt+re+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ue="\\ud83c[\\udffb-\\udfff]",se="[^\\ud800-\\udfff]",le="(?:\\ud83c[\\udde6-\\uddff]){2}",ce="[\\ud800-\\udbff][\\udc00-\\udfff]",fe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",he="(?:"+oe+"|"+ae+")",pe="(?:"+fe+"|"+ae+")",de="(?:"+ne+"|"+ue+")"+"?",ve="[\\ufe0e\\ufe0f]?"+de+("(?:\\u200d(?:"+[se,le,ce].join("|")+")[\\ufe0e\\ufe0f]?"+de+")*"),me="(?:"+[ie,le,ce].join("|")+")"+ve,ye="(?:"+[se+ne+"?",ne,le,ce,te].join("|")+")",ge=RegExp("['\u2019]","g"),be=RegExp(ne,"g"),_e=RegExp(ue+"(?="+ue+")|"+ye+ve,"g"),xe=RegExp([fe+"?"+oe+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[ee,fe,"$"].join("|")+")",pe+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[ee,fe+he,"$"].join("|")+")",fe+"?"+he+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",fe+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",re,me].join("|"),"g"),we=RegExp("[\\u200d\\ud800-\\udfff"+Jt+"\\ufe0e\\ufe0f]"),ke=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ee=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Se=-1,Oe={};Oe[ct]=Oe[ft]=Oe[ht]=Oe[pt]=Oe[dt]=Oe[vt]=Oe[mt]=Oe[yt]=Oe[gt]=!0,Oe[U]=Oe[q]=Oe[st]=Oe[W]=Oe[lt]=Oe[H]=Oe[X]=Oe[Z]=Oe[$]=Oe[K]=Oe[Q]=Oe[et]=Oe[nt]=Oe[rt]=Oe[at]=!1;var Ae={};Ae[U]=Ae[q]=Ae[st]=Ae[lt]=Ae[W]=Ae[H]=Ae[ct]=Ae[ft]=Ae[ht]=Ae[pt]=Ae[dt]=Ae[$]=Ae[K]=Ae[Q]=Ae[et]=Ae[nt]=Ae[rt]=Ae[it]=Ae[vt]=Ae[mt]=Ae[yt]=Ae[gt]=!0,Ae[X]=Ae[Z]=Ae[at]=!1;var Me={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ce=parseFloat,Te=parseInt,je="object"==typeof t&&t&&t.Object===Object&&t,De="object"==typeof self&&self&&self.Object===Object&&self,Pe=je||De||Function("return this")(),ze=e&&!e.nodeType&&e,Re=ze&&"object"==typeof r&&r&&!r.nodeType&&r,Ie=Re&&Re.exports===ze,Fe=Ie&&je.process,Le=function(){try{var t=Re&&Re.require&&Re.require("util").types;return t||Fe&&Fe.binding&&Fe.binding("util")}catch(e){}}(),Ne=Le&&Le.isArrayBuffer,Be=Le&&Le.isDate,Ue=Le&&Le.isMap,qe=Le&&Le.isRegExp,Ve=Le&&Le.isSet,We=Le&&Le.isTypedArray;function He(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ge(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Xe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ze(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ye(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function $e(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Ke(t,e){return!!(null==t?0:t.length)&&sn(t,e,0)>-1}function Je(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Qe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function tn(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function en(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function nn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function rn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var on=hn("length");function an(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function un(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function sn(t,e,n){return e===e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):un(t,cn,n)}function ln(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function cn(t){return t!==t}function fn(t,e){var n=null==t?0:t.length;return n?vn(t,e)/n:I}function hn(t){return function(e){return null==e?o:e[t]}}function pn(t){return function(e){return null==t?o:t[e]}}function dn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function vn(t,e){for(var n,r=-1,i=t.length;++r<i;){var a=e(t[r]);a!==o&&(n=n===o?a:n+a)}return n}function mn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function yn(t){return function(e){return t(e)}}function gn(t,e){return Qe(e,function(e){return t[e]})}function bn(t,e){return t.has(e)}function _n(t,e){for(var n=-1,r=t.length;++n<r&&sn(e,t[n],0)>-1;);return n}function xn(t,e){for(var n=t.length;n--&&sn(e,t[n],0)>-1;);return n}var wn=pn({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),kn=pn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function En(t){return"\\"+Me[t]}function Sn(t){return we.test(t)}function On(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function An(t,e){return function(n){return t(e(n))}}function Mn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==f||(t[n]=f,o[i++]=n)}return o}function Cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Tn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function jn(t){return Sn(t)?function(t){var e=_e.lastIndex=0;for(;_e.test(t);)++e;return e}(t):on(t)}function Dn(t){return Sn(t)?function(t){return t.match(_e)||[]}(t):function(t){return t.split("")}(t)}var Pn=pn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var zn=function t(e){var n=(e=null==e?Pe:zn.defaults(Pe.Object(),e,zn.pick(Pe,Ee))).Array,r=e.Date,i=e.Error,Jt=e.Function,Qt=e.Math,te=e.Object,ee=e.RegExp,ne=e.String,re=e.TypeError,ie=n.prototype,oe=Jt.prototype,ae=te.prototype,ue=e["__core-js_shared__"],se=oe.toString,le=ae.hasOwnProperty,ce=0,fe=function(){var t=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),he=ae.toString,pe=se.call(te),de=Pe._,ve=ee("^"+se.call(le).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=Ie?e.Buffer:o,ye=e.Symbol,_e=e.Uint8Array,we=me?me.allocUnsafe:o,Me=An(te.getPrototypeOf,te),je=te.create,De=ae.propertyIsEnumerable,ze=ie.splice,Re=ye?ye.isConcatSpreadable:o,Fe=ye?ye.iterator:o,Le=ye?ye.toStringTag:o,on=function(){try{var t=Lo(te,"defineProperty");return t({},"",{}),t}catch(e){}}(),pn=e.clearTimeout!==Pe.clearTimeout&&e.clearTimeout,Rn=r&&r.now!==Pe.Date.now&&r.now,In=e.setTimeout!==Pe.setTimeout&&e.setTimeout,Fn=Qt.ceil,Ln=Qt.floor,Nn=te.getOwnPropertySymbols,Bn=me?me.isBuffer:o,Un=e.isFinite,qn=ie.join,Vn=An(te.keys,te),Wn=Qt.max,Hn=Qt.min,Gn=r.now,Xn=e.parseInt,Zn=Qt.random,Yn=ie.reverse,$n=Lo(e,"DataView"),Kn=Lo(e,"Map"),Jn=Lo(e,"Promise"),Qn=Lo(e,"Set"),tr=Lo(e,"WeakMap"),er=Lo(te,"create"),nr=tr&&new tr,rr={},ir=ca($n),or=ca(Kn),ar=ca(Jn),ur=ca(Qn),sr=ca(tr),lr=ye?ye.prototype:o,cr=lr?lr.valueOf:o,fr=lr?lr.toString:o;function hr(t){if(Au(t)&&!mu(t)&&!(t instanceof mr)){if(t instanceof vr)return t;if(le.call(t,"__wrapped__"))return fa(t)}return new vr(t)}var pr=function(){function t(){}return function(e){if(!Ou(e))return{};if(je)return je(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function dr(){}function vr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function mr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=F,this.__views__=[]}function yr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function gr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new br;++e<n;)this.add(t[e])}function xr(t){var e=this.__data__=new gr(t);this.size=e.size}function wr(t,e){var n=mu(t),r=!n&&vu(t),i=!n&&!r&&_u(t),o=!n&&!r&&!i&&Ru(t),a=n||r||i||o,u=a?mn(t.length,ne):[],s=u.length;for(var l in t)!e&&!le.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ho(l,s))||u.push(l);return u}function kr(t){var e=t.length;return e?t[_i(0,e-1)]:o}function Er(t,e){return ua(eo(t),Pr(e,0,t.length))}function Sr(t){return ua(eo(t))}function Or(t,e,n){(n===o||hu(t[e],n))&&(n!==o||e in t)||jr(t,e,n)}function Ar(t,e,n){var r=t[e];le.call(t,e)&&hu(r,n)&&(n!==o||e in t)||jr(t,e,n)}function Mr(t,e){for(var n=t.length;n--;)if(hu(t[n][0],e))return n;return-1}function Cr(t,e,n,r){return Lr(t,function(t,i,o){e(r,t,n(t),o)}),r}function Tr(t,e){return t&&no(e,rs(e),t)}function jr(t,e,n){"__proto__"==e&&on?on(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Dr(t,e){for(var r=-1,i=e.length,a=n(i),u=null==t;++r<i;)a[r]=u?o:Ju(t,e[r]);return a}function Pr(t,e,n){return t===t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function zr(t,e,n,r,i,a){var u,s=e&h,l=e&p,c=e&d;if(n&&(u=i?n(t,r,i,a):n(t)),u!==o)return u;if(!Ou(t))return t;var f=mu(t);if(f){if(u=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&le.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!s)return eo(t,u)}else{var v=Uo(t),m=v==Z||v==Y;if(_u(t))return Yi(t,s);if(v==Q||v==U||m&&!i){if(u=l||m?{}:Vo(t),!s)return l?function(t,e){return no(t,Bo(t),e)}(t,function(t,e){return t&&no(e,is(e),t)}(u,t)):function(t,e){return no(t,No(t),e)}(t,Tr(u,t))}else{if(!Ae[v])return i?t:{};u=function(t,e,n){var r,i=t.constructor;switch(e){case st:return $i(t);case W:case H:return new i(+t);case lt:return function(t,e){var n=e?$i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ct:case ft:case ht:case pt:case dt:case vt:case mt:case yt:case gt:return Ki(t,n);case $:return new i;case K:case rt:return new i(t);case et:return function(t){var e=new t.constructor(t.source,Vt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case nt:return new i;case it:return r=t,cr?te(cr.call(r)):{}}}(t,v,s)}}a||(a=new xr);var y=a.get(t);if(y)return y;if(a.set(t,u),Du(t))return t.forEach(function(r){u.add(zr(r,e,n,r,t,a))}),u;if(Mu(t))return t.forEach(function(r,i){u.set(i,zr(r,e,n,i,t,a))}),u;var g=f?o:(c?l?jo:To:l?is:rs)(t);return Xe(g||t,function(r,i){g&&(r=t[i=r]),Ar(u,i,zr(r,e,n,i,t,a))}),u}function Rr(t,e,n){var r=n.length;if(null==t)return!r;for(t=te(t);r--;){var i=n[r],a=e[i],u=t[i];if(u===o&&!(i in t)||!a(u))return!1}return!0}function Ir(t,e,n){if("function"!=typeof t)throw new re(s);return ra(function(){t.apply(o,n)},e)}function Fr(t,e,n,r){var i=-1,o=Ke,u=!0,s=t.length,l=[],c=e.length;if(!s)return l;n&&(e=Qe(e,yn(n))),r?(o=Je,u=!1):e.length>=a&&(o=bn,u=!1,e=new _r(e));t:for(;++i<s;){var f=t[i],h=null==n?f:n(f);if(f=r||0!==f?f:0,u&&h===h){for(var p=c;p--;)if(e[p]===h)continue t;l.push(f)}else o(e,h,r)||l.push(f)}return l}hr.templateSettings={escape:Ot,evaluate:At,interpolate:Mt,variable:"",imports:{_:hr}},hr.prototype=dr.prototype,hr.prototype.constructor=hr,vr.prototype=pr(dr.prototype),vr.prototype.constructor=vr,mr.prototype=pr(dr.prototype),mr.prototype.constructor=mr,yr.prototype.clear=function(){this.__data__=er?er(null):{},this.size=0},yr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},yr.prototype.get=function(t){var e=this.__data__;if(er){var n=e[t];return n===l?o:n}return le.call(e,t)?e[t]:o},yr.prototype.has=function(t){var e=this.__data__;return er?e[t]!==o:le.call(e,t)},yr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=er&&e===o?l:e,this},gr.prototype.clear=function(){this.__data__=[],this.size=0},gr.prototype.delete=function(t){var e=this.__data__,n=Mr(e,t);return!(n<0)&&(n==e.length-1?e.pop():ze.call(e,n,1),--this.size,!0)},gr.prototype.get=function(t){var e=this.__data__,n=Mr(e,t);return n<0?o:e[n][1]},gr.prototype.has=function(t){return Mr(this.__data__,t)>-1},gr.prototype.set=function(t,e){var n=this.__data__,r=Mr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},br.prototype.clear=function(){this.size=0,this.__data__={hash:new yr,map:new(Kn||gr),string:new yr}},br.prototype.delete=function(t){var e=Io(this,t).delete(t);return this.size-=e?1:0,e},br.prototype.get=function(t){return Io(this,t).get(t)},br.prototype.has=function(t){return Io(this,t).has(t)},br.prototype.set=function(t,e){var n=Io(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},_r.prototype.add=_r.prototype.push=function(t){return this.__data__.set(t,l),this},_r.prototype.has=function(t){return this.__data__.has(t)},xr.prototype.clear=function(){this.__data__=new gr,this.size=0},xr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},xr.prototype.get=function(t){return this.__data__.get(t)},xr.prototype.has=function(t){return this.__data__.has(t)},xr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof gr){var r=n.__data__;if(!Kn||r.length<a-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new br(r)}return n.set(t,e),this.size=n.size,this};var Lr=oo(Gr),Nr=oo(Xr,!0);function Br(t,e){var n=!0;return Lr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Ur(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],u=e(a);if(null!=u&&(s===o?u===u&&!zu(u):n(u,s)))var s=u,l=a}return l}function qr(t,e){var n=[];return Lr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Vr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Wo),i||(i=[]);++o<a;){var u=t[o];e>0&&n(u)?e>1?Vr(u,e-1,n,r,i):tn(i,u):r||(i[i.length]=u)}return i}var Wr=ao(),Hr=ao(!0);function Gr(t,e){return t&&Wr(t,e,rs)}function Xr(t,e){return t&&Hr(t,e,rs)}function Zr(t,e){return $e(e,function(e){return ku(t[e])})}function Yr(t,e){for(var n=0,r=(e=Hi(e,t)).length;null!=t&&n<r;)t=t[la(e[n++])];return n&&n==r?t:o}function $r(t,e,n){var r=e(t);return mu(t)?r:tn(r,n(t))}function Kr(t){return null==t?t===o?ot:J:Le&&Le in te(t)?function(t){var e=le.call(t,Le),n=t[Le];try{t[Le]=o;var r=!0}catch(a){}var i=he.call(t);return r&&(e?t[Le]=n:delete t[Le]),i}(t):function(t){return he.call(t)}(t)}function Jr(t,e){return t>e}function Qr(t,e){return null!=t&&le.call(t,e)}function ti(t,e){return null!=t&&e in te(t)}function ei(t,e,r){for(var i=r?Je:Ke,a=t[0].length,u=t.length,s=u,l=n(u),c=1/0,f=[];s--;){var h=t[s];s&&e&&(h=Qe(h,yn(e))),c=Hn(h.length,c),l[s]=!r&&(e||a>=120&&h.length>=120)?new _r(s&&h):o}h=t[0];var p=-1,d=l[0];t:for(;++p<a&&f.length<c;){var v=h[p],m=e?e(v):v;if(v=r||0!==v?v:0,!(d?bn(d,m):i(f,m,r))){for(s=u;--s;){var y=l[s];if(!(y?bn(y,m):i(t[s],m,r)))continue t}d&&d.push(m),f.push(v)}}return f}function ni(t,e,n){var r=null==(t=ta(t,e=Hi(e,t)))?t:t[la(wa(e))];return null==r?o:He(r,t,n)}function ri(t){return Au(t)&&Kr(t)==U}function ii(t,e,n,r,i){return t===e||(null==t||null==e||!Au(t)&&!Au(e)?t!==t&&e!==e:function(t,e,n,r,i,a){var u=mu(t),s=mu(e),l=u?q:Uo(t),c=s?q:Uo(e),f=(l=l==U?Q:l)==Q,h=(c=c==U?Q:c)==Q,p=l==c;if(p&&_u(t)){if(!_u(e))return!1;u=!0,f=!1}if(p&&!f)return a||(a=new xr),u||Ru(t)?Mo(t,e,n,r,i,a):function(t,e,n,r,i,o,a){switch(n){case lt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case st:return!(t.byteLength!=e.byteLength||!o(new _e(t),new _e(e)));case W:case H:case K:return hu(+t,+e);case X:return t.name==e.name&&t.message==e.message;case et:case rt:return t==e+"";case $:var u=On;case nt:var s=r&v;if(u||(u=Cn),t.size!=e.size&&!s)return!1;var l=a.get(t);if(l)return l==e;r|=m,a.set(t,e);var c=Mo(u(t),u(e),r,i,o,a);return a.delete(t),c;case it:if(cr)return cr.call(t)==cr.call(e)}return!1}(t,e,l,n,r,i,a);if(!(n&v)){var d=f&&le.call(t,"__wrapped__"),y=h&&le.call(e,"__wrapped__");if(d||y){var g=d?t.value():t,b=y?e.value():e;return a||(a=new xr),i(g,b,n,r,a)}}return!!p&&(a||(a=new xr),function(t,e,n,r,i,a){var u=n&v,s=To(t),l=s.length,c=To(e).length;if(l!=c&&!u)return!1;for(var f=l;f--;){var h=s[f];if(!(u?h in e:le.call(e,h)))return!1}var p=a.get(t);if(p&&a.get(e))return p==e;var d=!0;a.set(t,e),a.set(e,t);for(var m=u;++f<l;){h=s[f];var y=t[h],g=e[h];if(r)var b=u?r(g,y,h,e,t,a):r(y,g,h,t,e,a);if(!(b===o?y===g||i(y,g,n,r,a):b)){d=!1;break}m||(m="constructor"==h)}if(d&&!m){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(d=!1)}return a.delete(t),a.delete(e),d}(t,e,n,r,i,a))}(t,e,n,r,ii,i))}function oi(t,e,n,r){var i=n.length,a=i,u=!r;if(null==t)return!a;for(t=te(t);i--;){var s=n[i];if(u&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var l=(s=n[i])[0],c=t[l],f=s[1];if(u&&s[2]){if(c===o&&!(l in t))return!1}else{var h=new xr;if(r)var p=r(c,f,l,t,e,h);if(!(p===o?ii(f,c,v|m,r,h):p))return!1}}return!0}function ai(t){return!(!Ou(t)||(e=t,fe&&fe in e))&&(ku(t)?ve:Gt).test(ca(t));var e}function ui(t){return"function"==typeof t?t:null==t?Cs:"object"==typeof t?mu(t)?pi(t[0],t[1]):hi(t):Ls(t)}function si(t){if(!$o(t))return Vn(t);var e=[];for(var n in te(t))le.call(t,n)&&"constructor"!=n&&e.push(n);return e}function li(t){if(!Ou(t))return function(t){var e=[];if(null!=t)for(var n in te(t))e.push(n);return e}(t);var e=$o(t),n=[];for(var r in t)("constructor"!=r||!e&&le.call(t,r))&&n.push(r);return n}function ci(t,e){return t<e}function fi(t,e){var r=-1,i=gu(t)?n(t.length):[];return Lr(t,function(t,n,o){i[++r]=e(t,n,o)}),i}function hi(t){var e=Fo(t);return 1==e.length&&e[0][2]?Jo(e[0][0],e[0][1]):function(n){return n===t||oi(n,t,e)}}function pi(t,e){return Xo(t)&&Ko(e)?Jo(la(t),e):function(n){var r=Ju(n,t);return r===o&&r===e?Qu(n,t):ii(e,r,v|m)}}function di(t,e,n,r,i){t!==e&&Wr(e,function(a,u){if(Ou(a))i||(i=new xr),function(t,e,n,r,i,a,u){var s=ea(t,n),l=ea(e,n),c=u.get(l);if(c)Or(t,n,c);else{var f=a?a(s,l,n+"",t,e,u):o,h=f===o;if(h){var p=mu(l),d=!p&&_u(l),v=!p&&!d&&Ru(l);f=l,p||d||v?mu(s)?f=s:bu(s)?f=eo(s):d?(h=!1,f=Yi(l,!0)):v?(h=!1,f=Ki(l,!0)):f=[]:Tu(l)||vu(l)?(f=s,vu(s)?f=Vu(s):Ou(s)&&!ku(s)||(f=Vo(l))):h=!1}h&&(u.set(l,f),i(f,l,r,a,u),u.delete(l)),Or(t,n,f)}}(t,e,u,n,di,r,i);else{var s=r?r(ea(t,u),a,u+"",t,e,i):o;s===o&&(s=a),Or(t,u,s)}},is)}function vi(t,e){var n=t.length;if(n)return Ho(e+=e<0?n:0,n)?t[e]:o}function mi(t,e,n){var r=-1;return e=Qe(e.length?e:[Cs],yn(Ro())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(fi(t,function(t,n,i){return{criteria:Qe(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;++r<a;){var s=Ji(i[r],o[r]);if(s){if(r>=u)return s;var l=n[r];return s*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)})}function yi(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],u=Yr(t,a);n(u,a)&&Si(o,Hi(a,t),u)}return o}function gi(t,e,n,r){var i=r?ln:sn,o=-1,a=e.length,u=t;for(t===e&&(e=eo(e)),n&&(u=Qe(t,yn(n)));++o<a;)for(var s=0,l=e[o],c=n?n(l):l;(s=i(u,c,s,r))>-1;)u!==t&&ze.call(u,s,1),ze.call(t,s,1);return t}function bi(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Ho(i)?ze.call(t,i,1):Fi(t,i)}}return t}function _i(t,e){return t+Ln(Zn()*(e-t+1))}function xi(t,e){var n="";if(!t||e<1||e>z)return n;do{e%2&&(n+=t),(e=Ln(e/2))&&(t+=t)}while(e);return n}function wi(t,e){return ia(Qo(t,e,Cs),t+"")}function ki(t){return kr(hs(t))}function Ei(t,e){var n=hs(t);return ua(n,Pr(e,0,n.length))}function Si(t,e,n,r){if(!Ou(t))return t;for(var i=-1,a=(e=Hi(e,t)).length,u=a-1,s=t;null!=s&&++i<a;){var l=la(e[i]),c=n;if(i!=u){var f=s[l];(c=r?r(f,l,s):o)===o&&(c=Ou(f)?f:Ho(e[i+1])?[]:{})}Ar(s,l,c),s=s[l]}return t}var Oi=nr?function(t,e){return nr.set(t,e),t}:Cs,Ai=on?function(t,e){return on(t,"toString",{configurable:!0,enumerable:!1,value:Os(e),writable:!0})}:Cs;function Mi(t){return ua(hs(t))}function Ci(t,e,r){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=n(o);++i<o;)a[i]=t[i+e];return a}function Ti(t,e){var n;return Lr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function ji(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=N){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!zu(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Di(t,e,Cs,n)}function Di(t,e,n,r){e=n(e);for(var i=0,a=null==t?0:t.length,u=e!==e,s=null===e,l=zu(e),c=e===o;i<a;){var f=Ln((i+a)/2),h=n(t[f]),p=h!==o,d=null===h,v=h===h,m=zu(h);if(u)var y=r||v;else y=c?v&&(r||p):s?v&&p&&(r||!d):l?v&&p&&!d&&(r||!m):!d&&!m&&(r?h<=e:h<e);y?i=f+1:a=f}return Hn(a,L)}function Pi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],u=e?e(a):a;if(!n||!hu(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function zi(t){return"number"==typeof t?t:zu(t)?I:+t}function Ri(t){if("string"==typeof t)return t;if(mu(t))return Qe(t,Ri)+"";if(zu(t))return fr?fr.call(t):"";var e=t+"";return"0"==e&&1/t==-P?"-0":e}function Ii(t,e,n){var r=-1,i=Ke,o=t.length,u=!0,s=[],l=s;if(n)u=!1,i=Je;else if(o>=a){var c=e?null:wo(t);if(c)return Cn(c);u=!1,i=bn,l=new _r}else l=e?[]:s;t:for(;++r<o;){var f=t[r],h=e?e(f):f;if(f=n||0!==f?f:0,u&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue t;e&&l.push(h),s.push(f)}else i(l,h,n)||(l!==s&&l.push(h),s.push(f))}return s}function Fi(t,e){return null==(t=ta(t,e=Hi(e,t)))||delete t[la(wa(e))]}function Li(t,e,n,r){return Si(t,e,n(Yr(t,e)),r)}function Ni(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Ci(t,r?0:o,r?o+1:i):Ci(t,r?o+1:0,r?i:o)}function Bi(t,e){var n=t;return n instanceof mr&&(n=n.value()),en(e,function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))},n)}function Ui(t,e,r){var i=t.length;if(i<2)return i?Ii(t[0]):[];for(var o=-1,a=n(i);++o<i;)for(var u=t[o],s=-1;++s<i;)s!=o&&(a[o]=Fr(a[o]||u,t[s],e,r));return Ii(Vr(a,1),e,r)}function qi(t,e,n){for(var r=-1,i=t.length,a=e.length,u={};++r<i;){var s=r<a?e[r]:o;n(u,t[r],s)}return u}function Vi(t){return bu(t)?t:[]}function Wi(t){return"function"==typeof t?t:Cs}function Hi(t,e){return mu(t)?t:Xo(t,e)?[t]:sa(Wu(t))}var Gi=wi;function Xi(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:Ci(t,e,n)}var Zi=pn||function(t){return Pe.clearTimeout(t)};function Yi(t,e){if(e)return t.slice();var n=t.length,r=we?we(n):new t.constructor(n);return t.copy(r),r}function $i(t){var e=new t.constructor(t.byteLength);return new _e(e).set(new _e(t)),e}function Ki(t,e){var n=e?$i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ji(t,e){if(t!==e){var n=t!==o,r=null===t,i=t===t,a=zu(t),u=e!==o,s=null===e,l=e===e,c=zu(e);if(!s&&!c&&!a&&t>e||a&&u&&l&&!s&&!c||r&&u&&l||!n&&l||!i)return 1;if(!r&&!a&&!c&&t<e||c&&n&&i&&!r&&!a||s&&n&&i||!u&&i||!l)return-1}return 0}function Qi(t,e,r,i){for(var o=-1,a=t.length,u=r.length,s=-1,l=e.length,c=Wn(a-u,0),f=n(l+c),h=!i;++s<l;)f[s]=e[s];for(;++o<u;)(h||o<a)&&(f[r[o]]=t[o]);for(;c--;)f[s++]=t[o++];return f}function to(t,e,r,i){for(var o=-1,a=t.length,u=-1,s=r.length,l=-1,c=e.length,f=Wn(a-s,0),h=n(f+c),p=!i;++o<f;)h[o]=t[o];for(var d=o;++l<c;)h[d+l]=e[l];for(;++u<s;)(p||o<a)&&(h[d+r[u]]=t[o++]);return h}function eo(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function no(t,e,n,r){var i=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var s=e[a],l=r?r(n[s],t[s],s,n,t):o;l===o&&(l=t[s]),i?jr(n,s,l):Ar(n,s,l)}return n}function ro(t,e){return function(n,r){var i=mu(n)?Ge:Cr,o=e?e():{};return i(n,t,Ro(r,2),o)}}function io(t){return wi(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,u=i>2?n[2]:o;for(a=t.length>3&&"function"==typeof a?(i--,a):o,u&&Go(n[0],n[1],u)&&(a=i<3?o:a,i=1),e=te(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e})}function oo(t,e){return function(n,r){if(null==n)return n;if(!gu(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=te(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function ao(t){return function(e,n,r){for(var i=-1,o=te(e),a=r(e),u=a.length;u--;){var s=a[t?u:++i];if(!1===n(o[s],s,o))break}return e}}function uo(t){return function(e){var n=Sn(e=Wu(e))?Dn(e):o,r=n?n[0]:e.charAt(0),i=n?Xi(n,1).join(""):e.slice(1);return r[t]()+i}}function so(t){return function(e){return en(ks(vs(e).replace(ge,"")),t,"")}}function lo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=pr(t.prototype),r=t.apply(n,e);return Ou(r)?r:n}}function co(t){return function(e,n,r){var i=te(e);if(!gu(e)){var a=Ro(n,3);e=rs(e),n=function(t){return a(i[t],t,i)}}var u=t(e,n,r);return u>-1?i[a?e[u]:u]:o}}function fo(t){return Co(function(e){var n=e.length,r=n,i=vr.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new re(s);if(i&&!u&&"wrapper"==Po(a))var u=new vr([],!0)}for(r=u?r:n;++r<n;){var l=Po(a=e[r]),c="wrapper"==l?Do(a):o;u=c&&Zo(c[0])&&c[1]==(E|_|w|S)&&!c[4].length&&1==c[9]?u[Po(c[0])].apply(u,c[3]):1==a.length&&Zo(a)?u[l]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&mu(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function ho(t,e,r,i,a,u,s,l,c,f){var h=e&E,p=e&y,d=e&g,v=e&(_|x),m=e&O,b=d?o:lo(t);return function y(){for(var g=arguments.length,_=n(g),x=g;x--;)_[x]=arguments[x];if(v)var w=zo(y),k=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(_,w);if(i&&(_=Qi(_,i,a,v)),u&&(_=to(_,u,s,v)),g-=k,v&&g<f){var E=Mn(_,w);return _o(t,e,ho,y.placeholder,r,_,E,l,c,f-g)}var S=p?r:this,O=d?S[t]:t;return g=_.length,l?_=function(t,e){for(var n=t.length,r=Hn(e.length,n),i=eo(t);r--;){var a=e[r];t[r]=Ho(a,n)?i[a]:o}return t}(_,l):m&&g>1&&_.reverse(),h&&c<g&&(_.length=c),this&&this!==Pe&&this instanceof y&&(O=b||lo(O)),O.apply(S,_)}}function po(t,e){return function(n,r){return function(t,e,n,r){return Gr(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function vo(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Ri(n),r=Ri(r)):(n=zi(n),r=zi(r)),i=t(n,r)}return i}}function mo(t){return Co(function(e){return e=Qe(e,yn(Ro())),wi(function(n){var r=this;return t(e,function(t){return He(t,r,n)})})})}function yo(t,e){var n=(e=e===o?" ":Ri(e)).length;if(n<2)return n?xi(e,t):e;var r=xi(e,Fn(t/jn(e)));return Sn(e)?Xi(Dn(r),0,t).join(""):r.slice(0,t)}function go(t){return function(e,r,i){return i&&"number"!=typeof i&&Go(e,r,i)&&(r=i=o),e=Nu(e),r===o?(r=e,e=0):r=Nu(r),function(t,e,r,i){for(var o=-1,a=Wn(Fn((e-t)/(r||1)),0),u=n(a);a--;)u[i?a:++o]=t,t+=r;return u}(e,r,i=i===o?e<r?1:-1:Nu(i),t)}}function bo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=qu(e),n=qu(n)),t(e,n)}}function _o(t,e,n,r,i,a,u,s,l,c){var f=e&_;e|=f?w:k,(e&=~(f?k:w))&b||(e&=~(y|g));var h=[t,e,i,f?a:o,f?u:o,f?o:a,f?o:u,s,l,c],p=n.apply(o,h);return Zo(t)&&na(p,h),p.placeholder=r,oa(p,t,e)}function xo(t){var e=Qt[t];return function(t,n){if(t=qu(t),n=null==n?0:Hn(Bu(n),292)){var r=(Wu(t)+"e").split("e");return+((r=(Wu(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var wo=Qn&&1/Cn(new Qn([,-0]))[1]==P?function(t){return new Qn(t)}:zs;function ko(t){return function(e){var n=Uo(e);return n==$?On(e):n==nt?Tn(e):function(t,e){return Qe(e,function(e){return[e,t[e]]})}(e,t(e))}}function Eo(t,e,r,i,a,u,l,c){var h=e&g;if(!h&&"function"!=typeof t)throw new re(s);var p=i?i.length:0;if(p||(e&=~(w|k),i=a=o),l=l===o?l:Wn(Bu(l),0),c=c===o?c:Bu(c),p-=a?a.length:0,e&k){var d=i,v=a;i=a=o}var m=h?o:Do(t),O=[t,e,r,i,a,d,v,u,l,c];if(m&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(y|g|E),a=r==E&&n==_||r==E&&n==S&&t[7].length<=e[8]||r==(E|S)&&e[7].length<=e[8]&&n==_;if(!o&&!a)return t;r&y&&(t[2]=e[2],i|=n&y?0:b);var u=e[3];if(u){var s=t[3];t[3]=s?Qi(s,u,e[4]):u,t[4]=s?Mn(t[3],f):e[4]}(u=e[5])&&(s=t[5],t[5]=s?to(s,u,e[6]):u,t[6]=s?Mn(t[5],f):e[6]),(u=e[7])&&(t[7]=u),r&E&&(t[8]=null==t[8]?e[8]:Hn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(O,m),t=O[0],e=O[1],r=O[2],i=O[3],a=O[4],!(c=O[9]=O[9]===o?h?0:t.length:Wn(O[9]-p,0))&&e&(_|x)&&(e&=~(_|x)),e&&e!=y)A=e==_||e==x?function(t,e,r){var i=lo(t);return function a(){for(var u=arguments.length,s=n(u),l=u,c=zo(a);l--;)s[l]=arguments[l];var f=u<3&&s[0]!==c&&s[u-1]!==c?[]:Mn(s,c);return(u-=f.length)<r?_o(t,e,ho,a.placeholder,o,s,f,o,o,r-u):He(this&&this!==Pe&&this instanceof a?i:t,this,s)}}(t,e,c):e!=w&&e!=(y|w)||a.length?ho.apply(o,O):function(t,e,r,i){var o=e&y,a=lo(t);return function e(){for(var u=-1,s=arguments.length,l=-1,c=i.length,f=n(c+s),h=this&&this!==Pe&&this instanceof e?a:t;++l<c;)f[l]=i[l];for(;s--;)f[l++]=arguments[++u];return He(h,o?r:this,f)}}(t,e,r,i);else var A=function(t,e,n){var r=e&y,i=lo(t);return function e(){return(this&&this!==Pe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,r);return oa((m?Oi:na)(A,O),t,e)}function So(t,e,n,r){return t===o||hu(t,ae[n])&&!le.call(r,n)?e:t}function Oo(t,e,n,r,i,a){return Ou(t)&&Ou(e)&&(a.set(e,t),di(t,e,o,Oo,a),a.delete(e)),t}function Ao(t){return Tu(t)?o:t}function Mo(t,e,n,r,i,a){var u=n&v,s=t.length,l=e.length;if(s!=l&&!(u&&l>s))return!1;var c=a.get(t);if(c&&a.get(e))return c==e;var f=-1,h=!0,p=n&m?new _r:o;for(a.set(t,e),a.set(e,t);++f<s;){var d=t[f],y=e[f];if(r)var g=u?r(y,d,f,e,t,a):r(d,y,f,t,e,a);if(g!==o){if(g)continue;h=!1;break}if(p){if(!rn(e,function(t,e){if(!bn(p,e)&&(d===t||i(d,t,n,r,a)))return p.push(e)})){h=!1;break}}else if(d!==y&&!i(d,y,n,r,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function Co(t){return ia(Qo(t,o,ya),t+"")}function To(t){return $r(t,rs,No)}function jo(t){return $r(t,is,Bo)}var Do=nr?function(t){return nr.get(t)}:zs;function Po(t){for(var e=t.name+"",n=rr[e],r=le.call(rr,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function zo(t){return(le.call(hr,"placeholder")?hr:t).placeholder}function Ro(){var t=hr.iteratee||Ts;return t=t===Ts?ui:t,arguments.length?t(arguments[0],arguments[1]):t}function Io(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Fo(t){for(var e=rs(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ko(i)]}return e}function Lo(t,e){var n=function(t,e){return null==t?o:t[e]}(t,e);return ai(n)?n:o}var No=Nn?function(t){return null==t?[]:(t=te(t),$e(Nn(t),function(e){return De.call(t,e)}))}:Us,Bo=Nn?function(t){for(var e=[];t;)tn(e,No(t)),t=Me(t);return e}:Us,Uo=Kr;function qo(t,e,n){for(var r=-1,i=(e=Hi(e,t)).length,o=!1;++r<i;){var a=la(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Su(i)&&Ho(a,i)&&(mu(t)||vu(t))}function Vo(t){return"function"!=typeof t.constructor||$o(t)?{}:pr(Me(t))}function Wo(t){return mu(t)||vu(t)||!!(Re&&t&&t[Re])}function Ho(t,e){var n=typeof t;return!!(e=null==e?z:e)&&("number"==n||"symbol"!=n&&Zt.test(t))&&t>-1&&t%1==0&&t<e}function Go(t,e,n){if(!Ou(n))return!1;var r=typeof e;return!!("number"==r?gu(n)&&Ho(e,n.length):"string"==r&&e in n)&&hu(n[e],t)}function Xo(t,e){if(mu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!zu(t))||Tt.test(t)||!Ct.test(t)||null!=e&&t in te(e)}function Zo(t){var e=Po(t),n=hr[e];if("function"!=typeof n||!(e in mr.prototype))return!1;if(t===n)return!0;var r=Do(n);return!!r&&t===r[0]}($n&&Uo(new $n(new ArrayBuffer(1)))!=lt||Kn&&Uo(new Kn)!=$||Jn&&"[object Promise]"!=Uo(Jn.resolve())||Qn&&Uo(new Qn)!=nt||tr&&Uo(new tr)!=at)&&(Uo=function(t){var e=Kr(t),n=e==Q?t.constructor:o,r=n?ca(n):"";if(r)switch(r){case ir:return lt;case or:return $;case ar:return"[object Promise]";case ur:return nt;case sr:return at}return e});var Yo=ue?ku:qs;function $o(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ae)}function Ko(t){return t===t&&!Ou(t)}function Jo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==o||t in te(n))}}function Qo(t,e,r){return e=Wn(e===o?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=Wn(i.length-e,0),u=n(a);++o<a;)u[o]=i[e+o];o=-1;for(var s=n(e+1);++o<e;)s[o]=i[o];return s[e]=r(u),He(t,this,s)}}function ta(t,e){return e.length<2?t:Yr(t,Ci(e,0,-1))}function ea(t,e){if("__proto__"!=e)return t[e]}var na=aa(Oi),ra=In||function(t,e){return Pe.setTimeout(t,e)},ia=aa(Ai);function oa(t,e,n){var r=e+"";return ia(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ft,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Xe(B,function(n){var r="_."+n[0];e&n[1]&&!Ke(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(Lt);return e?e[1].split(Nt):[]}(r),n)))}function aa(t){var e=0,n=0;return function(){var r=Gn(),i=T-(r-n);if(n=r,i>0){if(++e>=C)return arguments[0]}else e=0;return t.apply(o,arguments)}}function ua(t,e){var n=-1,r=t.length,i=r-1;for(e=e===o?r:e;++n<e;){var a=_i(n,i),u=t[a];t[a]=t[n],t[n]=u}return t.length=e,t}var sa=function(t){var e=au(t,function(t){return n.size===c&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(jt,function(t,n,r,i){e.push(r?i.replace(Ut,"$1"):n||t)}),e});function la(t){if("string"==typeof t||zu(t))return t;var e=t+"";return"0"==e&&1/t==-P?"-0":e}function ca(t){if(null!=t){try{return se.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function fa(t){if(t instanceof mr)return t.clone();var e=new vr(t.__wrapped__,t.__chain__);return e.__actions__=eo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var ha=wi(function(t,e){return bu(t)?Fr(t,Vr(e,1,bu,!0)):[]}),pa=wi(function(t,e){var n=wa(e);return bu(n)&&(n=o),bu(t)?Fr(t,Vr(e,1,bu,!0),Ro(n,2)):[]}),da=wi(function(t,e){var n=wa(e);return bu(n)&&(n=o),bu(t)?Fr(t,Vr(e,1,bu,!0),o,n):[]});function va(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Bu(n);return i<0&&(i=Wn(r+i,0)),un(t,Ro(e,3),i)}function ma(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=Bu(n),i=n<0?Wn(r+i,0):Hn(i,r-1)),un(t,Ro(e,3),i,!0)}function ya(t){return null!=t&&t.length?Vr(t,1):[]}function ga(t){return t&&t.length?t[0]:o}var ba=wi(function(t){var e=Qe(t,Vi);return e.length&&e[0]===t[0]?ei(e):[]}),_a=wi(function(t){var e=wa(t),n=Qe(t,Vi);return e===wa(n)?e=o:n.pop(),n.length&&n[0]===t[0]?ei(n,Ro(e,2)):[]}),xa=wi(function(t){var e=wa(t),n=Qe(t,Vi);return(e="function"==typeof e?e:o)&&n.pop(),n.length&&n[0]===t[0]?ei(n,o,e):[]});function wa(t){var e=null==t?0:t.length;return e?t[e-1]:o}var ka=wi(Ea);function Ea(t,e){return t&&t.length&&e&&e.length?gi(t,e):t}var Sa=Co(function(t,e){var n=null==t?0:t.length,r=Dr(t,e);return bi(t,Qe(e,function(t){return Ho(t,n)?+t:t}).sort(Ji)),r});function Oa(t){return null==t?t:Yn.call(t)}var Aa=wi(function(t){return Ii(Vr(t,1,bu,!0))}),Ma=wi(function(t){var e=wa(t);return bu(e)&&(e=o),Ii(Vr(t,1,bu,!0),Ro(e,2))}),Ca=wi(function(t){var e=wa(t);return e="function"==typeof e?e:o,Ii(Vr(t,1,bu,!0),o,e)});function Ta(t){if(!t||!t.length)return[];var e=0;return t=$e(t,function(t){if(bu(t))return e=Wn(t.length,e),!0}),mn(e,function(e){return Qe(t,hn(e))})}function ja(t,e){if(!t||!t.length)return[];var n=Ta(t);return null==e?n:Qe(n,function(t){return He(e,o,t)})}var Da=wi(function(t,e){return bu(t)?Fr(t,e):[]}),Pa=wi(function(t){return Ui($e(t,bu))}),za=wi(function(t){var e=wa(t);return bu(e)&&(e=o),Ui($e(t,bu),Ro(e,2))}),Ra=wi(function(t){var e=wa(t);return e="function"==typeof e?e:o,Ui($e(t,bu),o,e)}),Ia=wi(Ta);var Fa=wi(function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,ja(t,n)});function La(t){var e=hr(t);return e.__chain__=!0,e}function Na(t,e){return e(t)}var Ba=Co(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Dr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof mr&&Ho(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Na,args:[i],thisArg:o}),new vr(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(o),t})):this.thru(i)});var Ua=ro(function(t,e,n){le.call(t,n)?++t[n]:jr(t,n,1)});var qa=co(va),Va=co(ma);function Wa(t,e){return(mu(t)?Xe:Lr)(t,Ro(e,3))}function Ha(t,e){return(mu(t)?Ze:Nr)(t,Ro(e,3))}var Ga=ro(function(t,e,n){le.call(t,n)?t[n].push(e):jr(t,n,[e])});var Xa=wi(function(t,e,r){var i=-1,o="function"==typeof e,a=gu(t)?n(t.length):[];return Lr(t,function(t){a[++i]=o?He(e,t,r):ni(t,e,r)}),a}),Za=ro(function(t,e,n){jr(t,n,e)});function Ya(t,e){return(mu(t)?Qe:fi)(t,Ro(e,3))}var $a=ro(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Ka=wi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Go(t,e[0],e[1])?e=[]:n>2&&Go(e[0],e[1],e[2])&&(e=[e[0]]),mi(t,Vr(e,1),[])}),Ja=Rn||function(){return Pe.Date.now()};function Qa(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Eo(t,E,o,o,o,o,e)}function tu(t,e){var n;if("function"!=typeof e)throw new re(s);return t=Bu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var eu=wi(function(t,e,n){var r=y;if(n.length){var i=Mn(n,zo(eu));r|=w}return Eo(t,r,e,n,i)}),nu=wi(function(t,e,n){var r=y|g;if(n.length){var i=Mn(n,zo(nu));r|=w}return Eo(e,r,t,n,i)});function ru(t,e,n){var r,i,a,u,l,c,f=0,h=!1,p=!1,d=!0;if("function"!=typeof t)throw new re(s);function v(e){var n=r,a=i;return r=i=o,f=e,u=t.apply(a,n)}function m(t){var n=t-c;return c===o||n>=e||n<0||p&&t-f>=a}function y(){var t=Ja();if(m(t))return g(t);l=ra(y,function(t){var n=e-(t-c);return p?Hn(n,a-(t-f)):n}(t))}function g(t){return l=o,d&&r?v(t):(r=i=o,u)}function b(){var t=Ja(),n=m(t);if(r=arguments,i=this,c=t,n){if(l===o)return function(t){return f=t,l=ra(y,e),h?v(t):u}(c);if(p)return l=ra(y,e),v(c)}return l===o&&(l=ra(y,e)),u}return e=qu(e)||0,Ou(n)&&(h=!!n.leading,a=(p="maxWait"in n)?Wn(qu(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),b.cancel=function(){l!==o&&Zi(l),f=0,r=c=i=l=o},b.flush=function(){return l===o?u:g(Ja())},b}var iu=wi(function(t,e){return Ir(t,1,e)}),ou=wi(function(t,e,n){return Ir(t,qu(e)||0,n)});function au(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new re(s);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(au.Cache||br),n}function uu(t){if("function"!=typeof t)throw new re(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}au.Cache=br;var su=Gi(function(t,e){var n=(e=1==e.length&&mu(e[0])?Qe(e[0],yn(Ro())):Qe(Vr(e,1),yn(Ro()))).length;return wi(function(r){for(var i=-1,o=Hn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return He(t,this,r)})}),lu=wi(function(t,e){var n=Mn(e,zo(lu));return Eo(t,w,o,e,n)}),cu=wi(function(t,e){var n=Mn(e,zo(cu));return Eo(t,k,o,e,n)}),fu=Co(function(t,e){return Eo(t,S,o,o,o,e)});function hu(t,e){return t===e||t!==t&&e!==e}var pu=bo(Jr),du=bo(function(t,e){return t>=e}),vu=ri(function(){return arguments}())?ri:function(t){return Au(t)&&le.call(t,"callee")&&!De.call(t,"callee")},mu=n.isArray,yu=Ne?yn(Ne):function(t){return Au(t)&&Kr(t)==st};function gu(t){return null!=t&&Su(t.length)&&!ku(t)}function bu(t){return Au(t)&&gu(t)}var _u=Bn||qs,xu=Be?yn(Be):function(t){return Au(t)&&Kr(t)==H};function wu(t){if(!Au(t))return!1;var e=Kr(t);return e==X||e==G||"string"==typeof t.message&&"string"==typeof t.name&&!Tu(t)}function ku(t){if(!Ou(t))return!1;var e=Kr(t);return e==Z||e==Y||e==V||e==tt}function Eu(t){return"number"==typeof t&&t==Bu(t)}function Su(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=z}function Ou(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Au(t){return null!=t&&"object"==typeof t}var Mu=Ue?yn(Ue):function(t){return Au(t)&&Uo(t)==$};function Cu(t){return"number"==typeof t||Au(t)&&Kr(t)==K}function Tu(t){if(!Au(t)||Kr(t)!=Q)return!1;var e=Me(t);if(null===e)return!0;var n=le.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&se.call(n)==pe}var ju=qe?yn(qe):function(t){return Au(t)&&Kr(t)==et};var Du=Ve?yn(Ve):function(t){return Au(t)&&Uo(t)==nt};function Pu(t){return"string"==typeof t||!mu(t)&&Au(t)&&Kr(t)==rt}function zu(t){return"symbol"==typeof t||Au(t)&&Kr(t)==it}var Ru=We?yn(We):function(t){return Au(t)&&Su(t.length)&&!!Oe[Kr(t)]};var Iu=bo(ci),Fu=bo(function(t,e){return t<=e});function Lu(t){if(!t)return[];if(gu(t))return Pu(t)?Dn(t):eo(t);if(Fe&&t[Fe])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Fe]());var e=Uo(t);return(e==$?On:e==nt?Cn:hs)(t)}function Nu(t){return t?(t=qu(t))===P||t===-P?(t<0?-1:1)*R:t===t?t:0:0===t?t:0}function Bu(t){var e=Nu(t),n=e%1;return e===e?n?e-n:e:0}function Uu(t){return t?Pr(Bu(t),0,F):0}function qu(t){if("number"==typeof t)return t;if(zu(t))return I;if(Ou(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ou(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(zt,"");var n=Ht.test(t);return n||Xt.test(t)?Te(t.slice(2),n?2:8):Wt.test(t)?I:+t}function Vu(t){return no(t,is(t))}function Wu(t){return null==t?"":Ri(t)}var Hu=io(function(t,e){if($o(e)||gu(e))no(e,rs(e),t);else for(var n in e)le.call(e,n)&&Ar(t,n,e[n])}),Gu=io(function(t,e){no(e,is(e),t)}),Xu=io(function(t,e,n,r){no(e,is(e),t,r)}),Zu=io(function(t,e,n,r){no(e,rs(e),t,r)}),Yu=Co(Dr);var $u=wi(function(t,e){t=te(t);var n=-1,r=e.length,i=r>2?e[2]:o;for(i&&Go(e[0],e[1],i)&&(r=1);++n<r;)for(var a=e[n],u=is(a),s=-1,l=u.length;++s<l;){var c=u[s],f=t[c];(f===o||hu(f,ae[c])&&!le.call(t,c))&&(t[c]=a[c])}return t}),Ku=wi(function(t){return t.push(o,Oo),He(as,o,t)});function Ju(t,e,n){var r=null==t?o:Yr(t,e);return r===o?n:r}function Qu(t,e){return null!=t&&qo(t,e,ti)}var ts=po(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=he.call(e)),t[e]=n},Os(Cs)),es=po(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=he.call(e)),le.call(t,e)?t[e].push(n):t[e]=[n]},Ro),ns=wi(ni);function rs(t){return gu(t)?wr(t):si(t)}function is(t){return gu(t)?wr(t,!0):li(t)}var os=io(function(t,e,n){di(t,e,n)}),as=io(function(t,e,n,r){di(t,e,n,r)}),us=Co(function(t,e){var n={};if(null==t)return n;var r=!1;e=Qe(e,function(e){return e=Hi(e,t),r||(r=e.length>1),e}),no(t,jo(t),n),r&&(n=zr(n,h|p|d,Ao));for(var i=e.length;i--;)Fi(n,e[i]);return n});var ss=Co(function(t,e){return null==t?{}:function(t,e){return yi(t,e,function(e,n){return Qu(t,n)})}(t,e)});function ls(t,e){if(null==t)return{};var n=Qe(jo(t),function(t){return[t]});return e=Ro(e),yi(t,n,function(t,n){return e(t,n[0])})}var cs=ko(rs),fs=ko(is);function hs(t){return null==t?[]:gn(t,rs(t))}var ps=so(function(t,e,n){return e=e.toLowerCase(),t+(n?ds(e):e)});function ds(t){return ws(Wu(t).toLowerCase())}function vs(t){return(t=Wu(t))&&t.replace(Yt,wn).replace(be,"")}var ms=so(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),ys=so(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),gs=uo("toLowerCase");var bs=so(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var _s=so(function(t,e,n){return t+(n?" ":"")+ws(e)});var xs=so(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ws=uo("toUpperCase");function ks(t,e,n){return t=Wu(t),(e=n?o:e)===o?function(t){return ke.test(t)}(t)?function(t){return t.match(xe)||[]}(t):function(t){return t.match(Bt)||[]}(t):t.match(e)||[]}var Es=wi(function(t,e){try{return He(t,o,e)}catch(n){return wu(n)?n:new i(n)}}),Ss=Co(function(t,e){return Xe(e,function(e){e=la(e),jr(t,e,eu(t[e],t))}),t});function Os(t){return function(){return t}}var As=fo(),Ms=fo(!0);function Cs(t){return t}function Ts(t){return ui("function"==typeof t?t:zr(t,h))}var js=wi(function(t,e){return function(n){return ni(n,t,e)}}),Ds=wi(function(t,e){return function(n){return ni(t,n,e)}});function Ps(t,e,n){var r=rs(e),i=Zr(e,r);null!=n||Ou(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Zr(e,rs(e)));var o=!(Ou(n)&&"chain"in n)||!!n.chain,a=ku(t);return Xe(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=eo(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,tn([this.value()],arguments))})}),t}function zs(){}var Rs=mo(Qe),Is=mo(Ye),Fs=mo(rn);function Ls(t){return Xo(t)?hn(la(t)):function(t){return function(e){return Yr(e,t)}}(t)}var Ns=go(),Bs=go(!0);function Us(){return[]}function qs(){return!1}var Vs=vo(function(t,e){return t+e},0),Ws=xo("ceil"),Hs=vo(function(t,e){return t/e},1),Gs=xo("floor");var Xs=vo(function(t,e){return t*e},1),Zs=xo("round"),Ys=vo(function(t,e){return t-e},0);return hr.after=function(t,e){if("function"!=typeof e)throw new re(s);return t=Bu(t),function(){if(--t<1)return e.apply(this,arguments)}},hr.ary=Qa,hr.assign=Hu,hr.assignIn=Gu,hr.assignInWith=Xu,hr.assignWith=Zu,hr.at=Yu,hr.before=tu,hr.bind=eu,hr.bindAll=Ss,hr.bindKey=nu,hr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return mu(t)?t:[t]},hr.chain=La,hr.chunk=function(t,e,r){e=(r?Go(t,e,r):e===o)?1:Wn(Bu(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,u=0,s=n(Fn(i/e));a<i;)s[u++]=Ci(t,a,a+=e);return s},hr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},hr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return tn(mu(r)?eo(r):[r],Vr(e,1))},hr.cond=function(t){var e=null==t?0:t.length,n=Ro();return t=e?Qe(t,function(t){if("function"!=typeof t[1])throw new re(s);return[n(t[0]),t[1]]}):[],wi(function(n){for(var r=-1;++r<e;){var i=t[r];if(He(i[0],this,n))return He(i[1],this,n)}})},hr.conforms=function(t){return function(t){var e=rs(t);return function(n){return Rr(n,t,e)}}(zr(t,h))},hr.constant=Os,hr.countBy=Ua,hr.create=function(t,e){var n=pr(t);return null==e?n:Tr(n,e)},hr.curry=function t(e,n,r){var i=Eo(e,_,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},hr.curryRight=function t(e,n,r){var i=Eo(e,x,o,o,o,o,o,n=r?o:n);return i.placeholder=t.placeholder,i},hr.debounce=ru,hr.defaults=$u,hr.defaultsDeep=Ku,hr.defer=iu,hr.delay=ou,hr.difference=ha,hr.differenceBy=pa,hr.differenceWith=da,hr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Ci(t,(e=n||e===o?1:Bu(e))<0?0:e,r):[]},hr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Ci(t,0,(e=r-(e=n||e===o?1:Bu(e)))<0?0:e):[]},hr.dropRightWhile=function(t,e){return t&&t.length?Ni(t,Ro(e,3),!0,!0):[]},hr.dropWhile=function(t,e){return t&&t.length?Ni(t,Ro(e,3),!0):[]},hr.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Go(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=Bu(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:Bu(r))<0&&(r+=i),r=n>r?0:Uu(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},hr.filter=function(t,e){return(mu(t)?$e:qr)(t,Ro(e,3))},hr.flatMap=function(t,e){return Vr(Ya(t,e),1)},hr.flatMapDeep=function(t,e){return Vr(Ya(t,e),P)},hr.flatMapDepth=function(t,e,n){return n=n===o?1:Bu(n),Vr(Ya(t,e),n)},hr.flatten=ya,hr.flattenDeep=function(t){return null!=t&&t.length?Vr(t,P):[]},hr.flattenDepth=function(t,e){return null!=t&&t.length?Vr(t,e=e===o?1:Bu(e)):[]},hr.flip=function(t){return Eo(t,O)},hr.flow=As,hr.flowRight=Ms,hr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},hr.functions=function(t){return null==t?[]:Zr(t,rs(t))},hr.functionsIn=function(t){return null==t?[]:Zr(t,is(t))},hr.groupBy=Ga,hr.initial=function(t){return null!=t&&t.length?Ci(t,0,-1):[]},hr.intersection=ba,hr.intersectionBy=_a,hr.intersectionWith=xa,hr.invert=ts,hr.invertBy=es,hr.invokeMap=Xa,hr.iteratee=Ts,hr.keyBy=Za,hr.keys=rs,hr.keysIn=is,hr.map=Ya,hr.mapKeys=function(t,e){var n={};return e=Ro(e,3),Gr(t,function(t,r,i){jr(n,e(t,r,i),t)}),n},hr.mapValues=function(t,e){var n={};return e=Ro(e,3),Gr(t,function(t,r,i){jr(n,r,e(t,r,i))}),n},hr.matches=function(t){return hi(zr(t,h))},hr.matchesProperty=function(t,e){return pi(t,zr(e,h))},hr.memoize=au,hr.merge=os,hr.mergeWith=as,hr.method=js,hr.methodOf=Ds,hr.mixin=Ps,hr.negate=uu,hr.nthArg=function(t){return t=Bu(t),wi(function(e){return vi(e,t)})},hr.omit=us,hr.omitBy=function(t,e){return ls(t,uu(Ro(e)))},hr.once=function(t){return tu(2,t)},hr.orderBy=function(t,e,n,r){return null==t?[]:(mu(e)||(e=null==e?[]:[e]),mu(n=r?o:n)||(n=null==n?[]:[n]),mi(t,e,n))},hr.over=Rs,hr.overArgs=su,hr.overEvery=Is,hr.overSome=Fs,hr.partial=lu,hr.partialRight=cu,hr.partition=$a,hr.pick=ss,hr.pickBy=ls,hr.property=Ls,hr.propertyOf=function(t){return function(e){return null==t?o:Yr(t,e)}},hr.pull=ka,hr.pullAll=Ea,hr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?gi(t,e,Ro(n,2)):t},hr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?gi(t,e,o,n):t},hr.pullAt=Sa,hr.range=Ns,hr.rangeRight=Bs,hr.rearg=fu,hr.reject=function(t,e){return(mu(t)?$e:qr)(t,uu(Ro(e,3)))},hr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Ro(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return bi(t,i),n},hr.rest=function(t,e){if("function"!=typeof t)throw new re(s);return wi(t,e=e===o?e:Bu(e))},hr.reverse=Oa,hr.sampleSize=function(t,e,n){return e=(n?Go(t,e,n):e===o)?1:Bu(e),(mu(t)?Er:Ei)(t,e)},hr.set=function(t,e,n){return null==t?t:Si(t,e,n)},hr.setWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Si(t,e,n,r)},hr.shuffle=function(t){return(mu(t)?Sr:Mi)(t)},hr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Go(t,e,n)?(e=0,n=r):(e=null==e?0:Bu(e),n=n===o?r:Bu(n)),Ci(t,e,n)):[]},hr.sortBy=Ka,hr.sortedUniq=function(t){return t&&t.length?Pi(t):[]},hr.sortedUniqBy=function(t,e){return t&&t.length?Pi(t,Ro(e,2)):[]},hr.split=function(t,e,n){return n&&"number"!=typeof n&&Go(t,e,n)&&(e=n=o),(n=n===o?F:n>>>0)?(t=Wu(t))&&("string"==typeof e||null!=e&&!ju(e))&&!(e=Ri(e))&&Sn(t)?Xi(Dn(t),0,n):t.split(e,n):[]},hr.spread=function(t,e){if("function"!=typeof t)throw new re(s);return e=null==e?0:Wn(Bu(e),0),wi(function(n){var r=n[e],i=Xi(n,0,e);return r&&tn(i,r),He(t,this,i)})},hr.tail=function(t){var e=null==t?0:t.length;return e?Ci(t,1,e):[]},hr.take=function(t,e,n){return t&&t.length?Ci(t,0,(e=n||e===o?1:Bu(e))<0?0:e):[]},hr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Ci(t,(e=r-(e=n||e===o?1:Bu(e)))<0?0:e,r):[]},hr.takeRightWhile=function(t,e){return t&&t.length?Ni(t,Ro(e,3),!1,!0):[]},hr.takeWhile=function(t,e){return t&&t.length?Ni(t,Ro(e,3)):[]},hr.tap=function(t,e){return e(t),t},hr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new re(s);return Ou(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ru(t,e,{leading:r,maxWait:e,trailing:i})},hr.thru=Na,hr.toArray=Lu,hr.toPairs=cs,hr.toPairsIn=fs,hr.toPath=function(t){return mu(t)?Qe(t,la):zu(t)?[t]:eo(sa(Wu(t)))},hr.toPlainObject=Vu,hr.transform=function(t,e,n){var r=mu(t),i=r||_u(t)||Ru(t);if(e=Ro(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Ou(t)&&ku(o)?pr(Me(t)):{}}return(i?Xe:Gr)(t,function(t,r,i){return e(n,t,r,i)}),n},hr.unary=function(t){return Qa(t,1)},hr.union=Aa,hr.unionBy=Ma,hr.unionWith=Ca,hr.uniq=function(t){return t&&t.length?Ii(t):[]},hr.uniqBy=function(t,e){return t&&t.length?Ii(t,Ro(e,2)):[]},hr.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?Ii(t,o,e):[]},hr.unset=function(t,e){return null==t||Fi(t,e)},hr.unzip=Ta,hr.unzipWith=ja,hr.update=function(t,e,n){return null==t?t:Li(t,e,Wi(n))},hr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Li(t,e,Wi(n),r)},hr.values=hs,hr.valuesIn=function(t){return null==t?[]:gn(t,is(t))},hr.without=Da,hr.words=ks,hr.wrap=function(t,e){return lu(Wi(e),t)},hr.xor=Pa,hr.xorBy=za,hr.xorWith=Ra,hr.zip=Ia,hr.zipObject=function(t,e){return qi(t||[],e||[],Ar)},hr.zipObjectDeep=function(t,e){return qi(t||[],e||[],Si)},hr.zipWith=Fa,hr.entries=cs,hr.entriesIn=fs,hr.extend=Gu,hr.extendWith=Xu,Ps(hr,hr),hr.add=Vs,hr.attempt=Es,hr.camelCase=ps,hr.capitalize=ds,hr.ceil=Ws,hr.clamp=function(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=(n=qu(n))===n?n:0),e!==o&&(e=(e=qu(e))===e?e:0),Pr(qu(t),e,n)},hr.clone=function(t){return zr(t,d)},hr.cloneDeep=function(t){return zr(t,h|d)},hr.cloneDeepWith=function(t,e){return zr(t,h|d,e="function"==typeof e?e:o)},hr.cloneWith=function(t,e){return zr(t,d,e="function"==typeof e?e:o)},hr.conformsTo=function(t,e){return null==e||Rr(t,e,rs(e))},hr.deburr=vs,hr.defaultTo=function(t,e){return null==t||t!==t?e:t},hr.divide=Hs,hr.endsWith=function(t,e,n){t=Wu(t),e=Ri(e);var r=t.length,i=n=n===o?r:Pr(Bu(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},hr.eq=hu,hr.escape=function(t){return(t=Wu(t))&&St.test(t)?t.replace(kt,kn):t},hr.escapeRegExp=function(t){return(t=Wu(t))&&Pt.test(t)?t.replace(Dt,"\\$&"):t},hr.every=function(t,e,n){var r=mu(t)?Ye:Br;return n&&Go(t,e,n)&&(e=o),r(t,Ro(e,3))},hr.find=qa,hr.findIndex=va,hr.findKey=function(t,e){return an(t,Ro(e,3),Gr)},hr.findLast=Va,hr.findLastIndex=ma,hr.findLastKey=function(t,e){return an(t,Ro(e,3),Xr)},hr.floor=Gs,hr.forEach=Wa,hr.forEachRight=Ha,hr.forIn=function(t,e){return null==t?t:Wr(t,Ro(e,3),is)},hr.forInRight=function(t,e){return null==t?t:Hr(t,Ro(e,3),is)},hr.forOwn=function(t,e){return t&&Gr(t,Ro(e,3))},hr.forOwnRight=function(t,e){return t&&Xr(t,Ro(e,3))},hr.get=Ju,hr.gt=pu,hr.gte=du,hr.has=function(t,e){return null!=t&&qo(t,e,Qr)},hr.hasIn=Qu,hr.head=ga,hr.identity=Cs,hr.includes=function(t,e,n,r){t=gu(t)?t:hs(t),n=n&&!r?Bu(n):0;var i=t.length;return n<0&&(n=Wn(i+n,0)),Pu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&sn(t,e,n)>-1},hr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Bu(n);return i<0&&(i=Wn(r+i,0)),sn(t,e,i)},hr.inRange=function(t,e,n){return e=Nu(e),n===o?(n=e,e=0):n=Nu(n),function(t,e,n){return t>=Hn(e,n)&&t<Wn(e,n)}(t=qu(t),e,n)},hr.invoke=ns,hr.isArguments=vu,hr.isArray=mu,hr.isArrayBuffer=yu,hr.isArrayLike=gu,hr.isArrayLikeObject=bu,hr.isBoolean=function(t){return!0===t||!1===t||Au(t)&&Kr(t)==W},hr.isBuffer=_u,hr.isDate=xu,hr.isElement=function(t){return Au(t)&&1===t.nodeType&&!Tu(t)},hr.isEmpty=function(t){if(null==t)return!0;if(gu(t)&&(mu(t)||"string"==typeof t||"function"==typeof t.splice||_u(t)||Ru(t)||vu(t)))return!t.length;var e=Uo(t);if(e==$||e==nt)return!t.size;if($o(t))return!si(t).length;for(var n in t)if(le.call(t,n))return!1;return!0},hr.isEqual=function(t,e){return ii(t,e)},hr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:o)?n(t,e):o;return r===o?ii(t,e,o,n):!!r},hr.isError=wu,hr.isFinite=function(t){return"number"==typeof t&&Un(t)},hr.isFunction=ku,hr.isInteger=Eu,hr.isLength=Su,hr.isMap=Mu,hr.isMatch=function(t,e){return t===e||oi(t,e,Fo(e))},hr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:o,oi(t,e,Fo(e),n)},hr.isNaN=function(t){return Cu(t)&&t!=+t},hr.isNative=function(t){if(Yo(t))throw new i(u);return ai(t)},hr.isNil=function(t){return null==t},hr.isNull=function(t){return null===t},hr.isNumber=Cu,hr.isObject=Ou,hr.isObjectLike=Au,hr.isPlainObject=Tu,hr.isRegExp=ju,hr.isSafeInteger=function(t){return Eu(t)&&t>=-z&&t<=z},hr.isSet=Du,hr.isString=Pu,hr.isSymbol=zu,hr.isTypedArray=Ru,hr.isUndefined=function(t){return t===o},hr.isWeakMap=function(t){return Au(t)&&Uo(t)==at},hr.isWeakSet=function(t){return Au(t)&&Kr(t)==ut},hr.join=function(t,e){return null==t?"":qn.call(t,e)},hr.kebabCase=ms,hr.last=wa,hr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=Bu(n))<0?Wn(r+i,0):Hn(i,r-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):un(t,cn,i,!0)},hr.lowerCase=ys,hr.lowerFirst=gs,hr.lt=Iu,hr.lte=Fu,hr.max=function(t){return t&&t.length?Ur(t,Cs,Jr):o},hr.maxBy=function(t,e){return t&&t.length?Ur(t,Ro(e,2),Jr):o},hr.mean=function(t){return fn(t,Cs)},hr.meanBy=function(t,e){return fn(t,Ro(e,2))},hr.min=function(t){return t&&t.length?Ur(t,Cs,ci):o},hr.minBy=function(t,e){return t&&t.length?Ur(t,Ro(e,2),ci):o},hr.stubArray=Us,hr.stubFalse=qs,hr.stubObject=function(){return{}},hr.stubString=function(){return""},hr.stubTrue=function(){return!0},hr.multiply=Xs,hr.nth=function(t,e){return t&&t.length?vi(t,Bu(e)):o},hr.noConflict=function(){return Pe._===this&&(Pe._=de),this},hr.noop=zs,hr.now=Ja,hr.pad=function(t,e,n){t=Wu(t);var r=(e=Bu(e))?jn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return yo(Ln(i),n)+t+yo(Fn(i),n)},hr.padEnd=function(t,e,n){t=Wu(t);var r=(e=Bu(e))?jn(t):0;return e&&r<e?t+yo(e-r,n):t},hr.padStart=function(t,e,n){t=Wu(t);var r=(e=Bu(e))?jn(t):0;return e&&r<e?yo(e-r,n)+t:t},hr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Xn(Wu(t).replace(Rt,""),e||0)},hr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Go(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=Nu(t),e===o?(e=t,t=0):e=Nu(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Zn();return Hn(t+i*(e-t+Ce("1e-"+((i+"").length-1))),e)}return _i(t,e)},hr.reduce=function(t,e,n){var r=mu(t)?en:dn,i=arguments.length<3;return r(t,Ro(e,4),n,i,Lr)},hr.reduceRight=function(t,e,n){var r=mu(t)?nn:dn,i=arguments.length<3;return r(t,Ro(e,4),n,i,Nr)},hr.repeat=function(t,e,n){return e=(n?Go(t,e,n):e===o)?1:Bu(e),xi(Wu(t),e)},hr.replace=function(){var t=arguments,e=Wu(t[0]);return t.length<3?e:e.replace(t[1],t[2])},hr.result=function(t,e,n){var r=-1,i=(e=Hi(e,t)).length;for(i||(i=1,t=o);++r<i;){var a=null==t?o:t[la(e[r])];a===o&&(r=i,a=n),t=ku(a)?a.call(t):a}return t},hr.round=Zs,hr.runInContext=t,hr.sample=function(t){return(mu(t)?kr:ki)(t)},hr.size=function(t){if(null==t)return 0;if(gu(t))return Pu(t)?jn(t):t.length;var e=Uo(t);return e==$||e==nt?t.size:si(t).length},hr.snakeCase=bs,hr.some=function(t,e,n){var r=mu(t)?rn:Ti;return n&&Go(t,e,n)&&(e=o),r(t,Ro(e,3))},hr.sortedIndex=function(t,e){return ji(t,e)},hr.sortedIndexBy=function(t,e,n){return Di(t,e,Ro(n,2))},hr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ji(t,e);if(r<n&&hu(t[r],e))return r}return-1},hr.sortedLastIndex=function(t,e){return ji(t,e,!0)},hr.sortedLastIndexBy=function(t,e,n){return Di(t,e,Ro(n,2),!0)},hr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ji(t,e,!0)-1;if(hu(t[n],e))return n}return-1},hr.startCase=_s,hr.startsWith=function(t,e,n){return t=Wu(t),n=null==n?0:Pr(Bu(n),0,t.length),e=Ri(e),t.slice(n,n+e.length)==e},hr.subtract=Ys,hr.sum=function(t){return t&&t.length?vn(t,Cs):0},hr.sumBy=function(t,e){return t&&t.length?vn(t,Ro(e,2)):0},hr.template=function(t,e,n){var r=hr.templateSettings;n&&Go(t,e,n)&&(e=o),t=Wu(t),e=Xu({},e,r,So);var i,a,u=Xu({},e.imports,r.imports,So),s=rs(u),l=gn(u,s),c=0,f=e.interpolate||$t,h="__p += '",p=ee((e.escape||$t).source+"|"+f.source+"|"+(f===Mt?qt:$t).source+"|"+(e.evaluate||$t).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Se+"]")+"\n";t.replace(p,function(e,n,r,o,u,s){return r||(r=o),h+=t.slice(c,s).replace(Kt,En),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),u&&(a=!0,h+="';\n"+u+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+e.length,e}),h+="';\n";var v=e.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(bt,""):h).replace(_t,"$1").replace(xt,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Es(function(){return Jt(s,d+"return "+h).apply(o,l)});if(m.source=h,wu(m))throw m;return m},hr.times=function(t,e){if((t=Bu(t))<1||t>z)return[];var n=F,r=Hn(t,F);e=Ro(e),t-=F;for(var i=mn(r,e);++n<t;)e(n);return i},hr.toFinite=Nu,hr.toInteger=Bu,hr.toLength=Uu,hr.toLower=function(t){return Wu(t).toLowerCase()},hr.toNumber=qu,hr.toSafeInteger=function(t){return t?Pr(Bu(t),-z,z):0===t?t:0},hr.toString=Wu,hr.toUpper=function(t){return Wu(t).toUpperCase()},hr.trim=function(t,e,n){if((t=Wu(t))&&(n||e===o))return t.replace(zt,"");if(!t||!(e=Ri(e)))return t;var r=Dn(t),i=Dn(e);return Xi(r,_n(r,i),xn(r,i)+1).join("")},hr.trimEnd=function(t,e,n){if((t=Wu(t))&&(n||e===o))return t.replace(It,"");if(!t||!(e=Ri(e)))return t;var r=Dn(t);return Xi(r,0,xn(r,Dn(e))+1).join("")},hr.trimStart=function(t,e,n){if((t=Wu(t))&&(n||e===o))return t.replace(Rt,"");if(!t||!(e=Ri(e)))return t;var r=Dn(t);return Xi(r,_n(r,Dn(e))).join("")},hr.truncate=function(t,e){var n=A,r=M;if(Ou(e)){var i="separator"in e?e.separator:i;n="length"in e?Bu(e.length):n,r="omission"in e?Ri(e.omission):r}var a=(t=Wu(t)).length;if(Sn(t)){var u=Dn(t);a=u.length}if(n>=a)return t;var s=n-jn(r);if(s<1)return r;var l=u?Xi(u,0,s).join(""):t.slice(0,s);if(i===o)return l+r;if(u&&(s+=l.length-s),ju(i)){if(t.slice(s).search(i)){var c,f=l;for(i.global||(i=ee(i.source,Wu(Vt.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var h=c.index;l=l.slice(0,h===o?s:h)}}else if(t.indexOf(Ri(i),s)!=s){var p=l.lastIndexOf(i);p>-1&&(l=l.slice(0,p))}return l+r},hr.unescape=function(t){return(t=Wu(t))&&Et.test(t)?t.replace(wt,Pn):t},hr.uniqueId=function(t){var e=++ce;return Wu(t)+e},hr.upperCase=xs,hr.upperFirst=ws,hr.each=Wa,hr.eachRight=Ha,hr.first=ga,Ps(hr,function(){var t={};return Gr(hr,function(e,n){le.call(hr.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),hr.VERSION="4.17.11",Xe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){hr[t].placeholder=hr}),Xe(["drop","take"],function(t,e){mr.prototype[t]=function(n){n=n===o?1:Wn(Bu(n),0);var r=this.__filtered__&&!e?new mr(this):this.clone();return r.__filtered__?r.__takeCount__=Hn(n,r.__takeCount__):r.__views__.push({size:Hn(n,F),type:t+(r.__dir__<0?"Right":"")}),r},mr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Xe(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==j||3==n;mr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ro(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),Xe(["head","last"],function(t,e){var n="take"+(e?"Right":"");mr.prototype[t]=function(){return this[n](1).value()[0]}}),Xe(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");mr.prototype[t]=function(){return this.__filtered__?new mr(this):this[n](1)}}),mr.prototype.compact=function(){return this.filter(Cs)},mr.prototype.find=function(t){return this.filter(t).head()},mr.prototype.findLast=function(t){return this.reverse().find(t)},mr.prototype.invokeMap=wi(function(t,e){return"function"==typeof t?new mr(this):this.map(function(n){return ni(n,t,e)})}),mr.prototype.reject=function(t){return this.filter(uu(Ro(t)))},mr.prototype.slice=function(t,e){t=Bu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new mr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(n=(e=Bu(e))<0?n.dropRight(-e):n.take(e-t)),n)},mr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},mr.prototype.toArray=function(){return this.take(F)},Gr(mr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=hr[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);i&&(hr.prototype[e]=function(){var e=this.__wrapped__,u=r?[1]:arguments,s=e instanceof mr,l=u[0],c=s||mu(e),f=function(t){var e=i.apply(hr,tn([t],u));return r&&h?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(s=c=!1);var h=this.__chain__,p=!!this.__actions__.length,d=a&&!h,v=s&&!p;if(!a&&c){e=v?e:new mr(this);var m=t.apply(e,u);return m.__actions__.push({func:Na,args:[f],thisArg:o}),new vr(m,h)}return d&&v?t.apply(this,u):(m=this.thru(f),d?r?m.value()[0]:m.value():m)})}),Xe(["pop","push","shift","sort","splice","unshift"],function(t){var e=ie[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);hr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(mu(i)?i:[],t)}return this[n](function(n){return e.apply(mu(n)?n:[],t)})}}),Gr(mr.prototype,function(t,e){var n=hr[e];if(n){var r=n.name+"";(rr[r]||(rr[r]=[])).push({name:e,func:n})}}),rr[ho(o,g).name]=[{name:"wrapper",func:o}],mr.prototype.clone=function(){var t=new mr(this.__wrapped__);return t.__actions__=eo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=eo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=eo(this.__views__),t},mr.prototype.reverse=function(){if(this.__filtered__){var t=new mr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},mr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=mu(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Hn(e,t+a);break;case"takeRight":t=Wn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,u=o.end,s=u-a,l=r?u:a-1,c=this.__iteratees__,f=c.length,h=0,p=Hn(s,this.__takeCount__);if(!n||!r&&i==s&&p==s)return Bi(t,this.__actions__);var d=[];t:for(;s--&&h<p;){for(var v=-1,m=t[l+=e];++v<f;){var y=c[v],g=y.iteratee,b=y.type,_=g(m);if(b==D)m=_;else if(!_){if(b==j)continue t;break t}}d[h++]=m}return d},hr.prototype.at=Ba,hr.prototype.chain=function(){return La(this)},hr.prototype.commit=function(){return new vr(this.value(),this.__chain__)},hr.prototype.next=function(){this.__values__===o&&(this.__values__=Lu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},hr.prototype.plant=function(t){for(var e,n=this;n instanceof dr;){var r=fa(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},hr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof mr){var e=t;return this.__actions__.length&&(e=new mr(this)),(e=e.reverse()).__actions__.push({func:Na,args:[Oa],thisArg:o}),new vr(e,this.__chain__)}return this.thru(Oa)},hr.prototype.toJSON=hr.prototype.valueOf=hr.prototype.value=function(){return Bi(this.__wrapped__,this.__actions__)},hr.prototype.first=hr.prototype.head,Fe&&(hr.prototype[Fe]=function(){return this}),hr}();Pe._=zn,(i=function(){return zn}.call(e,n,e,r))===o||(r.exports=i)}).call(this)}).call(this,n(57),n(58)(t))},function(t,e,n){"use strict";var r=n(177);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r=n(111),i=n(207),o=n(116),a=n(209),u=n(218),s=n(221),l=n(222),c=n(223),f=n(225),h=n(128),p=n(226),d=n(71),v=n(231),m=n(232),y=n(237),g=n(70),b=n(89),_=n(239),x=n(59),w=n(241),k=n(88),E=1,S=2,O=4,A="[object Arguments]",M="[object Function]",C="[object GeneratorFunction]",T="[object Object]",j={};j[A]=j["[object Array]"]=j["[object ArrayBuffer]"]=j["[object DataView]"]=j["[object Boolean]"]=j["[object Date]"]=j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Map]"]=j["[object Number]"]=j[T]=j["[object RegExp]"]=j["[object Set]"]=j["[object String]"]=j["[object Symbol]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j["[object Error]"]=j[M]=j["[object WeakMap]"]=!1,t.exports=function t(e,n,D,P,z,R){var I,F=n&E,L=n&S,N=n&O;if(D&&(I=z?D(e,P,z,R):D(e)),void 0!==I)return I;if(!x(e))return e;var B=g(e);if(B){if(I=v(e),!F)return l(e,I)}else{var U=d(e),q=U==M||U==C;if(b(e))return s(e,F);if(U==T||U==A||q&&!z){if(I=L||q?{}:y(e),!F)return L?f(e,u(I,e)):c(e,a(I,e))}else{if(!j[U])return z?e:{};I=m(e,U,F)}}R||(R=new r);var V=R.get(e);if(V)return V;if(R.set(e,I),w(e))return e.forEach(function(r){I.add(t(r,n,D,r,e,R))}),I;if(_(e))return e.forEach(function(r,i){I.set(i,t(r,n,D,i,e,R))}),I;var W=N?L?p:h:L?keysIn:k,H=B?void 0:W(e);return i(H||e,function(r,i){H&&(r=e[i=r]),o(I,i,t(r,n,D,i,e,R))}),I}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(64),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(64);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(64);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(64);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(63);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(63),i=n(87),o=n(115),a=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var u=n.__data__;if(!i||u.length<a-1)return u.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(u)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(112),i=n(192),o=n(59),a=n(114),u=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,c=s.toString,f=l.hasOwnProperty,h=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?h:u).test(a(t))}},function(t,e,n){var r=n(66),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(s){}var i=a.call(t);return r&&(e?t[u]=n:delete t[u]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(193),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(36)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(196),i=n(63),o=n(87);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(197),i=n(198),o=n(199),a=n(200),u=n(201);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=o,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(67);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(67),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(67),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(67),i="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}},function(t,e,n){var r=n(68);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(68);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(68);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(68);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(43),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},function(t,e,n){var r=n(69),i=n(88);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(212),i=n(48),o=Object.prototype,a=o.hasOwnProperty,u=o.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,n){var r=n(65),i=n(48),o="[object Arguments]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e){t.exports=function(){return!1}},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?n:e)&&("number"==i||"symbol"!=i&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(65),i=n(120),o=n(48),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(92),i=n(217),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(121)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(69),i=n(123);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(59),i=n(92),o=n(220),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var u in t)("constructor"!=u||!e&&a.call(t,u))&&n.push(u);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){(function(t){var r=n(36),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,u=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=u?u(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(58)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(69),i=n(93);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e,n){var r=n(69),i=n(125);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(129),i=n(125),o=n(123);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(43)(n(36),"DataView");t.exports=r},function(t,e,n){var r=n(43)(n(36),"Promise");t.exports=r},function(t,e,n){var r=n(43)(n(36),"Set");t.exports=r},function(t,e,n){var r=n(43)(n(36),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(94),i=n(233),o=n(234),a=n(235),u=n(236),s="[object Boolean]",l="[object Date]",c="[object Map]",f="[object Number]",h="[object RegExp]",p="[object Set]",d="[object String]",v="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",g="[object Float32Array]",b="[object Float64Array]",_="[object Int8Array]",x="[object Int16Array]",w="[object Int32Array]",k="[object Uint8Array]",E="[object Uint8ClampedArray]",S="[object Uint16Array]",O="[object Uint32Array]";t.exports=function(t,e,n){var A=t.constructor;switch(e){case m:return r(t);case s:case l:return new A(+t);case y:return i(t,n);case g:case b:case _:case x:case w:case k:case E:case S:case O:return u(t,n);case c:return new A;case f:case d:return new A(t);case h:return o(t);case p:return new A;case v:return a(t)}}},function(t,e,n){var r=n(94);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(66),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(94);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(238),i=n(127),o=n(92);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e,n){var r=n(59),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(240),i=n(90),o=n(91),a=o&&o.isMap,u=a?i(a):r;t.exports=u},function(t,e,n){var r=n(71),i=n(48),o="[object Map]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e,n){var r=n(242),i=n(90),o=n(91),a=o&&o.isSet,u=a?i(a):r;t.exports=u},function(t,e,n){var r=n(71),i=n(48),o="[object Set]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e,n){var r=n(244),i=n(48);t.exports=function t(e,n,o,a,u){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!==e&&n!==n:r(e,n,o,a,t,u))}},function(t,e,n){var r=n(111),i=n(131),o=n(250),a=n(253),u=n(71),s=n(70),l=n(89),c=n(119),f=1,h="[object Arguments]",p="[object Array]",d="[object Object]",v=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,m,y,g){var b=s(t),_=s(e),x=b?p:u(t),w=_?p:u(e),k=(x=x==h?d:x)==d,E=(w=w==h?d:w)==d,S=x==w;if(S&&l(t)){if(!l(e))return!1;b=!0,k=!1}if(S&&!k)return g||(g=new r),b||c(t)?i(t,e,n,m,y,g):o(t,e,x,n,m,y,g);if(!(n&f)){var O=k&&v.call(t,"__wrapped__"),A=E&&v.call(e,"__wrapped__");if(O||A){var M=O?t.value():t,C=A?e.value():e;return g||(g=new r),y(M,C,n,m,g)}}return!!S&&(g||(g=new r),a(t,e,n,m,y,g))}},function(t,e,n){var r=n(115),i=n(246),o=n(247);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(66),i=n(130),o=n(86),a=n(131),u=n(251),s=n(252),l=1,c=2,f="[object Boolean]",h="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",m="[object RegExp]",y="[object Set]",g="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",x="[object DataView]",w=r?r.prototype:void 0,k=w?w.valueOf:void 0;t.exports=function(t,e,n,r,w,E,S){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!E(new i(t),new i(e)));case f:case h:case v:return o(+t,+e);case p:return t.name==e.name&&t.message==e.message;case m:case g:return t==e+"";case d:var O=u;case y:var A=r&l;if(O||(O=s),t.size!=e.size&&!A)return!1;var M=S.get(t);if(M)return M==e;r|=c,S.set(t,e);var C=a(O(t),O(e),r,w,E,S);return S.delete(t),C;case b:if(k)return k.call(t)==k.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var r=n(128),i=1,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,u,s){var l=n&i,c=r(t),f=c.length;if(f!=r(e).length&&!l)return!1;for(var h=f;h--;){var p=c[h];if(!(l?p in e:o.call(e,p)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var v=!0;s.set(t,e),s.set(e,t);for(var m=l;++h<f;){var y=t[p=c[h]],g=e[p];if(a)var b=l?a(g,y,p,e,t,s):a(y,g,p,t,e,s);if(!(void 0===b?y===g||u(y,g,n,a,s):b)){v=!1;break}m||(m="constructor"==p)}if(v&&!m){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(v=!1)}return s.delete(t),s.delete(e),v}},function(t,e,n){},,function(t,e,n){"use strict";var r=n(257),i=n(258),o=n(259),a=n(261),u=n(132),s=n(262),l=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},f=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var h=c(n(264)),p=f(n(1)),d=f(n(2)),v=c(n(707)),m=function(t){function e(){var t;return r(this,e),(t=o(this,a(e).apply(this,arguments))).state={children:void 0,height:0,width:0,wrappedChildren:[]},t.mounted=!1,t.resizeTimer=void 0,t.fontFamily=t.getStyleValue.bind(u(t),"fontFamily"),t.fontSize=t.getStyleValue.bind(u(t),"fontSize"),t.fontWeight=t.getStyleValue.bind(u(t),"fontWeight"),t.fontStyle=t.getStyleValue.bind(u(t),"fontStyle"),t.padding=t.getStyleValue.bind(u(t),"padding"),t.rotate=function(n){var r=n.child.props.rotate||t.props.rotate||e.defaultProps.rotate;return"function"===typeof r?r(n.child.props):r},t.text=function(t){var e=t.child.props.text;if(!e){var n=t.child.props.children;e=Array.isArray(n)?n[0]:n}return e},t.onResize=function(e){var n=e.bounds,r=n.width,i=n.height;if(t.state.width!==r||t.state.height!==i){if(!t.state.width&&!t.state.height)return void t.setState({height:i,width:r});t.resizeTimer&&clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){t.resizeTimer=void 0,t.mounted&&t.setState({children:void 0,height:i,width:r})},100)}},t}return s(e,t),i(e,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"calculateLayout",value:function(t,e){var n=this,r=t.children,i=t.spiral,o=t.random,a=t.style,u=e.width,s=e.height,l=i;return new Promise(function(t){var e=d.Children.map(r,function(t){return{child:t}}),i=h.default().size([u,s]).words(e).text(n.text).font(n.fontFamily).fontStyle(n.fontStyle).fontWeight(n.fontWeight).fontSize(n.fontSize).rotate(n.rotate).padding(n.padding);l&&(i=i.spiral(l)),o&&(i=i.random(o)),i.on("end",function(e){var n=e.map(function(t,e){var n=t.x;n+=t.x0,n+=u/2;var r=t.y;r+=t.y0,r+=s/2;var i="translate(".concat(n,"px,").concat(r,"px) rotate(").concat(t.rotate,"deg)"),o=Object.assign({position:"absolute"},t.child.props.style,{MozTransform:i,MsTransform:i,OTransform:i,WebkitTransform:i,fontFamily:t.font,fontSize:t.size,fontStyle:t.style,fontWeight:t.weight,textAlign:"center",transform:i,transformOrigin:"center bottom",whiteSpace:"nowrap",width:t.width});return!o.color&&a.color&&"function"===typeof a.color&&(o.color=a.color(t.child,e)),d.cloneElement(t.child,Object.assign({},t.child.props,{key:t.text,style:o}),t.child.props.children)});t(n)}).start()})}},{key:"getStyleValue",value:function(t,n){var r=(n.child.props.style?n.child.props.style[t]:void 0)||this.props.style[t]||e.defaultProps.style[t];return"function"===typeof r&&(r=r(n.child.props)),"fontSize"===t&&(r+=2),r}},{key:"render",value:function(){var t=this.props,e=t.style,n=(t.children,t.rotate,t.spiral,t.random,l(t,["style","children","rotate","spiral","random"])),r=(e.fontFamily,e.fontSize,e.fontWeight,e.fontStyle,e.color,e.padding,l(e,["fontFamily","fontSize","fontWeight","fontStyle","color","padding"])),i=this.state.wrappedChildren;return d.createElement(v.default,{bounds:!0,onResize:this.onResize},function(t){var e=t.measureRef;return d.createElement("div",Object.assign({ref:e},n,{style:r}),i)})}},{key:"componentDidUpdate",value:function(){var t=this,e=this.state,n=e.width,r=e.height,i=this.props.children;n&&r&&i!==this.state.children&&this.calculateLayout(this.props,this.state).then(function(e){t.mounted&&t.setState({children:i,wrappedChildren:e})})}}]),e}(d.Component);m.propTypes={children:p.any,random:p.func,rotate:p.oneOfType([p.func,p.number]),spiral:p.oneOfType([p.oneOf(["archimedean","rectangular"]),p.func]),style:p.shape({color:p.oneOfType([p.func,p.string]),fontFamily:p.oneOfType([p.func,p.string]),fontSize:p.oneOfType([p.func,p.number]),fontStyle:p.oneOfType([p.func,p.string]),fontWeight:p.oneOfType([p.func,p.number,p.string]),padding:p.oneOfType([p.func,p.number])})},m.defaultProps={random:Math.random,rotate:0,spiral:"archimedean",style:{fontFamily:"serif",fontSize:20,fontStyle:"normal",fontWeight:"normal",padding:1}},e.default=m},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(260),i=n(132);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?i(t):e}},function(t,e){function n(t){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(263);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){var r=n(30).dispatch,i=Math.PI/180,o=64,a=2048;function u(t){return t.text}function s(){return"serif"}function l(){return"normal"}function c(t){return Math.sqrt(t.value)}function f(){return 30*(~~(6*Math.random())-3)}function h(){return 1}function p(t,e,n,r){if(!e.sprite){var u=t.context,s=t.ratio;u.clearRect(0,0,(o<<5)/s,a/s);var l=0,c=0,f=0,h=n.length;for(--r;++r<h;){e=n[r],u.save(),u.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font;var p=u.measureText(e.text+"m").width*s,d=e.size<<1;if(e.rotate){var v=Math.sin(e.rotate*i),m=Math.cos(e.rotate*i),y=p*m,g=p*v,b=d*m,_=d*v;p=Math.max(Math.abs(y+_),Math.abs(y-_))+31>>5<<5,d=~~Math.max(Math.abs(g+b),Math.abs(g-b))}else p=p+31>>5<<5;if(d>f&&(f=d),l+p>=o<<5&&(l=0,c+=f,f=0),c+d>=a)break;u.translate((l+(p>>1))/s,(c+(d>>1))/s),e.rotate&&u.rotate(e.rotate*i),u.fillText(e.text,0,0),e.padding&&(u.lineWidth=2*e.padding,u.strokeText(e.text,0,0)),u.restore(),e.width=p,e.height=d,e.xoff=l,e.yoff=c,e.x1=p>>1,e.y1=d>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,l+=p}for(var x=u.getImageData(0,0,(o<<5)/s,a/s).data,w=[];--r>=0;)if((e=n[r]).hasText){for(var k=(p=e.width)>>5,E=(d=e.y1-e.y0,0);E<d*k;E++)w[E]=0;if(null==(l=e.xoff))return;c=e.yoff;for(var S=0,O=-1,A=0;A<d;A++){for(E=0;E<p;E++){var M=k*A+(E>>5),C=x[(c+A)*(o<<5)+(l+E)<<2]?1<<31-E%32:0;w[M]|=C,S|=C}S?O=A:(e.y0++,d--,A--,c++)}e.y1=e.y0+O,e.sprite=w.slice(0,(e.y1-e.y0)*k)}}}function d(t,e,n){n>>=5;for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),u=127&a,s=32-u,l=t.y1-t.y0,c=(t.y+t.y0)*n+(a>>5),f=0;f<l;f++){r=0;for(var h=0;h<=o;h++)if((r<<s|(h<o?(r=i[f*o+h])>>>u:0))&e[c+h])return!0;c+=n}return!1}function v(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function m(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function y(){return document.createElement("canvas")}function g(t){return"function"===typeof t?t:function(){return t}}t.exports=function(){var t=[256,256],e=u,n=s,i=c,_=l,x=l,w=f,k=h,E=m,S=[],O=1/0,A=r("word","end"),M=null,C=Math.random,T={},j=y;function D(e,n,r){t[0],t[1];for(var i,o,a,u,s,l=n.x,c=n.y,f=Math.sqrt(t[0]*t[0]+t[1]*t[1]),h=E(t),p=C()<.5?1:-1,v=-p;(i=h(v+=p))&&(o=~~i[0],a=~~i[1],!(Math.min(Math.abs(o),Math.abs(a))>=f));)if(n.x=l+o,n.y=c+a,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1])&&(!r||!d(n,e,t[0]))&&(!r||(s=r,(u=n).x+u.x1>s[0].x&&u.x+u.x0<s[1].x&&u.y+u.y1>s[0].y&&u.y+u.y0<s[1].y))){for(var m,y=n.sprite,g=n.width>>5,b=t[0]>>5,_=n.x-(g<<4),x=127&_,w=32-x,k=n.y1-n.y0,S=(n.y+n.y0)*b+(_>>5),O=0;O<k;O++){m=0;for(var A=0;A<=g;A++)e[S+A]|=m<<w|(A<g?(m=y[O*g+A])>>>x:0);S+=b}return delete n.sprite,!0}return!1}return T.canvas=function(t){return arguments.length?(j=g(t),T):j},T.start=function(){var r=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(o<<5)/e,t.height=a/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(j()),u=function(t){var e=[],n=-1;for(;++n<t;)e[n]=0;return e}((t[0]>>5)*t[1]),s=null,l=S.length,c=-1,f=[],h=S.map(function(t,r){return t.text=e.call(this,t,r),t.font=n.call(this,t,r),t.style=_.call(this,t,r),t.weight=x.call(this,t,r),t.rotate=w.call(this,t,r),t.size=~~i.call(this,t,r),t.padding=k.call(this,t,r),t}).sort(function(t,e){return e.size-t.size});return M&&clearInterval(M),M=setInterval(d,0),d(),T;function d(){for(var e=Date.now();Date.now()-e<O&&++c<l&&M;){var n=h[c];n.x=t[0]*(C()+.5)>>1,n.y=t[1]*(C()+.5)>>1,p(r,n,h,c),n.hasText&&D(u,n,s)&&(f.push(n),A.call("word",T,n),s?v(s,n):s=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=t[0]>>1,n.y-=t[1]>>1)}c>=l&&(T.stop(),A.call("end",T,f,s))}},T.stop=function(){return M&&(clearInterval(M),M=null),T},T.timeInterval=function(t){return arguments.length?(O=null==t?1/0:t,T):O},T.words=function(t){return arguments.length?(S=t,T):S},T.size=function(e){return arguments.length?(t=[+e[0],+e[1]],T):t},T.font=function(t){return arguments.length?(n=g(t),T):n},T.fontStyle=function(t){return arguments.length?(_=g(t),T):_},T.fontWeight=function(t){return arguments.length?(x=g(t),T):x},T.rotate=function(t){return arguments.length?(w=g(t),T):w},T.text=function(t){return arguments.length?(e=g(t),T):e},T.spiral=function(t){return arguments.length?(E=b[t]||t,T):E},T.fontSize=function(t){return arguments.length?(i=g(t),T):i},T.padding=function(t){return arguments.length?(k=g(t),T):k},T.random=function(t){return arguments.length?(C=t,T):C},T.on=function(){var t=A.on.apply(A,arguments);return t===A?T:t},T};var b={archimedean:m,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports={default:n(649),__esModule:!0}},function(t,e,n){n(650),t.exports=n(32).Object.assign},function(t,e,n){var r=n(39);r(r.S+r.F,"Object",{assign:n(652)})},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var r=n(72),i=n(104),o=n(75),a=n(76),u=n(137),s=Object.assign;t.exports=!s||n(52)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=a(t),s=arguments.length,l=1,c=i.f,f=o.f;s>l;)for(var h,p=u(arguments[l++]),d=c?r(p).concat(c(p)):r(p),v=d.length,m=0;v>m;)f.call(p,h=d[m++])&&(n[h]=p[h]);return n}:s},function(t,e,n){var r=n(46),i=n(138),o=n(654);t.exports=function(t){return function(e,n,a){var u,s=r(e),l=i(s.length),c=o(a,l);if(t&&n!=n){for(;l>c;)if((u=s[c++])!=u)return!0}else for(;l>c;c++)if((t||c in s)&&s[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(100),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){n(656);var r=n(32).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(39);r(r.S+r.F*!n(44),"Object",{defineProperty:n(41).f})},function(t,e,n){t.exports={default:n(658),__esModule:!0}},function(t,e,n){n(140),n(663),t.exports=n(107).f("iterator")},function(t,e,n){var r=n(100),i=n(99);t.exports=function(t){return function(e,n){var o,a,u=String(i(e)),s=r(n),l=u.length;return s<0||s>=l?t?"":void 0:(o=u.charCodeAt(s))<55296||o>56319||s+1===l||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):o:t?u.slice(s,s+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(105),i=n(60),o=n(106),a={};n(49)(a,n(37)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(41),i=n(50),o=n(72);t.exports=n(44)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),u=a.length,s=0;u>s;)r.f(t,n=a[s++],e[n]);return t}},function(t,e,n){var r=n(40).document;t.exports=r&&r.documentElement},function(t,e,n){n(664);for(var r=n(40),i=n(49),o=n(61),a=n(37)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<u.length;s++){var l=u[s],c=r[l],f=c&&c.prototype;f&&!f[a]&&i(f,a,l),o[l]=o.Array}},function(t,e,n){"use strict";var r=n(665),i=n(666),o=n(61),a=n(46);t.exports=n(141)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){t.exports={default:n(668),__esModule:!0}},function(t,e,n){n(669),n(674),n(675),n(676),t.exports=n(32).Symbol},function(t,e,n){"use strict";var r=n(40),i=n(45),o=n(44),a=n(39),u=n(142),s=n(670).KEY,l=n(52),c=n(102),f=n(106),h=n(74),p=n(37),d=n(107),v=n(108),m=n(671),y=n(672),g=n(50),b=n(51),_=n(46),x=n(97),w=n(60),k=n(105),E=n(673),S=n(109),O=n(41),A=n(72),M=S.f,C=O.f,T=E.f,j=r.Symbol,D=r.JSON,P=D&&D.stringify,z=p("_hidden"),R=p("toPrimitive"),I={}.propertyIsEnumerable,F=c("symbol-registry"),L=c("symbols"),N=c("op-symbols"),B=Object.prototype,U="function"==typeof j,q=r.QObject,V=!q||!q.prototype||!q.prototype.findChild,W=o&&l(function(){return 7!=k(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(B,e);r&&delete B[e],C(t,e,n),r&&t!==B&&C(B,e,r)}:C,H=function(t){var e=L[t]=k(j.prototype);return e._k=t,e},G=U&&"symbol"==typeof j.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof j},X=function(t,e,n){return t===B&&X(N,e,n),g(t),e=x(e,!0),g(n),i(L,e)?(n.enumerable?(i(t,z)&&t[z][e]&&(t[z][e]=!1),n=k(n,{enumerable:w(0,!1)})):(i(t,z)||C(t,z,w(1,{})),t[z][e]=!0),W(t,e,n)):C(t,e,n)},Z=function(t,e){g(t);for(var n,r=m(e=_(e)),i=0,o=r.length;o>i;)X(t,n=r[i++],e[n]);return t},Y=function(t){var e=I.call(this,t=x(t,!0));return!(this===B&&i(L,t)&&!i(N,t))&&(!(e||!i(this,t)||!i(L,t)||i(this,z)&&this[z][t])||e)},$=function(t,e){if(t=_(t),e=x(e,!0),t!==B||!i(L,e)||i(N,e)){var n=M(t,e);return!n||!i(L,e)||i(t,z)&&t[z][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=T(_(t)),r=[],o=0;n.length>o;)i(L,e=n[o++])||e==z||e==s||r.push(e);return r},J=function(t){for(var e,n=t===B,r=T(n?N:_(t)),o=[],a=0;r.length>a;)!i(L,e=r[a++])||n&&!i(B,e)||o.push(L[e]);return o};U||(u((j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0);return o&&V&&W(B,t,{configurable:!0,set:function e(n){this===B&&e.call(N,n),i(this,z)&&i(this[z],t)&&(this[z][t]=!1),W(this,t,w(1,n))}}),H(t)}).prototype,"toString",function(){return this._k}),S.f=$,O.f=X,n(144).f=E.f=K,n(75).f=Y,n(104).f=J,o&&!n(73)&&u(B,"propertyIsEnumerable",Y,!0),d.f=function(t){return H(p(t))}),a(a.G+a.W+a.F*!U,{Symbol:j});for(var Q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Q.length>tt;)p(Q[tt++]);for(var et=A(p.store),nt=0;et.length>nt;)v(et[nt++]);a(a.S+a.F*!U,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=j(t)},keyFor:function(t){if(!G(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!U,"Object",{create:function(t,e){return void 0===e?k(t):Z(k(t),e)},defineProperty:X,defineProperties:Z,getOwnPropertyDescriptor:$,getOwnPropertyNames:K,getOwnPropertySymbols:J}),D&&a(a.S+a.F*(!U||l(function(){var t=j();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!G(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!G(e))return e}),r[1]=e,P.apply(D,r)}}),j.prototype[R]||n(49)(j.prototype,R,j.prototype.valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){var r=n(74)("meta"),i=n(51),o=n(45),a=n(41).f,u=0,s=Object.isExtensible||function(){return!0},l=!n(52)(function(){return s(Object.preventExtensions({}))}),c=function(t){a(t,r,{value:{i:"O"+ ++u,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!s(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!s(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return l&&f.NEED&&s(t)&&!o(t,r)&&c(t),t}}},function(t,e,n){var r=n(72),i=n(104),o=n(75);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,u=n(t),s=o.f,l=0;u.length>l;)s.call(t,a=u[l++])&&e.push(a);return e}},function(t,e,n){var r=n(98);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(46),i=n(144).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(e){return a.slice()}}(t):i(r(t))}},function(t,e){},function(t,e,n){n(108)("asyncIterator")},function(t,e,n){n(108)("observable")},function(t,e,n){t.exports={default:n(678),__esModule:!0}},function(t,e,n){n(679),t.exports=n(32).Object.setPrototypeOf},function(t,e,n){var r=n(39);r(r.S,"Object",{setPrototypeOf:n(680).set})},function(t,e,n){var r=n(51),i=n(50),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(96)(Function.call,n(109).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(682),__esModule:!0}},function(t,e,n){n(683);var r=n(32).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(39);r(r.S,"Object",{create:n(105)})},function(t,e,n){t.exports={default:n(685),__esModule:!0}},function(t,e,n){n(686),t.exports=n(32).Object.getPrototypeOf},function(t,e,n){var r=n(76),i=n(143);n(145)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){t.exports={default:n(688),__esModule:!0}},function(t,e,n){n(689);var r=n(32).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},function(t,e,n){var r=n(46),i=n(109).f;n(145)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(691)),o=r(n(85)),a=!0,u=!1,s=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"];function l(t){return null===t||void 0===t}var c=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(t,e){l(t.which)&&(t.which=l(e.charCode)?e.keyCode:e.charCode),void 0===t.metaKey&&(t.metaKey=t.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(t,e){var n=void 0,r=void 0,i=void 0,o=e.wheelDelta,a=e.axis,u=e.wheelDeltaY,s=e.wheelDeltaX,l=e.detail;o&&(i=o/120),l&&(i=0-(l%3===0?l/3:l)),void 0!==a&&(a===t.HORIZONTAL_AXIS?(r=0,n=0-i):a===t.VERTICAL_AXIS&&(n=0,r=i)),void 0!==u&&(r=u/120),void 0!==s&&(n=-1*s/120),n||r||(r=i),void 0!==n&&(t.deltaX=n),void 0!==r&&(t.deltaY=r),void 0!==i&&(t.delta=i)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(t,e){var n=void 0,r=void 0,i=void 0,o=t.target,a=e.button;return o&&l(t.pageX)&&!l(e.clientX)&&(r=(n=o.ownerDocument||document).documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===a||(t.which=1&a?1:2&a?3:4&a?2:0),!t.relatedTarget&&t.fromElement&&(t.relatedTarget=t.fromElement===o?t.toElement:t.fromElement),t}}];function f(){return a}function h(){return u}function p(t){var e=t.type,n="function"===typeof t.stopPropagation||"boolean"===typeof t.cancelBubble;i.default.call(this),this.nativeEvent=t;var r=h;"defaultPrevented"in t?r=t.defaultPrevented?f:h:"getPreventDefault"in t?r=t.getPreventDefault()?f:h:"returnValue"in t&&(r=t.returnValue===u?f:h),this.isDefaultPrevented=r;var o=[],a=void 0,l=void 0,p=s.concat();for(c.forEach(function(t){e.match(t.reg)&&(p=p.concat(t.props),t.fix&&o.push(t.fix))}),a=p.length;a;)this[l=p[--a]]=t[l];for(!this.target&&n&&(this.target=t.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),a=o.length;a;)(0,o[--a])(this,t);this.timeStamp=t.timeStamp||Date.now()}var d=i.default.prototype;(0,o.default)(p.prototype,d,{constructor:p,preventDefault:function(){var t=this.nativeEvent;t.preventDefault?t.preventDefault():t.returnValue=u,d.preventDefault.call(this)},stopPropagation:function(){var t=this.nativeEvent;t.stopPropagation?t.stopPropagation():t.cancelBubble=a,d.stopPropagation.call(this)}}),e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(){return!1}function i(){return!0}function o(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(e,"__esModule",{value:!0}),o.prototype={isEventObject:1,constructor:o,isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r,preventDefault:function(){this.isDefaultPrevented=i},stopPropagation:function(){this.isPropagationStopped=i},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()},halt:function(t){t?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},e.default=o,t.exports=e.default},function(t,e,n){t.exports={default:n(693),__esModule:!0}},function(t,e,n){n(140),n(694),t.exports=n(32).Array.from},function(t,e,n){"use strict";var r=n(96),i=n(39),o=n(76),a=n(695),u=n(696),s=n(138),l=n(697),c=n(698);i(i.S+i.F*!n(700)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,f,h=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,m=void 0!==v,y=0,g=c(h);if(m&&(v=r(v,d>2?arguments[2]:void 0,2)),void 0==g||p==Array&&u(g))for(n=new p(e=s(h.length));e>y;y++)l(n,y,m?v(h[y],y):h[y]);else for(f=g.call(h),n=new p;!(i=f.next()).done;y++)l(n,y,m?a(f,v,[i.value,y],!0):i.value);return n.length=y,n}})},function(t,e,n){var r=n(50);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(a){var o=t.return;throw void 0!==o&&r(o.call(t)),a}}},function(t,e,n){var r=n(61),i=n(37)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(41),i=n(60);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(699),i=n(37)("iterator"),o=n(61);t.exports=n(32).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(98),i=n(37)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(37)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],u=o[r]();u.next=function(){return{done:n=!0}},o[r]=function(){return u},t(o)}catch(a){}return n}},function(t,e,n){},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=l(t),r=n[0],a=n[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,a)),s=0,c=a>0?r-4:r,f=0;f<c;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],u[s++]=e>>16&255,u[s++]=e>>8&255,u[s++]=255&e;2===a&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,u[s++]=255&e);1===a&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,u[s++]=e>>8&255,u[s++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,u=n-i;a<u;a+=16383)o.push(c(t,a,a+16383>u?u:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)r[u]=a[u],i[a.charCodeAt(u)]=u;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,o,a=[],u=e;u<n;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,l=s>>1,c=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=u;c>0;o=256*o+t[e+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,u,s,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=c?(u=0,a=c):a+f>=1?(u=(e*s-1)*Math.pow(2,i),a+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&u,p+=d,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new A(r||[]);return o._invoke=function(t,e,n){var r=c;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var s=l(t,e,n);if("normal"===s.type){if(r=n.done?p:f,s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=s;var c="suspendedStart",f="suspendedYield",h="executing",p="completed",d={};function v(){}function m(){}function y(){}var g={};g[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(M([])));_&&_!==n&&r.call(_,o)&&(g=_);var x=y.prototype=v.prototype=Object.create(g);function w(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(t){var e;this._invoke=function(n,i){function o(){return new Promise(function(e,o){!function e(n,i,o,a){var u=l(t[n],t,i);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"===typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(c).then(function(t){s.value=t,o(s)},function(t){return e("throw",t,o,a)})}a(u.arg)}(n,i,e,o)})}return e=e?e.then(o,o):o()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function M(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:C}}function C(){return{value:e,done:!0}}return m.prototype=x.constructor=y,y.constructor=m,y[u]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},w(k.prototype),k.prototype[a]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,r,i){var o=new k(s(e,n,r,i));return t.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},w(x),x[u]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=M,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},,function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.r(e);var i=n(2),o=n(1),a=n.n(o),u=n(153);n.d(e,"withContentRect",function(){return f});var s=["client","offset","scroll","bounds","margin"];function l(t){var e=[];return s.forEach(function(n){t[n]&&e.push(n)}),e}function c(t,e){var n={};if(e.indexOf("client")>-1&&(n.client={top:t.clientTop,left:t.clientLeft,width:t.clientWidth,height:t.clientHeight}),e.indexOf("offset")>-1&&(n.offset={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}),e.indexOf("scroll")>-1&&(n.scroll={top:t.scrollTop,left:t.scrollLeft,width:t.scrollWidth,height:t.scrollHeight}),e.indexOf("bounds")>-1){var r=t.getBoundingClientRect();n.bounds={top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height}}if(e.indexOf("margin")>-1){var i=getComputedStyle(t);n.margin={top:i?parseInt(i.marginTop):0,right:i?parseInt(i.marginRight):0,bottom:i?parseInt(i.marginBottom):0,left:i?parseInt(i.marginLeft):0}}return n}function f(t){return function(e){var n,o;return o=n=function(n){var o,a;function s(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))||this).state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},e._animationFrameID=null,e._resizeObserver=null,e._node=null,e.measure=function(n){var r=c(e._node,t||l(e.props));n&&(r.entry=n[0].contentRect),e._animationFrameID=window.requestAnimationFrame(function(){null!==e._resizeObserver&&(e.setState({contentRect:r}),"function"===typeof e.props.onResize&&e.props.onResize(r))})},e._handleRef=function(t){null!==e._resizeObserver&&null!==e._node&&e._resizeObserver.unobserve(e._node),e._node=t,null!==e._resizeObserver&&null!==e._node&&e._resizeObserver.observe(e._node);var n=e.props.innerRef;n&&("function"===typeof n?n(e._node):n.current=e._node)},e}a=n,(o=s).prototype=Object.create(a.prototype),o.prototype.constructor=o,o.__proto__=a;var f=s.prototype;return f.componentDidMount=function(){this._resizeObserver=new u.a(this.measure),null!==this._node&&(this._resizeObserver.observe(this._node),"function"===typeof this.props.onResize&&this.props.onResize(c(this._node,t||l(this.props))))},f.componentWillUnmount=function(){null!==this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),window.cancelAnimationFrame(this._animationFrameID)},f.render=function(){var t=this.props,n=(t.innerRef,t.onResize,function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["innerRef","onResize"]));return Object(i.createElement)(e,r({},n,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},s}(i.Component),n.propTypes={client:a.a.bool,offset:a.a.bool,scroll:a.a.bool,bounds:a.a.bool,margin:a.a.bool,innerRef:a.a.oneOfType([a.a.object,a.a.func]),onResize:a.a.func},o}}var h=f()(function(t){var e=t.measure,n=t.measureRef,r=t.contentRect;return(0,t.children)({measure:e,measureRef:n,contentRect:r})});h.displayName="Measure",h.propTypes.children=a.a.func;e.default=h}]]);
//# sourceMappingURL=2.2dcf525d.chunk.js.map